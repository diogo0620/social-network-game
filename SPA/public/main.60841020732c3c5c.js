var HJ=Object.defineProperty,GJ=Object.defineProperties,jJ=Object.getOwnPropertyDescriptors,XI=Object.getOwnPropertySymbols,WJ=Object.prototype.hasOwnProperty,$J=Object.prototype.propertyIsEnumerable,YI=(Ii,gn,mn)=>gn in Ii?HJ(Ii,gn,{enumerable:!0,configurable:!0,writable:!0,value:mn}):Ii[gn]=mn,Ge=(Ii,gn)=>{for(var mn in gn||(gn={}))WJ.call(gn,mn)&&YI(Ii,mn,gn[mn]);if(XI)for(var mn of XI(gn))$J.call(gn,mn)&&YI(Ii,mn,gn[mn]);return Ii},ti=(Ii,gn)=>GJ(Ii,jJ(gn));(self.webpackChunkAngularUI=self.webpackChunkAngularUI||[]).push([[179],{659:function(Ii){Ii.exports=function(){"use strict";const gn="SweetAlert2:",Rt=b=>b.charAt(0).toUpperCase()+b.slice(1),ni=b=>Array.prototype.slice.call(b),ii=b=>{console.warn("".concat(gn," ").concat("object"==typeof b?b.join(" "):b))},so=b=>{console.error("".concat(gn," ").concat(b))},Ri=[],ff=(b,x)=>{(b=>{Ri.includes(b)||(Ri.push(b),ii(b))})('"'.concat(b,'" is deprecated and will be removed in the next major release. Please use "').concat(x,'" instead.'))},Tl=b=>"function"==typeof b?b():b,kr=b=>b&&"function"==typeof b.toPromise,ao=b=>kr(b)?b.toPromise():Promise.resolve(b),Pl=b=>b&&Promise.resolve(b)===b,Fr={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},a_=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],l_={},c_=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Al=b=>Object.prototype.hasOwnProperty.call(Fr,b),lo=b=>-1!==a_.indexOf(b),Ps=b=>l_[b],u_=b=>{Al(b)||ii('Unknown parameter "'.concat(b,'"'))},Fu=b=>{c_.includes(b)&&ii('The parameter "'.concat(b,'" is incompatible with toasts'))},Nu=b=>{Ps(b)&&ff(b,Ps(b))},Dl=b=>{const x={};for(const E in b)x[b[E]]="swal2-"+b[E];return x},te=Dl(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"]),Xo=Dl(["success","warning","info","question","error"]),an=()=>document.body.querySelector(".".concat(te.container)),Ol=b=>{const x=an();return x?x.querySelector(b):null},Li=b=>Ol(".".concat(b)),je=()=>Li(te.popup),As=()=>Li(te.icon),gf=()=>Li(te.title),Il=()=>Li(te["html-container"]),mf=()=>Li(te.image),vr=()=>Li(te["progress-steps"]),Ea=()=>Li(te["validation-message"]),Yi=()=>Ol(".".concat(te.actions," .").concat(te.confirm)),Qt=()=>Ol(".".concat(te.actions," .").concat(te.deny)),Ct=()=>Ol(".".concat(te.loader)),Nr=()=>Ol(".".concat(te.actions," .").concat(te.cancel)),Bu=()=>Li(te.actions),Uu=()=>Li(te.footer),Vu=()=>Li(te["timer-progress-bar"]),_f=()=>Li(te.close),vf=()=>{const b=ni(je().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((E,F)=>{const oe=parseInt(E.getAttribute("tabindex")),Be=parseInt(F.getAttribute("tabindex"));return oe>Be?1:oe<Be?-1:0}),x=ni(je().querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n')).filter(E=>"-1"!==E.getAttribute("tabindex"));return(b=>{const x=[];for(let E=0;E<b.length;E++)-1===x.indexOf(b[E])&&x.push(b[E]);return x})(b.concat(x)).filter(E=>ki(E))},Hu=()=>!co(document.body,te["toast-shown"])&&!co(document.body,te["no-backdrop"]),Gu=()=>je()&&co(je(),te.toast),Sa={previousBodyPadding:null},Wn=(b,x)=>{if(b.textContent="",x){const F=(new DOMParser).parseFromString(x,"text/html");ni(F.querySelector("head").childNodes).forEach(oe=>{b.appendChild(oe)}),ni(F.querySelector("body").childNodes).forEach(oe=>{b.appendChild(oe)})}},co=(b,x)=>{if(!x)return!1;const E=x.split(/\s+/);for(let F=0;F<E.length;F++)if(!b.classList.contains(E[F]))return!1;return!0},yr=(b,x,E)=>{if(((b,x)=>{ni(b.classList).forEach(E=>{!Object.values(te).includes(E)&&!Object.values(Xo).includes(E)&&!Object.values(x.showClass).includes(E)&&b.classList.remove(E)})})(b,x),x.customClass&&x.customClass[E]){if("string"!=typeof x.customClass[E]&&!x.customClass[E].forEach)return ii("Invalid type of customClass.".concat(E,'! Expected string or iterable object, got "').concat(typeof x.customClass[E],'"'));Ot(b,x.customClass[E])}},bf=(b,x)=>{if(!x)return null;switch(x){case"select":case"textarea":case"file":return b.querySelector(".".concat(te.popup," > .").concat(te[x]));case"checkbox":return b.querySelector(".".concat(te.popup," > .").concat(te.checkbox," input"));case"radio":return b.querySelector(".".concat(te.popup," > .").concat(te.radio," input:checked"))||b.querySelector(".".concat(te.popup," > .").concat(te.radio," input:first-child"));case"range":return b.querySelector(".".concat(te.popup," > .").concat(te.range," input"));default:return b.querySelector(".".concat(te.popup," > .").concat(te.input))}},uo=b=>{if(b.focus(),"file"!==b.type){const x=b.value;b.value="",b.value=x}},xf=(b,x,E)=>{!b||!x||("string"==typeof x&&(x=x.split(/\s+/).filter(Boolean)),x.forEach(F=>{Array.isArray(b)?b.forEach(oe=>{E?oe.classList.add(F):oe.classList.remove(F)}):E?b.classList.add(F):b.classList.remove(F)}))},Ot=(b,x)=>{xf(b,x,!0)},br=(b,x)=>{xf(b,x,!1)},Yo=(b,x)=>{const E=ni(b.childNodes);for(let F=0;F<E.length;F++)if(co(E[F],x))return E[F]},Ta=(b,x,E)=>{E==="".concat(parseInt(E))&&(E=parseInt(E)),E||0===parseInt(E)?b.style[x]="number"==typeof E?"".concat(E,"px"):E:b.style.removeProperty(x)},ri=function(b){b.style.display=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex"},hi=b=>{b.style.display="none"},d_=(b,x,E,F)=>{const oe=b.querySelector(x);oe&&(oe.style[E]=F)},ju=(b,x,E)=>{x?ri(b,E):hi(b)},ki=b=>!(!b||!(b.offsetWidth||b.offsetHeight||b.getClientRects().length)),Wu=b=>b.scrollHeight>b.clientHeight,$u=b=>{const x=window.getComputedStyle(b),E=parseFloat(x.getPropertyValue("animation-duration")||"0"),F=parseFloat(x.getPropertyValue("transition-duration")||"0");return E>0||F>0},Rl=function(b){let x=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const E=Vu();ki(E)&&(x&&(E.style.transition="none",E.style.width="100%"),setTimeout(()=>{E.style.transition="width ".concat(b/1e3,"s linear"),E.style.width="0%"},10))},qu=()=>"undefined"==typeof window||"undefined"==typeof document,et={},xr=b=>new Promise(x=>{if(!b)return x();const E=window.scrollX,F=window.scrollY;et.restoreFocusTimeout=setTimeout(()=>{et.previousActiveElement&&et.previousActiveElement.focus?(et.previousActiveElement.focus(),et.previousActiveElement=null):document.body&&document.body.focus(),x()},100),window.scrollTo(E,F)}),f_='\n <div aria-labelledby="'.concat(te.title,'" aria-describedby="').concat(te["html-container"],'" class="').concat(te.popup,'" tabindex="-1">\n   <button type="button" class="').concat(te.close,'"></button>\n   <ul class="').concat(te["progress-steps"],'"></ul>\n   <div class="').concat(te.icon,'"></div>\n   <img class="').concat(te.image,'" />\n   <h2 class="').concat(te.title,'" id="').concat(te.title,'"></h2>\n   <div class="').concat(te["html-container"],'" id="').concat(te["html-container"],'"></div>\n   <input class="').concat(te.input,'" />\n   <input type="file" class="').concat(te.file,'" />\n   <div class="').concat(te.range,'">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="').concat(te.select,'"></select>\n   <div class="').concat(te.radio,'"></div>\n   <label for="').concat(te.checkbox,'" class="').concat(te.checkbox,'">\n     <input type="checkbox" />\n     <span class="').concat(te.label,'"></span>\n   </label>\n   <textarea class="').concat(te.textarea,'"></textarea>\n   <div class="').concat(te["validation-message"],'" id="').concat(te["validation-message"],'"></div>\n   <div class="').concat(te.actions,'">\n     <div class="').concat(te.loader,'"></div>\n     <button type="button" class="').concat(te.confirm,'"></button>\n     <button type="button" class="').concat(te.deny,'"></button>\n     <button type="button" class="').concat(te.cancel,'"></button>\n   </div>\n   <div class="').concat(te.footer,'"></div>\n   <div class="').concat(te["timer-progress-bar-container"],'">\n     <div class="').concat(te["timer-progress-bar"],'"></div>\n   </div>\n </div>\n').replace(/(^|\n)\s*/g,""),Zo=()=>{et.currentInstance.resetValidationMessage()},zr=b=>{const x=(()=>{const b=an();return!!b&&(b.remove(),br([document.documentElement,document.body],[te["no-backdrop"],te["toast-shown"],te["has-column"]]),!0)})();if(qu())return void so("SweetAlert2 requires document to initialize");const E=document.createElement("div");E.className=te.container,x&&Ot(E,te["no-transition"]),Wn(E,f_);const F=(b=>"string"==typeof b?document.querySelector(b):b)(b.target);F.appendChild(E),(b=>{const x=je();x.setAttribute("role",b.toast?"alert":"dialog"),x.setAttribute("aria-live",b.toast?"polite":"assertive"),b.toast||x.setAttribute("aria-modal","true")})(b),(b=>{"rtl"===window.getComputedStyle(b).direction&&Ot(an(),te.rtl)})(F),(()=>{const b=je(),x=Yo(b,te.input),E=Yo(b,te.file),F=b.querySelector(".".concat(te.range," input")),oe=b.querySelector(".".concat(te.range," output")),Be=Yo(b,te.select),Fn=b.querySelector(".".concat(te.checkbox," input")),Ui=Yo(b,te.textarea);x.oninput=Zo,E.onchange=Zo,Be.onchange=Zo,Fn.onchange=Zo,Ui.oninput=Zo,F.oninput=()=>{Zo(),oe.value=F.value},F.onchange=()=>{Zo(),F.nextSibling.value=F.value}})()},Xu=(b,x)=>{b instanceof HTMLElement?x.appendChild(b):"object"==typeof b?Ln(b,x):b&&Wn(x,b)},Ln=(b,x)=>{b.jquery?Pa(x,b):Wn(x,b.toString())},Pa=(b,x)=>{if(b.textContent="",0 in x)for(let E=0;E in x;E++)b.appendChild(x[E].cloneNode(!0));else b.appendChild(x.cloneNode(!0))},Fi=(()=>{if(qu())return!1;const b=document.createElement("div"),x={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(const E in x)if(Object.prototype.hasOwnProperty.call(x,E)&&void 0!==b.style[E])return x[E];return!1})(),v_=(b,x)=>{const E=Bu(),F=Ct();x.showConfirmButton||x.showDenyButton||x.showCancelButton?ri(E):hi(E),yr(E,x,"actions"),function(b,x,E){const F=Yi(),oe=Qt(),Be=Nr();Ll(F,"confirm",E),Ll(oe,"deny",E),Ll(Be,"cancel",E),function(b,x,E,F){if(!F.buttonsStyling)return br([b,x,E],te.styled);Ot([b,x,E],te.styled),F.confirmButtonColor&&(b.style.backgroundColor=F.confirmButtonColor,Ot(b,te["default-outline"])),F.denyButtonColor&&(x.style.backgroundColor=F.denyButtonColor,Ot(x,te["default-outline"])),F.cancelButtonColor&&(E.style.backgroundColor=F.cancelButtonColor,Ot(E,te["default-outline"]))}(F,oe,Be,E),E.reverseButtons&&(E.toast?(b.insertBefore(Be,F),b.insertBefore(oe,F)):(b.insertBefore(Be,x),b.insertBefore(oe,x),b.insertBefore(F,x)))}(E,F,x),Wn(F,x.loaderHtml),yr(F,x,"loader")};function Ll(b,x,E){ju(b,E["show".concat(Rt(x),"Button")],"inline-block"),Wn(b,E["".concat(x,"ButtonText")]),b.setAttribute("aria-label",E["".concat(x,"ButtonAriaLabel")]),b.className=te[x],yr(b,E,"".concat(x,"Button")),Ot(b,E["".concat(x,"ButtonClass")])}const Tf=(b,x)=>{const E=an();!E||(function(b,x){"string"==typeof x?b.style.background=x:x||Ot([document.documentElement,document.body],te["no-backdrop"])}(E,x.backdrop),function(b,x){x in te?Ot(b,te[x]):(ii('The "position" parameter is not valid, defaulting to "center"'),Ot(b,te.center))}(E,x.position),function(b,x){if(x&&"string"==typeof x){const E="grow-".concat(x);E in te&&Ot(b,te[E])}}(E,x.grow),yr(E,x,"container"))};var ft={awaitingPromise:new WeakMap,promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const x_=["input","file","range","select","radio","checkbox","textarea"],C_=b=>{if(!xi[b.input])return so('Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "'.concat(b.input,'"'));const x=Oa(b.input),E=xi[b.input](x,b);ri(E),setTimeout(()=>{uo(E)})},M_=(b,x)=>{const E=bf(je(),b);if(E){(b=>{for(let x=0;x<b.attributes.length;x++){const E=b.attributes[x].name;["type","value","style"].includes(E)||b.removeAttribute(E)}})(E);for(const F in x)E.setAttribute(F,x[F])}},E_=b=>{const x=Oa(b.input);b.customClass&&Ot(x,b.customClass.input)},_n=(b,x)=>{(!b.placeholder||x.inputPlaceholder)&&(b.placeholder=x.inputPlaceholder)},Da=(b,x,E)=>{if(E.inputLabel){b.id=te.input;const F=document.createElement("label"),oe=te["input-label"];F.setAttribute("for",b.id),F.className=oe,Ot(F,E.customClass.inputLabel),F.innerText=E.inputLabel,x.insertAdjacentElement("beforebegin",F)}},Oa=b=>{const x=te[b]?te[b]:te.input;return Yo(je(),x)},xi={};xi.text=xi.email=xi.password=xi.number=xi.tel=xi.url=(b,x)=>("string"==typeof x.inputValue||"number"==typeof x.inputValue?b.value=x.inputValue:Pl(x.inputValue)||ii('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(typeof x.inputValue,'"')),Da(b,b,x),_n(b,x),b.type=x.input,b),xi.file=(b,x)=>(Da(b,b,x),_n(b,x),b),xi.range=(b,x)=>{const E=b.querySelector("input"),F=b.querySelector("output");return E.value=x.inputValue,E.type=x.input,F.value=x.inputValue,Da(E,b,x),b},xi.select=(b,x)=>{if(b.textContent="",x.inputPlaceholder){const E=document.createElement("option");Wn(E,x.inputPlaceholder),E.value="",E.disabled=!0,E.selected=!0,b.appendChild(E)}return Da(b,b,x),b},xi.radio=b=>(b.textContent="",b),xi.checkbox=(b,x)=>{const E=bf(je(),"checkbox");E.value="1",E.id=te.checkbox,E.checked=Boolean(x.inputValue);const F=b.querySelector("span");return Wn(F,x.inputPlaceholder),b},xi.textarea=(b,x)=>{b.value=x.inputValue,_n(b,x),Da(b,b,x);return setTimeout(()=>{if("MutationObserver"in window){const F=parseInt(window.getComputedStyle(je()).width);new MutationObserver(()=>{const Be=b.offsetWidth+(F=>parseInt(window.getComputedStyle(F).marginLeft)+parseInt(window.getComputedStyle(F).marginRight))(b);je().style.width=Be>F?"".concat(Be,"px"):null}).observe(b,{attributes:!0,attributeFilter:["style"]})}}),b};const Zu=(b,x)=>{const E=Il();yr(E,x,"htmlContainer"),x.html?(Xu(x.html,E),ri(E,"block")):x.text?(E.textContent=x.text,ri(E,"block")):hi(E),((b,x)=>{const E=je(),F=ft.innerParams.get(b),oe=!F||x.input!==F.input;x_.forEach(Be=>{const Fn=te[Be],Ui=Yo(E,Fn);M_(Be,x.inputAttributes),Ui.className=Fn,oe&&hi(Ui)}),x.input&&(oe&&C_(x),E_(x))})(b,x)},kl=(b,x)=>{for(const E in Xo)x.icon!==E&&br(b,Xo[E]);Ot(b,Xo[x.icon]),ut(b,x),S_(),yr(b,x,"icon")},S_=()=>{const b=je(),x=window.getComputedStyle(b).getPropertyValue("background-color"),E=b.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let F=0;F<E.length;F++)E[F].style.backgroundColor=x},Wt=(b,x)=>{b.textContent="",Wn(b,x.iconHtml?Qu(x.iconHtml):"success"===x.icon?'\n      <div class="swal2-success-circular-line-left"></div>\n      <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n      <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n      <div class="swal2-success-circular-line-right"></div>\n    ':"error"===x.icon?'\n      <span class="swal2-x-mark">\n        <span class="swal2-x-mark-line-left"></span>\n        <span class="swal2-x-mark-line-right"></span>\n      </span>\n    ':Qu({question:"?",warning:"!",info:"i"}[x.icon]))},ut=(b,x)=>{if(x.iconColor){b.style.color=x.iconColor,b.style.borderColor=x.iconColor;for(const E of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])d_(b,E,"backgroundColor",x.iconColor);d_(b,".swal2-success-ring","borderColor",x.iconColor)}},Qu=b=>'<div class="'.concat(te["icon-content"],'">').concat(b,"</div>"),Ku=(b,x)=>{const E=vr();if(!x.progressSteps||0===x.progressSteps.length)return hi(E);ri(E),E.textContent="",x.currentProgressStep>=x.progressSteps.length&&ii("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),x.progressSteps.forEach((F,oe)=>{const Be=(b=>{const x=document.createElement("li");return Ot(x,te["progress-step"]),Wn(x,b),x})(F);if(E.appendChild(Be),oe===x.currentProgressStep&&Ot(Be,te["active-progress-step"]),oe!==x.progressSteps.length-1){const Fn=(b=>{const x=document.createElement("li");return Ot(x,te["progress-step-line"]),b.progressStepsDistance&&(x.style.width=b.progressStepsDistance),x})(x);E.appendChild(Fn)}})},T_=(b,x)=>{b.className="".concat(te.popup," ").concat(ki(b)?x.showClass.popup:""),x.toast?(Ot([document.documentElement,document.body],te["toast-shown"]),Ot(b,te.toast)):Ot(b,te.modal),yr(b,x,"popup"),"string"==typeof x.customClass&&Ot(b,x.customClass),x.icon&&Ot(b,te["icon-".concat(x.icon)])},P_=(b,x)=>{((b,x)=>{const E=an(),F=je();x.toast?(Ta(E,"width",x.width),F.style.width="100%",F.insertBefore(Ct(),As())):Ta(F,"width",x.width),Ta(F,"padding",x.padding),x.color&&(F.style.color=x.color),x.background&&(F.style.background=x.background),hi(Ea()),T_(F,x)})(0,x),Tf(0,x),Ku(0,x),((b,x)=>{const E=ft.innerParams.get(b),F=As();E&&x.icon===E.icon?(Wt(F,x),kl(F,x)):x.icon||x.iconHtml?x.icon&&-1===Object.keys(Xo).indexOf(x.icon)?(so('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(x.icon,'"')),hi(F)):(ri(F),Wt(F,x),kl(F,x),Ot(F,x.showClass.icon)):hi(F)})(b,x),((b,x)=>{const E=mf();if(!x.imageUrl)return hi(E);ri(E,""),E.setAttribute("src",x.imageUrl),E.setAttribute("alt",x.imageAlt),Ta(E,"width",x.imageWidth),Ta(E,"height",x.imageHeight),E.className=te.image,yr(E,x,"image")})(0,x),((b,x)=>{const E=gf();ju(E,x.title||x.titleText,"block"),x.title&&Xu(x.title,E),x.titleText&&(E.innerText=x.titleText),yr(E,x,"title")})(0,x),((b,x)=>{const E=_f();Wn(E,x.closeButtonHtml),yr(E,x,"closeButton"),ju(E,x.showCloseButton),E.setAttribute("aria-label",x.closeButtonAriaLabel)})(0,x),Zu(b,x),v_(0,x),((b,x)=>{const E=Uu();ju(E,x.footer),x.footer&&Xu(x.footer,E),yr(E,x,"footer")})(0,x),"function"==typeof x.didRender&&x.didRender(je())},Ia=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),wi=()=>{ni(document.body.children).forEach(x=>{x.hasAttribute("data-previous-aria-hidden")?(x.setAttribute("aria-hidden",x.getAttribute("data-previous-aria-hidden")),x.removeAttribute("data-previous-aria-hidden")):x.removeAttribute("aria-hidden")})},A_=["swal-title","swal-html","swal-footer"],Pw=b=>{const x={};return ni(b.querySelectorAll("swal-param")).forEach(E=>{Ds(E,["name","value"]);const F=E.getAttribute("name"),oe=E.getAttribute("value");"boolean"==typeof Fr[F]&&"false"===oe&&(x[F]=!1),"object"==typeof Fr[F]&&(x[F]=JSON.parse(oe))}),x},Br=b=>{const x={};return ni(b.querySelectorAll("swal-button")).forEach(E=>{Ds(E,["type","color","aria-label"]);const F=E.getAttribute("type");x["".concat(F,"ButtonText")]=E.innerHTML,x["show".concat(Rt(F),"Button")]=!0,E.hasAttribute("color")&&(x["".concat(F,"ButtonColor")]=E.getAttribute("color")),E.hasAttribute("aria-label")&&(x["".concat(F,"ButtonAriaLabel")]=E.getAttribute("aria-label"))}),x},Aw=b=>{const x={},E=b.querySelector("swal-image");return E&&(Ds(E,["src","width","height","alt"]),E.hasAttribute("src")&&(x.imageUrl=E.getAttribute("src")),E.hasAttribute("width")&&(x.imageWidth=E.getAttribute("width")),E.hasAttribute("height")&&(x.imageHeight=E.getAttribute("height")),E.hasAttribute("alt")&&(x.imageAlt=E.getAttribute("alt"))),x},Dw=b=>{const x={},E=b.querySelector("swal-icon");return E&&(Ds(E,["type","color"]),E.hasAttribute("type")&&(x.icon=E.getAttribute("type")),E.hasAttribute("color")&&(x.iconColor=E.getAttribute("color")),x.iconHtml=E.innerHTML),x},Ow=b=>{const x={},E=b.querySelector("swal-input");E&&(Ds(E,["type","label","placeholder","value"]),x.input=E.getAttribute("type")||"text",E.hasAttribute("label")&&(x.inputLabel=E.getAttribute("label")),E.hasAttribute("placeholder")&&(x.inputPlaceholder=E.getAttribute("placeholder")),E.hasAttribute("value")&&(x.inputValue=E.getAttribute("value")));const F=b.querySelectorAll("swal-input-option");return F.length&&(x.inputOptions={},ni(F).forEach(oe=>{Ds(oe,["value"]);const Be=oe.getAttribute("value");x.inputOptions[Be]=oe.innerHTML})),x},Iw=(b,x)=>{const E={};for(const F in x){const oe=x[F],Be=b.querySelector(oe);Be&&(Ds(Be,[]),E[oe.replace(/^swal-/,"")]=Be.innerHTML.trim())}return E},O_=b=>{const x=A_.concat(["swal-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);ni(b.children).forEach(E=>{const F=E.tagName.toLowerCase();-1===x.indexOf(F)&&ii("Unrecognized element <".concat(F,">"))})},Ds=(b,x)=>{ni(b.attributes).forEach(E=>{-1===x.indexOf(E.name)&&ii(['Unrecognized attribute "'.concat(E.name,'" on <').concat(b.tagName.toLowerCase(),">."),"".concat(x.length?"Allowed attributes are: ".concat(x.join(", ")):"To set the value, use HTML within the element.")])})};var Af={email:(b,x)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(b)?Promise.resolve():Promise.resolve(x||"Invalid email address"),url:(b,x)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(b)?Promise.resolve():Promise.resolve(x||"Invalid URL")};function Yt(b){(function(b){b.inputValidator||Object.keys(Af).forEach(x=>{b.input===x&&(b.inputValidator=Af[x])})})(b),b.showLoaderOnConfirm&&!b.preConfirm&&ii("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function(b){(!b.target||"string"==typeof b.target&&!document.querySelector(b.target)||"string"!=typeof b.target&&!b.target.appendChild)&&(ii('Target parameter is not valid, defaulting to "body"'),b.target="body")}(b),"string"==typeof b.title&&(b.title=b.title.split("\n").join("<br />")),zr(b)}class Lw{constructor(x,E){this.callback=x,this.remaining=E,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(x){const E=this.running;return E&&this.stop(),this.remaining+=x,E&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const kw=()=>{null===Sa.previousBodyPadding&&document.body.scrollHeight>window.innerHeight&&(Sa.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(Sa.previousBodyPadding+(()=>{const b=document.createElement("div");b.className=te["scrollbar-measure"],document.body.appendChild(b);const x=b.getBoundingClientRect().width-b.clientWidth;return document.body.removeChild(b),x})(),"px"))},Nw=()=>{const b=navigator.userAgent,x=!!b.match(/iPad/i)||!!b.match(/iPhone/i),E=!!b.match(/WebKit/i);if(x&&E&&!b.match(/CriOS/i)){const oe=44;je().scrollHeight>window.innerHeight-oe&&(an().style.paddingBottom="".concat(oe,"px"))}},pi=()=>{const b=an();let x;b.ontouchstart=E=>{x=ed(E)},b.ontouchmove=E=>{x&&(E.preventDefault(),E.stopPropagation())}},ed=b=>{const x=b.target,E=an();return!(Df(b)||I_(b)||x!==E&&(Wu(E)||"INPUT"===x.tagName||"TEXTAREA"===x.tagName||Wu(Il())&&Il().contains(x)))},Df=b=>b.touches&&b.touches.length&&"stylus"===b.touches[0].touchType,I_=b=>b.touches&&b.touches.length>1,Nl=b=>{const x=an(),E=je();"function"==typeof b.willOpen&&b.willOpen(E);const oe=window.getComputedStyle(document.body).overflowY;ot(x,E,b),setTimeout(()=>{Of(x,E)},10),Hu()&&(L_(x,b.scrollbarPadding,oe),ni(document.body.children).forEach(x=>{x===an()||x.contains(an())||(x.hasAttribute("aria-hidden")&&x.setAttribute("data-previous-aria-hidden",x.getAttribute("aria-hidden")),x.setAttribute("aria-hidden","true"))})),!Gu()&&!et.previousActiveElement&&(et.previousActiveElement=document.activeElement),"function"==typeof b.didOpen&&setTimeout(()=>b.didOpen(E)),br(x,te["no-transition"])},zl=b=>{const x=je();if(b.target!==x)return;const E=an();x.removeEventListener(Fi,zl),E.style.overflowY="auto"},Of=(b,x)=>{Fi&&$u(x)?(b.style.overflowY="hidden",x.addEventListener(Fi,zl)):b.style.overflowY="auto"},L_=(b,x,E)=>{(()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!co(document.body,te.iosfix)){const x=document.body.scrollTop;document.body.style.top="".concat(-1*x,"px"),Ot(document.body,te.iosfix),pi(),Nw()}})(),x&&"hidden"!==E&&kw(),setTimeout(()=>{b.scrollTop=0})},ot=(b,x,E)=>{Ot(b,E.showClass.backdrop),x.style.setProperty("opacity","0","important"),ri(x,"grid"),setTimeout(()=>{Ot(x,E.showClass.popup),x.style.removeProperty("opacity")},10),Ot([document.documentElement,document.body],te.shown),E.heightAuto&&E.backdrop&&!E.toast&&Ot([document.documentElement,document.body],te["height-auto"])},ho=b=>{let x=je();x||new ld,x=je();const E=Ct();Gu()?hi(As()):k_(x,b),ri(E),x.setAttribute("data-loading",!0),x.setAttribute("aria-busy",!0),x.focus()},k_=(b,x)=>{const E=Bu(),F=Ct();!x&&ki(Yi())&&(x=Yi()),ri(E),x&&(hi(x),F.setAttribute("data-button-to-replace",x.className)),F.parentNode.insertBefore(F,x),Ot([b,E],te.loading)},zw=b=>b.checked?1:0,po=b=>b.checked?b.value:null,Zi=b=>b.files.length?null!==b.getAttribute("multiple")?b.files:b.files[0]:null,Bw=(b,x)=>{const E=je(),F=oe=>wr[x.input](E,nd(oe),x);kr(x.inputOptions)||Pl(x.inputOptions)?(ho(Yi()),ao(x.inputOptions).then(oe=>{b.hideLoading(),F(oe)})):"object"==typeof x.inputOptions?F(x.inputOptions):so("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(typeof x.inputOptions))},Uw=(b,x)=>{const E=b.getInput();hi(E),ao(x.inputValue).then(F=>{E.value="number"===x.input?parseFloat(F)||0:"".concat(F),ri(E),E.focus(),b.hideLoading()}).catch(F=>{so("Error in inputValue promise: ".concat(F)),E.value="",ri(E),E.focus(),b.hideLoading()})},wr={select:(b,x,E)=>{const F=Yo(b,te.select),oe=(Be,Fn,Ui)=>{const ai=document.createElement("option");ai.value=Ui,Wn(ai,Fn),ai.selected=Rf(Ui,E.inputValue),Be.appendChild(ai)};x.forEach(Be=>{const Fn=Be[0],Ui=Be[1];if(Array.isArray(Ui)){const ai=document.createElement("optgroup");ai.label=Fn,ai.disabled=!1,F.appendChild(ai),Ui.forEach(es=>oe(ai,es[1],es[0]))}else oe(F,Ui,Fn)}),F.focus()},radio:(b,x,E)=>{const F=Yo(b,te.radio);x.forEach(Be=>{const Fn=Be[0],Ui=Be[1],ai=document.createElement("input"),es=document.createElement("label");ai.type="radio",ai.name=te.radio,ai.value=Fn,Rf(Fn,E.inputValue)&&(ai.checked=!0);const cd=document.createElement("span");Wn(cd,Ui),cd.className=te.label,es.appendChild(ai),es.appendChild(cd),F.appendChild(es)});const oe=F.querySelectorAll("input");oe.length&&oe[0].focus()}},nd=b=>{const x=[];return"undefined"!=typeof Map&&b instanceof Map?b.forEach((E,F)=>{let oe=E;"object"==typeof oe&&(oe=nd(oe)),x.push([F,oe])}):Object.keys(b).forEach(E=>{let F=b[E];"object"==typeof F&&(F=nd(F)),x.push([E,F])}),x},Rf=(b,x)=>x&&x.toString()===b.toString(),N_=(b,x)=>{const E=ft.innerParams.get(b),F=((b,x)=>{const E=b.getInput();if(!E)return null;switch(x.input){case"checkbox":return zw(E);case"radio":return po(E);case"file":return Zi(E);default:return x.inputAutoTrim?E.value.trim():E.value}})(b,E);E.inputValidator?Hw(b,F,x):b.getInput().checkValidity()?"deny"===x?go(b,F):La(b,F):(b.enableButtons(),b.showValidationMessage(E.validationMessage))},Hw=(b,x,E)=>{const F=ft.innerParams.get(b);b.disableInput(),Promise.resolve().then(()=>ao(F.inputValidator(x,F.validationMessage))).then(Be=>{b.enableButtons(),b.enableInput(),Be?b.showValidationMessage(Be):"deny"===E?go(b,x):La(b,x)})},go=(b,x)=>{const E=ft.innerParams.get(b||void 0);E.showLoaderOnDeny&&ho(Qt()),E.preDeny?(ft.awaitingPromise.set(b||void 0,!0),Promise.resolve().then(()=>ao(E.preDeny(x,E.validationMessage))).then(oe=>{!1===oe?b.hideLoading():b.closePopup({isDenied:!0,value:void 0===oe?x:oe})}).catch(oe=>Ra(b||void 0,oe))):b.closePopup({isDenied:!0,value:x})},Gt=(b,x)=>{b.closePopup({isConfirmed:!0,value:x})},Ra=(b,x)=>{b.rejectPromise(x)},La=(b,x)=>{const E=ft.innerParams.get(b||void 0);E.showLoaderOnConfirm&&ho(),E.preConfirm?(b.resetValidationMessage(),ft.awaitingPromise.set(b||void 0,!0),Promise.resolve().then(()=>ao(E.preConfirm(x,E.validationMessage))).then(oe=>{ki(Ea())||!1===oe?b.hideLoading():Gt(b,void 0===oe?x:oe)}).catch(oe=>Ra(b||void 0,oe))):Gt(b,x)},Lf=(b,x,E)=>{x.popup.onclick=()=>{const F=ft.innerParams.get(b);F&&(Ur(F)||F.timer||F.input)||E(Ia.close)}},Ur=b=>b.showConfirmButton||b.showDenyButton||b.showCancelButton||b.showCloseButton;let mo=!1;const z_=b=>{b.popup.onmousedown=()=>{b.container.onmouseup=function(x){b.container.onmouseup=void 0,x.target===b.container&&(mo=!0)}}},Pt=b=>{b.container.onmousedown=()=>{b.popup.onmouseup=function(x){b.popup.onmouseup=void 0,(x.target===b.popup||b.popup.contains(x.target))&&(mo=!0)}}},B_=(b,x,E)=>{x.container.onclick=F=>{const oe=ft.innerParams.get(b);mo?mo=!1:F.target===x.container&&Tl(oe.allowOutsideClick)&&E(Ia.backdrop)}},rd=()=>Yi()&&Yi().click(),Bl=(b,x,E)=>{const F=vf();if(F.length)return(x+=E)===F.length?x=0:-1===x&&(x=F.length-1),F[x].focus();je().focus()},Xe=["ArrowRight","ArrowDown"],Mi=["ArrowLeft","ArrowUp"],oi=(b,x,E)=>{const F=ft.innerParams.get(b);!F||(F.stopKeydownPropagation&&x.stopPropagation(),"Enter"===x.key?_o(b,x,F):"Tab"===x.key?Jo(x,F):[...Xe,...Mi].includes(x.key)?Ji(x.key):"Escape"===x.key&&Qi(x,F,E))},_o=(b,x,E)=>{if(!x.isComposing&&x.target&&b.getInput()&&x.target.outerHTML===b.getInput().outerHTML){if(["textarea","file"].includes(E.input))return;rd(),x.preventDefault()}},Jo=(b,x)=>{const E=b.target,F=vf();let oe=-1;for(let Be=0;Be<F.length;Be++)if(E===F[Be]){oe=Be;break}Bl(0,oe,b.shiftKey?-1:1),b.stopPropagation(),b.preventDefault()},Ji=b=>{if(![Yi(),Qt(),Nr()].includes(document.activeElement))return;const oe=Xe.includes(b)?"nextElementSibling":"previousElementSibling",Be=document.activeElement[oe];Be instanceof HTMLElement&&Be.focus()},Qi=(b,x,E)=>{Tl(x.allowEscapeKey)&&(b.preventDefault(),E(Ia.esc))},pt=b=>b instanceof Element||(b=>"object"==typeof b&&b.jquery)(b);const vo=()=>{if(et.timeout)return(()=>{const b=Vu(),x=parseInt(window.getComputedStyle(b).width);b.style.removeProperty("transition"),b.style.width="100%";const F=x/parseInt(window.getComputedStyle(b).width)*100;b.style.removeProperty("transition"),b.style.width="".concat(F,"%")})(),et.timeout.stop()},ln=()=>{if(et.timeout){const b=et.timeout.start();return Rl(b),b}};let Fa=!1;const yo={};const Is=b=>{for(let x=b.target;x&&x!==document;x=x.parentNode)for(const E in yo){const F=x.getAttribute(E);if(F)return void yo[E].fire({template:F})}};var Ei=Object.freeze({isValidParameter:Al,isUpdatableParameter:lo,isDeprecatedParameter:Ps,argsToParams:b=>{const x={};return"object"!=typeof b[0]||pt(b[0])?["title","html","icon"].forEach((E,F)=>{const oe=b[F];"string"==typeof oe||pt(oe)?x[E]=oe:void 0!==oe&&so("Unexpected type of ".concat(E,'! Expected "string" or "Element", got ').concat(typeof oe))}):Object.assign(x,b[0]),x},isVisible:()=>ki(je()),clickConfirm:rd,clickDeny:()=>Qt()&&Qt().click(),clickCancel:()=>Nr()&&Nr().click(),getContainer:an,getPopup:je,getTitle:gf,getHtmlContainer:Il,getImage:mf,getIcon:As,getInputLabel:()=>Li(te["input-label"]),getCloseButton:_f,getActions:Bu,getConfirmButton:Yi,getDenyButton:Qt,getCancelButton:Nr,getLoader:Ct,getFooter:Uu,getTimerProgressBar:Vu,getFocusableElements:vf,getValidationMessage:Ea,isLoading:()=>je().hasAttribute("data-loading"),fire:function(){const b=this;for(var x=arguments.length,E=new Array(x),F=0;F<x;F++)E[F]=arguments[F];return new b(...E)},mixin:function(b){return class extends(this){_main(F,oe){return super._main(F,Object.assign({},b,oe))}}},showLoading:ho,enableLoading:ho,getTimerLeft:()=>et.timeout&&et.timeout.getTimerLeft(),stopTimer:vo,resumeTimer:ln,toggleTimer:()=>{const b=et.timeout;return b&&(b.running?vo():ln())},increaseTimer:b=>{if(et.timeout){const x=et.timeout.increase(b);return Rl(x,!0),x}},isTimerRunning:()=>et.timeout&&et.timeout.isRunning(),bindClickHandler:function(){yo[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,Fa||(document.body.addEventListener("click",Is),Fa=!0)}});function Rs(){const b=ft.innerParams.get(this);if(!b)return;const x=ft.domCache.get(this);hi(x.loader),Gu()?b.icon&&ri(As()):Ls(x),br([x.popup,x.actions],te.loading),x.popup.removeAttribute("aria-busy"),x.popup.removeAttribute("data-loading"),x.confirmButton.disabled=!1,x.denyButton.disabled=!1,x.cancelButton.disabled=!1}const Ls=b=>{const x=b.popup.getElementsByClassName(b.loader.getAttribute("data-button-to-replace"));x.length?ri(x[0],"inline-block"):!ki(Yi())&&!ki(Qt())&&!ki(Nr())&&hi(b.actions)};var zt={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};function Nf(b,x,E,F){Gu()?Ki(b,F):(xr(E).then(()=>Ki(b,F)),et.keydownTarget.removeEventListener("keydown",et.keydownHandler,{capture:et.keydownListenerCapture}),et.keydownHandlerAdded=!1),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(x.setAttribute("style","display:none !important"),x.removeAttribute("class"),x.innerHTML=""):x.remove(),Hu()&&(null!==Sa.previousBodyPadding&&(document.body.style.paddingRight="".concat(Sa.previousBodyPadding,"px"),Sa.previousBodyPadding=null),(()=>{if(co(document.body,te.iosfix)){const b=parseInt(document.body.style.top,10);br(document.body,te.iosfix),document.body.style.top="",document.body.scrollTop=-1*b}})(),wi()),br([document.documentElement,document.body],[te.shown,te["height-auto"],te["no-backdrop"],te["toast-shown"]])}function Ko(b){b=si(b);const x=zt.swalPromiseResolve.get(this),E=Na(this);this.isAwaitingPromise()?b.isDismissed||(bo(this),x(b)):E&&x(b)}const Na=b=>{const x=je();if(!x)return!1;const E=ft.innerParams.get(b);if(!E||co(x,E.hideClass.popup))return!1;br(x,E.showClass.popup),Ot(x,E.hideClass.popup);const F=an();return br(F,E.showClass.backdrop),Ot(F,E.hideClass.backdrop),H_(b,x,E),!0};const bo=b=>{b.isAwaitingPromise()&&(ft.awaitingPromise.delete(b),ft.innerParams.get(b)||b._destroy())},si=b=>void 0===b?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},b),H_=(b,x,E)=>{const F=an(),oe=Fi&&$u(x);"function"==typeof E.willClose&&E.willClose(x),oe?Cr(b,x,F,E.returnFocus,E.didClose):Nf(b,F,E.returnFocus,E.didClose)},Cr=(b,x,E,F,oe)=>{et.swalCloseEventFinishedCallback=Nf.bind(null,b,E,F,oe),x.addEventListener(Fi,function(Be){Be.target===x&&(et.swalCloseEventFinishedCallback(),delete et.swalCloseEventFinishedCallback)})},Ki=(b,x)=>{setTimeout(()=>{"function"==typeof x&&x.bind(b.params)(),b._destroy()})};function Vl(b,x,E){const F=ft.domCache.get(b);x.forEach(oe=>{F[oe].disabled=E})}function za(b,x){if(!b)return!1;if("radio"===b.type){const F=b.parentNode.parentNode.querySelectorAll("input");for(let oe=0;oe<F.length;oe++)F[oe].disabled=x}else b.disabled=x}const qw=b=>{$_(b),delete b.params,delete et.keydownHandler,delete et.keydownTarget,delete et.currentInstance},$_=b=>{b.isAwaitingPromise()?(zf(ft,b),ft.awaitingPromise.set(b,!0)):(zf(zt,b),zf(ft,b))},zf=(b,x)=>{for(const E in b)b[E].delete(x)};var q_=Object.freeze({hideLoading:Rs,disableLoading:Rs,getInput:function(b){const x=ft.innerParams.get(b||this),E=ft.domCache.get(b||this);return E?bf(E.popup,x.input):null},close:Ko,isAwaitingPromise:function(){return!!ft.awaitingPromise.get(this)},rejectPromise:function(b){const x=zt.swalPromiseReject.get(this);bo(this),x&&x(b)},closePopup:Ko,closeModal:Ko,closeToast:Ko,enableButtons:function(){Vl(this,["confirmButton","denyButton","cancelButton"],!1)},disableButtons:function(){Vl(this,["confirmButton","denyButton","cancelButton"],!0)},enableInput:function(){return za(this.getInput(),!1)},disableInput:function(){return za(this.getInput(),!0)},showValidationMessage:function(b){const x=ft.domCache.get(this),E=ft.innerParams.get(this);Wn(x.validationMessage,b),x.validationMessage.className=te["validation-message"],E.customClass&&E.customClass.validationMessage&&Ot(x.validationMessage,E.customClass.validationMessage),ri(x.validationMessage);const F=this.getInput();F&&(F.setAttribute("aria-invalid",!0),F.setAttribute("aria-describedby",te["validation-message"]),uo(F),Ot(F,te.inputerror))},resetValidationMessage:function(){const b=ft.domCache.get(this);b.validationMessage&&hi(b.validationMessage);const x=this.getInput();x&&(x.removeAttribute("aria-invalid"),x.removeAttribute("aria-describedby"),br(x,te.inputerror))},getProgressSteps:function(){return ft.domCache.get(this).progressSteps},update:function(b){const x=je(),E=ft.innerParams.get(this);if(!x||co(x,E.hideClass.popup))return ii("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const F={};Object.keys(b).forEach(Be=>{lo(Be)?F[Be]=b[Be]:ii('Invalid parameter to update: "'.concat(Be,'". Updatable params are listed here: https://github.com/sweetalert2/sweetalert2/blob/master/src/utils/params.js\n\nIf you think this parameter should be updatable, request it here: https://github.com/sweetalert2/sweetalert2/issues/new?template=02_feature_request.md'))});const oe=Object.assign({},E,F);P_(this,oe),ft.innerParams.set(this,oe),Object.defineProperties(this,{params:{value:Object.assign({},this.params,b),writable:!1,enumerable:!0}})},_destroy:function(){const b=ft.domCache.get(this),x=ft.innerParams.get(this);x?(b.popup&&et.swalCloseEventFinishedCallback&&(et.swalCloseEventFinishedCallback(),delete et.swalCloseEventFinishedCallback),et.deferDisposalTimer&&(clearTimeout(et.deferDisposalTimer),delete et.deferDisposalTimer),"function"==typeof x.didDestroy&&x.didDestroy(),qw(this)):$_(this)}});let Bf;class Ba{constructor(){if("undefined"==typeof window)return;Bf=this;for(var x=arguments.length,E=new Array(x),F=0;F<x;F++)E[F]=arguments[F];const oe=Object.freeze(this.constructor.argsToParams(E));Object.defineProperties(this,{params:{value:oe,writable:!1,enumerable:!0,configurable:!0}});const Be=this._main(this.params);ft.promise.set(this,Be)}_main(x){let E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(b=>{!b.backdrop&&b.allowOutsideClick&&ii('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const x in b)u_(x),b.toast&&Fu(x),Nu(x)})(Object.assign({},E,x)),et.currentInstance&&(et.currentInstance._destroy(),Hu()&&wi()),et.currentInstance=this;const F=Yw(x,E);Yt(F),Object.freeze(F),et.timeout&&(et.timeout.stop(),delete et.timeout),clearTimeout(et.restoreFocusTimeout);const oe=Zw(this);return P_(this,F),ft.innerParams.set(this,F),Xw(this,oe,F)}then(x){return ft.promise.get(this).then(x)}finally(x){return ft.promise.get(this).finally(x)}}const Xw=(b,x,E)=>new Promise((F,oe)=>{const Be=Fn=>{b.closePopup({isDismissed:!0,dismiss:Fn})};zt.swalPromiseResolve.set(b,F),zt.swalPromiseReject.set(b,oe),x.confirmButton.onclick=()=>(b=>{const x=ft.innerParams.get(b);b.disableButtons(),x.input?N_(b,"confirm"):La(b,!0)})(b),x.denyButton.onclick=()=>(b=>{const x=ft.innerParams.get(b);b.disableButtons(),x.returnInputValueOnDeny?N_(b,"deny"):go(b,!1)})(b),x.cancelButton.onclick=()=>((b,x)=>{b.disableButtons(),x(Ia.cancel)})(b,Be),x.closeButton.onclick=()=>Be(Ia.close),((b,x,E)=>{ft.innerParams.get(b).toast?Lf(b,x,E):(z_(x),Pt(x),B_(b,x,E))})(b,x,Be),((b,x,E,F)=>{x.keydownTarget&&x.keydownHandlerAdded&&(x.keydownTarget.removeEventListener("keydown",x.keydownHandler,{capture:x.keydownListenerCapture}),x.keydownHandlerAdded=!1),E.toast||(x.keydownHandler=oe=>oi(b,oe,F),x.keydownTarget=E.keydownListenerCapture?window:je(),x.keydownListenerCapture=E.keydownListenerCapture,x.keydownTarget.addEventListener("keydown",x.keydownHandler,{capture:x.keydownListenerCapture}),x.keydownHandlerAdded=!0)})(b,et,E,Be),((b,x)=>{"select"===x.input||"radio"===x.input?Bw(b,x):["text","email","number","tel","textarea"].includes(x.input)&&(kr(x.inputValue)||Pl(x.inputValue))&&(ho(Yi()),Uw(b,x))})(b,E),Nl(E),Jw(et,E,Be),Qw(x,E),setTimeout(()=>{x.container.scrollTop=0})}),Yw=(b,x)=>{const E=(b=>{const x="string"==typeof b.template?document.querySelector(b.template):b.template;if(!x)return{};const E=x.content;return O_(E),Object.assign(Pw(E),Br(E),Aw(E),Dw(E),Ow(E),Iw(E,A_))})(b),F=Object.assign({},Fr,x,E,b);return F.showClass=Object.assign({},Fr.showClass,F.showClass),F.hideClass=Object.assign({},Fr.hideClass,F.hideClass),F},Zw=b=>{const x={popup:je(),container:an(),actions:Bu(),confirmButton:Yi(),denyButton:Qt(),cancelButton:Nr(),loader:Ct(),closeButton:_f(),validationMessage:Ea(),progressSteps:vr()};return ft.domCache.set(b,x),x},Jw=(b,x,E)=>{const F=Vu();hi(F),x.timer&&(b.timeout=new Lw(()=>{E("timer"),delete b.timeout},x.timer),x.timerProgressBar&&(ri(F),setTimeout(()=>{b.timeout&&b.timeout.running&&Rl(x.timer)})))},Qw=(b,x)=>{if(!x.toast){if(!Tl(x.allowEnterKey))return ad();Uf(b,x)||Bl(0,-1,1)}},Uf=(b,x)=>x.focusDeny&&ki(b.denyButton)?(b.denyButton.focus(),!0):x.focusCancel&&ki(b.cancelButton)?(b.cancelButton.focus(),!0):!(!x.focusConfirm||!ki(b.confirmButton)||(b.confirmButton.focus(),0)),ad=()=>{document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};Object.assign(Ba.prototype,q_),Object.assign(Ba,Ei),Object.keys(q_).forEach(b=>{Ba[b]=function(){if(Bf)return Bf[b](...arguments)}}),Ba.DismissReason=Ia,Ba.version="11.3.4";const ld=Ba;return ld.default=ld,ld}(),void 0!==this&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),"undefined"!=typeof document&&function(gn,mn){var Rt=gn.createElement("style");if(gn.getElementsByTagName("head")[0].appendChild(Rt),Rt.styleSheet)Rt.styleSheet.disabled||(Rt.styleSheet.cssText=mn);else try{Rt.innerHTML=mn}catch(ni){Rt.innerText=mn}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4!important;grid-row:1/4!important;grid-template-columns:1fr 99fr 1fr;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:700}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.8em;left:-.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-toast-animate-success-line-tip .75s;animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-toast-animate-success-line-long .75s;animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{-webkit-animation:swal2-toast-show .5s;animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{-webkit-animation:swal2-toast-hide .1s forwards;animation:swal2-toast-hide .1s forwards}.swal2-container{display:grid;position:fixed;z-index:1060;top:0;right:0;bottom:0;left:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(-webkit-min-content,auto) minmax(-webkit-min-content,auto) minmax(-webkit-min-content,auto);grid-template-rows:minmax(min-content,auto) minmax(min-content,auto) minmax(min-content,auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}.swal2-container.swal2-backdrop-show,.swal2-container.swal2-noanimation{background:rgba(0,0,0,.4)}.swal2-container.swal2-backdrop-hide{background:0 0!important}.swal2-container.swal2-bottom-start,.swal2-container.swal2-center-start,.swal2-container.swal2-top-start{grid-template-columns:minmax(0,1fr) auto auto}.swal2-container.swal2-bottom,.swal2-container.swal2-center,.swal2-container.swal2-top{grid-template-columns:auto minmax(0,1fr) auto}.swal2-container.swal2-bottom-end,.swal2-container.swal2-center-end,.swal2-container.swal2-top-end{grid-template-columns:auto auto minmax(0,1fr)}.swal2-container.swal2-top-start>.swal2-popup{align-self:start}.swal2-container.swal2-top>.swal2-popup{grid-column:2;align-self:start;justify-self:center}.swal2-container.swal2-top-end>.swal2-popup,.swal2-container.swal2-top-right>.swal2-popup{grid-column:3;align-self:start;justify-self:end}.swal2-container.swal2-center-left>.swal2-popup,.swal2-container.swal2-center-start>.swal2-popup{grid-row:2;align-self:center}.swal2-container.swal2-center>.swal2-popup{grid-column:2;grid-row:2;align-self:center;justify-self:center}.swal2-container.swal2-center-end>.swal2-popup,.swal2-container.swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;align-self:center;justify-self:end}.swal2-container.swal2-bottom-left>.swal2-popup,.swal2-container.swal2-bottom-start>.swal2-popup{grid-column:1;grid-row:3;align-self:end}.swal2-container.swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;justify-self:center;align-self:end}.swal2-container.swal2-bottom-end>.swal2-popup,.swal2-container.swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;align-self:end;justify-self:end}.swal2-container.swal2-grow-fullscreen>.swal2-popup,.swal2-container.swal2-grow-row>.swal2-popup{grid-column:1/4;width:100%}.swal2-container.swal2-grow-column>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}.swal2-container.swal2-no-transition{transition:none!important}.swal2-popup{display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0,100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}.swal2-popup:focus{outline:0}.swal2-popup.swal2-loading{overflow-y:hidden}.swal2-title{position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}.swal2-actions{display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}.swal2-actions:not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}.swal2-actions:not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0,0,0,.1),rgba(0,0,0,.1))}.swal2-actions:not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2))}.swal2-loader{display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;-webkit-animation:swal2-rotate-loading 1.5s linear 0s infinite normal;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 transparent #2778c4 transparent}.swal2-styled{margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px transparent;font-weight:500}.swal2-styled:not([disabled]){cursor:pointer}.swal2-styled.swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}.swal2-styled.swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}.swal2-styled.swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}.swal2-styled.swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}.swal2-styled.swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}.swal2-styled.swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}.swal2-styled.swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-styled:focus{outline:0}.swal2-styled::-moz-focus-inner{border:0}.swal2-footer{justify-content:center;margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em}.swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto!important;height:.25em;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}.swal2-timer-progress-bar{width:100%;height:.25em;background:rgba(0,0,0,.2)}.swal2-image{max-width:100%;margin:2em auto 1em}.swal2-close{z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:0 0;color:#ccc;font-family:serif;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}.swal2-close:hover{transform:none;background:0 0;color:#f27474}.swal2-close:focus{outline:0;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}.swal2-close::-moz-focus-inner{border:0}.swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:400;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}.swal2-checkbox,.swal2-file,.swal2-input,.swal2-radio,.swal2-select,.swal2-textarea{margin:1em 2em 3px}.swal2-file,.swal2-input,.swal2-textarea{box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:inherit;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px transparent;color:inherit;font-size:1.125em}.swal2-file.swal2-inputerror,.swal2-input.swal2-inputerror,.swal2-textarea.swal2-inputerror{border-color:#f27474!important;box-shadow:0 0 2px #f27474!important}.swal2-file:focus,.swal2-input:focus,.swal2-textarea:focus{border:1px solid #b4dbed;outline:0;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}.swal2-file::-moz-placeholder,.swal2-input::-moz-placeholder,.swal2-textarea::-moz-placeholder{color:#ccc}.swal2-file:-ms-input-placeholder,.swal2-input:-ms-input-placeholder,.swal2-textarea:-ms-input-placeholder{color:#ccc}.swal2-file::placeholder,.swal2-input::placeholder,.swal2-textarea::placeholder{color:#ccc}.swal2-range{margin:1em 2em 3px;background:#fff}.swal2-range input{width:80%}.swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}.swal2-range input,.swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}.swal2-input{height:2.625em;padding:0 .75em}.swal2-file{width:75%;margin-right:auto;margin-left:auto;background:inherit;font-size:1.125em}.swal2-textarea{height:6.75em;padding:.75em}.swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:inherit;color:inherit;font-size:1.125em}.swal2-checkbox,.swal2-radio{align-items:center;justify-content:center;background:#fff;color:inherit}.swal2-checkbox label,.swal2-radio label{margin:0 .6em;font-size:1.125em}.swal2-checkbox input,.swal2-radio input{flex-shrink:0;margin:0 .4em}.swal2-input-label{display:flex;justify-content:center;margin:1em auto 0}.swal2-validation-message{align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}.swal2-validation-message::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}.swal2-icon{position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:.25em solid transparent;border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}.swal2-icon.swal2-error{border-color:#f27474;color:#f27474}.swal2-icon.swal2-error .swal2-x-mark{position:relative;flex-grow:1}.swal2-icon.swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}.swal2-icon.swal2-error.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-error.swal2-icon-show .swal2-x-mark{-webkit-animation:swal2-animate-error-x-mark .5s;animation:swal2-animate-error-x-mark .5s}.swal2-icon.swal2-warning{border-color:#facea8;color:#f8bb86}.swal2-icon.swal2-warning.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-warning.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-i-mark .5s;animation:swal2-animate-i-mark .5s}.swal2-icon.swal2-info{border-color:#9de0f6;color:#3fc3ee}.swal2-icon.swal2-info.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-info.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-i-mark .8s;animation:swal2-animate-i-mark .8s}.swal2-icon.swal2-question{border-color:#c9dae1;color:#87adbd}.swal2-icon.swal2-question.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-question.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-question-mark .8s;animation:swal2-animate-question-mark .8s}.swal2-icon.swal2-success{border-color:#a5dc86;color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}.swal2-icon.swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-.25em;left:-.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}.swal2-icon.swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}.swal2-icon.swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}.swal2-icon.swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-animate-success-line-tip .75s;animation:swal2-animate-success-line-tip .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-animate-success-line-long .75s;animation:swal2-animate-success-line-long .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-circular-line-right{-webkit-animation:swal2-rotate-success-circular-line 4.25s ease-in;animation:swal2-rotate-success-circular-line 4.25s ease-in}.swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:inherit;font-weight:600}.swal2-progress-steps li{display:inline-block;position:relative}.swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}.swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}[class^=swal2]{-webkit-tap-highlight-color:transparent}.swal2-show{-webkit-animation:swal2-show .3s;animation:swal2-show .3s}.swal2-hide{-webkit-animation:swal2-hide .15s forwards;animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@-webkit-keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@-webkit-keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@-webkit-keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@-webkit-keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@-webkit-keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@-webkit-keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@-webkit-keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@-webkit-keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@-webkit-keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@-webkit-keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@-webkit-keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@-webkit-keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@-webkit-keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@-webkit-keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto!important}body.swal2-no-backdrop .swal2-container{background-color:transparent!important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll!important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static!important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:transparent;pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{top:0;right:auto;bottom:auto;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{top:0;right:0;bottom:auto;left:auto}body.swal2-toast-shown .swal2-container.swal2-top-left,body.swal2-toast-shown .swal2-container.swal2-top-start{top:0;right:auto;bottom:auto;left:0}body.swal2-toast-shown .swal2-container.swal2-center-left,body.swal2-toast-shown .swal2-container.swal2-center-start{top:50%;right:auto;bottom:auto;left:0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{top:50%;right:auto;bottom:auto;left:50%;transform:translate(-50%,-50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{top:50%;right:0;bottom:auto;left:auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-left,body.swal2-toast-shown .swal2-container.swal2-bottom-start{top:auto;right:auto;bottom:0;left:0}body.swal2-toast-shown .swal2-container.swal2-bottom{top:auto;right:auto;bottom:0;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{top:auto;right:0;bottom:0;left:auto}')},130:(Ii,gn,mn)=>{"use strict";function Rt(n){return"function"==typeof n}function ni(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const ii=ni(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function so(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Ri{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(Rt(i))try{i()}catch(o){e=o instanceof ii?o.errors:[o]}const{_teardowns:r}=this;if(r){this._teardowns=null;for(const o of r)try{Tl(o)}catch(s){e=null!=e?e:[],s instanceof ii?e=[...e,...s.errors]:e.push(s)}}if(e)throw new ii(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Tl(e);else{if(e instanceof Ri){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._teardowns=null!==(t=this._teardowns)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&so(t,e)}remove(e){const{_teardowns:t}=this;t&&so(t,e),e instanceof Ri&&e._removeParent(this)}}Ri.EMPTY=(()=>{const n=new Ri;return n.closed=!0,n})();const hf=Ri.EMPTY;function ff(n){return n instanceof Ri||n&&"closed"in n&&Rt(n.remove)&&Rt(n.add)&&Rt(n.unsubscribe)}function Tl(n){Rt(n)?n():n.unsubscribe()}const kr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ao={setTimeout(...n){const{delegate:e}=ao;return((null==e?void 0:e.setTimeout)||setTimeout)(...n)},clearTimeout(n){const{delegate:e}=ao;return((null==e?void 0:e.clearTimeout)||clearTimeout)(n)},delegate:void 0};function Pl(n){ao.setTimeout(()=>{const{onUnhandledError:e}=kr;if(!e)throw n;e(n)})}function Fr(){}const a_=Al("C",void 0,void 0);function Al(n,e,t){return{kind:n,value:e,error:t}}let lo=null;function Ps(n){if(kr.useDeprecatedSynchronousErrorHandling){const e=!lo;if(e&&(lo={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=lo;if(lo=null,t)throw i}}else n()}class Fu extends Ri{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ff(e)&&e.add(this)):this.destination=te}static create(e,t,i){return new Nu(e,t,i)}next(e){this.isStopped?Dl(Al("N",e,void 0),this):this._next(e)}error(e){this.isStopped?Dl(Al("E",void 0,e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Dl(a_,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class Nu extends Fu{constructor(e,t,i){let r;if(super(),Rt(e))r=e;else if(e){let o;({next:r,error:t,complete:i}=e),this&&kr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe()):o=e,r=null==r?void 0:r.bind(o),t=null==t?void 0:t.bind(o),i=null==i?void 0:i.bind(o)}this.destination={next:r?zu(r):Fr,error:zu(null!=t?t:pf),complete:i?zu(i):Fr}}}function zu(n,e){return(...t)=>{try{n(...t)}catch(i){kr.useDeprecatedSynchronousErrorHandling?function(n){kr.useDeprecatedSynchronousErrorHandling&&lo&&(lo.errorThrown=!0,lo.error=n)}(i):Pl(i)}}}function pf(n){throw n}function Dl(n,e){const{onStoppedNotification:t}=kr;t&&ao.setTimeout(()=>t(n,e))}const te={closed:!0,next:Fr,error:pf,complete:Fr},Xo="function"==typeof Symbol&&Symbol.observable||"@@observable";function an(n){return n}let je=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const o=function(n){return n&&n instanceof Fu||function(n){return n&&Rt(n.next)&&Rt(n.error)&&Rt(n.complete)}(n)&&ff(n)}(t)?t:new Nu(t,i,r);return Ps(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=As(i))((r,o)=>{let s;s=this.subscribe(a=>{try{t(a)}catch(l){o(l),null==s||s.unsubscribe()}},o,r)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[Xo](){return this}pipe(...t){return function(n){return 0===n.length?an:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}(t)(this)}toPromise(t){return new(t=As(t))((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return n.create=e=>new n(e),n})();function As(n){var e;return null!==(e=null!=n?n:kr.Promise)&&void 0!==e?e:Promise}const mf=ni(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let vr=(()=>{class n extends je{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new Ea(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new mf}next(t){Ps(()=>{if(this._throwIfClosed(),!this.isStopped){const i=this.observers.slice();for(const r of i)r.next(t)}})}error(t){Ps(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Ps(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:o}=this;return i||r?hf:(o.push(t),new Ri(()=>so(o,t)))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:o}=this;i?t.error(r):o&&t.complete()}asObservable(){const t=new je;return t.source=this,t}}return n.create=(e,t)=>new Ea(e,t),n})();class Ea extends vr{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:hf}}function Yi(n){return Rt(null==n?void 0:n.lift)}function Qt(n){return e=>{if(Yi(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}class Rn extends Fu{constructor(e,t,i,r,o){super(e),this.onFinalize=o,this._next=t?function(s){try{t(s)}catch(a){e.error(a)}}:super._next,this._error=r?function(s){try{r(s)}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(s){e.error(s)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}function Ct(n,e){return Qt((t,i)=>{let r=0;t.subscribe(new Rn(i,o=>{i.next(n.call(e,o,r++))}))})}function uo(n){return this instanceof uo?(this.v=n,this):new uo(n)}function xf(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(h){i[h]&&(r[h]=function(f){return new Promise(function(m,v){o.push([h,f,m,v])>1||a(h,f)})})}function a(h,f){try{!function(h){h.value instanceof uo?Promise.resolve(h.value.v).then(c,u):d(o[0][2],h)}(i[h](f))}catch(m){d(o[0][3],m)}}function c(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),o.shift(),o.length&&a(o[0][0],o[0][1])}}function br(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){!function(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}(a,l,(s=n[o](s)).done,s.value)})}}}const ki=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function wf(n){return Rt(null==n?void 0:n.then)}function Wu(n){return Rt(n[Xo])}function $u(n){return Symbol.asyncIterator&&Rt(null==n?void 0:n[Symbol.asyncIterator])}function Rl(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const qu="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function Cf(n){return Rt(null==n?void 0:n[qu])}function et(n){return xf(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield uo(t.read());if(r)return yield uo(void 0);yield yield uo(i)}}finally{t.releaseLock()}})}function Mf(n){return Rt(null==n?void 0:n.getReader)}function xr(n){if(n instanceof je)return n;if(null!=n){if(Wu(n))return function(n){return new je(e=>{const t=n[Xo]();if(Rt(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(ki(n))return function(n){return new je(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(wf(n))return function(n){return new je(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Pl)})}(n);if($u(n))return Ef(n);if(Cf(n))return function(n){return new je(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Mf(n))return function(n){return Ef(et(n))}(n)}throw Rl(n)}function Ef(n){return new je(e=>{(function(n,e){var t,i,r,o;return function(n,e,t,i){return new(t||(t=Promise))(function(o,s){function a(u){try{c(i.next(u))}catch(d){s(d)}}function l(u){try{c(i.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):function(o){return o instanceof t?o:new t(function(s){s(o)})}(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=br(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function zr(n,e,t,i=0,r=!1){const o=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function Ln(n,e,t=1/0){return Rt(e)?Ln((i,r)=>Ct((o,s)=>e(i,o,r,s))(xr(n(i,r))),t):("number"==typeof e&&(t=e),Qt((i,r)=>function(n,e,t,i,r,o,s,a){const l=[];let c=0,u=0,d=!1;const h=()=>{d&&!l.length&&!c&&e.complete()},f=v=>c<i?m(v):l.push(v),m=v=>{c++;let w=!1;xr(t(v,u++)).subscribe(new Rn(e,y=>{e.next(y)},()=>{w=!0},void 0,()=>{if(w)try{for(c--;l.length&&c<i;){const y=l.shift();m(y)}h()}catch(y){e.error(y)}}))};return n.subscribe(new Rn(e,f,()=>{d=!0,h()})),()=>{}}(i,r,n,t)))}function Pa(n=1/0){return Ln(an,n)}const Fi=new je(n=>n.complete());function Yu(n){return n[n.length-1]}function Ll(n){return Rt(Yu(n))?n.pop():void 0}function Aa(n){return function(n){return n&&Rt(n.schedule)}(Yu(n))?n.pop():void 0}function Sf(n,e=0){return Qt((t,i)=>{t.subscribe(new Rn(i,r=>zr(i,n,()=>i.next(r),e),()=>zr(i,n,()=>i.complete(),e),r=>zr(i,n,()=>i.error(r),e)))})}function Tf(n,e=0){return Qt((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function Pf(n,e){if(!n)throw new Error("Iterable cannot be null");return new je(t=>{zr(t,e,()=>{const i=n[Symbol.asyncIterator]();zr(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function _n(n,e){return e?function(n,e){if(null!=n){if(Wu(n))return function(n,e){return xr(n).pipe(Tf(e),Sf(e))}(n,e);if(ki(n))return function(n,e){return new je(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(wf(n))return function(n,e){return xr(n).pipe(Tf(e),Sf(e))}(n,e);if($u(n))return Pf(n,e);if(Cf(n))return function(n,e){return new je(t=>{let i;return zr(t,e,()=>{i=n[qu](),zr(t,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){return void t.error(s)}o?t.complete():t.next(r)},0,!0)}),()=>Rt(null==i?void 0:i.return)&&i.return()})}(n,e);if(Mf(n))return function(n,e){return Pf(et(n),e)}(n,e)}throw Rl(n)}(n,e):xr(n)}function Oa(n){return n<=0?()=>Fi:Qt((e,t)=>{let i=0;e.subscribe(new Rn(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function Zu(n,e,...t){return!0===e?(n(),null):!1===e?null:e(...t).pipe(Oa(1)).subscribe(()=>n())}function jt(n){for(let e in n)if(n[e]===jt)return e;throw Error("Could not find renamed property on target object.")}function Ju(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Tt(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Tt).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function kl(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const S_=jt({__forward_ref__:jt});function Wt(n){return n.__forward_ref__=Wt,n.toString=function(){return Tt(this())},n}function ut(n){return Qu(n)?n():n}function Qu(n){return"function"==typeof n&&n.hasOwnProperty(S_)&&n.__forward_ref__===Wt}class Ni extends Error{constructor(e,t){super(function(n,e){return`${n?`NG0${n}: `:""}${e}`}(e,t)),this.code=e}}function nt(n){return"string"==typeof n?n:null==n?"":String(n)}function fi(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():nt(n)}function Fl(n,e){const t=e?` in ${e}`:"";throw new Ni("201",`No provider for ${fi(n)} found${t}`)}function zi(n,e){null==n&&function(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function We(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function pi(n){return{providers:n.providers||[],imports:n.imports||[]}}function ed(n){return Df(n,Nl)||Df(n,Of)}function Df(n,e){return n.hasOwnProperty(e)?n[e]:null}function td(n){return n&&(n.hasOwnProperty(zl)||n.hasOwnProperty(L_))?n[zl]:null}const Nl=jt({\u0275prov:jt}),zl=jt({\u0275inj:jt}),Of=jt({ngInjectableDef:jt}),L_=jt({ngInjectorDef:jt});var ot=(()=>((ot=ot||{})[ot.Default=0]="Default",ot[ot.Host=1]="Host",ot[ot.Self=2]="Self",ot[ot.SkipSelf=4]="SkipSelf",ot[ot.Optional=8]="Optional",ot))();let ho;function fo(n){const e=ho;return ho=n,e}function If(n,e,t){const i=ed(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&ot.Optional?null:void 0!==e?e:void Fl(Tt(n),"Injector")}function po(n){return{toString:n}.toString()}var Zi=(()=>((Zi=Zi||{})[Zi.OnPush=0]="OnPush",Zi[Zi.Default=1]="Default",Zi))(),wr=(()=>{return(n=wr||(wr={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",wr;var n})();const nd="undefined"!=typeof globalThis&&globalThis,Rf="undefined"!=typeof window&&window,F_="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ht=nd||"undefined"!=typeof global&&global||Rf||F_,go={},Gt=[],Ra=jt({\u0275cmp:jt}),La=jt({\u0275dir:jt}),id=jt({\u0275pipe:jt}),Lf=jt({\u0275mod:jt}),Ur=jt({\u0275fac:jt}),mo=jt({__NG_ELEMENT_ID__:jt});let z_=0;function Pt(n){return po(()=>{const t={},i={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Zi.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||Gt,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||wr.Emulated,id:"c",styles:n.styles||Gt,_:null,setInput:null,schemas:n.schemas||null,tView:null},r=n.directives,o=n.features,s=n.pipes;return i.id+=z_++,i.inputs=Bl(n.inputs,t),i.outputs=Bl(n.outputs),o&&o.forEach(a=>a(i)),i.directiveDefs=r?()=>("function"==typeof r?r():r).map(kf):null,i.pipeDefs=s?()=>("function"==typeof s?s():s).map(rd):null,i})}function kf(n){return oi(n)||function(n){return n[La]||null}(n)}function rd(n){return function(n){return n[id]||null}(n)}const Ff={};function Ci(n){return po(()=>{const e={type:n.type,bootstrap:n.bootstrap||Gt,declarations:n.declarations||Gt,imports:n.imports||Gt,exports:n.exports||Gt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(Ff[n.id]=n.type),e})}function Bl(n,e){if(null==n)return go;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),t[r]=i,e&&(e[r]=o)}return t}const Xe=Pt;function oi(n){return n[Ra]||null}function Ji(n,e){const t=n[Lf]||null;if(!t&&!0===e)throw new Error(`Type ${Tt(n)} does not have '\u0275mod' property.`);return t}function Cr(n){return Array.isArray(n)&&"object"==typeof n[1]}function Ki(n){return Array.isArray(n)&&!0===n[1]}function Vl(n){return 0!=(8&n.flags)}function za(n){return 2==(2&n.flags)}function Hl(n){return 1==(1&n.flags)}function rr(n){return null!==n.template}function G_(n){return 0!=(512&n[2])}function E(n,e){return n.hasOwnProperty(Ur)?n[Ur]:null}class F{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function oe(){return Be}function Be(n){return n.type.prototype.ngOnChanges&&(n.setInput=Ui),Fn}function Fn(){const n=es(this),e=null==n?void 0:n.current;if(e){const t=n.previous;if(t===go)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function Ui(n,e,t,i){const r=es(n)||function(n,e){return n[ai]=e}(n,{previous:go,current:null}),o=r.current||(r.current={}),s=r.previous,a=this.declaredInputs[t],l=s[a];o[a]=new F(l&&l.currentValue,e,s===go),n[i]=e}oe.ngInherit=!0;const ai="__ngSimpleChanges__";function es(n){return n[ai]||null}let Y_;function vn(n){return!!n.listen}const t1={createRenderer:(n,e)=>void 0!==Y_?Y_:"undefined"!=typeof document?document:void 0};function Nn(n){for(;Array.isArray(n);)n=n[0];return n}function Vf(n,e){return Nn(e[n])}function Er(n,e){return Nn(e[n.index])}function J_(n,e){return n.data[e]}function or(n,e){const t=e[n];return Cr(t)?t:t[0]}function n1(n){return 4==(4&n[2])}function Q_(n){return 128==(128&n[2])}function ks(n,e){return null==e?null:n[e]}function i1(n){n[18]=0}function K_(n,e){n[5]+=e;let t=n,i=n[3];for(;null!==i&&(1===e&&1===t[5]||-1===e&&0===t[5]);)i[5]+=e,t=i,i=i[3]}const it={lFrame:d1(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function r1(){return it.bindingsEnabled}function pe(){return it.lFrame.lView}function Lt(){return it.lFrame.tView}function be(n){return it.lFrame.contextLView=n,n[8]}function $n(){let n=o1();for(;null!==n&&64===n.type;)n=n.parent;return n}function o1(){return it.lFrame.currentTNode}function xo(n,e){const t=it.lFrame;t.currentTNode=n,t.isParent=e}function ev(){return it.lFrame.isParent}function tv(){it.lFrame.isParent=!1}function Hf(){return it.isInCheckNoChangesMode}function Gf(n){it.isInCheckNoChangesMode=n}function jl(){return it.lFrame.bindingIndex++}function ns(n){const e=it.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function c3(n,e){const t=it.lFrame;t.bindingIndex=t.bindingRootIndex=n,nv(e)}function nv(n){it.lFrame.currentDirectiveIndex=n}function l1(){return it.lFrame.currentQueryIndex}function rv(n){it.lFrame.currentQueryIndex=n}function d3(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function c1(n,e,t){if(t&ot.SkipSelf){let r=e,o=n;for(;!(r=r.parent,null!==r||t&ot.Host||(r=d3(o),null===r||(o=o[15],10&r.type))););if(null===r)return!1;e=r,n=o}const i=it.lFrame=u1();return i.currentTNode=e,i.lView=n,!0}function jf(n){const e=u1(),t=n[1];it.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function u1(){const n=it.lFrame,e=null===n?null:n.child;return null===e?d1(n):e}function d1(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function h1(){const n=it.lFrame;return it.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const f1=h1;function Wf(){const n=h1();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Hi(){return it.lFrame.selectedIndex}function Fs(n){it.lFrame.selectedIndex=n}function yn(){const n=it.lFrame;return J_(n.tView,n.selectedIndex)}function $f(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=o;s&&(n.contentHooks||(n.contentHooks=[])).push(-t,s),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),l&&(n.viewHooks||(n.viewHooks=[])).push(-t,l),c&&((n.viewHooks||(n.viewHooks=[])).push(t,c),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,c)),null!=u&&(n.destroyHooks||(n.destroyHooks=[])).push(t,u)}}function qf(n,e,t){p1(n,e,3,t)}function Xf(n,e,t,i){(3&n[2])===t&&p1(n,e,t,i)}function ov(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function p1(n,e,t,i){const o=null!=i?i:-1,s=e.length-1;let a=0;for(let l=void 0!==i?65535&n[18]:0;l<s;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=i&&a>=i)break}else e[l]<0&&(n[18]+=65536),(a<o||-1==o)&&(b3(n,t,e,l),n[18]=(4294901760&n[18])+l+2),l++}function b3(n,e,t,i){const r=t[i]<0,o=t[i+1],a=n[r?-t[i]:t[i]];if(r){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{o.call(a)}finally{}}}else try{o.call(a)}finally{}}class dd{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function Yf(n,e,t){const i=vn(n);let r=0;for(;r<t.length;){const o=t[r];if("number"==typeof o){if(0!==o)break;r++;const s=t[r++],a=t[r++],l=t[r++];i?n.setAttribute(e,a,l,s):e.setAttributeNS(s,a,l)}else{const s=o,a=t[++r];av(s)?i&&n.setProperty(e,s,a):i?n.setAttribute(e,s,a):e.setAttribute(s,a),r++}}return r}function g1(n){return 3===n||4===n||6===n}function av(n){return 64===n.charCodeAt(0)}function Zf(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||m1(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function m1(n,e,t,i,r){let o=0,s=n.length;if(-1===e)s=-1;else for(;o<n.length;){const a=n[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<n.length;){const a=n[o];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[o+1]=r));if(i===n[o+1])return void(n[o+2]=r)}o++,null!==i&&o++,null!==r&&o++}-1!==s&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),null!==i&&n.splice(o++,0,i),null!==r&&n.splice(o++,0,r)}function _1(n){return-1!==n}function Wl(n){return 32767&n}function $l(n,e){let t=function(n){return n>>16}(n),i=e;for(;t>0;)i=i[15],t--;return i}let lv=!0;function Jf(n){const e=lv;return lv=n,e}let S3=0;function fd(n,e){const t=uv(n,e);if(-1!==t)return t;const i=e[1];i.firstCreatePass&&(n.injectorIndex=e.length,cv(i.data,n),cv(e,null),cv(i.blueprint,null));const r=Qf(n,e),o=n.injectorIndex;if(_1(r)){const s=Wl(r),a=$l(r,e),l=a[1].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|l[s+c]}return e[o+8]=r,o}function cv(n,e){n.push(0,0,0,0,0,0,0,0,e)}function uv(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Qf(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){const o=r[1],s=o.type;if(i=2===s?o.declTNode:1===s?r[6]:null,null===i)return-1;if(t++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return-1}function Kf(n,e,t){!function(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(mo)&&(i=t[mo]),null==i&&(i=t[mo]=S3++);const r=255&i;e.data[n+(r>>5)]|=1<<r}(n,e,t)}function b1(n,e,t){if(t&ot.Optional)return n;Fl(e,"NodeInjector")}function x1(n,e,t,i){if(t&ot.Optional&&void 0===i&&(i=null),0==(t&(ot.Self|ot.Host))){const r=n[9],o=fo(void 0);try{return r?r.get(e,i,t&ot.Optional):If(e,i,t&ot.Optional)}finally{fo(o)}}return b1(i,e,t)}function w1(n,e,t,i=ot.Default,r){if(null!==n){const o=function(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(mo)?n[mo]:void 0;return"number"==typeof e?e>=0?255&e:A3:e}(t);if("function"==typeof o){if(!c1(e,n,i))return i&ot.Host?b1(r,t,i):x1(e,t,i,r);try{const s=o(i);if(null!=s||i&ot.Optional)return s;Fl(t)}finally{f1()}}else if("number"==typeof o){let s=null,a=uv(n,e),l=-1,c=i&ot.Host?e[16][6]:null;for((-1===a||i&ot.SkipSelf)&&(l=-1===a?Qf(n,e):e[a+8],-1!==l&&E1(i,!1)?(s=e[1],a=Wl(l),e=$l(l,e)):a=-1);-1!==a;){const u=e[1];if(M1(o,a,u.data)){const d=D3(a,e,t,s,i,c);if(d!==C1)return d}l=e[a+8],-1!==l&&E1(i,e[1].data[a+8]===c)&&M1(o,a,e)?(s=u,a=Wl(l),e=$l(l,e)):a=-1}}}return x1(e,t,i,r)}const C1={};function A3(){return new ql($n(),pe())}function D3(n,e,t,i,r,o){const s=e[1],a=s.data[n+8],u=ep(a,s,t,null==i?za(a)&&lv:i!=s&&0!=(3&a.type),r&ot.Host&&o===a);return null!==u?pd(e,s,u,a):C1}function ep(n,e,t,i,r){const o=n.providerIndexes,s=e.data,a=1048575&o,l=n.directiveStart,u=o>>20,h=r?a+u:n.directiveEnd;for(let f=i?a:a+u;f<h;f++){const m=s[f];if(f<l&&t===m||f>=l&&m.type===t)return f}if(r){const f=s[l];if(f&&rr(f)&&f.type===t)return l}return null}function pd(n,e,t,i){let r=n[t];const o=e.data;if(function(n){return n instanceof dd}(r)){const s=r;s.resolving&&function(n,e){throw new Ni("200",`Circular dependency in DI detected for ${n}`)}(fi(o[t]));const a=Jf(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?fo(s.injectImpl):null;c1(n,i,ot.Default);try{r=n[t]=s.factory(void 0,o,n,i),e.firstCreatePass&&t>=i.directiveStart&&function(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){const s=Be(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s)}r&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,r),o&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o))}(t,o[t],e)}finally{null!==l&&fo(l),Jf(a),s.resolving=!1,f1()}}return r}function M1(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function E1(n,e){return!(n&ot.Self||n&ot.Host&&e)}class ql{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return w1(this._tNode,this._lView,e,i,t)}}function sr(n){return po(()=>{const e=n.prototype.constructor,t=e[Ur]||dv(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const o=r[Ur]||dv(r);if(o&&o!==t)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function dv(n){return Qu(n)?()=>{const e=dv(ut(n));return e&&e()}:E(n)}const Yl="__parameters__";function Jl(n,e,t){return po(()=>{const i=function(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;const s=new r(...o);return a.annotation=s,a;function a(l,c,u){const d=l.hasOwnProperty(Yl)?l[Yl]:Object.defineProperty(l,Yl,{value:[]})[Yl];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}class gt{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=We({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const R3=new gt("AnalyzeForEntryComponents");function Sr(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let i=n[t];Array.isArray(i)?(e===n&&(e=n.slice(0,t)),Sr(i,e)):e!==n&&e.push(i)}return e}function wo(n,e){n.forEach(t=>Array.isArray(t)?wo(t,e):e(t))}function S1(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function tp(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function ar(n,e,t){let i=Ql(n,e);return i>=0?n[1|i]=t:(i=~i,function(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function pv(n,e){const t=Ql(n,e);if(t>=0)return n[1|t]}function Ql(n,e){return function(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const o=i+(r-i>>1),s=n[o<<t];if(e===s)return o<<t;s>e?r=o:i=o+1}return~(r<<t)}(n,e,1)}const bd={},mv="__NG_DI_FLAG__",ip="ngTempTokenPath",G3=/\n/gm,O1="__source",W3=jt({provide:String,useValue:jt});let xd;function I1(n){const e=xd;return xd=n,e}function $3(n,e=ot.Default){if(void 0===xd)throw new Error("inject() must be called from an injection context");return null===xd?If(n,void 0,e):xd.get(n,e&ot.Optional?null:void 0,e)}function Le(n,e=ot.Default){return(ho||$3)(ut(n),e)}function _v(n){const e=[];for(let t=0;t<n.length;t++){const i=ut(n[t]);if(Array.isArray(i)){if(0===i.length)throw new Error("Arguments array must have arguments.");let r,o=ot.Default;for(let s=0;s<i.length;s++){const a=i[s],l=q3(a);"number"==typeof l?-1===l?r=a.token:o|=l:r=a}e.push(Le(r,o))}else e.push(Le(i))}return e}function wd(n,e){return n[mv]=e,n.prototype[mv]=e,n}function q3(n){return n[mv]}const Cd=wd(Jl("Inject",n=>({token:n})),-1),Co=wd(Jl("Optional"),8),Kl=wd(Jl("SkipSelf"),4);class V1{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function zs(n){return n instanceof V1?n.changingThisBreaksApplicationSecurity:n}const gR=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,mR=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var zn=(()=>((zn=zn||{})[zn.NONE=0]="NONE",zn[zn.HTML=1]="HTML",zn[zn.STYLE=2]="STYLE",zn[zn.SCRIPT=3]="SCRIPT",zn[zn.URL=4]="URL",zn[zn.RESOURCE_URL=5]="RESOURCE_URL",zn))();function dn(n){const e=function(){const n=pe();return n&&n[12]}();return e?e.sanitize(zn.URL,n)||"":function(n,e){const t=function(n){return n instanceof V1&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}(n,"URL")?zs(n):function(n){return(n=String(n)).match(gR)||n.match(mR)?n:"unsafe:"+n}(nt(n))}const J1="__ngContext__";function Si(n,e){n[J1]=e}function Sv(n){const e=function(n){return n[J1]||null}(n);return e?Array.isArray(e)?e:e.lView:null}function Pv(n){return n.ngOriginalError}function UR(n,...e){n.error(...e)}class nc{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),i=(n=e)&&n.ngErrorLogger||UR;var n;i(this._console,"ERROR",e),t&&i(this._console,"ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Pv(e);for(;t&&Pv(t);)t=Pv(t);return t||null}}const nC=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ht))();function Av(n){return n.ownerDocument.defaultView}function iC(n){return n.ownerDocument}function Eo(n){return n instanceof Function?n():n}var lr=(()=>((lr=lr||{})[lr.Important=1]="Important",lr[lr.DashCase=2]="DashCase",lr))();function Ov(n,e){return undefined(n,e)}function Ad(n){const e=n[3];return Ki(e)?e[3]:e}function Iv(n){return lC(n[13])}function Rv(n){return lC(n[4])}function lC(n){for(;null!==n&&!Ki(n);)n=n[4];return n}function rc(n,e,t,i,r){if(null!=i){let o,s=!1;Ki(i)?o=i:Cr(i)&&(s=!0,i=i[0]);const a=Nn(i);0===n&&null!==t?null==r?pC(e,t,a):Ua(e,t,a,r||null,!0):1===n&&null!==t?Ua(e,t,a,r||null,!0):2===n?function(n,e,t){const i=cp(n,e);i&&function(n,e,t,i){vn(n)?n.removeChild(e,t,i):e.removeChild(t)}(n,i,e,t)}(e,a,s):3===n&&e.destroyNode(a),null!=o&&function(n,e,t,i,r){const o=t[7];o!==Nn(t)&&rc(e,n,i,o,r);for(let a=10;a<t.length;a++){const l=t[a];Dd(l[1],l,n,e,i,o)}}(e,n,o,t,r)}}function kv(n,e,t){return vn(n)?n.createElement(e,t):null===t?n.createElement(e):n.createElementNS(t,e)}function uC(n,e){const t=n[9],i=t.indexOf(e),r=e[3];1024&e[2]&&(e[2]&=-1025,K_(r,-1)),t.splice(i,1)}function Fv(n,e){if(n.length<=10)return;const t=10+e,i=n[t];if(i){const r=i[17];null!==r&&r!==n&&uC(r,i),e>0&&(n[t-1][4]=i[4]);const o=tp(n,10+e);!function(n,e){Dd(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(i[1],i);const s=o[19];null!==s&&s.detachView(o[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}function dC(n,e){if(!(256&e[2])){const t=e[11];vn(t)&&t.destroyNode&&Dd(n,e,t,3,null,null),function(n){let e=n[13];if(!e)return Nv(n[1],n);for(;e;){let t=null;if(Cr(e))t=e[13];else{const i=e[10];i&&(t=i)}if(!t){for(;e&&!e[4]&&e!==n;)Cr(e)&&Nv(e[1],e),e=e[3];null===e&&(e=n),Cr(e)&&Nv(e[1],e),t=e&&e[4]}e=t}}(e)}}function Nv(n,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof dd)){const o=t[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=r[o[s]],l=o[s+1];try{l.call(a)}finally{}}else try{o.call(r)}finally{}}}}(n,e),function(n,e){const t=n.cleanup,i=e[7];let r=-1;if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const s=t[o+1],a="function"==typeof s?s(e):Nn(e[s]),l=i[r=t[o+2]],c=t[o+3];"boolean"==typeof c?a.removeEventListener(t[o],l,c):c>=0?i[r=c]():i[r=-c].unsubscribe(),o+=2}else{const s=i[r=t[o+1]];t[o].call(s)}if(null!==i){for(let o=r+1;o<i.length;o++)i[o]();e[7]=null}}(n,e),1===e[1].type&&vn(e[11])&&e[11].destroy();const t=e[17];if(null!==t&&Ki(e[3])){t!==e[3]&&uC(t,e);const i=e[19];null!==i&&i.detachView(n)}}}function hC(n,e,t){return function(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[0];if(2&i.flags){const r=n.data[i.directiveStart].encapsulation;if(r===wr.None||r===wr.Emulated)return null}return Er(i,t)}(n,e.parent,t)}function Ua(n,e,t,i,r){vn(n)?n.insertBefore(e,t,i,r):e.insertBefore(t,i,r)}function pC(n,e,t){vn(n)?n.appendChild(e,t):e.appendChild(t)}function gC(n,e,t,i,r){null!==i?Ua(n,e,t,i,r):pC(n,e,t)}function cp(n,e){return vn(n)?n.parentNode(e):e.parentNode}let vC=function(n,e,t){return 40&n.type?Er(n,t):null};function up(n,e,t,i){const r=hC(n,i,e),o=e[11],a=function(n,e,t){return vC(n,e,t)}(i.parent||e[6],i,e);if(null!=r)if(Array.isArray(t))for(let l=0;l<t.length;l++)gC(o,r,t[l],a,!1);else gC(o,r,t,a,!1)}function dp(n,e){if(null!==e){const t=e.type;if(3&t)return Er(e,n);if(4&t)return Bv(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return dp(n,i);{const r=n[e.index];return Ki(r)?Bv(-1,r):Nn(r)}}if(32&t)return Ov(e,n)()||Nn(n[e.index]);{const i=bC(n,e);return null!==i?Array.isArray(i)?i[0]:dp(Ad(n[16]),i):dp(n,e.next)}}return null}function bC(n,e){return null!==e?n[16][6].projection[e.projection]:null}function Bv(n,e){const t=10+n+1;if(t<e.length){const i=e[t],r=i[1].firstChild;if(null!==r)return dp(i,r)}return e[7]}function Uv(n,e,t,i,r,o,s){for(;null!=t;){const a=i[t.index],l=t.type;if(s&&0===e&&(a&&Si(Nn(a),i),t.flags|=4),64!=(64&t.flags))if(8&l)Uv(n,e,t.child,i,r,o,!1),rc(e,n,r,a,o);else if(32&l){const c=Ov(t,i);let u;for(;u=c();)rc(e,n,r,u,o);rc(e,n,r,a,o)}else 16&l?wC(n,e,i,t,r,o):rc(e,n,r,a,o);t=s?t.projectionNext:t.next}}function Dd(n,e,t,i,r,o){Uv(t,i,n.firstChild,e,r,o,!1)}function wC(n,e,t,i,r,o){const s=t[16],l=s[6].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)rc(e,n,r,l[c],o);else Uv(n,e,l,s[3],r,o,!0)}function CC(n,e,t){vn(n)?n.setAttribute(e,"style",t):e.style.cssText=t}function Vv(n,e,t){vn(n)?""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t):e.className=t}function MC(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const o=e.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}t=r+1}}const EC="ng-template";function hL(n,e,t){let i=0;for(;i<n.length;){let r=n[i++];if(t&&"class"===r){if(r=n[i],-1!==MC(r.toLowerCase(),e,0))return!0}else if(1===r){for(;i<n.length&&"string"==typeof(r=n[i++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function SC(n){return 4===n.type&&n.value!==EC}function fL(n,e,t){return e===(4!==n.type||t?n.value:EC)}function pL(n,e,t){let i=4;const r=n.attrs||[],o=function(n){for(let e=0;e<n.length;e++)if(g1(n[e]))return e;return n.length}(r);let s=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!s)if(4&i){if(i=2|1&i,""!==l&&!fL(n,l,t)||""===l&&1===e.length){if(Vr(i))return!1;s=!0}}else{const c=8&i?l:e[++a];if(8&i&&null!==n.attrs){if(!hL(n.attrs,c,t)){if(Vr(i))return!1;s=!0}continue}const d=gL(8&i?"class":l,r,SC(n),t);if(-1===d){if(Vr(i))return!1;s=!0;continue}if(""!==c){let h;h=d>o?"":r[d+1].toLowerCase();const f=8&i?h:null;if(f&&-1!==MC(f,c,0)||2&i&&c!==h){if(Vr(i))return!1;s=!0}}}}else{if(!s&&!Vr(i)&&!Vr(l))return!1;if(s&&Vr(l))continue;s=!1,i=l|1&i}}return Vr(i)||s}function Vr(n){return 0==(1&n)}function gL(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let o=!1;for(;r<e.length;){const s=e[r];if(s===n)return r;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===s)break;if(0===s){r+=4;continue}}r+=o?1:2}return-1}return function(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function TC(n,e,t=!1){for(let i=0;i<e.length;i++)if(pL(n,e[i],t))return!0;return!1}function PC(n,e){return n?":not("+e.trim()+")":e}function bL(n){let e=n[0],t=1,i=2,r="",o=!1;for(;t<n.length;){let s=n[t];if("string"==typeof s)if(2&i){const a=n[++t];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+s:4&i&&(r+=" "+s);else""!==r&&!Vr(s)&&(e+=PC(o,r),r=""),i=s,o=o||!Vr(i);t++}return""!==r&&(e+=PC(o,r)),e}const at={};function T(n){AC(Lt(),pe(),Hi()+n,Hf())}function AC(n,e,t,i){if(!i)if(3==(3&e[2])){const o=n.preOrderCheckHooks;null!==o&&qf(e,o,t)}else{const o=n.preOrderHooks;null!==o&&Xf(e,o,0,t)}Fs(t)}function hp(n,e){return n<<17|e<<2}function Hr(n){return n>>17&32767}function Hv(n){return 2|n}function is(n){return(131068&n)>>2}function Gv(n,e){return-131069&n|e<<2}function jv(n){return 1|n}function UC(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const r=t[i],o=t[i+1];if(-1!==o){const s=n.data[o];rv(r),s.contentQueries(2,e[o],o)}}}function Od(n,e,t,i,r,o,s,a,l,c){const u=e.blueprint.slice();return u[0]=r,u[2]=140|i,i1(u),u[3]=u[15]=n,u[8]=t,u[10]=s||n&&n[10],u[11]=a||n&&n[11],u[12]=l||n&&n[12]||null,u[9]=c||n&&n[9]||null,u[6]=o,u[16]=2==e.type?n[16]:u,u}function oc(n,e,t,i,r){let o=n.data[e];if(null===o)o=function(n,e,t,i,r){const o=o1(),s=ev(),l=n.data[e]=function(n,e,t,i,r,o){return{type:t,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=l),null!==o&&(s?null==o.child&&null!==l.parent&&(o.child=l):null===o.next&&(o.next=l)),l}(n,e,t,i,r),it.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=t,o.value=i,o.attrs=r;const s=function(){const n=it.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return xo(o,!0),o}function sc(n,e,t,i){if(0===t)return-1;const r=e.length;for(let o=0;o<t;o++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function Id(n,e,t){jf(e);try{const i=n.viewQuery;null!==i&&c0(1,i,t);const r=n.template;null!==r&&VC(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&UC(n,e),n.staticViewQueries&&c0(2,n.viewQuery,t);const o=n.components;null!==o&&function(n,e){for(let t=0;t<e.length;t++)nk(n,e[t])}(e,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[2]&=-5,Wf()}}function ac(n,e,t,i){const r=e[2];if(256==(256&r))return;jf(e);const o=Hf();try{i1(e),function(n){it.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&VC(n,e,t,2,i);const s=3==(3&r);if(!o)if(s){const c=n.preOrderCheckHooks;null!==c&&qf(e,c,null)}else{const c=n.preOrderHooks;null!==c&&Xf(e,c,0,null),ov(e,0)}if(function(n){for(let e=Iv(n);null!==e;e=Rv(e)){if(!e[2])continue;const t=e[9];for(let i=0;i<t.length;i++){const r=t[i],o=r[3];0==(1024&r[2])&&K_(o,1),r[2]|=1024}}}(e),function(n){for(let e=Iv(n);null!==e;e=Rv(e))for(let t=10;t<e.length;t++){const i=e[t],r=i[1];Q_(i)&&ac(r,i,r.template,i[8])}}(e),null!==n.contentQueries&&UC(n,e),!o)if(s){const c=n.contentCheckHooks;null!==c&&qf(e,c)}else{const c=n.contentHooks;null!==c&&Xf(e,c,1),ov(e,1)}!function(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)Fs(~r);else{const o=r,s=t[++i],a=t[++i];c3(s,o),a(2,e[o])}}}finally{Fs(-1)}}(n,e);const a=n.components;null!==a&&function(n,e){for(let t=0;t<e.length;t++)tk(n,e[t])}(e,a);const l=n.viewQuery;if(null!==l&&c0(2,l,i),!o)if(s){const c=n.viewCheckHooks;null!==c&&qf(e,c)}else{const c=n.viewHooks;null!==c&&Xf(e,c,2),ov(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,K_(e[3],-1))}finally{Wf()}}function FL(n,e,t,i){const r=e[10],o=!Hf(),s=n1(e);try{o&&!s&&r.begin&&r.begin(),s&&Id(n,e,i),ac(n,e,t,i)}finally{o&&!s&&r.end&&r.end()}}function VC(n,e,t,i,r){const o=Hi(),s=2&i;try{Fs(-1),s&&e.length>20&&AC(n,e,20,Hf()),t(i,r)}finally{Fs(o)}}function HC(n,e,t){if(Vl(e)){const r=e.directiveEnd;for(let o=e.directiveStart;o<r;o++){const s=n.data[o];s.contentQueries&&s.contentQueries(1,t[o],o)}}}function e0(n,e,t){!r1()||(function(n,e,t,i){const r=t.directiveStart,o=t.directiveEnd;n.firstCreatePass||fd(t,e),Si(i,e);const s=t.initialInputs;for(let a=r;a<o;a++){const l=n.data[a],c=rr(l);c&&ZL(e,t,l);const u=pd(e,n,a,t);Si(u,e),null!==s&&JL(0,a-r,u,l,0,s),c&&(or(t.index,e)[8]=u)}}(n,e,t,Er(t,e)),128==(128&t.flags)&&function(n,e,t){const i=t.directiveStart,r=t.directiveEnd,s=t.index,a=it.lFrame.currentDirectiveIndex;try{Fs(s);for(let l=i;l<r;l++){const c=n.data[l],u=e[l];nv(l),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&ZC(c,u)}}finally{Fs(-1),nv(a)}}(n,e,t))}function t0(n,e,t=Er){const i=e.localNames;if(null!==i){let r=e.index+1;for(let o=0;o<i.length;o+=2){const s=i[o+1],a=-1===s?t(e,n):n[s];n[r++]=a}}}function GC(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=gp(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function gp(n,e,t,i,r,o,s,a,l,c){const u=20+i,d=u+r,h=function(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:at);return t}(u,d),f="function"==typeof c?c():c;return h[1]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function $C(n,e,t,i){const r=nM(e);null===t?r.push(i):(r.push(t),n.firstCreatePass&&iM(n).push(i,r.length-1))}function qC(n,e,t){for(let i in n)if(n.hasOwnProperty(i)){const r=n[i];(t=null===t?{}:t).hasOwnProperty(i)?t[i].push(e,r):t[i]=[e,r]}return t}function cr(n,e,t,i,r,o,s,a){const l=Er(e,t);let u,c=e.inputs;!a&&null!=c&&(u=c[i])?(sM(n,t,u,i,r),za(e)&&function(n,e){const t=or(e,n);16&t[2]||(t[2]|=64)}(t,e.index)):3&e.type&&(i=function(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=s?s(r,e.value||"",i):r,vn(o)?o.setProperty(l,i,r):av(i)||(l.setProperty?l.setProperty(i,r):l[i]=r))}function n0(n,e,t,i){let r=!1;if(r1()){const o=function(n,e,t){const i=n.directiveRegistry;let r=null;if(i)for(let o=0;o<i.length;o++){const s=i[o];TC(t,s.selectors,!1)&&(r||(r=[]),Kf(fd(t,e),n,s.type),rr(s)?(JC(n,t),r.unshift(s)):r.push(s))}return r}(n,e,t),s=null===i?null:{"":-1};if(null!==o){r=!0,QC(t,n.data.length,o.length);for(let u=0;u<o.length;u++){const d=o[u];d.providersResolver&&d.providersResolver(d)}let a=!1,l=!1,c=sc(n,e,o.length,null);for(let u=0;u<o.length;u++){const d=o[u];t.mergedAttrs=Zf(t.mergedAttrs,d.hostAttrs),KC(n,t,e,c,d),YL(c,d,s),null!==d.contentQueries&&(t.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(t.flags|=128);const h=d.type.prototype;!a&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!l&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),l=!0),c++}!function(n,e){const i=e.directiveEnd,r=n.data,o=e.attrs,s=[];let a=null,l=null;for(let c=e.directiveStart;c<i;c++){const u=r[c],d=u.inputs,h=null===o||SC(e)?null:QL(d,o);s.push(h),a=qC(d,c,a),l=qC(u.outputs,c,l)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=s,e.inputs=a,e.outputs=l}(n,t)}s&&function(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const o=t[e[r+1]];if(null==o)throw new Ni("301",`Export of name '${e[r+1]}' not found!`);i.push(e[r],o)}}}(t,i,s)}return t.mergedAttrs=Zf(t.mergedAttrs,t.attrs),r}function YC(n,e,t,i,r,o){const s=o.hostBindings;if(s){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const l=~e.index;(function(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=l&&a.push(l),a.push(i,r,s)}}function ZC(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function JC(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function YL(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;rr(e)&&(t[""]=n)}}function QC(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function KC(n,e,t,i,r){n.data[i]=r;const o=r.factory||(r.factory=E(r.type)),s=new dd(o,rr(r),null);n.blueprint[i]=s,t[i]=s,YC(n,e,0,i,sc(n,t,r.hostVars,at),r)}function ZL(n,e,t){const i=Er(e,n),r=GC(t),o=n[10],s=mp(n,Od(n,r,null,t.onPush?64:16,i,e,o,o.createRenderer(i,t),null,null));n[e.index]=s}function So(n,e,t,i,r,o){const s=Er(n,e);!function(n,e,t,i,r,o,s){if(null==o)vn(n)?n.removeAttribute(e,r,t):e.removeAttribute(r);else{const a=null==s?nt(o):s(o,i||"",r);vn(n)?n.setAttribute(e,r,a,t):t?e.setAttributeNS(t,r,a):e.setAttribute(r,a)}}(e[11],s,o,n.value,t,i,r)}function JL(n,e,t,i,r,o){const s=o[e];if(null!==s){const a=i.setInput;for(let l=0;l<s.length;){const c=s[l++],u=s[l++],d=s[l++];null!==a?i.setInput(t,d,c,u):t[u]=d}}}function QL(n,e){let t=null,i=0;for(;i<e.length;){const r=e[i];if(0!==r)if(5!==r){if("number"==typeof r)break;n.hasOwnProperty(r)&&(null===t&&(t=[]),t.push(r,n[r],e[i+1])),i+=2}else i+=2;else i+=4}return t}function eM(n,e,t,i){return new Array(n,!0,!1,e,null,0,i,t,null,null)}function tk(n,e){const t=or(e,n);if(Q_(t)){const i=t[1];80&t[2]?ac(i,t,i.template,t[8]):t[5]>0&&o0(t)}}function o0(n){for(let i=Iv(n);null!==i;i=Rv(i))for(let r=10;r<i.length;r++){const o=i[r];if(1024&o[2]){const s=o[1];ac(s,o,s.template,o[8])}else o[5]>0&&o0(o)}const t=n[1].components;if(null!==t)for(let i=0;i<t.length;i++){const r=or(t[i],n);Q_(r)&&r[5]>0&&o0(r)}}function nk(n,e){const t=or(e,n),i=t[1];(function(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(i,t),Id(i,t,t[8])}function mp(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function s0(n){for(;n;){n[2]|=64;const e=Ad(n);if(G_(n)&&!e)return n;n=e}return null}function l0(n,e,t){const i=e[10];i.begin&&i.begin();try{ac(n,e,n.template,t)}catch(r){throw oM(e,r),r}finally{i.end&&i.end()}}function tM(n){!function(n){for(let e=0;e<n.components.length;e++){const t=n.components[e],i=Sv(t),r=i[1];FL(r,i,r.template,t)}}(n[8])}function c0(n,e,t){rv(0),e(n,t)}const ak=(()=>Promise.resolve(null))();function nM(n){return n[7]||(n[7]=[])}function iM(n){return n.cleanup||(n.cleanup=[])}function oM(n,e){const t=n[9],i=t?t.get(nc,null):null;i&&i.handleError(e)}function sM(n,e,t,i,r){for(let o=0;o<t.length;){const s=t[o++],a=t[o++],l=e[s],c=n.data[s];null!==c.setInput?c.setInput(l,r,i,a):l[a]=r}}function rs(n,e,t){const i=Vf(e,n);!function(n,e,t){vn(n)?n.setValue(e,t):e.textContent=t}(n[11],i,t)}function _p(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?r=kl(r,a):2==o&&(i=kl(i,a+": "+e[++s]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}const u0=new gt("INJECTOR",-1);class aM{get(e,t=bd){if(t===bd){const i=new Error(`NullInjectorError: No provider for ${Tt(e)}!`);throw i.name="NullInjectorError",i}return t}}const d0=new gt("Set Injector scope."),Rd={},uk={};let h0;function lM(){return void 0===h0&&(h0=new aM),h0}function cM(n,e=null,t=null,i){const r=uM(n,e,t,i);return r._resolveInjectorDefTypes(),r}function uM(n,e=null,t=null,i){return new dk(n,t,e||lM(),i)}class dk{constructor(e,t,i,r=null){this.parent=i,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const o=[];t&&wo(t,a=>this.processProvider(a,e,t)),wo([e],a=>this.processInjectorType(a,[],o)),this.records.set(u0,lc(void 0,this));const s=this.records.get(d0);this.scope=null!=s?s.value:null,this.source=r||("object"==typeof e?null:Tt(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=bd,i=ot.Default){this.assertNotDestroyed();const r=I1(this),o=fo(void 0);try{if(!(i&ot.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=("function"==typeof(n=e)||"object"==typeof n&&n instanceof gt)&&ed(e);a=l&&this.injectableDefInScope(l)?lc(f0(e),Rd):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(i&ot.Self?lM():this.parent).get(e,t=i&ot.Optional&&t===bd?null:t)}catch(s){if("NullInjectorError"===s.name){if((s[ip]=s[ip]||[]).unshift(Tt(e)),r)throw s;return function(n,e,t,i){const r=n[ip];throw e[O1]&&r.unshift(e[O1]),n.message=function(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let r=Tt(e);if(Array.isArray(e))r=e.map(Tt).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Tt(a)))}r=`{${o.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(G3,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[ip]=null,n}(s,e,"R3InjectorError",this.source)}throw s}finally{fo(o),I1(r)}var n}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((i,r)=>e.push(Tt(r))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,i){if(!(e=ut(e)))return!1;let r=td(e);const o=null==r&&e.ngModule||void 0,s=void 0===o?e:o,a=-1!==i.indexOf(s);if(void 0!==o&&(r=td(o)),null==r)return!1;if(null!=r.imports&&!a){let u;i.push(s);try{wo(r.imports,d=>{this.processInjectorType(d,t,i)&&(void 0===u&&(u=[]),u.push(d))})}finally{}if(void 0!==u)for(let d=0;d<u.length;d++){const{ngModule:h,providers:f}=u[d];wo(f,m=>this.processProvider(m,h,f||Gt))}}this.injectorDefTypes.add(s);const l=E(s)||(()=>new s);this.records.set(s,lc(l,Rd));const c=r.providers;if(null!=c&&!a){const u=e;wo(c,d=>this.processProvider(d,u,c))}return void 0!==o&&void 0!==e.providers}processProvider(e,t,i){let r=cc(e=ut(e))?e:ut(e&&e.provide);const o=(n=e,hM(n)?lc(void 0,n.useValue):lc(dM(n),Rd));var n;if(cc(e)||!0!==e.multi)this.records.get(r);else{let s=this.records.get(r);s||(s=lc(void 0,Rd,!0),s.factory=()=>_v(s.multi),this.records.set(r,s)),r=e,s.multi.push(e)}this.records.set(r,o)}hydrate(e,t){return t.value===Rd&&(t.value=uk,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value;var n}injectableDefInScope(e){if(!e.providedIn)return!1;const t=ut(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function f0(n){const e=ed(n),t=null!==e?e.factory:E(n);if(null!==t)return t;if(n instanceof gt)throw new Error(`Token ${Tt(n)} is missing a \u0275prov definition.`);if(n instanceof Function)return function(n){const e=n.length;if(e>0){const i=function(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}(e,"?");throw new Error(`Can't resolve all parameters for ${Tt(n)}: (${i.join(", ")}).`)}const t=function(n){const e=n&&(n[Nl]||n[Of]);if(e){const t=function(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new Error("unreachable")}function dM(n,e,t){let i;if(cc(n)){const r=ut(n);return E(r)||f0(r)}if(hM(n))i=()=>ut(n.useValue);else if(function(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(..._v(n.deps||[]));else if(function(n){return!(!n||!n.useExisting)}(n))i=()=>Le(ut(n.useExisting));else{const r=ut(n&&(n.useClass||n.provide));if(!function(n){return!!n.deps}(n))return E(r)||f0(r);i=()=>new r(..._v(n.deps))}return i}function lc(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function hM(n){return null!==n&&"object"==typeof n&&W3 in n}function cc(n){return"function"==typeof n}let gi=(()=>{class n{static create(t,i){var r;if(Array.isArray(t))return cM({name:""},i,t,"");{const o=null!=(r=t.name)?r:"";return cM({name:o},t.parent,t.providers,o)}}}return n.THROW_IF_NOT_FOUND=bd,n.NULL=new aM,n.\u0275prov=We({token:n,providedIn:"any",factory:()=>Le(u0)}),n.__NG_ELEMENT_ID__=-1,n})();function Tk(n,e){$f(Sv(n)[1],$n())}function en(n){let e=function(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(rr(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");r=e.\u0275dir}if(r){if(t){i.push(r);const s=n;s.inputs=m0(n.inputs),s.declaredInputs=m0(n.declaredInputs),s.outputs=m0(n.outputs);const a=r.hostBindings;a&&Ok(n,a);const l=r.viewQuery,c=r.contentQueries;if(l&&Ak(n,l),c&&Dk(n,c),Ju(n.inputs,r.inputs),Ju(n.declaredInputs,r.declaredInputs),Ju(n.outputs,r.outputs),rr(r)&&r.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const o=r.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(n),a===en&&(t=!1)}}e=Object.getPrototypeOf(e)}!function(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Zf(r.hostAttrs,t=Zf(t,r.hostAttrs))}}(i)}function m0(n){return n===go?{}:n===Gt?[]:n}function Ak(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function Dk(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,o)=>{e(i,r,o),t(i,r,o)}:e}function Ok(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}let vp=null;function uc(){if(!vp){const n=Ht.Symbol;if(n&&n.iterator)vp=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const i=e[t];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(vp=i)}}}return vp}function Ld(n){return!!_0(n)&&(Array.isArray(n)||!(n instanceof Map)&&uc()in n)}function _0(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Ti(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Po(n,e,t,i){const r=pe();return Ti(r,jl(),e)&&(Lt(),So(yn(),r,n,e,t,i)),Po}function hc(n,e,t,i){return Ti(n,jl(),t)?e+nt(t)+i:at}function fc(n,e,t,i,r,o){const a=function(n,e,t,i){const r=Ti(n,e,t);return Ti(n,e+1,i)||r}(n,it.lFrame.bindingIndex,t,r);return ns(2),a?e+nt(t)+i+nt(r)+o:at}function V(n,e,t,i,r,o,s,a){const l=pe(),c=Lt(),u=n+20,d=c.firstCreatePass?function(n,e,t,i,r,o,s,a,l){const c=e.consts,u=oc(e,n,4,s||null,ks(c,a));n0(e,t,u,ks(c,l)),$f(e,u);const d=u.tViews=gp(2,u,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,t,i,r,o,s):c.data[u];xo(d,!1);const h=l[11].createComment("");up(c,l,h,d),Si(h,l),mp(l,l[u]=eM(h,l,h,d)),Hl(d)&&e0(c,l,d),null!=s&&t0(l,d,a)}function G(n,e=ot.Default){const t=pe();return null===t?Le(n,e):w1($n(),t,ut(n),e)}function w0(){throw new Error("invalid")}function R(n,e,t){const i=pe();return Ti(i,jl(),e)&&cr(Lt(),yn(),i,n,e,i[11],t,!1),R}function C0(n,e,t,i,r){const s=r?"class":"style";sM(n,t,e.inputs[s],s,i)}function p(n,e,t,i){const r=pe(),o=Lt(),s=20+n,a=r[11],l=r[s]=kv(a,e,it.lFrame.currentNamespace),c=o.firstCreatePass?function(n,e,t,i,r,o,s){const a=e.consts,c=oc(e,n,2,r,ks(a,o));return n0(e,t,c,ks(a,s)),null!==c.attrs&&_p(c,c.attrs,!1),null!==c.mergedAttrs&&_p(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(s,o,r,0,e,t,i):o.data[s];xo(c,!0);const u=c.mergedAttrs;null!==u&&Yf(a,l,u);const d=c.classes;null!==d&&Vv(a,l,d);const h=c.styles;null!==h&&CC(a,l,h),64!=(64&c.flags)&&up(o,r,l,c),0===it.lFrame.elementDepthCount&&Si(l,r),it.lFrame.elementDepthCount++,Hl(c)&&(e0(o,r,c),HC(o,c,r)),null!==i&&t0(r,c)}function g(){let n=$n();ev()?tv():(n=n.parent,xo(n,!1));const e=n;it.lFrame.elementDepthCount--;const t=Lt();t.firstCreatePass&&($f(t,n),Vl(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function(n){return 0!=(16&n.flags)}(e)&&C0(t,e,pe(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(n){return 0!=(32&n.flags)}(e)&&C0(t,e,pe(),e.stylesWithoutHost,!1)}function U(n,e,t,i){p(n,e,t,i),g()}function $e(){return pe()}function Fd(n){return!!n&&"function"==typeof n.then}const S0=function(n){return!!n&&"function"==typeof n.subscribe};function J(n,e,t,i){const r=pe(),o=Lt(),s=$n();return function(n,e,t,i,r,o,s,a){const l=Hl(i),u=n.firstCreatePass&&iM(n),d=e[8],h=nM(e);let f=!0;if(3&i.type||a){const w=Er(i,e),y=a?a(w):w,_=h.length,M=a?C=>a(Nn(C[i.index])):i.index;if(vn(t)){let C=null;if(!a&&l&&(C=function(n,e,t,i){const r=n.cleanup;if(null!=r)for(let o=0;o<r.length-1;o+=2){const s=r[o];if(s===t&&r[o+1]===i){const a=e[7],l=r[o+2];return a.length>l?a[l]:null}"string"==typeof s&&(o+=2)}return null}(n,e,r,i.index)),null!==C)(C.__ngLastListenerFn__||C).__ngNextListenerFn__=o,C.__ngLastListenerFn__=o,f=!1;else{o=T0(i,e,d,o,!1);const A=t.listen(y,r,o);h.push(o,A),u&&u.push(r,M,_,_+1)}}else o=T0(i,e,d,o,!0),y.addEventListener(r,o,s),h.push(o),u&&u.push(r,M,_,s)}else o=T0(i,e,d,o,!1);const m=i.outputs;let v;if(f&&null!==m&&(v=m[r])){const w=v.length;if(w)for(let y=0;y<w;y+=2){const L=e[v[y]][v[y+1]].subscribe(o),P=h.length;h.push(o,L),u&&u.push(r,i.index,P,-(P+1))}}}(o,r,r[11],s,n,e,!!t,i),J}function XM(n,e,t,i){try{return!1!==t(i)}catch(r){return oM(n,r),!1}}function T0(n,e,t,i,r){return function o(s){if(s===Function)return i;const a=2&n.flags?or(n.index,e):e;0==(32&e[2])&&s0(a);let l=XM(e,0,i,s),c=o.__ngNextListenerFn__;for(;c;)l=XM(e,0,c,s)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(s.preventDefault(),s.returnValue=!1),l}}function j(n=1){return function(n){return(it.lFrame.contextLView=function(n,e){for(;n>0;)e=e[15],n--;return e}(n,it.lFrame.contextLView))[8]}(n)}function xp(n,e,t){return hn(n,"",e,"",t),xp}function hn(n,e,t,i,r){const o=pe(),s=hc(o,e,t,i);return s!==at&&cr(Lt(),yn(),o,n,s,o[11],r,!1),hn}function iE(n,e,t,i,r){const o=n[t+1],s=null===e;let a=i?Hr(o):is(o),l=!1;for(;0!==a&&(!1===l||s);){const u=n[a+1];pF(n[a],e)&&(l=!0,n[a+1]=i?jv(u):Hv(u)),a=i?Hr(u):is(u)}l&&(n[t+1]=i?Hv(o):jv(o))}function pF(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Ql(n,e)>=0}function os(n,e,t){return jr(n,e,t,!1),os}function wp(n,e){return jr(n,e,null,!0),wp}function jr(n,e,t,i){const r=pe(),o=Lt(),s=ns(2);o.firstUpdatePass&&function(n,e,t,i){const r=n.data;if(null===r[t+1]){const o=r[Hi()],s=function(n,e){return e>=n.expandoStartIndex}(n,t);(function(n,e){return 0!=(n.flags&(e?16:32))})(o,i)&&null===e&&!s&&(e=!1),e=function(n,e,t,i){const r=function(n){const e=it.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let o=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=Nd(t=P0(null,n,e,t,i),e.attrs,i),o=null);else{const s=e.directiveStylingLast;if(-1===s||n[s]!==r)if(t=P0(r,n,e,t,i),null===o){let l=function(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==is(i))return n[Hr(i)]}(n,e,i);void 0!==l&&Array.isArray(l)&&(l=P0(null,n,e,l[1],i),l=Nd(l,e.attrs,i),function(n,e,t,i){n[Hr(t?e.classBindings:e.styleBindings)]=i}(n,e,i,l))}else o=function(n,e,t){let i;const r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++)i=Nd(i,n[o].hostAttrs,t);return Nd(i,e.attrs,t)}(n,e,i)}return void 0!==o&&(i?e.residualClasses=o:e.residualStyles=o),t}(r,o,e,i),function(n,e,t,i,r,o){let s=o?e.classBindings:e.styleBindings,a=Hr(s),l=is(s);n[i]=t;let u,c=!1;if(Array.isArray(t)){const d=t;u=d[1],(null===u||Ql(d,u)>0)&&(c=!0)}else u=t;if(r)if(0!==l){const h=Hr(n[a+1]);n[i+1]=hp(h,a),0!==h&&(n[h+1]=Gv(n[h+1],i)),n[a+1]=function(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=hp(a,0),0!==a&&(n[a+1]=Gv(n[a+1],i)),a=i;else n[i+1]=hp(l,0),0===a?a=i:n[l+1]=Gv(n[l+1],i),l=i;c&&(n[i+1]=Hv(n[i+1])),iE(n,u,i,!0),iE(n,u,i,!1),function(n,e,t,i,r){const o=r?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof e&&Ql(o,e)>=0&&(t[i+1]=jv(t[i+1]))}(e,u,n,i,o),s=hp(a,l),o?e.classBindings=s:e.styleBindings=s}(r,o,e,t,s,i)}}(o,n,s,i),e!==at&&Ti(r,s,e)&&function(n,e,t,i,r,o,s,a){if(!(3&e.type))return;const l=n.data,c=l[a+1];Cp(function(n){return 1==(1&n)}(c)?pE(l,e,t,r,is(c),s):void 0)||(Cp(o)||function(n){return 2==(2&n)}(c)&&(o=pE(l,null,t,r,a,s)),function(n,e,t,i,r){const o=vn(n);if(e)r?o?n.addClass(t,i):t.classList.add(i):o?n.removeClass(t,i):t.classList.remove(i);else{let s=-1===i.indexOf("-")?void 0:lr.DashCase;if(null==r)o?n.removeStyle(t,i,s):t.style.removeProperty(i);else{const a="string"==typeof r&&r.endsWith("!important");a&&(r=r.slice(0,-10),s|=lr.Important),o?n.setStyle(t,i,r,s):t.style.setProperty(i,r,a?"important":"")}}}(i,s,Vf(Hi(),t),r,o))}(o,o.data[Hi()],r,r[11],n,r[s+1]=function(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Tt(zs(n)))),n}(e,t),i,s)}function P0(n,e,t,i,r){let o=null;const s=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<s&&(o=e[a],i=Nd(i,o.hostAttrs,r),o!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function Nd(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?r=s:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),ar(n,s,!!t||e[++o]))}return void 0===n?null:n}function pE(n,e,t,i,r,o){const s=null===e;let a;for(;r>0;){const l=n[r],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=t[r+1];h===at&&(h=d?Gt:void 0);let f=d?pv(h,i):u===i?h:void 0;if(c&&!Cp(f)&&(f=pv(l,i)),Cp(f)&&(a=f,s))return a;const m=n[r+1];r=s?Hr(m):is(m)}if(null!==e){let l=o?e.residualClasses:e.residualStyles;null!=l&&(a=pv(l,i))}return a}function Cp(n){return void 0!==n}function S(n,e=""){const t=pe(),i=Lt(),r=n+20,o=i.firstCreatePass?oc(i,r,1,e,null):i.data[r],s=t[r]=function(n,e){return vn(n)?n.createText(e):n.createTextNode(e)}(t[11],e);up(i,t,s,o),xo(o,!1)}function _e(n){return ur("",n,""),_e}function ur(n,e,t){const i=pe(),r=hc(i,n,e,t);return r!==at&&rs(i,Hi(),r),ur}function Mp(n,e,t,i,r){const o=pe(),s=fc(o,n,e,t,i,r);return s!==at&&rs(o,Hi(),s),Mp}const Ha=void 0;var YF=["en",[["a","p"],["AM","PM"],Ha],[["AM","PM"],Ha,Ha],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ha,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ha,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ha,"{1} 'at' {0}",Ha],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(n){const t=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===i?1:5}];let wc={};function kE(n){return n in wc||(wc[n]=Ht.ng&&Ht.ng.common&&Ht.ng.common.locales&&Ht.ng.common.locales[n]),wc[n]}var De=(()=>((De=De||{})[De.LocaleId=0]="LocaleId",De[De.DayPeriodsFormat=1]="DayPeriodsFormat",De[De.DayPeriodsStandalone=2]="DayPeriodsStandalone",De[De.DaysFormat=3]="DaysFormat",De[De.DaysStandalone=4]="DaysStandalone",De[De.MonthsFormat=5]="MonthsFormat",De[De.MonthsStandalone=6]="MonthsStandalone",De[De.Eras=7]="Eras",De[De.FirstDayOfWeek=8]="FirstDayOfWeek",De[De.WeekendRange=9]="WeekendRange",De[De.DateFormat=10]="DateFormat",De[De.TimeFormat=11]="TimeFormat",De[De.DateTimeFormat=12]="DateTimeFormat",De[De.NumberSymbols=13]="NumberSymbols",De[De.NumberFormats=14]="NumberFormats",De[De.CurrencyCode=15]="CurrencyCode",De[De.CurrencySymbol=16]="CurrencySymbol",De[De.CurrencyName=17]="CurrencyName",De[De.Currencies=18]="Currencies",De[De.Directionality=19]="Directionality",De[De.PluralCase=20]="PluralCase",De[De.ExtraData=21]="ExtraData",De))();const Ep="en-US";let FE=Ep;function O0(n,e,t,i,r){if(n=ut(n),Array.isArray(n))for(let o=0;o<n.length;o++)O0(n[o],e,t,i,r);else{const o=Lt(),s=pe();let a=cc(n)?n:ut(n.provide),l=dM(n);const c=$n(),u=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(cc(n)||!n.multi){const f=new dd(l,r,G),m=R0(a,e,r?u:u+h,d);-1===m?(Kf(fd(c,s),o,a),I0(o,n,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(f),s.push(f)):(t[m]=f,s[m]=f)}else{const f=R0(a,e,u+h,d),m=R0(a,e,u,u+h),v=f>=0&&t[f],w=m>=0&&t[m];if(r&&!w||!r&&!v){Kf(fd(c,s),o,a);const y=function(n,e,t,i,r){const o=new dd(n,t,G);return o.multi=[],o.index=e,o.componentProviders=0,sS(o,r,i&&!t),o}(r?qN:$N,t.length,r,i,l);!r&&w&&(t[m].providerFactory=y),I0(o,n,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(y),s.push(y)}else I0(o,n,f>-1?f:m,sS(t[r?m:f],l,!r&&i));!r&&i&&w&&t[m].componentProviders++}}}function I0(n,e,t,i){const r=cc(e),o=function(n){return!!n.useClass}(e);if(r||o){const l=(o?ut(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const u=c.indexOf(t);-1===u?c.push(t,[i,l]):c[u+1].push(i,l)}else c.push(t,l)}}}function sS(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function R0(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function $N(n,e,t,i){return L0(this.multi,[])}function qN(n,e,t,i){const r=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=pd(t,t[1],this.providerFactory.index,i);o=a.slice(0,s),L0(r,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],L0(r,o);return o}function L0(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function cn(n,e=[]){return t=>{t.providersResolver=(i,r)=>function(n,e,t){const i=Lt();if(i.firstCreatePass){const r=rr(n);O0(t,i.data,i.blueprint,r,!0),O0(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class aS{}class JN{resolveComponentFactory(e){throw function(n){const e=Error(`No component factory found for ${Tt(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let Mc=(()=>{class n{}return n.NULL=new JN,n})();function QN(){return Ec($n(),pe())}function Ec(n,e){return new er(Er(n,e))}let er=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=QN,n})();function KN(n){return n instanceof er?n.nativeElement:n}class cS{}let Oo=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function(){const n=pe(),t=or($n().index,n);return function(n){return n[11]}(Cr(t)?t:n)}(),n})(),nz=(()=>{class n{}return n.\u0275prov=We({token:n,providedIn:"root",factory:()=>null}),n})();class Hd{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const iz=new Hd("13.0.3"),k0={};function Dp(n,e,t,i,r=!1){for(;null!==t;){const o=e[t.index];if(null!==o&&i.push(Nn(o)),Ki(o))for(let a=10;a<o.length;a++){const l=o[a],c=l[1].firstChild;null!==c&&Dp(l[1],l,c,i)}const s=t.type;if(8&s)Dp(n,e,t.child,i);else if(32&s){const a=Ov(t,e);let l;for(;l=a();)i.push(l)}else if(16&s){const a=bC(e,t);if(Array.isArray(a))i.push(...a);else{const l=Ad(e[16]);Dp(l[1],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}class Gd{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return Dp(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Ki(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(Fv(e,i),tp(t,i))}this._attachedToViewContainer=!1}dC(this._lView[1],this._lView)}onDestroy(e){$C(this._lView[1],this._lView,null,e)}markForCheck(){s0(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){l0(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(n,e,t){Gf(!0);try{l0(n,e,t)}finally{Gf(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var e;this._appRef=null,Dd(this._lView[1],e=this._lView,e[11],2,null,null)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class rz extends Gd{constructor(e){super(e),this._view=e}detectChanges(){tM(this._view)}checkNoChanges(){!function(n){Gf(!0);try{tM(n)}finally{Gf(!1)}}(this._view)}get context(){return null}}class uS extends Mc{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=oi(e);return new F0(t,this.ngModule)}}function dS(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}const sz=new gt("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>nC});class F0 extends aS{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=e.selectors.map(bL).join(","),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return dS(this.componentDef.inputs)}get outputs(){return dS(this.componentDef.outputs)}create(e,t,i,r){const o=(r=r||this.ngModule)?function(n,e){return{get:(t,i,r)=>{const o=n.get(t,k0,r);return o!==k0||i===k0?o:e.get(t,i,r)}}}(e,r.injector):e,s=o.get(cS,t1),a=o.get(nz,null),l=s.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=i?function(n,e,t){if(vn(n))return n.selectRootElement(e,t===wr.ShadowDom);let i="string"==typeof e?n.querySelector(e):e;return i.textContent="",i}(l,i,this.componentDef.encapsulation):kv(s.createRenderer(null,this.componentDef),c,function(n){const e=n.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(c)),d=this.componentDef.onPush?576:528,h=function(n,e){return{components:[],scheduler:n||nC,clean:ak,playerHandler:e||null,flags:0}}(),f=gp(0,null,null,1,0,null,null,null,null,null),m=Od(null,f,h,d,null,null,s,l,a,o);let v,w;jf(m);try{const y=function(n,e,t,i,r,o){const s=t[1];t[20]=n;const l=oc(s,20,2,"#host",null),c=l.mergedAttrs=e.hostAttrs;null!==c&&(_p(l,c,!0),null!==n&&(Yf(r,n,c),null!==l.classes&&Vv(r,n,l.classes),null!==l.styles&&CC(r,n,l.styles)));const u=i.createRenderer(n,e),d=Od(t,GC(e),null,e.onPush?64:16,t[20],l,i,u,o||null,null);return s.firstCreatePass&&(Kf(fd(l,t),s,e.type),JC(s,l),QC(l,t.length,1)),mp(t,d),t[20]=d}(u,this.componentDef,m,s,l);if(u)if(i)Yf(l,u,["ng-version",iz.full]);else{const{attrs:_,classes:M}=function(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let o=n[i];if("string"==typeof o)2===r?""!==o&&e.push(o,n[++i]):8===r&&t.push(o);else{if(!Vr(r))break;r=o}i++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);_&&Yf(l,u,_),M&&M.length>0&&Vv(l,u,M.join(" "))}if(w=J_(f,20),void 0!==t){const _=w.projection=[];for(let M=0;M<this.ngContentSelectors.length;M++){const C=t[M];_.push(null!=C?Array.from(C):null)}}v=function(n,e,t,i,r){const o=t[1],s=function(n,e,t){const i=$n();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),KC(n,i,e,sc(n,e,1,null),t));const r=pd(e,n,i.directiveStart,i);Si(r,e);const o=Er(i,e);return o&&Si(o,e),r}(o,t,e);if(i.components.push(s),n[8]=s,r&&r.forEach(l=>l(s,e)),e.contentQueries){const l=$n();e.contentQueries(1,s,l.directiveStart)}const a=$n();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(Fs(a.index),YC(t[1],a,0,a.directiveStart,a.directiveEnd,e),ZC(e,s)),s}(y,this.componentDef,m,h,[Tk]),Id(f,m,null)}finally{Wf()}return new cz(this.componentType,v,Ec(w,m),m,w)}}class cz extends class{}{constructor(e,t,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.instance=t,this.hostView=this.changeDetectorRef=new rz(r),this.componentType=e}get injector(){return new ql(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}class ss{}class hS{}const Sc=new Map;class gS extends ss{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new uS(this);const i=Ji(e);this._bootstrapComponents=Eo(i.bootstrap),this._r3Injector=uM(e,t,[{provide:ss,useValue:this},{provide:Mc,useValue:this.componentFactoryResolver}],Tt(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=gi.THROW_IF_NOT_FOUND,i=ot.Default){return e===gi||e===ss||e===u0?this:this._r3Injector.get(e,t,i)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class N0 extends hS{constructor(e){super(),this.moduleType=e,null!==Ji(e)&&function(n){const e=new Set;!function t(i){const r=Ji(i,!0),o=r.id;null!==o&&(function(n,e,t){if(e&&e!==t)throw new Error(`Duplicate module registered for ${n} - ${Tt(e)} vs ${Tt(e.name)}`)}(o,Sc.get(o),i),Sc.set(o,i));const s=Eo(r.imports);for(const a of s)e.has(a)||(e.add(a),t(a))}(n)}(e)}create(e){return new gS(this.moduleType,e)}}function z0(n){return e=>{setTimeout(n,void 0,e)}}const It=class extends vr{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){var l,c,u;let r=e,o=t||(()=>null),s=i;if(e&&"object"==typeof e){const d=e;r=null==(l=d.next)?void 0:l.bind(d),o=null==(c=d.error)?void 0:c.bind(d),s=null==(u=d.complete)?void 0:u.bind(d)}this.__isAsync&&(o=z0(o),r&&(r=z0(r)),s&&(s=z0(s)));const a=super.subscribe({next:r,error:o,complete:s});return e instanceof Ri&&e.add(a),a}};function Dz(){return this._results[uc()]()}class B0{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=uc(),i=B0.prototype;i[t]||(i[t]=Dz)}get changes(){return this._changes||(this._changes=new It)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=Sr(e);(this._changesDetected=!function(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=e[i];if(t&&(r=t(r),o=t(o)),o!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let as=(()=>{class n{}return n.__NG_ELEMENT_ID__=Rz,n})();const Oz=as,Iz=class extends Oz{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}createEmbeddedView(e){const t=this._declarationTContainer.tViews,i=Od(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);i[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(i[19]=o.createEmbeddedView(t)),Id(t,i,e),new Gd(i)}};function Rz(){return Op($n(),pe())}function Op(n,e){return 4&n.type?new Iz(e,n,Ec(n,e)):null}let $r=(()=>{class n{}return n.__NG_ELEMENT_ID__=Lz,n})();function Lz(){return CS($n(),pe())}const kz=$r,xS=class extends kz{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Ec(this._hostTNode,this._hostLView)}get injector(){return new ql(this._hostTNode,this._hostLView)}get parentInjector(){const e=Qf(this._hostTNode,this._hostLView);if(_1(e)){const t=$l(e,this._hostLView),i=Wl(e);return new ql(t[1].data[i+8],t)}return new ql(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=wS(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,i){const r=e.createEmbeddedView(t||{});return this.insert(r,i),r}createComponent(e,t,i,r,o){const s=e&&!("function"==typeof e);let a;if(s)a=t;else{const d=t||{};a=d.index,i=d.injector,r=d.projectableNodes,o=d.ngModuleRef}const l=s?e:new F0(oi(e)),c=i||this.parentInjector;if(!o&&null==l.ngModule&&c){const d=c.get(ss,null);d&&(o=d)}const u=l.create(c,r,void 0,o);return this.insert(u.hostView,a),u}insert(e,t){const i=e._lView,r=i[1];if(Ki(i[3])){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=i[3],h=new xS(d,d[6],d[3]);h.detach(h.indexOf(e))}}const o=this._adjustIndex(t),s=this._lContainer;!function(n,e,t,i){const r=10+i,o=t.length;i>0&&(t[r-1][4]=e),i<o-10?(e[4]=t[r],S1(t,10+i,e)):(t.push(e),e[4]=null),e[3]=t;const s=e[17];null!==s&&t!==s&&function(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=128}(r,i,s,o);const a=Bv(o,s),l=i[11],c=cp(l,s[7]);return null!==c&&function(n,e,t,i,r,o){i[0]=r,i[6]=e,Dd(n,i,t,1,r,o)}(r,s[6],l,i,c,a),e.attachToViewContainerRef(),S1(U0(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=wS(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=Fv(this._lContainer,t);i&&(tp(U0(this._lContainer),t),dC(i[1],i))}detach(e){const t=this._adjustIndex(e,-1),i=Fv(this._lContainer,t);return i&&null!=tp(U0(this._lContainer),t)?new Gd(i):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function wS(n){return n[8]}function U0(n){return n[8]||(n[8]=[])}function CS(n,e){let t;const i=e[n.index];if(Ki(i))t=i;else{let r;if(8&n.type)r=Nn(i);else{const o=e[11];r=o.createComment("");const s=Er(n,e);Ua(o,cp(o,s),r,function(n,e){return vn(n)?n.nextSibling(e):e.nextSibling}(o,s),!1)}e[n.index]=t=eM(i,e,r,n),mp(e,t)}return new xS(t,n,e)}class V0{constructor(e){this.queryList=e,this.matches=null}clone(){return new V0(this.queryList)}setDirty(){this.queryList.setDirty()}}class H0{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let o=0;o<i;o++){const s=t.getByIndex(o);r.push(this.queries[s.indexInDeclarationView].clone())}return new H0(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==PS(e,t).matches&&this.queries[t].setDirty()}}class MS{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class G0{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,null!==t?t.push(o):t=[o])}return null!==t?new G0(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class j0{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new j0(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const o=i[r];this.matchTNodeWithReadOption(e,t,zz(t,o)),this.matchTNodeWithReadOption(e,t,ep(t,e,o,!1,!1))}else i===as?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,ep(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===er||r===$r||r===as&&4&t.type)this.addMatch(t.index,-2);else{const o=ep(t,e,r,!1,!1);null!==o&&this.addMatch(t.index,o)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function zz(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function Uz(n,e,t,i){return-1===t?function(n,e){return 11&n.type?Ec(n,e):4&n.type?Op(n,e):null}(e,n):-2===t?function(n,e,t){return t===er?Ec(e,n):t===as?Op(e,n):t===$r?CS(e,n):void 0}(n,e,i):pd(n,n[1],t,e)}function ES(n,e,t,i){const r=e[19].queries[i];if(null===r.matches){const o=n.data,s=t.matches,a=[];for(let l=0;l<s.length;l+=2){const c=s[l];a.push(c<0?null:Uz(e,o[c],s[l+1],t.metadata.read))}r.matches=a}return r.matches}function W0(n,e,t,i){const r=n.queries.getByIndex(t),o=r.matches;if(null!==o){const s=ES(n,e,r,t);for(let a=0;a<o.length;a+=2){const l=o[a];if(l>0)i.push(s[a/2]);else{const c=o[a+1],u=e[-l];for(let d=10;d<u.length;d++){const h=u[d];h[17]===h[3]&&W0(h[1],h,c,i)}if(null!==u[9]){const d=u[9];for(let h=0;h<d.length;h++){const f=d[h];W0(f[1],f,c,i)}}}}}return i}function qr(n){const e=pe(),t=Lt(),i=l1();rv(i+1);const r=PS(t,i);if(n.dirty&&n1(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const o=r.crossesNgTemplate?W0(t,e,i,[]):ES(t,e,r,i);n.reset(o,KN),n.notifyOnChanges()}return!0}return!1}function ls(n,e,t){const i=Lt();i.firstCreatePass&&(function(n,e,t){null===n.queries&&(n.queries=new G0),n.queries.track(new j0(e,t))}(i,new MS(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),function(n,e,t){const i=new B0(4==(4&t));$C(n,e,i,i.destroy),null===e[19]&&(e[19]=new H0),e[19].queries.push(new V0(i))}(i,pe(),e)}function Xr(){return n=pe(),e=l1(),n[19].queries[e].queryList;var n,e}function PS(n,e){return n.queries.getByIndex(e)}function AS(n,e){return Op(n,e)}function Lp(...n){}const kp=new gt("Application Initializer");let Pc=(()=>{class n{constructor(t){this.appInits=t,this.resolve=Lp,this.reject=Lp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const t=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const o=this.appInits[r]();if(Fd(o))t.push(o);else if(S0(o)){const s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});t.push(s)}}Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(Le(kp,8))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();const qd=new gt("AppId"),lB={provide:qd,useFactory:function(){return`${Q0()}${Q0()}${Q0()}`},deps:[]};function Q0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const qS=new gt("Platform Initializer"),Fp=new gt("Platform ID"),XS=new gt("appBootstrapListener");let YS=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();const Vs=new gt("LocaleId"),ZS=new gt("DefaultCurrencyCode");class cB{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let Np=(()=>{class n{compileModuleSync(t){return new N0(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),o=Eo(Ji(t).declarations).reduce((s,a)=>{const l=oi(a);return l&&s.push(new F0(l)),s},[]);return new cB(i,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();const dB=(()=>Promise.resolve(0))();function K0(n){"undefined"==typeof Zone?dB.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Yn{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new It(!1),this.onMicrotaskEmpty=new It(!1),this.onStable=new It(!1),this.onError=new It(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let n=Ht.requestAnimationFrame,e=Ht.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(n){const e=()=>{!function(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Ht,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,ty(n),n.isCheckStableRunning=!0,ey(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),ty(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,o,s,a)=>{try{return JS(n),t.invokeTask(r,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),QS(n)}},onInvoke:(t,i,r,o,s,a,l)=>{try{return JS(n),t.invoke(r,o,s,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),QS(n)}},onHasTask:(t,i,r,o)=>{t.hasTask(r,o),i===r&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,ty(n),ey(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,i,r,o)=>(t.handleError(r,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Yn.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Yn.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,fB,Lp,Lp);try{return o.runTask(s,t,i)}finally{o.cancelTask(s)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const fB={};function ey(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function ty(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function JS(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function QS(n){n._nesting--,ey(n)}class mB{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new It,this.onMicrotaskEmpty=new It,this.onStable=new It,this.onError=new It}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}let ny=(()=>{class n{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Yn.assertNotInAngularZone(),K0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())K0(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,i,r){return[]}}return n.\u0275fac=function(t){return new(t||n)(Le(Yn))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})(),KS=(()=>{class n{constructor(){this._applications=new Map,iy.addToWindow(this)}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return iy.findTestabilityInTree(this,t,i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();class _B{addToWindow(e){}findTestabilityInTree(e,t,i){return null}}let Yr,iy=new _B;const eT=new gt("AllowMultipleToken");class tT{constructor(e,t){this.name=e,this.token=t}}function nT(n,e,t=[]){const i=`Platform: ${e}`,r=new gt(i);return(o=[])=>{let s=iT();if(!s||s.injector.get(eT,!1))if(n)n(t.concat(o).concat({provide:r,useValue:!0}));else{const a=t.concat(o).concat({provide:r,useValue:!0},{provide:d0,useValue:"platform"});!function(n){if(Yr&&!Yr.destroyed&&!Yr.injector.get(eT,!1))throw new Ni("400","");Yr=n.get(rT);const e=n.get(qS,null);e&&e.forEach(t=>t())}(gi.create({providers:a,name:i}))}return function(n){const e=iT();if(!e)throw new Ni("401","");return e}()}}function iT(){return Yr&&!Yr.destroyed?Yr:null}let rT=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const a=function(n,e){let t;return t="noop"===n?new mB:("zone.js"===n?void 0:n)||new Yn({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),t}(i?i.ngZone:void 0,{ngZoneEventCoalescing:i&&i.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:i&&i.ngZoneRunCoalescing||!1}),l=[{provide:Yn,useValue:a}];return a.run(()=>{const c=gi.create({providers:l,parent:this.injector,name:t.moduleType.name}),u=t.create(c),d=u.injector.get(nc,null);if(!d)throw new Ni("402","");return a.runOutsideAngular(()=>{const h=a.onError.subscribe({next:f=>{d.handleError(f)}});u.onDestroy(()=>{ry(this._modules,u),h.unsubscribe()})}),function(n,e,t){try{const i=t();return Fd(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(d,a,()=>{const h=u.injector.get(Pc);return h.runInitializers(),h.donePromise.then(()=>(function(n){zi(n,"Expected localeId to be defined"),"string"==typeof n&&(FE=n.toLowerCase().replace(/_/g,"-"))}(u.injector.get(Vs,Ep)||Ep),this._moduleDoBootstrap(u),u))})})}bootstrapModule(t,i=[]){const r=oT({},i);return function(n,e,t){const i=new N0(t);return Promise.resolve(i)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,r))}_moduleDoBootstrap(t){const i=t.injector.get(Xd);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new Ni("403","");t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ni("404","");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(Le(gi))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();function oT(n,e){return Array.isArray(e)?e.reduce(oT,n):Ge(Ge({},n),e)}let Xd=(()=>{class n{constructor(t,i,r,o,s){this._zone=t,this._injector=i,this._exceptionHandler=r,this._componentFactoryResolver=o,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new je(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),l=new je(c=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{Yn.assertNotInAngularZone(),K0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const d=this._zone.onUnstable.subscribe(()=>{Yn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{u.unsubscribe(),d.unsubscribe()}});this.isStable=function(...n){const e=Aa(n),t=function(n,e){return"number"==typeof Yu(n)?n.pop():1/0}(n),i=n;return i.length?1===i.length?xr(i[0]):Pa(t)(_n(i,e)):Fi}(a,l.pipe(function(n={}){const{connector:e=(()=>new vr),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return o=>{let s=null,a=null,l=null,c=0,u=!1,d=!1;const h=()=>{null==a||a.unsubscribe(),a=null},f=()=>{h(),s=l=null,u=d=!1},m=()=>{const v=s;f(),null==v||v.unsubscribe()};return Qt((v,w)=>{c++,!d&&!u&&h();const y=l=null!=l?l:e();w.add(()=>{c--,0===c&&!d&&!u&&(a=Zu(m,r))}),y.subscribe(w),s||(s=new Nu({next:_=>y.next(_),error:_=>{d=!0,h(),a=Zu(f,t,_),y.error(_)},complete:()=>{u=!0,h(),a=Zu(f,i),y.complete()}}),_n(v).subscribe(s))})(o)}}()))}bootstrap(t,i){if(!this._initStatus.done)throw new Ni("405","");let r;r=t instanceof aS?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(r.componentType);const o=function(n){return n.isBoundToModule}(r)?void 0:this._injector.get(ss),a=r.create(gi.NULL,[],i||r.selector,o),l=a.location.nativeElement,c=a.injector.get(ny,null),u=c&&a.injector.get(KS);return c&&u&&u.registerApplication(l,c),a.onDestroy(()=>{this.detachView(a.hostView),ry(this.components,a),u&&u.unregisterApplication(l)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new Ni("101","");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;ry(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(XS,[]).concat(this._bootstrapListeners).forEach(r=>r(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(t){return new(t||n)(Le(Yn),Le(gi),Le(nc),Le(Mc),Le(Pc))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();function ry(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let aT=!0,oy=(()=>{class n{}return n.__NG_ELEMENT_ID__=PB,n})();function PB(n){return function(n,e,t){if(za(n)&&!t){const i=or(n.index,e);return new Gd(i,i)}return 47&n.type?new Gd(e[16],e):null}($n(),pe(),16==(16&n))}class pT{constructor(){}supports(e){return Ld(e)}create(e){return new kB(e)}}const LB=(n,e)=>e;class kB{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||LB}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,o=null;for(;t||i;){const s=!i||t&&t.currentIndex<mT(i,r,o)?t:i,a=mT(s,r,o),l=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(t=t._next,null==s.previousIndex)r++;else{o||(o=[]);const c=a-r,u=l-r;if(c!=u){for(let h=0;h<c;h++){const f=h<o.length?o[h]:o[h]=0,m=f+h;u<=m&&m<c&&(o[h]=f+1)}o[s.previousIndex]=u-c}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Ld(e))throw new Error(`Error trying to diff '${Tt(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,o,s,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==t&&Object.is(t.trackById,s)?(i&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,s,a),i=!0),t=t._next}else r=0,function(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[uc()]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{s=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,s)?(i&&(t=this._verifyReinsertion(t,a,s,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,s,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,r)):e=this._addAfter(new FB(t,i),o,r),e}_verifyReinsertion(e,t,i,r){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==o?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,o=e._nextRemoved;return null===r?this._removalsHead=o:r._nextRemoved=o,null===o?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new gT),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new gT),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class FB{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class NB{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class gT{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new NB,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function mT(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class _T{constructor(){}supports(e){return e instanceof Map||_0(e)}create(){return new zB}}class zB{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||_0(e)))throw new Error(`Error trying to diff '${Tt(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const o=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const o=r._prev,s=r._next;return o&&(o._next=s),s&&(s._prev=o),r._next=null,r._prev=null,r}const i=new BB(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class BB{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function vT(){return new Yd([new pT])}let Yd=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||vT()),deps:[[n,new Kl,new Co]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'`)}}return n.\u0275prov=We({token:n,providedIn:"root",factory:vT}),n})();function yT(){return new Ac([new _T])}let Ac=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||yT()),deps:[[n,new Kl,new Co]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(i)return i;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return n.\u0275prov=We({token:n,providedIn:"root",factory:yT}),n})();const VB=[new _T],GB=new Yd([new pT]),jB=new Ac(VB),WB=nT(null,"core",[{provide:Fp,useValue:"unknown"},{provide:rT,deps:[gi]},{provide:KS,deps:[]},{provide:YS,deps:[]}]),ZB=[{provide:Xd,useClass:Xd,deps:[Yn,gi,nc,Mc,Pc]},{provide:sz,deps:[Yn],useFactory:function(n){let e=[];return n.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Pc,useClass:Pc,deps:[[new Co,kp]]},{provide:Np,useClass:Np,deps:[]},lB,{provide:Yd,useFactory:function(){return GB},deps:[]},{provide:Ac,useFactory:function(){return jB},deps:[]},{provide:Vs,useFactory:function(n){return n||"undefined"!=typeof $localize&&$localize.locale||Ep},deps:[[new Cd(Vs),new Co,new Kl]]},{provide:ZS,useValue:"USD"}];let QB=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(Le(Xd))},n.\u0275mod=Ci({type:n}),n.\u0275inj=pi({providers:ZB}),n})(),Bp=null;function Io(){return Bp}const dr=new gt("DocumentToken");let ja=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=We({token:n,factory:function(){return Le(bT)},providedIn:"platform"}),n})();const i4=new gt("Location Initialized");let bT=(()=>{class n extends ja{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Io().getBaseHref(this._doc)}onPopState(t){const i=Io().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=Io().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,r){xT()?this._history.pushState(t,i,r):this.location.hash=r}replaceState(t,i,r){xT()?this._history.replaceState(t,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(Le(dr))},n.\u0275prov=We({token:n,factory:function(){return new bT(Le(dr))},providedIn:"platform"}),n})();function xT(){return!!window.history.pushState}function uy(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function wT(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function cs(n){return n&&"?"!==n[0]?"?"+n:n}let Dc=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=We({token:n,factory:function(){return function(n){const e=Le(dr).location;return new CT(Le(ja),e&&e.origin||"")}()},providedIn:"root"}),n})();const dy=new gt("appBaseHref");let CT=(()=>{class n extends Dc{constructor(t,i){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return uy(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+cs(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){const s=this.prepareExternalUrl(r+cs(o));this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){const s=this.prepareExternalUrl(r+cs(o));this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null==(r=(i=this._platformLocation).historyGo)||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(Le(ja),Le(dy,8))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})(),s4=(()=>{class n extends Dc{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=uy(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,o){let s=this.prepareExternalUrl(r+cs(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){let s=this.prepareExternalUrl(r+cs(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null==(r=(i=this._platformLocation).historyGo)||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(Le(ja),Le(dy,8))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})(),hy=(()=>{class n{constructor(t,i){this._subject=new It,this._urlChangeListeners=[],this._platformStrategy=t;const r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=wT(MT(r)),this._platformStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+cs(i))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,MT(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._platformStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+cs(i)),r)}replaceState(t,i="",r=null){this._platformStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+cs(i)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var i,r;null==(r=(i=this._platformStrategy).historyGo)||r.call(i,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=cs,n.joinWithSlash=uy,n.stripTrailingSlash=wT,n.\u0275fac=function(t){return new(t||n)(Le(Dc),Le(ja))},n.\u0275prov=We({token:n,factory:function(){return new hy(Le(Dc),Le(ja))},providedIn:"root"}),n})();function MT(n){return n.replace(/\/index.html$/,"")}var Bn=(()=>((Bn=Bn||{})[Bn.Zero=0]="Zero",Bn[Bn.One=1]="One",Bn[Bn.Two=2]="Two",Bn[Bn.Few=3]="Few",Bn[Bn.Many=4]="Many",Bn[Bn.Other=5]="Other",Bn))();const g4=function(n){return function(n){const e=function(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=kE(e);if(t)return t;const i=e.split("-")[0];if(t=kE(i),t)return t;if("en"===i)return YF;throw new Error(`Missing locale data for the locale "${n}".`)}(n)[De.PluralCase]};class Yp{}let j4=(()=>{class n extends Yp{constructor(t){super(),this.locale=t}getPluralCategory(t,i){switch(g4(i||this.locale)(t)){case Bn.Zero:return"zero";case Bn.One:return"one";case Bn.Two:return"two";case Bn.Few:return"few";case Bn.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(Le(Vs))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();function RT(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,o]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}let Wa=(()=>{class n{constructor(t,i,r,o){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=o,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Ld(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Tt(i.item)}`);this._toggleClass(i.item,!0)}),t.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!0)):Object.keys(t).forEach(i=>this._toggleClass(i,!!t[i])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!1)):Object.keys(t).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(t,i){(t=t.trim())&&t.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(t){return new(t||n)(G(Yd),G(Ac),G(er),G(Oo))},n.\u0275dir=Xe({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class $4{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Jn=(()=>{class n{constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(i){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=[];t.forEachOperation((r,o,s)=>{if(null==r.previousIndex){const a=this._viewContainer.createEmbeddedView(this._template,new $4(null,this._ngForOf,-1,-1),null===s?void 0:s),l=new LT(r,a);i.push(l)}else if(null==s)this._viewContainer.remove(null===o?void 0:o);else if(null!==o){const a=this._viewContainer.get(o);this._viewContainer.move(a,s);const l=new LT(r,a);i.push(l)}});for(let r=0;r<i.length;r++)this._perViewChange(i[r].view,i[r].record);for(let r=0,o=this._viewContainer.length;r<o;r++){const s=this._viewContainer.get(r);s.context.index=r,s.context.count=o,s.context.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{this._viewContainer.get(r.currentIndex).context.$implicit=r.item})}_perViewChange(t,i){t.context.$implicit=i.item}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(G($r),G(as),G(Yd))},n.\u0275dir=Xe({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class LT{constructor(e,t){this.record=e,this.view=t}}let xn=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new X4,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){kT("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){kT("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(G($r),G(as))},n.\u0275dir=Xe({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class X4{constructor(){this.$implicit=null,this.ngIf=null}}function kT(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Tt(e)}'.`)}let xU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ci({type:n}),n.\u0275inj=pi({providers:[{provide:Yp,useClass:j4}]}),n})();let EU=(()=>{class n{}return n.\u0275prov=We({token:n,providedIn:"root",factory:()=>new SU(Le(dr),window)}),n})();class SU{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const o=r.shadowRoot;if(o){const s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=BT(this.window.history)||BT(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function BT(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class UT{}class Ey extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new Ey,Bp||(Bp=n)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(Qd=Qd||document.querySelector("base"),Qd?Qd.getAttribute("href"):null);return null==t?null:function(n){Zp=Zp||document.createElement("a"),Zp.setAttribute("href",n);const e=Zp.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Qd=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return RT(document.cookie,e)}}let Zp,Qd=null;const VT=new gt("TRANSITION_ID"),IU=[{provide:kp,useFactory:function(n,e,t){return()=>{t.get(Pc).donePromise.then(()=>{const i=Io(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let o=0;o<r.length;o++)i.remove(r[o])})}},deps:[VT,dr,gi],multi:!0}];class Sy{static init(){var n;n=new Sy,iy=n}addToWindow(e){Ht.getAngularTestability=(i,r=!0)=>{const o=e.findTestabilityInTree(i,r);if(null==o)throw new Error("Could not find testability for element.");return o},Ht.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ht.getAllAngularRootElements=()=>e.getAllRootElements(),Ht.frameworkStabilizers||(Ht.frameworkStabilizers=[]),Ht.frameworkStabilizers.push(i=>{const r=Ht.getAllAngularTestabilities();let o=r.length,s=!1;const a=function(l){s=s||l,o--,0==o&&i(s)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,i){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:i?Io().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let RU=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();const Jp=new gt("EventManagerPlugins");let Qp=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let o=0;o<r.length;o++){const s=r[o];if(s.supports(t))return this._eventNameToPlugin.set(t,s),s}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(Le(Jp),Le(Yn))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();class HT{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=Io().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let GT=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})(),Kd=(()=>{class n extends GT{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,r){t.forEach(o=>{const s=this._doc.createElement("style");s.textContent=o,r.push(i.appendChild(s))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(jT),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(t,r,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(jT))}}return n.\u0275fac=function(t){return new(t||n)(Le(dr))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();function jT(n){Io().remove(n)}const Ty={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Py=/%COMP%/g;function Kp(n,e,t){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?Kp(n,r,t):(r=r.replace(Py,n),t.push(r))}return t}function qT(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ay=(()=>{class n{constructor(t,i,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Dy(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case wr.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new BU(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(t),r}case 1:case wr.ShadowDom:return new UU(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const r=Kp(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(Le(Qp),Le(Kd),Le(qd))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();class Dy{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Ty[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,i){e&&e.insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const o=Ty[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=Ty[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(lr.DashCase|lr.Important)?e.style.setProperty(t,i,r&lr.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&lr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,qT(i)):this.eventManager.addEventListener(e,t,qT(i))}}class BU extends Dy{constructor(e,t,i,r){super(e),this.component=i;const o=Kp(r+"-"+i.id,i.styles,[]);t.addStyles(o),this.contentAttr="_ngcontent-%COMP%".replace(Py,r+"-"+i.id),this.hostAttr="_nghost-%COMP%".replace(Py,r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class UU extends Dy{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=Kp(r.id,r.styles,[]);for(let s=0;s<o.length;s++){const a=document.createElement("style");a.textContent=o[s],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let VU=(()=>{class n extends HT{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(Le(dr))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();const YT=["alt","control","meta","shift"],GU={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ZT={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},jU={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let WU=(()=>{class n extends HT{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const o=n.parseEventName(i),s=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Io().onAndCancel(t,o.domEventName,s))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const o=n._normalizeKey(i.pop());let s="";if(YT.forEach(l=>{const c=i.indexOf(l);c>-1&&(i.splice(c,1),s+=l+".")}),s+=o,0!=i.length||0===o.length)return null;const a={};return a.domEventName=r,a.fullKey=s,a}static getEventFullKey(t){let i="",r=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&ZT.hasOwnProperty(e)&&(e=ZT[e]))}return GU[e]||e}(t);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),YT.forEach(o=>{o!=r&&jU[o](t)&&(i+=o+".")}),i+=r,i}static eventCallback(t,i,r){return o=>{n.getEventFullKey(o)===t&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(Le(dr))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();const ZU=nT(WB,"browser",[{provide:Fp,useValue:"browser"},{provide:qS,useValue:function(){Ey.makeCurrent(),Sy.init()},multi:!0},{provide:dr,useFactory:function(){return n=document,Y_=n,document;var n},deps:[]}]),JU=[{provide:d0,useValue:"root"},{provide:nc,useFactory:function(){return new nc},deps:[]},{provide:Jp,useClass:VU,multi:!0,deps:[dr,Yn,Fp]},{provide:Jp,useClass:WU,multi:!0,deps:[dr]},{provide:Ay,useClass:Ay,deps:[Qp,Kd,qd]},{provide:cS,useExisting:Ay},{provide:GT,useExisting:Kd},{provide:Kd,useClass:Kd,deps:[dr]},{provide:ny,useClass:ny,deps:[Yn]},{provide:Qp,useClass:Qp,deps:[Jp,Yn]},{provide:UT,useClass:RU,deps:[]}];let QU=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:qd,useValue:t.appId},{provide:VT,useExisting:qd},IU]}}}return n.\u0275fac=function(t){return new(t||n)(Le(n,12))},n.\u0275mod=Ci({type:n}),n.\u0275inj=pi({providers:JU,imports:[xU,QB]}),n})();function ht(...n){return _n(n,Aa(n))}function Oc(n,e){return Rt(e)?Ln(n,e,1):Ln(n,1)}function $a(n,e){return Qt((t,i)=>{let r=0;t.subscribe(new Rn(i,o=>n.call(e,o,r++)&&i.next(o)))})}"undefined"!=typeof window&&window;class KT{}class eP{}class hr{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),o=r.toLowerCase(),s=t.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const r=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof hr?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new hr;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof hr?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const o=e.value;if(o){let s=this.headers.get(t);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class cV{encodeKey(e){return tP(e)}encodeValue(e){return tP(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const dV=/%(\d[a-f0-9])/gi,hV={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function tP(n){return encodeURIComponent(n).replace(dV,(e,t)=>{var i;return null!=(i=hV[t])?i:e})}function nP(n){return`${n}`}class Gs{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new cV,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const o=r.indexOf("="),[s,a]=-1==o?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],l=t.get(s)||[];l.push(a),t.set(s,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t];this.map.set(t,Array.isArray(i)?i:[i])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(o=>{t.push({param:i,value:o,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Gs({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(nP(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(nP(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class fV{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function iP(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function rP(n){return"undefined"!=typeof Blob&&n instanceof Blob}function oP(n){return"undefined"!=typeof FormData&&n instanceof FormData}class eh{constructor(e,t,i,r){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new hr),this.context||(this.context=new fV),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+s}}else this.params=new Gs,this.urlWithParams=t}serializeBody(){return null===this.body?null:iP(this.body)||rP(this.body)||oP(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof Gs?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||oP(this.body)?null:rP(this.body)?this.body.type||null:iP(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Gs?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var d;const t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let l=e.headers||this.headers,c=e.params||this.params;const u=null!=(d=e.context)?d:this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((h,f)=>h.set(f,e.setHeaders[f]),l)),e.setParams&&(c=Object.keys(e.setParams).reduce((h,f)=>h.set(f,e.setParams[f]),c)),new eh(t,i,o,{params:c,headers:l,context:u,reportProgress:a,responseType:r,withCredentials:s})}}var Vn=(()=>((Vn=Vn||{})[Vn.Sent=0]="Sent",Vn[Vn.UploadProgress=1]="UploadProgress",Vn[Vn.ResponseHeader=2]="ResponseHeader",Vn[Vn.DownloadProgress=3]="DownloadProgress",Vn[Vn.Response=4]="Response",Vn[Vn.User=5]="User",Vn))();class Iy{constructor(e,t=200,i="OK"){this.headers=e.headers||new hr,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Ry extends Iy{constructor(e={}){super(e),this.type=Vn.ResponseHeader}clone(e={}){return new Ry({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class eg extends Iy{constructor(e={}){super(e),this.type=Vn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new eg({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class sP extends Iy{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Ly(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Ro=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let o;if(t instanceof eh)o=t;else{let l,c;l=r.headers instanceof hr?r.headers:new hr(r.headers),r.params&&(c=r.params instanceof Gs?r.params:new Gs({fromObject:r.params})),o=new eh(t,i,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const s=ht(o).pipe(Oc(l=>this.handler.handle(l)));if(t instanceof eh||"events"===r.observe)return s;const a=s.pipe($a(l=>l instanceof eg));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Ct(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Ct(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Ct(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(Ct(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new Gs).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,Ly(r,i))}post(t,i,r={}){return this.request("POST",t,Ly(r,i))}put(t,i,r={}){return this.request("PUT",t,Ly(r,i))}}return n.\u0275fac=function(t){return new(t||n)(Le(KT))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();class aP{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const ky=new gt("HTTP_INTERCEPTORS");let mV=(()=>{class n{intercept(t,i){return i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();const _V=/^\)\]\}',?\n/;let lP=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new je(i=>{const r=this.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach((f,m)=>r.setRequestHeader(f,m.join(","))),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const f=t.detectContentTypeHeader();null!==f&&r.setRequestHeader("Content-Type",f)}if(t.responseType){const f=t.responseType.toLowerCase();r.responseType="json"!==f?f:"text"}const o=t.serializeBody();let s=null;const a=()=>{if(null!==s)return s;const f=1223===r.status?204:r.status,m=r.statusText||"OK",v=new hr(r.getAllResponseHeaders()),w=function(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(r)||t.url;return s=new Ry({headers:v,status:f,statusText:m,url:w}),s},l=()=>{let{headers:f,status:m,statusText:v,url:w}=a(),y=null;204!==m&&(y=void 0===r.response?r.responseText:r.response),0===m&&(m=y?200:0);let _=m>=200&&m<300;if("json"===t.responseType&&"string"==typeof y){const M=y;y=y.replace(_V,"");try{y=""!==y?JSON.parse(y):null}catch(C){y=M,_&&(_=!1,y={error:C,text:y})}}_?(i.next(new eg({body:y,headers:f,status:m,statusText:v,url:w||void 0})),i.complete()):i.error(new sP({error:y,headers:f,status:m,statusText:v,url:w||void 0}))},c=f=>{const{url:m}=a(),v=new sP({error:f,status:r.status||0,statusText:r.statusText||"Unknown Error",url:m||void 0});i.error(v)};let u=!1;const d=f=>{u||(i.next(a()),u=!0);let m={type:Vn.DownloadProgress,loaded:f.loaded};f.lengthComputable&&(m.total=f.total),"text"===t.responseType&&!!r.responseText&&(m.partialText=r.responseText),i.next(m)},h=f=>{let m={type:Vn.UploadProgress,loaded:f.loaded};f.lengthComputable&&(m.total=f.total),i.next(m)};return r.addEventListener("load",l),r.addEventListener("error",c),r.addEventListener("timeout",c),r.addEventListener("abort",c),t.reportProgress&&(r.addEventListener("progress",d),null!==o&&r.upload&&r.upload.addEventListener("progress",h)),r.send(o),i.next({type:Vn.Sent}),()=>{r.removeEventListener("error",c),r.removeEventListener("abort",c),r.removeEventListener("load",l),r.removeEventListener("timeout",c),t.reportProgress&&(r.removeEventListener("progress",d),null!==o&&r.upload&&r.upload.removeEventListener("progress",h)),r.readyState!==r.DONE&&r.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(Le(UT))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();const Fy=new gt("XSRF_COOKIE_NAME"),Ny=new gt("XSRF_HEADER_NAME");class cP{}let yV=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=RT(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(Le(dr),Le(Fp),Le(Fy))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})(),zy=(()=>{class n{constructor(t,i){this.tokenService=t,this.headerName=i}intercept(t,i){const r=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||r.startsWith("http://")||r.startsWith("https://"))return i.handle(t);const o=this.tokenService.getToken();return null!==o&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,o)})),i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(Le(cP),Le(Ny))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})(),bV=(()=>{class n{constructor(t,i){this.backend=t,this.injector=i,this.chain=null}handle(t){if(null===this.chain){const i=this.injector.get(ky,[]);this.chain=i.reduceRight((r,o)=>new aP(r,o),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(Le(eP),Le(gi))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})(),xV=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:zy,useClass:mV}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:Fy,useValue:t.cookieName}:[],t.headerName?{provide:Ny,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ci({type:n}),n.\u0275inj=pi({providers:[zy,{provide:ky,useExisting:zy,multi:!0},{provide:cP,useClass:yV},{provide:Fy,useValue:"XSRF-TOKEN"},{provide:Ny,useValue:"X-XSRF-TOKEN"}]}),n})(),wV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ci({type:n}),n.\u0275inj=pi({providers:[Ro,{provide:KT,useClass:bV},lP,{provide:eP,useExisting:lP}],imports:[[xV.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();const{isArray:CV}=Array,{getPrototypeOf:MV,prototype:EV,keys:SV}=Object;function uP(n){if(1===n.length){const e=n[0];if(CV(e))return{args:e,keys:null};if(function(n){return n&&"object"==typeof n&&MV(n)===EV}(e)){const t=SV(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:PV}=Array;function dP(n){return Ct(e=>function(n,e){return PV(e)?n(...e):n(e)}(n,e))}function hP(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}let fP=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(G(Oo),G(er))},n.\u0275dir=Xe({type:n}),n})(),qa=(()=>{class n extends fP{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=sr(n)))(i||n)}}(),n.\u0275dir=Xe({type:n,features:[en]}),n})();const Lo=new gt("NgValueAccessor"),OV={provide:Lo,useExisting:Wt(()=>th),multi:!0};let th=(()=>{class n extends qa{writeValue(t){this.setProperty("checked",t)}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=sr(n)))(i||n)}}(),n.\u0275dir=Xe({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,i){1&t&&J("change",function(o){return i.onChange(o.target.checked)})("blur",function(){return i.onTouched()})},features:[cn([OV]),en]}),n})();const IV={provide:Lo,useExisting:Wt(()=>fr),multi:!0},LV=new gt("CompositionEventMode");let fr=(()=>{class n extends fP{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=Io()?Io().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(G(Oo),G(er),G(LV,8))},n.\u0275dir=Xe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&J("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[cn([IV]),en]}),n})();function js(n){return null==n||0===n.length}function pP(n){return null!=n&&"number"==typeof n.length}const Pi=new gt("NgValidators"),Ws=new gt("NgAsyncValidators"),kV=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Qr{static min(e){return gP(e)}static max(e){return n=e,e=>{if(js(e.value)||js(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null};var n}static required(e){return js(e.value)?{required:!0}:null}static requiredTrue(e){return!0===e.value?null:{required:!0}}static email(e){return js((n=e).value)||kV.test(n.value)?null:{email:!0};var n}static minLength(e){return n=e,e=>js(e.value)||!pP(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null;var n}static maxLength(e){return n=e,e=>pP(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null;var n}static pattern(e){return function(n){if(!n)return nh;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(js(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return PP(e)}static composeAsync(e){return AP(e)}}function gP(n){return e=>{if(js(e.value)||js(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function nh(n){return null}function CP(n){return null!=n}function MP(n){const e=Fd(n)?_n(n):n;return S0(e),e}function EP(n){let e={};return n.forEach(t=>{e=null!=t?Ge(Ge({},e),t):e}),0===Object.keys(e).length?null:e}function SP(n,e){return e.map(t=>t(n))}function TP(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function PP(n){if(!n)return null;const e=n.filter(CP);return 0==e.length?null:function(t){return EP(SP(t,e))}}function By(n){return null!=n?PP(TP(n)):null}function AP(n){if(!n)return null;const e=n.filter(CP);return 0==e.length?null:function(t){return function(...n){const e=Ll(n),{args:t,keys:i}=uP(n),r=new je(o=>{const{length:s}=t;if(!s)return void o.complete();const a=new Array(s);let l=s,c=s;for(let u=0;u<s;u++){let d=!1;xr(t[u]).subscribe(new Rn(o,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||o.next(i?hP(i,a):a),o.complete())}))}});return e?r.pipe(dP(e)):r}(SP(t,e).map(MP)).pipe(Ct(EP))}}function Uy(n){return null!=n?AP(TP(n)):null}function DP(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function OP(n){return n._rawValidators}function IP(n){return n._rawAsyncValidators}function Vy(n){return n?Array.isArray(n)?n:[n]:[]}function tg(n,e){return Array.isArray(n)?n.includes(e):n===e}function RP(n,e){const t=Vy(e);return Vy(n).forEach(r=>{tg(t,r)||t.push(r)}),t}function LP(n,e){return Vy(e).filter(t=>!tg(n,t))}class kP{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=By(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Uy(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class $i extends kP{get formDirective(){return null}get path(){return null}}class $s extends kP{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class FP{constructor(e){this._cd=e}is(e){var t,i,r;return"submitted"===e?!!(null==(t=this._cd)?void 0:t.submitted):!!(null==(r=null==(i=this._cd)?void 0:i.control)?void 0:r[e])}}let Dr=(()=>{class n extends FP{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(G($s,2))},n.\u0275dir=Xe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&wp("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))},features:[en]}),n})(),qs=(()=>{class n extends FP{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(G($i,10))},n.\u0275dir=Xe({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,i){2&t&&wp("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))("ng-submitted",i.is("submitted"))},features:[en]}),n})();function ig(n,e){return[...e.path,n]}function ih(n,e){jy(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&NP(n,e)})}(n,e),function(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&NP(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function rg(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),sg(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function og(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function jy(n,e){const t=OP(n);null!==e.validator?n.setValidators(DP(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=IP(n);null!==e.asyncValidator?n.setAsyncValidators(DP(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();og(e._rawValidators,r),og(e._rawAsyncValidators,r)}function sg(n,e){let t=!1;if(null!==n){if(null!==e.validator){const r=OP(n);if(Array.isArray(r)&&r.length>0){const o=r.filter(s=>s!==e.validator);o.length!==r.length&&(t=!0,n.setValidators(o))}}if(null!==e.asyncValidator){const r=IP(n);if(Array.isArray(r)&&r.length>0){const o=r.filter(s=>s!==e.asyncValidator);o.length!==r.length&&(t=!0,n.setAsyncValidators(o))}}}const i=()=>{};return og(e._rawValidators,i),og(e._rawAsyncValidators,i),t}function NP(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Wy(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function $y(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(o=>{o.constructor===fr?t=o:function(n){return Object.getPrototypeOf(n.constructor)===qa}(o)?i=o:r=o}),r||i||t||null}function ag(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const rh="VALID",lg="INVALID",Ic="PENDING",oh="DISABLED";function qy(n){return(Yy(n)?n.validators:n)||null}function UP(n){return Array.isArray(n)?By(n):n||null}function Xy(n,e){return(Yy(e)?e.asyncValidators:n)||null}function VP(n){return Array.isArray(n)?Uy(n):n||null}function Yy(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class Zy{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=UP(this._rawValidators),this._composedAsyncValidatorFn=VP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===rh}get invalid(){return this.status===lg}get pending(){return this.status==Ic}get disabled(){return this.status===oh}get enabled(){return this.status!==oh}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=UP(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=VP(e)}addValidators(e){this.setValidators(RP(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(RP(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(LP(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(LP(e,this._rawAsyncValidators))}hasValidator(e){return tg(this._rawValidators,e)}hasAsyncValidator(e){return tg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ic,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=oh,this.errors=null,this._forEachChild(i=>{i.disable(ti(Ge({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ti(Ge({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=rh,this._forEachChild(i=>{i.enable(ti(Ge({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ti(Ge({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===rh||this.status===Ic)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?oh:rh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ic,this._hasOwnPendingAsyncValidator=!0;const t=MP(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let i=n;return e.forEach(r=>{i=i instanceof sh?i.controls.hasOwnProperty(r)?i.controls[r]:null:i instanceof Jy&&i.at(r)||null}),i}(this,e)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new It,this.statusChanges=new It}_calculateStatus(){return this._allControlsDisabled()?oh:this.errors?lg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ic)?Ic:this._anyControlsHaveStatus(lg)?lg:rh}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Yy(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Rc extends Zy{constructor(e=null,t,i){super(qy(t),Xy(i,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ag(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ag(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class sh extends Zy{constructor(e,t,i){super(qy(t),Xy(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(i=>{this._throwIfControlMissing(i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t instanceof Rc?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const i=this.controls[t];if(this.contains(t)&&e(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,i)=>((t.enabled||this.disabled)&&(e[i]=t.value),e))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,o)=>{i=t(i,r,o)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,i)=>{if(void 0===e[i])throw new Error(`Must supply a value for form control with name: '${i}'.`)})}}class Jy extends Zy{constructor(e,t,i){super(qy(t),Xy(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((i,r)=>{this._throwIfControlMissing(r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof Rc?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,i)=>!!i._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,i)=>{if(void 0===e[i])throw new Error(`Must supply a value for form control at index: ${i}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const ZV={provide:$s,useExisting:Wt(()=>Lc)},jP=(()=>Promise.resolve(null))();let Lc=(()=>{class n extends $s{constructor(t,i,r,o){super(),this.control=new Rc,this._registered=!1,this.update=new It,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=$y(0,o)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),Wy(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?ig(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ih(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){jP.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=""===i||i&&"false"!==i;jP.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(t){return new(t||n)(G($i,9),G(Pi,10),G(Ws,10),G(Lo,10))},n.\u0275dir=Xe({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[cn([ZV]),en,oe]}),n})(),Xs=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Xe({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const JV={provide:Lo,useExisting:Wt(()=>Ky),multi:!0};let Ky=(()=>{class n extends qa{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=i=>{t(""==i?null:parseFloat(i))}}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=sr(n)))(i||n)}}(),n.\u0275dir=Xe({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,i){1&t&&J("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},features:[cn([JV]),en]}),n})(),WP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ci({type:n}),n.\u0275inj=pi({}),n})();const e5={provide:Lo,useExisting:Wt(()=>kc),multi:!0};let kc=(()=>{class n extends qa{writeValue(t){this.setProperty("value",parseFloat(t))}registerOnChange(t){this.onChange=i=>{t(""==i?null:parseFloat(i))}}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=sr(n)))(i||n)}}(),n.\u0275dir=Xe({type:n,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,i){1&t&&J("change",function(o){return i.onChange(o.target.value)})("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},features:[cn([e5]),en]}),n})();const eb=new gt("NgModelWithFormControlWarning"),n5={provide:$i,useExisting:Wt(()=>ko)};let ko=(()=>{class n extends $i{constructor(t,i){super(),this.validators=t,this.asyncValidators=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new It,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(sg(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return ih(i,t),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){rg(t.control||null,t,!1),ag(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,function(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,r=this.form.get(t.path);i!==r&&(rg(i||null,t),r instanceof Rc&&(ih(r,t),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);(function(n,e){jy(n,e)})(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function(n,e){return sg(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){jy(this.form,this),this._oldForm&&sg(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(G(Pi,10),G(Ws,10))},n.\u0275dir=Xe({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,i){1&t&&J("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[cn([n5]),en,oe]}),n})();const o5={provide:$s,useExisting:Wt(()=>ds)};let ds=(()=>{class n extends $s{constructor(t,i,r,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.update=new It,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=$y(0,o)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),Wy(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return ig(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(G($i,13),G(Pi,10),G(Ws,10),G(Lo,10),G(eb,8))},n.\u0275dir=Xe({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[cn([o5]),en,oe]}),n})();const s5={provide:Lo,useExisting:Wt(()=>Xa),multi:!0};function YP(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Xa=(()=>{class n extends qa{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=this._getOptionId(t);null==i&&this.setProperty("selectedIndex",-1);const r=YP(i,t);this.setProperty("value",r)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){const i=function(n){return n.split(":")[0]}(t);return this._optionMap.has(i)?this._optionMap.get(i):t}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=sr(n)))(i||n)}}(),n.\u0275dir=Xe({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,i){1&t&&J("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[cn([s5]),en]}),n})(),Ys=(()=>{class n{constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(YP(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(G(er),G(Oo),G(Xa,9))},n.\u0275dir=Xe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const l5={provide:Lo,useExisting:Wt(()=>ib),multi:!0};function ZP(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let ib=(()=>{class n extends qa{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let i;if(this.value=t,Array.isArray(t)){const r=t.map(o=>this._getOptionId(o));i=(o,s)=>{o._setSelected(r.indexOf(s.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{const r=[],o=i.selectedOptions;if(void 0!==o){const s=o;for(let a=0;a<s.length;a++){const c=this._getOptionValue(s[a].value);r.push(c)}}else{const s=i.options;for(let a=0;a<s.length;a++){const l=s[a];if(l.selected){const c=this._getOptionValue(l.value);r.push(c)}}}this.value=r,t(r)}}_registerOption(t){const i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){const i=function(n){return n.split(":")[0]}(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=sr(n)))(i||n)}}(),n.\u0275dir=Xe({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,i){1&t&&J("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[cn([l5]),en]}),n})(),Zs=(()=>{class n{constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(ZP(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(ZP(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(G(er),G(Oo),G(ib,9))},n.\u0275dir=Xe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();let cg=(()=>{class n{constructor(){this._validator=nh}ngOnChanges(t){if(this.inputName in t){const i=this.normalizeInput(t[this.inputName].currentValue);this._validator=this.enabled()?this.createValidator(i):nh,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(){return null!=this[this.inputName]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Xe({type:n,features:[oe]}),n})();const d5={provide:Pi,useExisting:Wt(()=>rb),multi:!0};let rb=(()=>{class n extends cg{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>function(n){return"number"==typeof n?n:parseFloat(n)}(t),this.createValidator=t=>gP(t)}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=sr(n)))(i||n)}}(),n.\u0275dir=Xe({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(t,i){2&t&&Po("min",i.enabled()?i.min:null)},inputs:{min:"min"},features:[cn([d5]),en]}),n})(),o2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ci({type:n}),n.\u0275inj=pi({imports:[[WP]]}),n})(),v5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ci({type:n}),n.\u0275inj=pi({imports:[o2]}),n})(),s2=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:eb,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ci({type:n}),n.\u0275inj=pi({imports:[o2]}),n})(),Js=(()=>{class n{group(t,i=null){const r=this._reduceControls(t);let a,o=null,s=null;return null!=i&&(function(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(i)?(o=null!=i.validators?i.validators:null,s=null!=i.asyncValidators?i.asyncValidators:null,a=null!=i.updateOn?i.updateOn:void 0):(o=null!=i.validator?i.validator:null,s=null!=i.asyncValidator?i.asyncValidator:null)),new sh(r,{asyncValidators:s,updateOn:a,validators:o})}control(t,i,r){return new Rc(t,i,r)}array(t,i,r){const o=t.map(s=>this._createControl(s));return new Jy(o,i,r)}_reduceControls(t){const i={};return Object.keys(t).forEach(r=>{i[r]=this._createControl(t[r])}),i}_createControl(t){return t instanceof Rc||t instanceof sh||t instanceof Jy?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=We({token:n,factory:n.\u0275fac,providedIn:s2}),n})();class Kr extends vr{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function a2(n,e,t){n?zr(t,n,e):e()}const ug=ni(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function sb(...n){return Pa(1)(_n(n,Aa(n)))}function l2(n){return new je(e=>{xr(n()).subscribe(e)})}function c2(){return Qt((n,e)=>{let t=null;n._refCount++;const i=new Rn(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,o=t;t=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class C5 extends je{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Yi(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ri;const t=this.getSubject();e.add(this.source.subscribe(new Rn(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ri.EMPTY)}return e}refCount(){return c2()(this)}}function Ya(n,e){return Qt((t,i)=>{let r=null,o=0,s=!1;const a=()=>s&&!r&&i.complete();t.subscribe(new Rn(i,l=>{null==r||r.unsubscribe();let c=0;const u=o++;xr(n(l,u)).subscribe(r=new Rn(i,d=>i.next(e?e(l,d,u,c++):d),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function E5(n,e,t,i,r){return(o,s)=>{let a=t,l=e,c=0;o.subscribe(new Rn(s,u=>{const d=c++;l=a?n(l,u,d):(a=!0,u),i&&s.next(l)},r&&(()=>{a&&s.next(l),s.complete()})))}}function u2(n,e){return Qt(E5(n,e,arguments.length>=2,!0))}function Qs(n){return Qt((e,t)=>{let o,i=null,r=!1;i=e.subscribe(new Rn(t,void 0,void 0,s=>{o=xr(n(s,Qs(n)(e))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}function ab(n){return n<=0?()=>Fi:Qt((e,t)=>{let i=[];e.subscribe(new Rn(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function d2(n=S5){return Qt((e,t)=>{let i=!1;e.subscribe(new Rn(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function S5(){return new ug}function h2(n){return Qt((e,t)=>{let i=!1;e.subscribe(new Rn(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function Fc(n,e){const t=arguments.length>=2;return i=>i.pipe(n?$a((r,o)=>n(r,o,i)):an,Oa(1),t?h2(e):d2(()=>new ug))}function pr(n,e,t){const i=Rt(n)||e||t?{next:n,error:e,complete:t}:n;return i?Qt((r,o)=>{var s;null===(s=i.subscribe)||void 0===s||s.call(i);let a=!0;r.subscribe(new Rn(o,l=>{var c;null===(c=i.next)||void 0===c||c.call(i,l),o.next(l)},()=>{var l;a=!1,null===(l=i.complete)||void 0===l||l.call(i),o.complete()},l=>{var c;a=!1,null===(c=i.error)||void 0===c||c.call(i,l),o.error(l)},()=>{var l,c;a&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(c=i.finalize)||void 0===c||c.call(i)}))}):an}class hs{constructor(e,t){this.id=e,this.url=t}}class lb extends hs{constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class lh extends hs{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class f2 extends hs{constructor(e,t,i){super(e,t),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class A5 extends hs{constructor(e,t,i){super(e,t),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class D5 extends hs{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class O5 extends hs{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class I5 extends hs{constructor(e,t,i,r,o){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class R5 extends hs{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class L5 extends hs{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class p2{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class g2{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class k5{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class F5{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class N5{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class z5{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class m2{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const yt="primary";class B5{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Nc(n){return new B5(n)}const _2="ngNavigationCancelingError";function cb(n){const e=Error("NavigationCancelingError: "+n);return e[_2]=!0,e}function V5(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let o=0;o<i.length;o++){const s=i[o],a=n[o];if(s.startsWith(":"))r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Fo(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!v2(n[r],e[r]))return!1;return!0}function v2(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,o)=>i[o]===r)}return n===e}function y2(n){return Array.prototype.concat.apply([],n)}function b2(n){return n.length>0?n[n.length-1]:null}function mi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function No(n){return S0(n)?n:Fd(n)?_n(Promise.resolve(n)):ht(n)}const j5={exact:function C2(n,e,t){if(!Ja(n.segments,e.segments)||!dg(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!C2(n.children[i],e.children[i],t))return!1;return!0},subset:M2},x2={exact:function(n,e){return Fo(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>v2(n[t],e[t]))},ignored:()=>!0};function w2(n,e,t){return j5[t.paths](n.root,e.root,t.matrixParams)&&x2[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function M2(n,e,t){return E2(n,e,e.segments,t)}function E2(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!Ja(r,t)||e.hasChildren()||!dg(r,t,i))}if(n.segments.length===t.length){if(!Ja(n.segments,t)||!dg(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!M2(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(Ja(n.segments,r)&&dg(n.segments,r,i)&&n.children[yt])&&E2(n.children[yt],e,o,i)}}function dg(n,e,t){return e.every((i,r)=>x2[t](n[r].parameters,i.parameters))}class Za{constructor(e,t,i){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Nc(this.queryParams)),this._queryParamMap}toString(){return Y5.serialize(this)}}class At{constructor(e,t){this.segments=e,this.children=t,this.parent=null,mi(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return hg(this)}}class ch{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Nc(this.parameters)),this._parameterMap}toString(){return D2(this)}}function Ja(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}class S2{}class T2{parse(e){const t=new rH(e);return new Za(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${uh(e.root,!0)}`,i=function(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${fg(t)}=${fg(r)}`).join("&"):`${fg(t)}=${fg(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);var n;return`${t}${i}${"string"==typeof e.fragment?`#${n=e.fragment,encodeURI(n)}`:""}`}}const Y5=new T2;function hg(n){return n.segments.map(e=>D2(e)).join("/")}function uh(n,e){if(!n.hasChildren())return hg(n);if(e){const t=n.children[yt]?uh(n.children[yt],!1):"",i=[];return mi(n.children,(r,o)=>{o!==yt&&i.push(`${o}:${uh(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function(n,e){let t=[];return mi(n.children,(i,r)=>{r===yt&&(t=t.concat(e(i,r)))}),mi(n.children,(i,r)=>{r!==yt&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===yt?[uh(n.children[yt],!1)]:[`${r}:${uh(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[yt]?`${hg(n)}/${t[0]}`:`${hg(n)}/(${t.join("//")})`}}function P2(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function fg(n){return P2(n).replace(/%3B/gi,";")}function ub(n){return P2(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function pg(n){return decodeURIComponent(n)}function A2(n){return pg(n.replace(/\+/g,"%20"))}function D2(n){return`${ub(n.path)}${function(n){return Object.keys(n).map(e=>`;${ub(e)}=${ub(n[e])}`).join("")}(n.parameters)}`}const K5=/^[^\/()?;=#]+/;function gg(n){const e=n.match(K5);return e?e[0]:""}const eH=/^[^=?&#]+/,nH=/^[^&#]+/;class rH{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new At([],{}):new At([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[yt]=new At(e,t)),i}parseSegment(){const e=gg(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new ch(pg(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=gg(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=gg(this.remaining);r&&(i=r,this.capture(i))}e[pg(t)]=pg(i)}parseQueryParam(e){const t=function(n){const e=n.match(eH);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const s=function(n){const e=n.match(nH);return e?e[0]:""}(this.remaining);s&&(i=s,this.capture(i))}const r=A2(t),o=A2(i);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=gg(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let o;i.indexOf(":")>-1?(o=i.substr(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=yt);const s=this.parseChildren();t[o]=1===Object.keys(s).length?s[yt]:new At([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class O2{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=db(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=db(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=hb(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return hb(e,this._root).map(t=>t.value)}}function db(n,e){if(n===e.value)return e;for(const t of e.children){const i=db(n,t);if(i)return i}return null}function hb(n,e){if(n===e.value)return[e];for(const t of e.children){const i=hb(n,t);if(i.length)return i.unshift(e),i}return[]}class fs{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function zc(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class I2 extends O2{constructor(e,t){super(e),this.snapshot=t,fb(this,e)}toString(){return this.snapshot.toString()}}function R2(n,e){const t=function(n,e){const s=new mg([],{},{},"",{},yt,e,null,n.root,-1,{});return new k2("",new fs(s,[]))}(n,e),i=new Kr([new ch("",{})]),r=new Kr({}),o=new Kr({}),s=new Kr({}),a=new Kr(""),l=new Ks(i,r,s,a,o,yt,e,t.root);return l.snapshot=t.root,new I2(new fs(l,[]),t)}class Ks{constructor(e,t,i,r,o,s,a,l){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Ct(e=>Nc(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Ct(e=>Nc(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function L2(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],o=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(o.component)break;i--}}return function(n){return n.reduce((e,t)=>({params:Ge(Ge({},e.params),t.params),data:Ge(Ge({},e.data),t.data),resolve:Ge(Ge({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(i))}class mg{constructor(e,t,i,r,o,s,a,l,c,u,d){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Nc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Nc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class k2 extends O2{constructor(e,t){super(t),this.url=e,fb(this,t)}toString(){return F2(this._root)}}function fb(n,e){e.value._routerState=n,e.children.forEach(t=>fb(n,t))}function F2(n){const e=n.children.length>0?` { ${n.children.map(F2).join(", ")} } `:"";return`${n.value}${e}`}function pb(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Fo(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Fo(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Fo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Fo(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function gb(n,e){const t=Fo(n.params,e.params)&&function(n,e){return Ja(n,e)&&n.every((t,i)=>Fo(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||gb(n.parent,e.parent))}function dh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return dh(n,i,r);return dh(n,i)})}(n,e,t);return new fs(i,r)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>dh(n,a)),s}}const i=function(n){return new Ks(new Kr(n.url),new Kr(n.params),new Kr(n.queryParams),new Kr(n.fragment),new Kr(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(o=>dh(n,o));return new fs(i,r)}}function _g(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function hh(n){return"object"==typeof n&&null!=n&&n.outlets}function mb(n,e,t,i,r){let o={};return i&&mi(i,(s,a)=>{o[a]=Array.isArray(s)?s.map(l=>`${l}`):`${s}`}),new Za(t.root===n?e:N2(t.root,n,e),o,r)}function N2(n,e,t){const i={};return mi(n.children,(r,o)=>{i[o]=r===e?t:N2(r,e,t)}),new At(n.segments,i)}class z2{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&_g(i[0]))throw new Error("Root segment cannot have matrix parameters");const r=i.find(hh);if(r&&r!==b2(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class _b{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function B2(n,e,t){if(n||(n=new At([],{})),0===n.segments.length&&n.hasChildren())return vg(n,e,t);const i=function(n,e,t){let i=0,r=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return o;const s=n.segments[r],a=t[i];if(hh(a))break;const l=`${a}`,c=i<t.length-1?t[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!V2(l,c,s))return o;i+=2}else{if(!V2(l,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const o=new At(n.segments.slice(0,i.pathIndex),{});return o.children[yt]=new At(n.segments.slice(i.pathIndex),n.children),vg(o,0,r)}return i.match&&0===r.length?new At(n.segments,{}):i.match&&!n.hasChildren()?vb(n,e,t):i.match?vg(n,0,r):vb(n,e,t)}function vg(n,e,t){if(0===t.length)return new At(n.segments,{});{const i=function(n){return hh(n[0])?n[0].outlets:{[yt]:n}}(t),r={};return mi(i,(o,s)=>{"string"==typeof o&&(o=[o]),null!==o&&(r[s]=B2(n.children[s],e,o))}),mi(n.children,(o,s)=>{void 0===i[s]&&(r[s]=o)}),new At(n.segments,r)}}function vb(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const o=t[r];if(hh(o)){const l=mH(o.outlets);return new At(i,l)}if(0===r&&_g(t[0])){i.push(new ch(n.segments[e].path,U2(t[0]))),r++;continue}const s=hh(o)?o.outlets[yt]:`${o}`,a=r<t.length-1?t[r+1]:null;s&&a&&_g(a)?(i.push(new ch(s,U2(a))),r+=2):(i.push(new ch(s,{})),r++)}return new At(i,{})}function mH(n){const e={};return mi(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=vb(new At([],{}),0,t))}),e}function U2(n){const e={};return mi(n,(t,i)=>e[i]=`${t}`),e}function V2(n,e,t){return n==t.path&&Fo(e,t.parameters)}class vH{constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),pb(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=zc(t);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),mi(r,(o,s)=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,t,i){const r=e.value,o=t?t.value:null;if(r===o)if(r.component){const s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=zc(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],r);if(i&&i.outlet){const s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=zc(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=zc(t);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new z5(o.value.snapshot))}),e.children.length&&this.forwardEvent(new F5(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,o=t?t.value:null;if(pb(r),r===o)if(r.component){const s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),pb(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),l=a?a.module.componentFactoryResolver:null;s.attachRef=null,s.route=r,s.resolver=l,s.outlet&&s.outlet.activateWith(r,l),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,i)}}class yb{constructor(e,t){this.routes=e,this.module=t}}function ea(n){return"function"==typeof n}function Qa(n){return n instanceof Za}const fh=Symbol("INITIAL_VALUE");function ph(){return Ya(n=>function(...n){const e=Aa(n),t=Ll(n),{args:i,keys:r}=uP(n);if(0===i.length)return _n([],e);const o=new je(function(n,e,t=an){return i=>{a2(e,()=>{const{length:r}=n,o=new Array(r);let s=r,a=r;for(let l=0;l<r;l++)a2(e,()=>{const c=_n(n[l],e);let u=!1;c.subscribe(new Rn(i,d=>{o[l]=d,u||(u=!0,a--),a||i.next(t(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}(i,e,r?s=>hP(r,s):an));return t?o.pipe(dP(t)):o}(n.map(e=>e.pipe(Oa(1),function(...n){const e=Aa(n);return Qt((t,i)=>{(e?sb(n,t,e):sb(n,t)).subscribe(i)})}(fh)))).pipe(u2((e,t)=>{let i=!1;return t.reduce((r,o,s)=>r!==fh?r:(o===fh&&(i=!0),i||!1!==o&&s!==t.length-1&&!Qa(o)?r:o),e)},fh),$a(e=>e!==fh),Ct(e=>Qa(e)?e:!0===e),Oa(1)))}class EH{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new gh,this.attachRef=null}}class gh{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const i=this.getOrCreateContext(e);i.outlet=t,this.contexts.set(e,i)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new EH,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let bb=(()=>{class n{constructor(t,i,r,o,s){this.parentContexts=t,this.location=i,this.resolver=r,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new It,this.deactivateEvents=new It,this.attachEvents=new It,this.detachEvents=new It,this.name=o||yt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const s=(i=i||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),a=this.parentContexts.getOrCreateContext(this.name).children,l=new SH(t,a,this.location.injector);this.activated=this.location.createComponent(s,this.location.length,l),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(G(gh),G($r),G(Mc),function(n){return function(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const o=t[r];if(g1(o))break;if(0===o)r+=2;else if("number"==typeof o)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(o===e)return t[r+1];r+=2}}}return null}($n(),n)}("name"),G(oy))},n.\u0275dir=Xe({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class SH{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Ks?this.route:e===gh?this.childContexts:this.parent.get(e,t)}}let H2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Pt({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,i){1&t&&U(0,"router-outlet")},directives:[bb],encapsulation:2}),n})();function G2(n,e=""){for(let t=0;t<n.length;t++){const i=n[t];TH(i,PH(e,i))}}function TH(n,e){n.children&&G2(n.children,e)}function PH(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function xb(n){const e=n.children&&n.children.map(xb),t=e?ti(Ge({},n),{children:e}):Ge({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==yt&&(t.component=H2),t}function Or(n){return n.outlet||yt}function j2(n,e){const t=n.filter(i=>Or(i)===e);return t.push(...n.filter(i=>Or(i)!==e)),t}const W2={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function yg(n,e,t){var a;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Ge({},W2):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const r=(e.matcher||V5)(t,n,e);if(!r)return Ge({},W2);const o={};mi(r.posParams,(l,c)=>{o[c]=l.path});const s=r.consumed.length>0?Ge(Ge({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:s,positionalParamSegments:null!=(a=r.posParams)?a:{}}}function bg(n,e,t,i,r="corrected"){if(t.length>0&&function(n,e,t){return t.some(i=>xg(n,e,i)&&Or(i)!==yt)}(n,t,i)){const s=new At(e,function(n,e,t,i){const r={};r[yt]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const o of t)if(""===o.path&&Or(o)!==yt){const s=new At([],{});s._sourceSegment=n,s._segmentIndexShift=e.length,r[Or(o)]=s}return r}(n,e,i,new At(t,n.children)));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(i=>xg(n,e,i))}(n,t,i)){const s=new At(n.segments,function(n,e,t,i,r,o){const s={};for(const a of i)if(xg(n,t,a)&&!r[Or(a)]){const l=new At([],{});l._sourceSegment=n,l._segmentIndexShift="legacy"===o?n.segments.length:e.length,s[Or(a)]=l}return Ge(Ge({},r),s)}(n,e,t,i,n.children,r));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}const o=new At(n.segments,n.children);return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}function xg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function $2(n,e,t,i){return!!(Or(n)===i||i!==yt&&xg(e,t,n))&&("**"===n.path||yg(e,n,t).matched)}function q2(n,e,t){return 0===e.length&&!n.children[t]}class mh{constructor(e){this.segmentGroup=e||null}}class X2{constructor(e){this.urlTree=e}}function wg(n){return new je(e=>e.error(new mh(n)))}function Y2(n){return new je(e=>e.error(new X2(n)))}function RH(n){return new je(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class FH{constructor(e,t,i,r,o){this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=o,this.allowRedirects=!0,this.ngModule=e.get(ss)}apply(){const e=bg(this.urlTree.root,[],[],this.config).segmentGroup,t=new At(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,yt).pipe(Ct(o=>this.createUrlTree(wb(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Qs(o=>{if(o instanceof X2)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof mh?this.noMatchError(o):o}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,yt).pipe(Ct(r=>this.createUrlTree(wb(r),e.queryParams,e.fragment))).pipe(Qs(r=>{throw r instanceof mh?this.noMatchError(r):r}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,i){const r=e.segments.length>0?new At([],{[yt]:e}):e;return new Za(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe(Ct(o=>new At([],o))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const o of Object.keys(i.children))"primary"===o?r.unshift(o):r.push(o);return _n(r).pipe(Oc(o=>{const s=i.children[o],a=j2(t,o);return this.expandSegmentGroup(e,a,s,o).pipe(Ct(l=>({segment:l,outlet:o})))}),u2((o,s)=>(o[s.outlet]=s.segment,o),{}),function(n,e){const t=arguments.length>=2;return i=>i.pipe(n?$a((r,o)=>n(r,o,i)):an,ab(1),t?h2(e):d2(()=>new ug))}())}expandSegment(e,t,i,r,o,s){return _n(i).pipe(Oc(a=>this.expandSegmentAgainstRoute(e,t,i,a,r,o,s).pipe(Qs(c=>{if(c instanceof mh)return ht(null);throw c}))),Fc(a=>!!a),Qs((a,l)=>{if(a instanceof ug||"EmptyError"===a.name){if(q2(t,r,o))return ht(new At([],{}));throw new mh(t)}throw a}))}expandSegmentAgainstRoute(e,t,i,r,o,s,a){return $2(r,t,o,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,o,s):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s):wg(t):wg(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const o=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?Y2(o):this.lineralizeSegments(i,o).pipe(Ln(s=>{const a=new At(s,{});return this.expandSegment(e,a,t,s,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s){const{matched:a,consumedSegments:l,lastChild:c,positionalParamSegments:u}=yg(t,r,o);if(!a)return wg(t);const d=this.applyRedirectCommands(l,r.redirectTo,u);return r.redirectTo.startsWith("/")?Y2(d):this.lineralizeSegments(r,d).pipe(Ln(h=>this.expandSegment(e,t,i,h.concat(o.slice(c)),s,!1)))}matchSegmentAgainstRoute(e,t,i,r,o){if("**"===i.path)return i.loadChildren?(i._loadedConfig?ht(i._loadedConfig):this.configLoader.load(e.injector,i)).pipe(Ct(h=>(i._loadedConfig=h,new At(r,{})))):ht(new At(r,{}));const{matched:s,consumedSegments:a,lastChild:l}=yg(t,i,r);if(!s)return wg(t);const c=r.slice(l);return this.getChildConfig(e,i,r).pipe(Ln(d=>{const h=d.module,f=d.routes,{segmentGroup:m,slicedSegments:v}=bg(t,a,c,f),w=new At(m.segments,m.children);if(0===v.length&&w.hasChildren())return this.expandChildren(h,f,w).pipe(Ct(C=>new At(a,C)));if(0===f.length&&0===v.length)return ht(new At(a,{}));const y=Or(i)===o;return this.expandSegment(h,w,f,v,y?yt:o,!0).pipe(Ct(M=>new At(a.concat(M.segments),M.children)))}))}getChildConfig(e,t,i){return t.children?ht(new yb(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?ht(t._loadedConfig):this.runCanLoadGuards(e.injector,t,i).pipe(Ln(r=>{return r?this.configLoader.load(e.injector,t).pipe(Ct(o=>(t._loadedConfig=o,o))):(n=t,new je(e=>e.error(cb(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):ht(new yb([],e))}runCanLoadGuards(e,t,i){const r=t.canLoad;return r&&0!==r.length?ht(r.map(s=>{const a=e.get(s);let l;if((n=a)&&ea(n.canLoad))l=a.canLoad(t,i);else{if(!ea(a))throw new Error("Invalid CanLoad guard");l=a(t,i)}var n;return No(l)})).pipe(ph(),pr(s=>{if(!Qa(s))return;const a=cb(`Redirecting to "${this.urlSerializer.serialize(s)}"`);throw a.url=s,a}),Ct(s=>!0===s)):ht(!0)}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return ht(i);if(r.numberOfChildren>1||!r.children[yt])return RH(e.redirectTo);r=r.children[yt]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreatreUrlTree(e,t,i,r){const o=this.createSegmentGroup(e,t.root,i,r);return new Za(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return mi(e,(r,o)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);i[o]=t[a]}else i[o]=r}),i}createSegmentGroup(e,t,i,r){const o=this.createSegments(e,t.segments,i,r);let s={};return mi(t.children,(a,l)=>{s[l]=this.createSegmentGroup(e,a,i,r)}),new At(o,s)}createSegments(e,t,i,r){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}function wb(n){const e={};for(const i of Object.keys(n.children)){const o=wb(n.children[i]);(o.segments.length>0||o.hasChildren())&&(e[i]=o)}return function(n){if(1===n.numberOfChildren&&n.children[yt]){const e=n.children[yt];return new At(n.segments.concat(e.segments),e.children)}return n}(new At(n.segments,e))}class Z2{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Cg{constructor(e,t){this.component=e,this.route=t}}function BH(n,e,t){const i=n._root;return _h(i,e?e._root:null,t,[i.value])}function Mg(n,e,t){const i=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(i?i.module.injector:t).get(n)}function _h(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=zc(e);return n.children.forEach(s=>{(function(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const l=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ja(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ja(n.url,e.url)||!Fo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!gb(n,e)||!Fo(n.queryParams,e.queryParams);default:return!gb(n,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new Z2(i)):(o.data=s.data,o._resolvedData=s._resolvedData),_h(n,e,o.component?a?a.children:null:t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Cg(a.outlet.component,s))}else s&&vh(e,a,r),r.canActivateChecks.push(new Z2(i)),_h(n,null,o.component?a?a.children:null:t,i,r)})(s,o[s.value.outlet],t,i.concat([s.value]),r),delete o[s.value.outlet]}),mi(o,(s,a)=>vh(s,t.getContext(a),r)),r}function vh(n,e,t){const i=zc(n),r=n.value;mi(i,(o,s)=>{vh(o,r.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new Cg(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}class QH{}function J2(n){return new je(e=>e.error(n))}class e6{constructor(e,t,i,r,o,s){this.rootComponentType=e,this.config=t,this.urlTree=i,this.url=r,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=s}recognize(){const e=bg(this.urlTree.root,[],[],this.config.filter(s=>void 0===s.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,yt);if(null===t)return null;const i=new mg([],Object.freeze({}),Object.freeze(Ge({},this.urlTree.queryParams)),this.urlTree.fragment,{},yt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new fs(i,t),o=new k2(this.url,r);return this.inheritParamsAndData(o._root),o}inheritParamsAndData(e){const t=e.value,i=L2(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,i)}processChildren(e,t){const i=[];for(const o of Object.keys(t.children)){const s=t.children[o],a=j2(e,o),l=this.processSegmentGroup(a,s,o);if(null===l)return null;i.push(...l)}const r=Q2(i);return r.sort((e,t)=>e.value.outlet===yt?-1:t.value.outlet===yt?1:e.value.outlet.localeCompare(t.value.outlet)),r}processSegment(e,t,i,r){for(const o of e){const s=this.processSegmentAgainstRoute(o,t,i,r);if(null!==s)return s}return q2(t,i,r)?[]:null}processSegmentAgainstRoute(e,t,i,r){if(e.redirectTo||!$2(e,t,i,r))return null;let o,s=[],a=[];if("**"===e.path){const f=i.length>0?b2(i).parameters:{};o=new mg(i,f,Object.freeze(Ge({},this.urlTree.queryParams)),this.urlTree.fragment,tA(e),Or(e),e.component,e,K2(t),eA(t)+i.length,nA(e))}else{const f=yg(t,e,i);if(!f.matched)return null;s=f.consumedSegments,a=i.slice(f.lastChild),o=new mg(s,f.parameters,Object.freeze(Ge({},this.urlTree.queryParams)),this.urlTree.fragment,tA(e),Or(e),e.component,e,K2(t),eA(t)+s.length,nA(e))}const l=(n=e).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:c,slicedSegments:u}=bg(t,s,a,l.filter(f=>void 0===f.redirectTo),this.relativeLinkResolution);var n;if(0===u.length&&c.hasChildren()){const f=this.processChildren(l,c);return null===f?null:[new fs(o,f)]}if(0===l.length&&0===u.length)return[new fs(o,[])];const d=Or(e)===r,h=this.processSegment(l,c,u,d?yt:r);return null===h?null:[new fs(o,h)]}}function i6(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Q2(n){const e=[],t=new Set;for(const i of n){if(!i6(i)){e.push(i);continue}const r=e.find(o=>i.value.routeConfig===o.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=Q2(i.children);e.push(new fs(i.value,r))}return e.filter(i=>!t.has(i))}function K2(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function eA(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function tA(n){return n.data||{}}function nA(n){return n.resolve||{}}function Cb(n){return Ya(e=>{const t=n(e);return t?_n(t).pipe(Ct(()=>e)):ht(e)})}class d6 extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Mb=new gt("ROUTES");class iA{constructor(e,t,i,r){this.injector=e,this.compiler=t,this.onLoadStartListener=i,this.onLoadEndListener=r}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const r=this.loadModuleFactory(t.loadChildren).pipe(Ct(o=>{this.onLoadEndListener&&this.onLoadEndListener(t);const s=o.create(e);return new yb(y2(s.injector.get(Mb,void 0,ot.Self|ot.Optional)).map(xb),s)}),Qs(o=>{throw t._loader$=void 0,o}));return t._loader$=new C5(r,()=>new vr).pipe(c2()),t._loader$}loadModuleFactory(e){return No(e()).pipe(Ln(t=>t instanceof hS?ht(t):_n(this.compiler.compileModuleAsync(t))))}}class f6{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function p6(n){throw n}function g6(n,e,t){return e.parse("/")}function rA(n,e){return ht(null)}const m6={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},_6={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Bt=(()=>{class n{constructor(t,i,r,o,s,a,l){this.rootComponentType=t,this.urlSerializer=i,this.rootContexts=r,this.location=o,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new vr,this.errorHandler=p6,this.malformedUriErrorHandler=g6,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:rA,afterPreactivation:rA},this.urlHandlingStrategy=new f6,this.routeReuseStrategy=new d6,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=s.get(ss),this.console=s.get(YS);const d=s.get(Yn);this.isNgZoneEnabled=d instanceof Yn&&Yn.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=new Za(new At([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new iA(s,a,h=>this.triggerEvent(new p2(h)),h=>this.triggerEvent(new g2(h))),this.routerState=R2(this.currentUrlTree,this.rootComponentType),this.transitions=new Kr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null==(t=this.location.getState())?void 0:t.\u0275routerPageId}setupNavigations(t){const i=this.events;return t.pipe($a(r=>0!==r.id),Ct(r=>ti(Ge({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),Ya(r=>{let o=!1,s=!1;return ht(r).pipe(pr(a=>{this.currentNavigation={id:a.id,initialUrl:a.currentRawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?ti(Ge({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ya(a=>{const l=this.browserUrlTree.toString(),c=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return Eg(a.source)&&(this.browserUrlTree=a.extractedUrl),ht(a).pipe(Ya(d=>{const h=this.transitions.getValue();return i.next(new lb(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions.getValue()?Fi:Promise.resolve(d)}),function(n,e,t,i){return Ya(r=>function(n,e,t,i,r){return new FH(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe(Ct(o=>ti(Ge({},r),{urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),pr(d=>{this.currentNavigation=ti(Ge({},this.currentNavigation),{finalUrl:d.urlAfterRedirects})}),function(n,e,t,i,r){return Ln(o=>function(n,e,t,i,r="emptyOnly",o="legacy"){try{const s=new e6(n,e,t,i,r,o).recognize();return null===s?J2(new QH):ht(s)}catch(s){return J2(s)}}(n,e,o.urlAfterRedirects,t(o.urlAfterRedirects),i,r).pipe(Ct(s=>ti(Ge({},o),{targetSnapshot:s}))))}(this.rootComponentType,this.config,d=>this.serializeUrl(d),this.paramsInheritanceStrategy,this.relativeLinkResolution),pr(d=>{if("eager"===this.urlUpdateStrategy){if(!d.extras.skipLocationChange){const f=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);this.setBrowserUrl(f,d)}this.browserUrlTree=d.urlAfterRedirects}const h=new D5(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);i.next(h)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:h,extractedUrl:f,source:m,restoredState:v,extras:w}=a,y=new lb(h,this.serializeUrl(f),m,v);i.next(y);const _=R2(f,this.rootComponentType).snapshot;return ht(ti(Ge({},a),{targetSnapshot:_,urlAfterRedirects:f,extras:ti(Ge({},w),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=a.rawUrl,a.resolve(null),Fi}),Cb(a=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:h,replaceUrl:f}}=a;return this.hooks.beforePreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!h,replaceUrl:!!f})}),pr(a=>{const l=new O5(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),Ct(a=>ti(Ge({},a),{guards:BH(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function(n,e){return Ln(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return 0===s.length&&0===o.length?ht(ti(Ge({},t),{guardsResult:!0})):function(n,e,t,i){return _n(n).pipe(Ln(r=>function(n,e,t,i,r){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?ht(o.map(a=>{const l=Mg(a,e,r);let c;if(function(n){return n&&ea(n.canDeactivate)}(l))c=No(l.canDeactivate(n,e,t,i));else{if(!ea(l))throw new Error("Invalid CanDeactivate guard");c=No(l(n,e,t,i))}return c.pipe(Fc())})).pipe(ph()):ht(!0)}(r.component,r.route,t,e,i)),Fc(r=>!0!==r,!0))}(s,i,r,n).pipe(Ln(a=>a&&function(n){return"boolean"==typeof n}(a)?function(n,e,t,i){return _n(e).pipe(Oc(r=>sb(function(n,e){return null!==n&&e&&e(new k5(n)),ht(!0)}(r.route.parent,i),function(n,e){return null!==n&&e&&e(new N5(n)),ht(!0)}(r.route,i),function(n,e,t){const i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(s)).filter(s=>null!==s).map(s=>l2(()=>ht(s.guards.map(l=>{const c=Mg(l,s.node,t);let u;if(function(n){return n&&ea(n.canActivateChild)}(c))u=No(c.canActivateChild(i,n));else{if(!ea(c))throw new Error("Invalid CanActivateChild guard");u=No(c(i,n))}return u.pipe(Fc())})).pipe(ph())));return ht(o).pipe(ph())}(n,r.path,t),function(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return ht(!0);const r=i.map(o=>l2(()=>{const s=Mg(o,e,t);let a;if(function(n){return n&&ea(n.canActivate)}(s))a=No(s.canActivate(e,n));else{if(!ea(s))throw new Error("Invalid CanActivate guard");a=No(s(e,n))}return a.pipe(Fc())}));return ht(r).pipe(ph())}(n,r.route,t))),Fc(r=>!0!==r,!0))}(i,o,n,e):ht(a)),Ct(a=>ti(Ge({},t),{guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),pr(a=>{if(Qa(a.guardsResult)){const c=cb(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw c.url=a.guardsResult,c}const l=new I5(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),$a(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),Cb(a=>{if(a.guards.canActivateChecks.length)return ht(a).pipe(pr(l=>{const c=new R5(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),Ya(l=>{let c=!1;return ht(l).pipe(function(n,e){return Ln(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return ht(t);let o=0;return _n(r).pipe(Oc(s=>function(n,e,t,i){return function(n,e,t,i){const r=Object.keys(n);if(0===r.length)return ht({});const o={};return _n(r).pipe(Ln(s=>function(n,e,t,i){const r=Mg(n,e,i);return No(r.resolve?r.resolve(e,t):r(e,t))}(n[s],e,t,i).pipe(pr(a=>{o[s]=a}))),ab(1),Ln(()=>Object.keys(o).length===r.length?ht(o):Fi))}(n._resolve,n,e,i).pipe(Ct(o=>(n._resolvedData=o,n.data=Ge(Ge({},n.data),L2(n,t).resolve),null)))}(s.route,i,n,e)),pr(()=>o++),ab(1),Ln(s=>o===r.length?ht(t):Fi))})}(this.paramsInheritanceStrategy,this.ngModule.injector),pr({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"At least one route resolver didn't emit any value."))}}))}),pr(l=>{const c=new L5(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),Cb(a=>{const{targetSnapshot:l,id:c,extractedUrl:u,rawUrl:d,extras:{skipLocationChange:h,replaceUrl:f}}=a;return this.hooks.afterPreactivation(l,{navigationId:c,appliedUrlTree:u,rawUrlTree:d,skipLocationChange:!!h,replaceUrl:!!f})}),Ct(a=>{const l=function(n,e,t){const i=dh(n,e._root,t?t._root:void 0);return new I2(i,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return ti(Ge({},a),{targetRouterState:l})}),pr(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,e,t)=>Ct(i=>(new vH(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),pr({next(){o=!0},complete(){o=!0}}),function(n){return Qt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var a;o||s||this.cancelNavigationTransition(r,`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`),(null==(a=this.currentNavigation)?void 0:a.id)===r.id&&(this.currentNavigation=null)}),Qs(a=>{if(s=!0,function(n){return n&&n[_2]}(a)){const l=Qa(a.url);l||(this.navigated=!0,this.restoreHistory(r,!0));const c=new f2(r.id,this.serializeUrl(r.extractedUrl),a.message);i.next(c),l?setTimeout(()=>{const u=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),d={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Eg(r.source)};this.scheduleNavigation(u,"imperative",null,d,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const l=new A5(r.id,this.serializeUrl(r.extractedUrl),a);i.next(l);try{r.resolve(this.errorHandler(a))}catch(c){r.reject(c)}}return Fi}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Ge(Ge({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{var a;const r={replaceUrl:!0},o=(null==(a=t.state)?void 0:a.navigationId)?t.state:null;if(o){const l=Ge({},o);delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(r.state=l)}const s=this.parseUrl(t.url);this.scheduleNavigation(s,i,o,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){G2(t),this.config=t.map(xb),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=i,c=r||this.routerState.root,u=l?this.currentUrlTree.fragment:s;let d=null;switch(a){case"merge":d=Ge(Ge({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}return null!==d&&(d=this.removeEmptyProps(d)),function(n,e,t,i,r){if(0===t.length)return mb(e.root,e.root,e,i,r);const o=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new z2(!0,0,n);let e=0,t=!1;const i=n.reduce((r,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return mi(o.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return"string"!=typeof o?[...r,o]:0===s?(o.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,o]},[]);return new z2(t,e,i)}(t);if(o.toRoot())return mb(e.root,new At([],{}),e,i,r);const s=function(n,e,t){if(n.isAbsolute)return new _b(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const o=t.snapshot._urlSegment;return new _b(o,o===e.root,0)}const i=_g(n.commands[0])?0:1;return function(n,e,t){let i=n,r=e,o=t;for(;o>r;){if(o-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new _b(i,!1,r-o)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+i,n.numberOfDoubleDots)}(o,e,n),a=s.processChildren?vg(s.segmentGroup,s.index,o.commands):B2(s.segmentGroup,s.index,o.commands);return mb(s.segmentGroup,a,e,i,r)}(c,this.currentUrlTree,t,d,null!=u?u:null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=Qa(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,i)}navigate(t,i={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?Ge({},m6):!1===i?Ge({},_6):i,Qa(t))return w2(this.currentUrlTree,t,r);const o=this.parseUrl(t);return w2(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const o=t[r];return null!=o&&(i[r]=o),i},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new lh(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,i,r,o,s){var y,_,M;if(this.disposed)return Promise.resolve(!1);const a=this.transitions.value,l=Eg(i)&&a&&!Eg(a.source),c=a.rawUrl.toString()===t.toString(),u=a.id===(null==(y=this.currentNavigation)?void 0:y.id);if(l&&c&&u)return Promise.resolve(!0);let h,f,m;s?(h=s.resolve,f=s.reject,m=s.promise):m=new Promise((C,A)=>{h=C,f=A});const v=++this.navigationId;let w;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),w=r&&r.\u0275routerPageId?r.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?null!=(_=this.browserPageId)?_:0:(null!=(M=this.browserPageId)?M:0)+1):w=0,this.setTransition({id:v,targetPageId:w,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:o,resolve:h,reject:f,promise:m,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),m.catch(C=>Promise.reject(C))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t),o=Ge(Ge({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",o):this.location.go(r,"",o)}restoreHistory(t,i=!1){var r,o;if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null==(r=this.currentNavigation)?void 0:r.finalUrl)||0===s?this.currentUrlTree===(null==(o=this.currentNavigation)?void 0:o.finalUrl)&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(s)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,i){const r=new f2(t.id,this.serializeUrl(t.extractedUrl),i);this.triggerEvent(r),t.resolve(!1)}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){w0()},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();function Eg(n){return"imperative"!==n}class oA{}class sA{preload(e,t){return ht(null)}}let aA=(()=>{class n{constructor(t,i,r,o){this.router=t,this.injector=r,this.preloadingStrategy=o,this.loader=new iA(r,i,l=>t.triggerEvent(new p2(l)),l=>t.triggerEvent(new g2(l)))}setUpPreloading(){this.subscription=this.router.events.pipe($a(t=>t instanceof lh),Oc(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(ss);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const o of i)if(o.loadChildren&&!o.canLoad&&o._loadedConfig){const s=o._loadedConfig;r.push(this.processRoutes(s.module,s.routes))}else o.loadChildren&&!o.canLoad?r.push(this.preloadConfig(t,o)):o.children&&r.push(this.processRoutes(t,o.children));return _n(r).pipe(Pa(),Ct(o=>{}))}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?ht(i._loadedConfig):this.loader.load(t.injector,i)).pipe(Ln(o=>(i._loadedConfig=o,this.processRoutes(o.module,o.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(Le(Bt),Le(Np),Le(gi),Le(oA))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})(),Tb=(()=>{class n{constructor(t,i,r={}){this.router=t,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof lb?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof lh&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof m2&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.router.triggerEvent(new m2(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){w0()},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();const Ka=new gt("ROUTER_CONFIGURATION"),lA=new gt("ROUTER_FORROOT_GUARD"),w6=[hy,{provide:S2,useClass:T2},{provide:Bt,useFactory:function(n,e,t,i,r,o,s={},a,l){const c=new Bt(null,n,e,t,i,r,y2(o));return a&&(c.urlHandlingStrategy=a),l&&(c.routeReuseStrategy=l),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(s,c),s.enableTracing&&c.events.subscribe(u=>{var d,h;null==(d=console.group)||d.call(console,`Router Event: ${u.constructor.name}`),console.log(u.toString()),console.log(u),null==(h=console.groupEnd)||h.call(console)}),c},deps:[S2,gh,hy,gi,Np,Mb,Ka,[class{},new Co],[class{},new Co]]},gh,{provide:Ks,useFactory:function(n){return n.routerState.root},deps:[Bt]},aA,sA,class{preload(e,t){return t().pipe(Qs(()=>ht(null)))}},{provide:Ka,useValue:{enableTracing:!1}}];function C6(){return new tT("Router",Bt)}let cA=(()=>{class n{constructor(t,i){}static forRoot(t,i){return{ngModule:n,providers:[w6,uA(t),{provide:lA,useFactory:S6,deps:[[Bt,new Co,new Kl]]},{provide:Ka,useValue:i||{}},{provide:Dc,useFactory:E6,deps:[ja,[new Cd(dy),new Co],Ka]},{provide:Tb,useFactory:M6,deps:[Bt,EU,Ka]},{provide:oA,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:sA},{provide:tT,multi:!0,useFactory:C6},[Pb,{provide:kp,multi:!0,useFactory:D6,deps:[Pb]},{provide:dA,useFactory:O6,deps:[Pb]},{provide:XS,multi:!0,useExisting:dA}]]}}static forChild(t){return{ngModule:n,providers:[uA(t)]}}}return n.\u0275fac=function(t){return new(t||n)(Le(lA,8),Le(Bt,8))},n.\u0275mod=Ci({type:n}),n.\u0275inj=pi({}),n})();function M6(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Tb(n,e,t)}function E6(n,e,t={}){return t.useHash?new s4(n,e):new CT(n,e)}function S6(n){return"guarded"}function uA(n){return[{provide:R3,multi:!0,useValue:n},{provide:Mb,multi:!0,useValue:n}]}let Pb=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new vr}appInitializer(){return this.injector.get(i4,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const r=new Promise(a=>i=a),o=this.injector.get(Bt),s=this.injector.get(Ka);return"disabled"===s.initialNavigation?(o.setUpLocationChangeListener(),i(!0)):"enabled"===s.initialNavigation||"enabledBlocking"===s.initialNavigation?(o.hooks.afterPreactivation=()=>this.initNavigation?ht(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),o.initialNavigation()):i(!0),r})}bootstrapListener(t){const i=this.injector.get(Ka),r=this.injector.get(aA),o=this.injector.get(Tb),s=this.injector.get(Bt),a=this.injector.get(Xd);t===a.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&s.initialNavigation(),r.setUpPreloading(),o.init(),s.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(Le(gi))},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})();function D6(n){return n.appInitializer.bind(n)}function O6(n){return n.bootstrapListener.bind(n)}const dA=new gt("Router Initializer");var R6=mn(659),vt=mn.n(R6);const zo_baseUrl="https://social-network-game-mdr.azurewebsites.net/api";var L6={headers:new hr({"Content-Type":"application/json"})};let Bo=(()=>{class n{constructor(t){this.http=t,this.url=zo_baseUrl+"/utilizadores"}adicionarUtilizador(t){return this.http.post(this.url,t,L6)}getTodos(){return this.http.get(this.url)}getUtilizadoresPorParametros(t,i,r,o){var s;return(""!=t||""!=i||""!=r||""!=o)&&(s="?",""!=t&&(s=s+"nome="+t),""!=i&&(s+=s.length>1?"&&email="+i:"email="+i),""!=r&&(s+=s.length>1?"&&pais="+r:"pais="+r),""!=o&&(s+=s.length>1?"&&cidade="+o:"cidade="+o)),this.http.get(this.url+""+s)}getUtilizadorAutenticado(){return this.http.get(this.url+"/"+localStorage.getItem("idUtilizador"))}getUtilizadorByID(t){return this.http.get(this.url+"/"+t)}alterarDadosUtilizador(t){return this.http.put(this.url+"/"+localStorage.getItem("idUtilizador"),{password:t.password,nome:t.nome,tags:t.tags,facebook:""==t.facebook?null:t.facebook,linkedIn:""==t.linkedIn?null:t.linkedIn,estadoEmocional:t.estadoEmocional,dataNascimento:t.dataNascimento,descricao:""==t.descricao?null:t.descricao,pais:""==t.pais?null:t.pais,cidade:""==t.cidade?null:t.cidade,codigoPaisTelefone:""==t.codigoPais?null:t.codigoPais,numeroTelefone:""==t.numeroTelemovel?null:t.numeroTelemovel,avatar:t.avatar})}getTagsCloud(){return this.http.get(this.url+"/tagCloud")}getTagsCloudDoUtilizadorAutenticado(){return this.http.get(this.url+"/tagCloud?utilizador="+localStorage.getItem("idUtilizador"))}apagarMeuUtilizador(){return this.http.delete(this.url)}}return n.\u0275fac=function(t){return new(t||n)(Le(Ro))},n.\u0275prov=We({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ab=(()=>{class n{constructor(){this.estadosDisponiveis=["Alegre","Angustiado","Esperancoso","Medroso","Aliviado","Desapontado","Orgulhoso","Com_Remorso","Agradecido","Zangado"]}getEstadosEmocionais(){return this.estadosDisponiveis}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=We({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hA=(()=>{class n{constructor(){this.avatares=["avatar-1.png","avatar-2.png","avatar-3.png","avatar-4.png","avatar-5.png","avatar-6.png","avatar-7.png","avatar-8.png"]}getAvataresDisponiveis(){return this.avatares}avatarPorDefeito(){return this.avatares[0]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=We({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var k6={headers:new hr({"Content-Type":"application/json"})};let yh=(()=>{class n{constructor(t,i){this.http=t,this.router=i,this.url=zo_baseUrl+"/autenticacao"}redirecionarParaLoginSeNaoAutenticado(){let t=localStorage.getItem("expiracao");const i=new Date(t);(null==localStorage.getItem("token")||null==localStorage.getItem("expiracao")||new Date>i)&&this.router.navigate(["/"])}login(t){return this.http.post(this.url,t,k6)}}return n.\u0275fac=function(t){return new(t||n)(Le(Ro),Le(Bt))},n.\u0275prov=We({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),fA=(()=>{class n{constructor(){this.janelaAberta=new It}ngOnInit(){}fechar(){this.janelaAberta.emit(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Pt({type:n,selectors:[["app-rpgd"]],outputs:{janelaAberta:"janelaAberta"},decls:113,vars:0,consts:[[1,"pagina"],[1,"topo"],[1,"meio"],[2,"background-color","firebrick","margin-right","5px",3,"click"]],template:function(t,i){1&t&&(p(0,"div",0),p(1,"div",1),p(2,"h2"),S(3,"Politica de Privacidade"),g(),U(4,"hr"),g(),p(5,"div",2),p(6,"p"),S(7,"A confidencialidade e a integridade dos seus dados pessoais s\xe3o uma preocupa\xe7\xe3o da Aplica\xe7\xe3o Social Network Game."),g(),p(8,"p"),S(9,"A aplica\xe7\xe3o cumpre a legisla\xe7\xe3o de prote\xe7\xe3o de dados pessoais em vigor, nomeadamente nas rela\xe7\xf5es com os seus utilizadores em particular o Regulamento (UE) 2016/679 do Parlamento Europeu e do Conselho, de 27 de Abril de 2016 (\u201cRegulamento\u201d ou \u201cRGPD\u201d)."),g(),p(10,"p"),S(11,"A Social Network Game \xe9 respons\xe1vel pelo tratamento dos seus dados pessoais que nos sejam disponibilizados no \xe2mbito da utiliza\xe7\xe3o da rede social."),g(),p(12,"p"),S(13,"A Social Network Game e os seus prestadores de servi\xe7os na \xe1rea da gest\xe3o e armazenamento de dados, utilizam uma diversidade de medidas de seguran\xe7a, incluindo ferramentas de autentica\xe7\xe3o, para ajudar a proteger e manter a seguran\xe7a dos seus dados pessoais em conformidade com os requisitos de prote\xe7\xe3o de dados aplic\xe1veis."),g(),p(14,"p"),S(15,"Os dados disponibilizados \xe0 aplica\xe7\xe3o. ser\xe3o usados unicamente durante o per\xedodo de tempo de demonstra\xe7\xe3o da aplica\xe7\xe3o, ap\xf3s o qual ser\xe3o destru\xeddos de forma segura, salvo se, durante esse per\xedodo, n\xe3o tenha j\xe1 retirado o seu consentimento."),g(),p(16,"p"),S(17,"A maior parte dos dados pessoais n\xe3o s\xe3o obrigat\xf3rios, mas recomendamos que para um maior rendimento do uso da aplica\xe7\xe3o todos os dados sejam especificados."),g(),p(18,"p"),S(19,"Pode, em qualquer altura, alterar ou retirar o seu consentimento \xe0 utiliza\xe7\xe3o dos seus dados pessoais aqui transmitidos, com efeitos para o futuro. Ao faz\xea-lo, os seus dados ser\xe3o apagados de forma segura."),g(),p(20,"p"),S(21,"Para alterar ou retirar o seu consentimento dos dados fornecidos \xe0 aplica\xe7\xe3o dever\xe1 contactar o Encarregado da Prote\xe7\xe3o de Dados atrav\xe9s do endere\xe7o de email 1181178@isep.ipp.pt."),g(),U(22,"br"),p(23,"h4"),S(24,"Que dados s\xe3o recolhidos?"),g(),S(25," A Social Network Game recolhe os seguintes dados:"),U(26,"br"),S(27," \u2022 Informa\xe7\xe3o de identifica\xe7\xe3o pessoal (Nome, Email);"),U(28,"br"),S(29," \u2022 Dados pessoais facultativos (Localiza\xe7\xe3o, contacto telef\xf3nico, data nascimento);"),U(30,"br"),S(31," \u2022 Tags de interesse;"),U(32,"br"),S(33," \u2022 Informa\xe7\xe3o acerca do estado de humor."),U(34,"br"),U(35,"br"),p(36,"h4"),S(37,"Como s\xe3o recolhidos os dados?"),g(),S(38," A Social Network Game recolhe os dados do utilizador e processa-os quando:"),U(39,"br"),S(40," \u2022 No ato do registo na aplica\xe7\xe3o."),U(41,"br"),S(42," \u2022 Na altera\xe7\xe3o do perfil de utilizador"),U(43,"br"),U(44,"br"),p(45,"h4"),S(46,"Como ser\xe3o usados os dados?"),g(),S(47," A Social Network Game recolhe os dados com o intuito de:"),U(48,"br"),S(49," \u2022 Criar um novo utilizador da aplica\xe7\xe3o e devida ficha de cliente;"),U(50,"br"),S(51," \u2022 Criar novas amizades e aumentar a sua rede social."),U(52,"br"),U(53,"br"),p(54,"h4"),S(55,"Como s\xe3o armazenados os dados?"),g(),S(56," A Social Network Game armazena os dados em seguran\xe7a no servi\xe7o de base de dados SQL. Este servi\xe7o cloud apresenta v\xe1rios sistemas de seguran\xe7a perante os dados guardados:"),U(57,"br"),S(58," \u2022 Seguran\xe7a de Rede;"),U(59,"br"),S(60," \u2022 Gest\xe3o de Acesso;"),U(61,"br"),S(62," \u2022 Prote\xe7\xe3o de amea\xe7as;"),U(63,"br"),S(64," \u2022 Prote\xe7\xe3o de informa\xe7\xe3o."),U(65,"br"),U(66,"br"),S(67," A Social Network Game ir\xe1 manter os dados recolhidos at\xe9 31 de janeiro de 2022. Uma vez que este per\xedodo seja atingido, a base de dados ser\xe1 apagada com toda a informa\xe7\xe3o sobre o utilizador devido ao fim do per\xedodo de demonstra\xe7\xe3o da aplica\xe7\xe3o."),U(68,"br"),U(69,"br"),p(70,"h4"),S(71,"Quais s\xe3o os direitos de prote\xe7\xe3o de dados?"),g(),S(72," A Social Network Game gostaria de informar os seus utilizadores de todos os direitos relacionados com prote\xe7\xe3o de dados. Assim sendo os utilizadores ter\xe3o:"),U(73,"br"),S(74," \u2022 "),p(75,"strong"),S(76,"Direito de Acesso"),g(),S(77," \u2013 o utilizador tem o direito de pedir \xe0 Social Network Game uma c\xf3pia dos seus dados pessoais."),U(78,"br"),S(79," \u2022 "),p(80,"strong"),S(81,"Direito de retifica\xe7\xe3o"),g(),S(82," \u2013 o utilizador tem o direito de pedir \xe0 Social Network Game uma retifica\xe7\xe3o dos seus dados pessoais a qualquer momento. O utilizador tem tamb\xe9m o direito de pedir o preenchimento de qualquer informa\xe7\xe3o que esteja incompleta."),U(83,"br"),S(84," \u2022 "),p(85,"strong"),S(86,"Direito ao Esquecimento"),g(),S(87," \u2013 o utilizador tem o direito de pedir \xe0 Social Network Game que apague os seus dados sobre certas condi\xe7\xf5es."),U(88,"br"),S(89," \u2022 "),p(90,"strong"),S(91,"Direito de restri\xe7\xe3o de processamento"),g(),S(92," \u2013 o utilizador tem o direito de pedir \xe0 Social Network Game que restrinja o processamento dos seus dados, sobre certas condi\xe7\xf5es."),U(93,"br"),U(94,"br"),S(95," Se o utilizador pretender executar um pedido, a Social Network Game tem um limite de cinco dias uteis para responder. Se pretender contactar a mesma, para exercer algum destes direitos, por favor contactar:"),U(96,"br"),S(97," Ligue-nos em: 256098779"),U(98,"br"),S(99," Escreva-nos em: socialnetworkgame@gmail.com"),U(100,"br"),U(101,"br"),p(102,"h4"),S(103,"Modifica\xe7\xf5es na pol\xedtica de privacidade"),g(),S(104," A Social Network Game mant\xe9m a sua pol\xedtica de privacidade regularizada e coloca atualiza\xe7\xf5es na aplica\xe7\xe3o. Esta pol\xedtica de privacidade foi alterada pela \xfaltima vez dia 22 de Janeiro de 2022."),U(105,"br"),U(106,"br"),p(107,"button",3),J("click",function(){return i.fechar()}),p(108,"b"),S(109,"Fechar"),g(),g(),U(110,"br"),U(111,"br"),g(),g(),U(112,"div"))},styles:['.pagina[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:space-between}.topo[_ngcontent-%COMP%]{width:100%;height:5%;display:flex;flex-direction:column;justify-content:space-around}.meio[_ngcontent-%COMP%]{width:100%;height:92%;font-size:13px;font-family:Arial,Helvetica,sans-serif}.meio[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;font-family:Arial,Helvetica,sans-serif}.meio[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:13px}.topo[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#000;text-align:center;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif}.meio[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px;border:0;border-radius:10px;cursor:pointer;color:#fff;text-align:center}.meio[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:.8}']}),n})();function F6(n,e){if(1&n){const t=$e();p(0,"div",32),p(1,"app-rpgd",33),J("janelaAberta",function(r){return be(t),j().setJanela(r)}),g(),g()}}function N6(n,e){if(1&n&&(p(0,"option",34),S(1),g()),2&n){const t=e.$implicit;R("value",t),T(1),_e(t)}}let pA=(()=>{class n{constructor(t,i,r,o,s,a){this.fb=t,this.router=i,this.utilizadorService=r,this.estadosEmocionaisService=o,this.avataresService=s,this.loginService=a,this.formRegisto=this.fb.group({email:["",[Qr.email,Qr.required]],password:["",[Qr.required]],confirmarPassword:["",[Qr.required]],estadoEmocional:["",[Qr.required]],dataNascimento:["",[Qr.required]],nome:[""],tags:["",[Qr.required]],gdprCheck:["",[Qr.requiredTrue]]}),this.formLogin=this.fb.group({email:["",[Qr.email,Qr.required]],password:["",[Qr.required]]}),this.estadosEmocionais=o.getEstadosEmocionais(),this.rgpd=!1,this.utilizadoresCarregados=!1,this.nrUtilizadores=0,this.aProcessarRegisto=!1}ngOnInit(){let t=localStorage.getItem("expiracao");const i=new Date(t);null!=localStorage.getItem("token")&&new Date<i&&this.router.navigate(["/inicio"]),this.carregarUtilizadores()}carregarUtilizadores(){this.utilizadorService.getTodos().subscribe(t=>{this.nrUtilizadores=t.length,this.utilizadoresCarregados=!0})}fazerRegisto(){const t=this.formRegisto.value;var i=this.formRegisto.value.tags;t.avatar=this.avataresService.avatarPorDefeito(),t.tags=i.toString().split(","),this.registar(t)}fazerLogin(){this.login(this.formLogin.value)}registar(t){var i,r;this.aProcessarRegisto||(this.aProcessarRegisto=!0,(null===(i=this.formRegisto.get("confirmarPassword"))||void 0===i?void 0:i.value)==(null===(r=this.formRegisto.get("password"))||void 0===r?void 0:r.value)?this.utilizadorService.adicionarUtilizador(t).subscribe(()=>{this.carregarUtilizadores(),this.formRegisto.reset(),vt().fire({position:"bottom-end",icon:"success",title:"Registado com sucesso!",showConfirmButton:!1,timer:1500}),this.aProcessarRegisto=!1},o=>{console.error(o),0==o.status?(vt().fire({position:"bottom-end",icon:"error",title:"N\xe3o foi possivel contactar o servidor.",showConfirmButton:!1,timer:1500}),this.aProcessarRegisto=!1):(vt().fire({position:"bottom-end",icon:"error",title:o.error.message,showConfirmButton:!1,timer:1500}),this.aProcessarRegisto=!1)}):(vt().fire({position:"bottom-end",icon:"error",title:"As duas passwords n\xe3o coincidem!",showConfirmButton:!1,timer:1500}),this.aProcessarRegisto=!1))}login(t){this.loginService.login(t).subscribe(i=>{localStorage.setItem("token",i.token),localStorage.setItem("idUtilizador",i.utilizador),localStorage.setItem("expiracao",i.expiracao),this.formLogin.reset(),this.router.navigate(["/inicio"])},i=>{console.error(i),0==i.status?vt().fire({position:"bottom-end",icon:"error",title:"N\xe3o foi possivel contactar o servidor.",showConfirmButton:!1,timer:1500}):vt().fire({position:"bottom-end",icon:"error",title:i.error.message,showConfirmButton:!1,timer:1500})})}rpgd(){this.setJanela(!0)}setJanela(t){this.rgpd=t}}return n.\u0275fac=function(t){return new(t||n)(G(Js),G(Bt),G(Bo),G(Ab),G(hA),G(yh))},n.\u0275cmp=Pt({type:n,selectors:[["app-autenticacao"]],decls:64,vars:7,consts:[[1,"pagina"],[1,"esquerda"],[1,"logo"],[1,"dimensao"],["class","rpgd",4,"ngIf"],[1,"direita"],[1,"login"],[3,"formGroup","ngSubmit"],[1,"inp"],["src","../../../assets/email-branco.png","alt","login-logo"],["type","email","formControlName","email","placeholder","Email"],["src","../../../assets/password-branco.png","alt","password-logo"],["type","password","formControlName","password","placeholder","Password"],["type","submit",3,"disabled"],[1,"registo"],[1,"texto-introdutorio"],["src","../../../assets/email.png","alt","login-logo"],["src","../../../assets/nome.png","alt","nome-logo"],["type","text","formControlName","nome","placeholder","Nome"],["src","../../../assets/nascimento.png","alt","dataNascimento-logo"],["type","date","formControlName","dataNascimento","placeholder","Data Nascimento"],["src","../../../assets/emocao.png","alt","estadoEmocional-logo"],["formControlName","estadoEmocional"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["src","../../../assets/tags.png","alt","tags-logo"],["type","text","formControlName","tags","placeholder","Tags (separadas por virgula)"],["src","../../../assets/password.png","alt","password-logo"],["type","password","formControlName","confirmarPassword","placeholder","Confirmar Password"],[1,"aceitar-rgpd"],["type","checkbox","formControlName","gdprCheck","name","checkRegister"],["role","button",2,"cursor","pointer",3,"click"],[1,"rpgd"],[3,"janelaAberta"],[3,"value"]],template:function(t,i){1&t&&(p(0,"div",0),p(1,"div",1),p(2,"div",2),p(3,"h1"),S(4,"SocialNetwork"),g(),p(5,"h2"),S(6,"The Game"),g(),g(),p(7,"div",3),p(8,"h3"),S(9,"Dimens\xe3o da Rede"),g(),p(10,"p"),S(11),g(),g(),g(),V(12,F6,2,0,"div",4),p(13,"div",5),p(14,"div",6),p(15,"form",7),J("ngSubmit",function(){return i.fazerLogin()}),p(16,"div",8),U(17,"img",9),U(18,"input",10),g(),p(19,"div",8),U(20,"img",11),U(21,"input",12),g(),p(22,"button",13),S(23,"Login"),g(),g(),g(),p(24,"div",14),p(25,"div",15),p(26,"h1"),S(27,"Ainda n\xe3o possui conta?"),g(),p(28,"h2"),S(29,"Crie uma conta em segundos e aceda \xe1s principais funcionalidades da aplica\xe7\xe3o."),g(),g(),p(30,"form",7),J("ngSubmit",function(){return i.fazerRegisto()}),p(31,"div",8),U(32,"img",16),U(33,"input",10),g(),p(34,"div",8),U(35,"img",17),U(36,"input",18),g(),p(37,"div",8),U(38,"img",19),U(39,"input",20),g(),p(40,"div",8),U(41,"img",21),p(42,"select",22),p(43,"option",23),S(44,"Estado Emocional"),g(),V(45,N6,2,2,"option",24),g(),g(),p(46,"div",8),U(47,"img",25),U(48,"input",26),g(),p(49,"div",8),U(50,"img",27),U(51,"input",12),g(),p(52,"div",8),U(53,"img",27),U(54,"input",28),g(),p(55,"div",29),U(56,"input",30),p(57,"p"),S(58,"Li, compreendi e aceito a Politica de Privacidade"),g(),g(),p(59,"a",31),J("click",function(){return i.rpgd()}),S(60,"Pol\xedtica de Privacidade."),g(),U(61,"br"),p(62,"button",13),S(63,"Registar"),g(),g(),g(),g(),g()),2&t&&(T(11),_e(i.nrUtilizadores),T(1),R("ngIf",i.rgpd),T(3),R("formGroup",i.formLogin),T(7),R("disabled",!i.formLogin.valid),T(8),R("formGroup",i.formRegisto),T(15),R("ngForOf",i.estadosEmocionais),T(17),R("disabled",!i.formRegisto.valid))},directives:[xn,Xs,qs,ko,fr,Dr,ds,Xa,Ys,Zs,Jn,th,fA],styles:['*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}.pagina[_ngcontent-%COMP%]{display:flex;height:100vh}.esquerda[_ngcontent-%COMP%]{width:40%;display:flex;flex-direction:column;align-items:center;justify-content:space-around;background-image:url(background.b8b8e9811b070779.jpg);background-position:center;background-repeat:no-repeat;background-size:cover}.esquerda[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:90%}.esquerda[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:3.2rem;font-family:"Gill Sans","Gill Sans MT",Calibri,"Trebuchet MS",sans-serif}.esquerda[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.2rem;font-family:Cambria,Cochin,Georgia,Times,"Times New Roman",serif}.esquerda[_ngcontent-%COMP%]   .dimensao[_ngcontent-%COMP%]{background-color:#fff;border:2px solid #243165;padding:10px;border-radius:10px;display:flex;flex-direction:column;align-items:center;justify-content:center}.esquerda[_ngcontent-%COMP%]   .dimensao[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#243165;font-size:1.1rem;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif}.esquerda[_ngcontent-%COMP%]   .dimensao[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#22506e}.direita[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;height:100%;padding:2%;width:60%}.registo[_ngcontent-%COMP%]{height:100%}.texto-introdutorio[_ngcontent-%COMP%]{margin-bottom:1%}.texto-introdutorio[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.1rem;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;color:#243165}.texto-introdutorio[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1rem;font-family:Arial,Helvetica,sans-serif;color:#22506e}.registo[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;align-items:center;height:85%;width:100%}.registo[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .inp[_ngcontent-%COMP%]{width:70%;border-bottom:solid #22506e 3px;display:flex;justify-content:center;align-items:center}.registo[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .inp[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:2%;width:28px;height:28px}.registo[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .inp[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:1rem;padding:1%;border:none;color:#22506e}form[_ngcontent-%COMP%]   .inp[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover, form[_ngcontent-%COMP%]   .inp[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.registo[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;font-size:1rem;padding:1%;border:none;color:#22506e}form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover, form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none}.registo[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1.2rem;padding:1%;width:35%;cursor:pointer;color:#fff;background-color:#22506e;border:0}.registo[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#238573}.registo[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background:grey;cursor:not-allowed}.registo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-style:italic;text-decoration:underline}.direita[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#22506e;font-size:1.4rem;font-family:Cambria,Cochin,Georgia,Times,"Times New Roman",serif}.login[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;padding:1.5%;margin-bottom:5%;width:100%;background-image:url(background.b8b8e9811b070779.jpg);background-size:cover;border-radius:10px}.login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;width:80%}.login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:.9rem;width:18%;padding:1.5%;cursor:pointer;color:#22506e;border:0;background-color:#fff;border-radius:8rem}.login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#238573;color:#fff}.login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background:grey;color:#fff;cursor:not-allowed}.login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .inp[_ngcontent-%COMP%]{border-bottom:solid white 2px;display:flex;justify-content:center;align-items:center}.login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .inp[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:2%;width:22px;height:22px}.login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:.9rem;padding:1%;border:none;color:#fff;background:transparent}.login[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#828887}.rpgd[_ngcontent-%COMP%]{position:absolute;background-color:#dfdfdf;background-position:center;background-size:cover;padding:10px;border-radius:10px;width:60%;height:70%;overflow-y:auto;margin:9% 20% 0}.aceitar-rgpd[_ngcontent-%COMP%]{display:flex;width:80%;align-items:center;justify-content:center}.aceitar-rgpd[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:1%}']}),n})(),el=(()=>{class n{constructor(t){this.router=t,this.pesquisa=""}ngOnInit(){}logout(){localStorage.clear(),this.router.navigate(["/"])}irParaInicio(){this.router.navigate(["/inicio"])}irParaPedidos(){this.router.navigate(["/pedidos"])}irParaLigacoes(){this.router.navigate(["/ligacoes"])}irParaPerfil(){this.router.navigate(["/perfil"])}irParaClassificacao(){this.router.navigate(["/classificacao"])}especificarPesquisa(t){this.pesquisa=t}pesquisar(){this.router.navigate(["/pesquisar/"+this.pesquisa])}}return n.\u0275fac=function(t){return new(t||n)(G(Bt))},n.\u0275cmp=Pt({type:n,selectors:[["app-menu-topo-utilizador"]],decls:32,vars:0,consts:[[1,"menu-topo"],[1,"logo",3,"click"],[1,"menu-topo-pesquisa"],["type","search","name","","id","","placeholder","Pesquisar...",3,"keyup","keyup.enter"],["src","../../../assets/pesquisar-azul.png",3,"click"],[1,"menu-topo-opcoes"],[1,"opcao",3,"click"],["src","../../../assets/casa.png","alt",""],["src","../../../assets/perfil.png","alt",""],["src","../../../assets/amigos.png","alt",""],["src","../../../assets/pedidos.png","alt",""],["src","../../../assets/classificacao.png","alt",""],[3,"click"]],template:function(t,i){1&t&&(p(0,"div",0),p(1,"div",1),J("click",function(){return i.irParaInicio()}),p(2,"h1"),S(3,"SocialNetwork"),g(),p(4,"h2"),S(5,"The Game"),g(),g(),p(6,"div",2),p(7,"input",3),J("keyup",function(o){return i.especificarPesquisa(o.target.value)})("keyup.enter",function(){return i.pesquisar()}),g(),p(8,"img",4),J("click",function(){return i.pesquisar()}),g(),g(),p(9,"div",5),p(10,"div",6),J("click",function(){return i.irParaInicio()}),U(11,"img",7),p(12,"p"),S(13,"Inicio"),g(),g(),p(14,"div",6),J("click",function(){return i.irParaPerfil()}),U(15,"img",8),p(16,"p"),S(17,"Perfil"),g(),g(),p(18,"div",6),J("click",function(){return i.irParaLigacoes()}),U(19,"img",9),p(20,"p"),S(21,"Liga\xe7\xf5es"),g(),g(),p(22,"div",6),J("click",function(){return i.irParaPedidos()}),U(23,"img",10),p(24,"p"),S(25,"Pedidos"),g(),g(),p(26,"div",6),J("click",function(){return i.irParaClassificacao()}),U(27,"img",11),p(28,"p"),S(29,"Classifica\xe7\xe3o"),g(),g(),g(),p(30,"button",12),J("click",function(){return i.logout()}),S(31,"Logout"),g(),g())},styles:['.menu-topo[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-around;height:100%;width:100%}.menu-topo[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;cursor:pointer;height:100%}.logo[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:1.6rem;font-family:"Gill Sans","Gill Sans MT",Calibri,"Trebuchet MS",sans-serif}.logo[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:.6rem;font-family:Cambria,Cochin,Georgia,Times,"Times New Roman",serif}.menu-topo-pesquisa[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;background-color:#fff;border-radius:20px;padding:7px 15px}.menu-topo-pesquisa[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:1rem;border:none;background-color:transparent;color:#20416a}.menu-topo-pesquisa[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover, .menu-topo-pesquisa[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.menu-topo-pesquisa[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;cursor:pointer}.menu-topo-opcoes[_ngcontent-%COMP%]{display:flex;justify-content:space-around;width:40%}.menu-topo-opcoes[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.menu-topo-opcoes[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-family:"Franklin Gothic Medium","Arial Narrow",Arial,sans-serif}.menu-topo[_ngcontent-%COMP%]   .opcao[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;cursor:pointer}.menu-topo[_ngcontent-%COMP%]   .opcao[_ngcontent-%COMP%]:hover{border-bottom:solid white 3px;transition:.2s}.menu-topo[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff;padding:10px;border:0;border-radius:5px;cursor:pointer;font-family:"Franklin Gothic Medium","Arial Narrow",Arial,sans-serif;color:#20416a}.menu-topo[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#dfdfdf}']}),n})(),Uo=(()=>{class n{constructor(t){this.http=t,this.url=zo_baseUrl+"/ligacoes"}getLigacoesDoUtilizadorAutenticado(){return this.http.get(this.url)}getRedeDoUtilizadorAutenticado(t){return this.http.get(this.url+"/rede?nivel="+t)}getRedeByUtilizador(t,i){return this.http.get(this.url+"/rede?utilizador="+t+"&nivel="+i)}getDimensaoDaRedeDoUtilizadorAutenticado(){return this.http.get(this.url+"/dimensao")}getFortalezaDaRedeDoUtilizadorAutenticado(){return this.http.get(this.url+"/fortaleza")}getInformacoesRedeDoUtilizadorAutenticado(){return this.http.get(this.url+"/rede/informacao")}editarLigacao(t,i,r){return this.http.put(this.url+"/"+t,{id:t,tags:i,forcaLigacao:r})}getLigacoesByUtilizador(t){return this.http.get(this.url+"?utilizador="+t)}getAmigosEmComumCom(t){return this.http.get(this.url+"/emComum?utilizadorB="+t)}getSugestoes(){return this.http.get(this.url+"/sugestoes")}getTagCloudDoAutenticado(){const t=localStorage.getItem("idUtilizador");return this.http.get(this.url+"/tagCloud?utilizador="+t)}getTagCloud(){return this.http.get(this.url+"/tagCloud")}getSugestoesGrupo(t,i,r){return this.http.get(this.url+"/sugestoesGrupos?numeroTags="+i+"&numeroUtilizadores="+t+"&tagsObrigatorias="+r)}getSugestoesUtilizadores(t){return this.http.get(this.url+"/sugestoesUtilizadores?numeroTags="+t)}apagarMinhasLigacoes(){return this.http.delete(this.url)}}return n.\u0275fac=function(t){return new(t||n)(Le(Ro))},n.\u0275prov=We({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function z6(n,e){if(1&n&&(p(0,"div",4),U(1,"img",5),p(2,"h1"),S(3),g(),p(4,"h3"),S(5),g(),g()),2&n){const t=j();T(1),hn("src","../../../assets/",t.utilizador.avatar,"",dn),T(2),_e(t.utilizador.nome),T(2),_e(t.utilizador.email)}}function B6(n,e){if(1&n&&(p(0,"div",4),p(1,"h2"),S(2,"Amigos"),g(),p(3,"p"),S(4),g(),g()),2&n){const t=j();T(4),_e(t.nrAmigos)}}function U6(n,e){if(1&n&&(p(0,"div",4),p(1,"h2"),S(2,"Dimens\xe3o"),g(),p(3,"p"),S(4),g(),g()),2&n){const t=j();T(4),_e(t.dimensao)}}function V6(n,e){if(1&n&&(p(0,"div",4),p(1,"h2"),S(2,"Fortaleza"),g(),p(3,"p"),S(4),g(),g()),2&n){const t=j();T(4),_e(t.fortaleza)}}function H6(n,e){1&n&&(p(0,"div",6),U(1,"hr"),p(2,"a",7),S(3,"Ver Perfil"),g(),g())}function G6(n,e){1&n&&(p(0,"div",8),p(1,"p"),S(2,"A carregar utilizador..."),g(),U(3,"div",9),g())}let j6=(()=>{class n{constructor(t,i,r){this.utilizadorService=t,this.ligacoesService=i,this.router=r,this.dimensao=-1,this.fortaleza=-1,this.nrAmigos=-1,this.dadosCarregados=!1}ngOnInit(){this.utilizadorService.getUtilizadorAutenticado().subscribe(t=>{this.utilizador=t}),this.atualizarDadosLigacoes()}atualizarDadosLigacoes(){var t=-1,i=-1,r=-1;this.ligacoesService.getInformacoesRedeDoUtilizadorAutenticado().subscribe(o=>{this.verificarCarregamento(t=o.dimensao,i=o.fortaleza,r)}),this.ligacoesService.getLigacoesDoUtilizadorAutenticado().subscribe(o=>{this.verificarCarregamento(t,i,r=o.length)})}verificarCarregamento(t,i,r){t>-1&&i>-1&&r>-1&&(this.dimensao=t,this.fortaleza=i,this.nrAmigos=r,this.dadosCarregados=!0)}irParaPerfil(){this.router.navigate(["/perfil"])}}return n.\u0275fac=function(t){return new(t||n)(G(Bo),G(Uo),G(Bt))},n.\u0275cmp=Pt({type:n,selectors:[["app-mini-perfil"]],decls:7,vars:6,consts:[[1,"pagina"],["class","seccao",4,"ngIf"],["class","ver-mais",4,"ngIf"],["class","aCarregarUtilizador",4,"ngIf"],[1,"seccao"],["alt","foto-perfil",3,"src"],[1,"ver-mais"],["href","perfil"],[1,"aCarregarUtilizador"],[1,"loader"]],template:function(t,i){1&t&&(p(0,"div",0),V(1,z6,6,3,"div",1),V(2,B6,5,1,"div",1),V(3,U6,5,1,"div",1),V(4,V6,5,1,"div",1),V(5,H6,4,0,"div",2),V(6,G6,4,0,"div",3),g()),2&t&&(T(1),R("ngIf",i.utilizador&&i.dadosCarregados),T(1),R("ngIf",i.utilizador&&i.dadosCarregados),T(1),R("ngIf",i.utilizador&&i.dadosCarregados),T(1),R("ngIf",i.utilizador&&i.dadosCarregados),T(1),R("ngIf",i.utilizador&&i.dadosCarregados),T(1),R("ngIf",!i.utilizador||!i.dadosCarregados))},directives:[xn],styles:['.pagina[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:space-around;height:100%;width:100%}img[_ngcontent-%COMP%]{width:40%}h1[_ngcontent-%COMP%]{font-size:1.2rem;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;color:#1d1d1d;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;max-width:100%}h3[_ngcontent-%COMP%]{font-size:.9rem;color:#444;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;max-width:100%}h2[_ngcontent-%COMP%]{font-size:.99rem;color:#7c7c7c}p[_ngcontent-%COMP%]{color:#a1a1a1;font-size:.8rem}a[_ngcontent-%COMP%]{color:#20416a;text-decoration:none;font-family:"Trebuchet MS","Lucida Sans Unicode","Lucida Grande","Lucida Sans",Arial,sans-serif}hr[_ngcontent-%COMP%]{border:0;clear:both;display:block;width:96%;background-color:#dfdfdf;height:1px}.seccao[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:5px 0;width:80%}.ver-mais[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:space-around;align-items:center;padding:5px 0}.ver-mais[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-top:5px;color:#20416a;text-decoration:none;font-family:"Trebuchet MS","Lucida Sans Unicode","Lucida Grande","Lucida Sans",Arial,sans-serif}button[_ngcontent-%COMP%]{padding:5px 10px;border:0;background-image:url(background.b8b8e9811b070779.jpg);color:#fff;border-radius:10px;background-size:cover;cursor:pointer}.aCarregarUtilizador[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.aCarregarUtilizador[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#a1a1a1;font-size:.9rem}.loader[_ngcontent-%COMP%]{margin-top:5%;border:8px solid #f3f3f3;border-radius:50%;border-top:8px solid #20416a;width:40px;height:40px;animation:spin 2s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}']}),n})(),bh=(()=>{class n{constructor(t){this.http=t,this.url=zo_baseUrl+"/pedidosLigacao"}getTodosPedidosDoUtilizadorAutenticado(){return this.http.get(this.url)}getPedidosPendentesDoUtilizadorAutenticado(){return this.http.get(this.url+"?estado=pendente")}getPedidosAceitesDoUtilizadorAutenticado(){return this.http.get(this.url+"?estado=aceite")}getPedidosRecusadosDoUtilizadorAutenticado(){return this.http.get(this.url+"?estado=recusado")}getPedidosEnviadosDoUtilizadorAutenticado(){return this.http.get(this.url+"/enviados")}enviarPedido(t,i,r,o){return this.http.post(this.url,{paraUtilizadorId:t,mensagem:i,tags:r,forcaLigacao:o})}aceitarPedido(t,i,r){return this.http.put(this.url+"/"+t,{id:t,estado:"Aceite",tags:i,forcaLigacao:r})}recusarPedido(t){return this.http.put(this.url+"/"+t,{id:t,estado:"Recusado"})}}return n.\u0275fac=function(t){return new(t||n)(Le(Ro))},n.\u0275prov=We({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),gA=(()=>{class n{constructor(t,i){this.pedidosLigacaoService=t,this.fb=i,this.janelaAberta=new It,this.formPedirLigacao=this.fb.group({mensagem:[""],tags:[""],forcaLigacao:["50"]}),this.aProcessarEnvio=!1}ngOnInit(){}cancelar(){this.janelaAberta.emit(!1)}enviarPedido(){if(!this.aProcessarEnvio){this.aProcessarEnvio=!0;const t=this.formPedirLigacao.controls.mensagem.value,r=this.formPedirLigacao.controls.forcaLigacao.value,o=this.formPedirLigacao.controls.tags.value.toString().split(",");this.pedidosLigacaoService.enviarPedido(this.utilizador.id,t,o,r).subscribe(s=>{vt().fire({position:"bottom-end",icon:"success",title:"O pedido foi enviado!",showConfirmButton:!1,timer:1500}),this.janelaAberta.emit(!0),this.aProcessarEnvio=!1},s=>{vt().fire({position:"bottom-end",icon:"error",title:s.error.message,showConfirmButton:!1,timer:1500}),this.aProcessarEnvio=!1})}}}return n.\u0275fac=function(t){return new(t||n)(G(bh),G(Js))},n.\u0275cmp=Pt({type:n,selectors:[["app-fazer-pedido-ligacao"]],inputs:{utilizador:"utilizador"},outputs:{janelaAberta:"janelaAberta"},decls:32,vars:2,consts:[[1,"pagina"],[1,"topo"],[1,"meio"],[3,"formGroup"],[1,"mensagem"],["type","text","formControlName","mensagem"],[1,"tags"],["type","text","formControlName","tags"],[1,"forca-ligacao"],[1,"forca"],["type","range","value","50","min","1","max","100","oninput","this.nextElementSibling.value = this.value","formControlName","forcaLigacao"],[1,"fundo"],[2,"background-color","firebrick","margin-right","5px",3,"click"],[2,"background-color","forestgreen",3,"click"]],template:function(t,i){1&t&&(p(0,"div",0),p(1,"div",1),p(2,"h2"),S(3),g(),U(4,"hr"),g(),p(5,"div",2),p(6,"form",3),p(7,"div",4),p(8,"h2"),p(9,"b"),S(10,"Mensagem"),g(),g(),U(11,"input",5),g(),p(12,"div",6),p(13,"h2"),p(14,"b"),S(15,"Tags"),g(),g(),U(16,"input",7),g(),p(17,"div",8),p(18,"h2"),p(19,"b"),S(20,"Forca de Liga\xe7\xe3o"),g(),g(),p(21,"div",9),U(22,"input",10),p(23,"output"),S(24,"50"),g(),g(),g(),g(),g(),p(25,"div",11),p(26,"button",12),J("click",function(){return i.cancelar()}),p(27,"b"),S(28,"Cancelar"),g(),g(),p(29,"button",13),J("click",function(){return i.enviarPedido()}),p(30,"b"),S(31,"Enviar Pedido"),g(),g(),g(),g()),2&t&&(T(3),ur("Enviar pedido de liga\xe7\xe3o a ",i.utilizador.nome,""),T(3),R("formGroup",i.formPedirLigacao))},directives:[Xs,qs,ko,fr,Dr,ds,kc],styles:['.pagina[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:space-between}.topo[_ngcontent-%COMP%]{width:100%;height:15%;display:flex;flex-direction:column;justify-content:space-around}.meio[_ngcontent-%COMP%]{width:100%;height:60%}.fundo[_ngcontent-%COMP%]{width:100%;height:20%;display:flex;align-items:center;justify-content:flex-end}.topo[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:1.2rem}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;align-items:center;justify-content:space-around;height:100%}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.2rem;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif}form[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%]{display:flex;width:60%;align-items:center;justify-content:flex-start;background-color:#fff;border-radius:10px}form[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{background-color:gray;padding:2px 5px;font-size:1.1rem;border-radius:10px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:transparent;border:0;color:#20416a;width:100%;padding:0 5px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:0}form[_ngcontent-%COMP%]   .mensagem[_ngcontent-%COMP%]{display:flex;width:60%;align-items:center;justify-content:flex-start;background-color:#fff;border-radius:10px}form[_ngcontent-%COMP%]   .mensagem[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{background-color:gray;padding:2px 5px;font-size:1.1rem;border-radius:10px}form[_ngcontent-%COMP%]   .forca-ligacao[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%}form[_ngcontent-%COMP%]   .forca[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}form[_ngcontent-%COMP%]   .forca[_ngcontent-%COMP%]   output[_ngcontent-%COMP%]{color:#fff;margin-left:5px}.fundo[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px;border:0;border-radius:10px;cursor:pointer;color:#fff}.fundo[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:.8}']}),n})();function W6(n,e){if(1&n&&(p(0,"p"),S(1),g()),2&n){const t=j().$implicit;T(1),ur("",t.amigosEmComum," amigo em comum")}}function $6(n,e){if(1&n&&(p(0,"p"),S(1),g()),2&n){const t=j().$implicit;T(1),ur("",t.amigosEmComum," amigos em comum")}}function q6(n,e){1&n&&(p(0,"p"),S(1,"Novo utilizador"),g())}function X6(n,e){if(1&n){const t=$e();p(0,"div",8),p(1,"img",9),J("click",function(){const o=be(t).$implicit;return j(2).irParaPerfil(o.utilizador.id)}),g(),p(2,"div",10),p(3,"h2"),S(4),g(),V(5,W6,2,1,"p",11),V(6,$6,2,1,"p",11),V(7,q6,2,0,"p",11),g(),p(8,"div",12),p(9,"img",13),J("click",function(){const o=be(t).$implicit;return j(2).fazerPedidoLigacao(o.utilizador)}),g(),g(),g()}if(2&n){const t=e.$implicit;T(1),hn("src","../../../assets/",t.utilizador.avatar,"",dn),T(3),_e(t.utilizador.nome),T(1),R("ngIf",1==t.amigosEmComum),T(1),R("ngIf",t.amigosEmComum>1),T(1),R("ngIf",0==t.amigosEmComum)}}function Y6(n,e){1&n&&(p(0,"div",14),p(1,"p"),S(2,"N\xe3o tem sugest\xf5es novas."),g(),g())}function Z6(n,e){if(1&n&&(p(0,"div",5),V(1,X6,10,5,"div",6),V(2,Y6,3,0,"div",7),g()),2&n){const t=j();T(1),R("ngForOf",t.sugestoes),T(1),R("ngIf",0==t.sugestoes.length)}}function J6(n,e){1&n&&(p(0,"div",15),p(1,"p"),S(2,"A procurar sugest\xf5es..."),g(),U(3,"div",16),g())}function Q6(n,e){if(1&n){const t=$e();p(0,"div",17),p(1,"app-fazer-pedido-ligacao",18),J("janelaAberta",function(r){return be(t),j().pedidoFeito(r)}),g(),g()}if(2&n){const t=j();T(1),R("utilizador",t.utilizadorAadicionar)}}let K6=(()=>{class n{constructor(t,i){this.ligacoesService=t,this.router=i,this.sugestoes=[],this.pretendeEnviarPedidoLigacao=!1,this.aCalcularSugestoes=!0}ngOnInit(){this.carregarSugestoes()}carregarSugestoes(){this.aCalcularSugestoes=!0,this.sugestoes=[],this.ligacoesService.getSugestoes().subscribe(t=>{this.obterRestantesDados(t)},t=>{this.aCalcularSugestoes=!1})}obterRestantesDados(t){0==t.length&&(this.aCalcularSugestoes=!1),t.forEach(i=>{var r={utilizador:i,amigosEmComum:0,tagsEmComum:0};this.ligacoesService.getAmigosEmComumCom(i.id).subscribe(a=>{r.amigosEmComum=a.length,this.verificarSugestaoCarregada(!0,!0,r,t.length)},()=>{this.verificarSugestaoCarregada(!0,!0,r,t.length)})})}verificarSugestaoCarregada(t,i,r,o){t&&i&&(this.sugestoes.push(r),this.sugestoes.length==o&&(this.aCalcularSugestoes=!1))}fazerPedidoLigacao(t){this.utilizadorAadicionar=t,this.janelaPedidoLigacao(!0)}irParaPerfil(t){this.router.navigate(["/utilizador/"+t])}janelaPedidoLigacao(t){this.pretendeEnviarPedidoLigacao=t,this.pretendeEnviarPedidoLigacao||(this.carregarSugestoes(),this.utilizadorAadicionar=null)}removerSugestaoDaLista(t){this.sugestoes=this.sugestoes.filter(i=>i.utilizador.id!==t.id)}pedidoFeito(t){this.pretendeEnviarPedidoLigacao=!1,t&&this.removerSugestaoDaLista(this.utilizadorAadicionar)}}return n.\u0275fac=function(t){return new(t||n)(G(Uo),G(Bt))},n.\u0275cmp=Pt({type:n,selectors:[["app-mini-sugestoes"]],decls:8,vars:3,consts:[[1,"pagina"],[1,"topo"],["class","sugestoes",4,"ngIf"],["class","a-procurar",4,"ngIf"],["class","popup",4,"ngIf"],[1,"sugestoes"],["class","sugestao",4,"ngFor","ngForOf"],["class","sem-utilizadores",4,"ngIf"],[1,"sugestao"],[1,"avatar",3,"src","click"],[1,"info-sugestao"],[4,"ngIf"],[1,"opcao"],["src","../../../assets/adicionar.png","title","Enviar pedido de liga\xe7\xe3o",3,"click"],[1,"sem-utilizadores"],[1,"a-procurar"],[1,"loader"],[1,"popup"],[3,"utilizador","janelaAberta"]],template:function(t,i){1&t&&(p(0,"div",0),p(1,"div",1),p(2,"h1"),S(3,"Sugest\xf5es"),g(),U(4,"hr"),g(),V(5,Z6,3,2,"div",2),V(6,J6,4,0,"div",3),V(7,Q6,2,1,"div",4),g()),2&t&&(T(5),R("ngIf",!i.aCalcularSugestoes),T(1),R("ngIf",i.aCalcularSugestoes),T(1),R("ngIf",i.pretendeEnviarPedidoLigacao))},directives:[xn,Jn,gA],styles:['*[_ngcontent-%COMP%]{box-sizing:border-box}.pagina[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:space-between}.topo[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;width:100%;height:12%}.topo[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.2rem;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;color:#1d1d1d;padding-bottom:5px}.topo[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border:0;clear:both;display:block;width:96%;background-color:#dfdfdf;height:1px}.sugestoes[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:flex-start;width:100%;overflow-x:hidden;overflow-y:auto;height:86%}.sugestao[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:space-between;padding:5px 10px 5px 0}.avatar[_ngcontent-%COMP%]{width:45px;cursor:pointer}.opcao[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px;cursor:pointer}.info-sugestao[_ngcontent-%COMP%]{width:72%;display:flex;flex-direction:column;height:100%}.info-sugestao[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;color:#424242;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;max-width:100%}.info-sugestao[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1rem;color:#1d1d1d;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;max-width:100%}.sem-sugestoes[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.88rem}.popup[_ngcontent-%COMP%]{position:absolute;background-image:url(background.b8b8e9811b070779.jpg);background-position:center;background-size:cover;padding:10px;border-radius:10px;width:30%;height:35%;margin:auto}[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:20px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:rgb(223,223,223);border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#6b6b6b}.a-procurar[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:86%}.a-procurar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#a1a1a1;font-size:.9rem}.loader[_ngcontent-%COMP%]{margin-top:5%;border:8px solid #f3f3f3;border-radius:50%;border-top:8px solid #20416a;width:40px;height:40px;animation:spin 2s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}']}),n})();var eG={headers:new hr({"Content-Type":"application/json"})};let mA=(()=>{class n{constructor(t){this.http=t,this.url=zo_baseUrl+"/posts"}novoPost(t){return this.http.post(this.url,t,eG)}getPostsByUtilizador(t){return this.http.get(this.url+"?utilizador="+t)}getPostsDoUtilizadorAutenticado(){const t=localStorage.getItem("idUtilizador");return this.http.get(this.url+"?utilizador="+t)}getPostsDosAmigosDoUtilizadorAutenticado(){const t=localStorage.getItem("idUtilizador");return this.http.get(this.url+"/amigos?utilizador="+t)}like(t){return this.http.put(this.url+"/"+t+"/like",t)}tirarLike(t){return this.http.delete(this.url+"/"+t+"/like")}dislike(t){return this.http.put(this.url+"/"+t+"/dislike",t)}tirarDislike(t){return this.http.delete(this.url+"/"+t+"/dislike")}}return n.\u0275fac=function(t){return new(t||n)(Le(Ro))},n.\u0275prov=We({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function tG(n,e){1&n&&U(0,"img",9),2&n&&hn("src","../../../assets/",j().utilizador.avatar,"",dn)}function nG(n,e){if(1&n){const t=$e();p(0,"button",10),J("click",function(){return be(t),j().publicar()}),p(1,"b"),S(2,"Publicar"),g(),g()}}function iG(n,e){1&n&&(p(0,"div",11),p(1,"p"),p(2,"b"),S(3,"A publicar..."),g(),g(),U(4,"div",12),g())}let rG=(()=>{class n{constructor(t,i){this.utilizadorService=t,this.postsService=i,this.emitEvent=new It,this.utilizadorCarregado=!1,this.texto="",this.tags="",this.aEsperaDeResposta=!1}ngOnInit(){this.utilizadorService.getUtilizadorAutenticado().subscribe(t=>{this.utilizador=t,this.utilizadorCarregado=!0})}resetCampos(){this.texto="",this.tags=""}publicar(){this.aEsperaDeResposta=!0,this.tags=this.tags.replace(/\s/g,"");const t=this.tags.length>0?this.tags.toString().split(","):[];this.postsService.novoPost({utilizador:this.utilizador,id:"",texto:this.texto,tags:t,data:"",mostrarComentarios:!1,aPublicarComentario:!1,comentarios:[],temComentarioDoAutenticado:!1,reacoes:[],temLikeDoAutenticado:!1,temDislikeDoAutenticado:!1,likes:[],dislikes:[]}).subscribe(r=>{this.emitEvent.next("post feito")},r=>{vt().fire({position:"bottom-end",icon:"error",title:r.error,showConfirmButton:!1,timer:1500}),this.aEsperaDeResposta=!1})}}return n.\u0275fac=function(t){return new(t||n)(G(Bo),G(mA))},n.\u0275cmp=Pt({type:n,selectors:[["app-fazer-post"]],outputs:{emitEvent:"emitEvent"},decls:12,vars:5,consts:[[1,"pagina"],[1,"cima"],["alt","avatar",3,"src",4,"ngIf"],["type","text","placeholder","Em que est\xe1s a pensar?",3,"ngModel","ngModelChange"],[1,"baixo"],[1,"tags"],["type","text","placeholder","Separadas por virgula (ex: Desporto, Netflix)",3,"ngModel","ngModelChange"],[3,"click",4,"ngIf"],["class","a-publicar",4,"ngIf"],["alt","avatar",3,"src"],[3,"click"],[1,"a-publicar"],[1,"loader"]],template:function(t,i){1&t&&(p(0,"div",0),p(1,"div",1),V(2,tG,1,1,"img",2),p(3,"input",3),J("ngModelChange",function(o){return i.texto=o}),g(),g(),p(4,"div",4),p(5,"div",5),p(6,"p"),p(7,"b"),S(8,"Tags:"),g(),g(),p(9,"input",6),J("ngModelChange",function(o){return i.tags=o}),g(),g(),V(10,nG,3,0,"button",7),V(11,iG,5,0,"div",8),g(),g()),2&t&&(T(2),R("ngIf",i.utilizadorCarregado),T(1),R("ngModel",i.texto),T(6),R("ngModel",i.tags),T(1),R("ngIf",!i.aEsperaDeResposta),T(1),R("ngIf",i.aEsperaDeResposta))},directives:[xn,fr,Dr,Lc],styles:['*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}.pagina[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:space-between}.cima[_ngcontent-%COMP%]{width:100%;height:50%;display:flex;align-items:center}.cima[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px}.cima[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:100%;padding:5px 10px;border-radius:70px;border:0;background-color:#dfdfdf}.cima[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:0}.baixo[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:space-between}.baixo[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:7px 15px;background-image:url(background.b8b8e9811b070779.jpg);background-size:cover;color:#fff;border-radius:10px;border:0;cursor:pointer;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif}.baixo[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-position:center}.baixo[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%]{margin-left:2%;display:flex;align-items:center;width:80%;height:100%}.baixo[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding-left:1%;border:0}.baixo[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:.9rem}.baixo[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:0}.a-publicar[_ngcontent-%COMP%]{width:18%;border:0;display:flex;align-items:center;justify-content:flex-end}.a-publicar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:.8rem;margin-right:10%;color:#20416a}.loader[_ngcontent-%COMP%]{margin-top:2%;border:8px solid #f3f3f3;border-radius:50%;border-top:8px solid #20416a;width:20px;height:20px;animation:spin 2s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}']}),n})();var oG={headers:new hr({"Content-Type":"application/json"})};let sG=(()=>{class n{constructor(t){this.http=t,this.url=zo_baseUrl+"/comentarios"}novoComentario(t){return this.http.post(this.url,t,oG)}getComentariosByPost(t){return this.http.get(this.url+"?post="+t)}like(t){return this.http.put(this.url+"/"+t+"/like",t)}tirarLike(t){return this.http.delete(this.url+"/"+t+"/like")}dislike(t){return this.http.put(this.url+"/"+t+"/dislike",t)}tirarDislike(t){return this.http.delete(this.url+"/"+t+"/dislike")}}return n.\u0275fac=function(t){return new(t||n)(Le(Ro))},n.\u0275prov=We({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function aG(n,e){1&n&&(p(0,"div",4),p(1,"p"),S(2,"A carregar feed..."),g(),U(3,"div",5),g())}function lG(n,e){1&n&&(p(0,"div",6),p(1,"p"),S(2,"N\xe3o foram encontrados posts."),g(),g())}function cG(n,e){if(1&n&&(p(0,"p"),S(1),g()),2&n){const t=e.$implicit;T(1),_e(t)}}function uG(n,e){if(1&n){const t=$e();p(0,"img",26),J("click",function(){be(t);const r=j().$implicit;return j(2).like(r)}),g()}}function dG(n,e){if(1&n){const t=$e();p(0,"img",27),J("click",function(){be(t);const r=j().$implicit;return j(2).tirarLike(r)}),g()}}function hG(n,e){if(1&n){const t=$e();p(0,"img",28),J("click",function(){be(t);const r=j().$implicit;return j(2).dislike(r)}),g()}}function fG(n,e){if(1&n){const t=$e();p(0,"img",29),J("click",function(){be(t);const r=j().$implicit;return j(2).tirarDislike(r)}),g()}}function pG(n,e){if(1&n){const t=$e();p(0,"img",32),J("click",function(){be(t);const r=j(2).$implicit;return j(2).comentarios(r)}),g()}}function gG(n,e){if(1&n){const t=$e();p(0,"img",33),J("click",function(){be(t);const r=j(2).$implicit;return j(2).comentarios(r)}),g()}}function mG(n,e){if(1&n&&(p(0,"div",19),V(1,pG,1,0,"img",30),V(2,gG,1,0,"img",31),p(3,"p"),p(4,"b"),S(5),g(),g(),g()),2&n){const t=j().$implicit;T(1),R("ngIf",!t.temComentarioDoAutenticado),T(1),R("ngIf",t.temComentarioDoAutenticado),T(3),_e(t.comentarios.length)}}function _G(n,e){1&n&&(p(0,"div",45),p(1,"p"),p(2,"b"),S(3,"A carregar coment\xe1rios..."),g(),g(),U(4,"div",5),g())}function vG(n,e){1&n&&(p(0,"p"),S(1,"Sem coment\xe1rios"),g())}function yG(n,e){if(1&n&&(p(0,"p"),S(1),g()),2&n){const t=e.$implicit;T(1),_e(t)}}function bG(n,e){if(1&n){const t=$e();p(0,"img",26),J("click",function(){be(t);const r=j().$implicit;return j(4).likeNoComentario(r)}),g()}}function xG(n,e){if(1&n){const t=$e();p(0,"img",27),J("click",function(){be(t);const r=j().$implicit;return j(4).tirarLikeNoComentario(r)}),g()}}function wG(n,e){if(1&n){const t=$e();p(0,"img",28),J("click",function(){be(t);const r=j().$implicit;return j(4).dislikeNoComentario(r)}),g()}}function CG(n,e){if(1&n){const t=$e();p(0,"img",29),J("click",function(){be(t);const r=j().$implicit;return j(4).tirarDislikeNoComentario(r)}),g()}}function MG(n,e){if(1&n){const t=$e();p(0,"div",46),p(1,"div",10),p(2,"img",11),J("click",function(){const o=be(t).$implicit;return j(4).irParaPerfil(o.utilizador.id)}),g(),p(3,"div",12),p(4,"div",13),p(5,"h2"),S(6),g(),p(7,"h3"),S(8),g(),g(),p(9,"div",14),p(10,"p"),S(11),g(),g(),g(),p(12,"div",15),V(13,yG,2,1,"p",16),g(),g(),U(14,"hr"),p(15,"div",17),p(16,"p"),S(17),g(),g(),U(18,"hr"),p(19,"div",18),p(20,"div",19),V(21,bG,1,0,"img",20),V(22,xG,1,0,"img",21),p(23,"p"),p(24,"b"),S(25),g(),g(),g(),p(26,"div",19),V(27,wG,1,0,"img",22),V(28,CG,1,0,"img",23),p(29,"p"),p(30,"b"),S(31),g(),g(),g(),g(),g()}if(2&n){const t=e.$implicit;T(2),hn("src","../../../assets/",t.utilizador.avatar,"",dn),T(4),_e(t.utilizador.nome),T(2),_e(t.utilizador.email),T(3),_e(t.data),T(2),R("ngForOf",t.tags),T(4),_e(t.texto),T(4),R("ngIf",!t.temLikeDoAutenticado),T(1),R("ngIf",t.temLikeDoAutenticado),T(3),_e(t.likes.length),T(2),R("ngIf",!t.temDislikeDoAutenticado),T(1),R("ngIf",t.temDislikeDoAutenticado),T(3),_e(t.dislikes.length)}}function EG(n,e){if(1&n){const t=$e();p(0,"button",47),J("click",function(){be(t);const r=j(2).$implicit;return j(2).publicar(r)}),p(1,"b"),S(2,"Publicar"),g(),g()}}function SG(n,e){1&n&&(p(0,"div",48),p(1,"p"),p(2,"b"),S(3,"A publicar..."),g(),g(),U(4,"div",5),g())}function TG(n,e){if(1&n){const t=$e();p(0,"div",34),U(1,"hr"),p(2,"div",35),V(3,_G,5,0,"div",36),V(4,vG,2,0,"p",37),V(5,MG,32,12,"div",38),g(),U(6,"hr"),p(7,"div",39),p(8,"div",13),U(9,"img",40),p(10,"input",41),J("ngModelChange",function(r){return be(t),j(3).comentario=r}),g(),g(),p(11,"div",14),p(12,"div",15),p(13,"p"),p(14,"b"),S(15,"Tags:"),g(),g(),p(16,"input",42),J("ngModelChange",function(r){return be(t),j(3).tags=r}),g(),g(),V(17,EG,3,0,"button",43),V(18,SG,5,0,"div",44),g(),g(),g()}if(2&n){const t=j().$implicit,i=j(2);T(3),R("ngIf",!t.comentarios),T(1),R("ngIf",t.comentarios&&0==t.comentarios.length),T(1),R("ngForOf",t.comentarios),T(4),hn("src","../../assets/",i.autenticado.avatar,"",dn),T(1),R("ngModel",i.comentario),T(6),R("ngModel",i.tags),T(1),R("ngIf",!t.aPublicarComentario),T(1),R("ngIf",t.aPublicarComentario)}}function PG(n,e){if(1&n){const t=$e();p(0,"div",9),p(1,"div",10),p(2,"img",11),J("click",function(){const o=be(t).$implicit;return j(2).irParaPerfil(o.utilizador.id)}),g(),p(3,"div",12),p(4,"div",13),p(5,"h2"),S(6),g(),p(7,"h3"),S(8),g(),g(),p(9,"div",14),p(10,"p"),S(11),g(),g(),g(),p(12,"div",15),V(13,cG,2,1,"p",16),g(),g(),U(14,"hr"),p(15,"div",17),p(16,"p"),S(17),g(),g(),U(18,"hr"),p(19,"div",18),p(20,"div",19),V(21,uG,1,0,"img",20),V(22,dG,1,0,"img",21),p(23,"p"),p(24,"b"),S(25),g(),g(),g(),p(26,"div",19),V(27,hG,1,0,"img",22),V(28,fG,1,0,"img",23),p(29,"p"),p(30,"b"),S(31),g(),g(),g(),V(32,mG,6,3,"div",24),g(),V(33,TG,19,8,"div",25),g()}if(2&n){const t=e.$implicit;T(2),hn("src","../../../assets/",t.utilizador.avatar,"",dn),T(4),_e(t.utilizador.nome),T(2),_e(t.utilizador.email),T(3),_e(t.data),T(2),R("ngForOf",t.tags),T(4),_e(t.texto),T(4),R("ngIf",!t.temLikeDoAutenticado),T(1),R("ngIf",t.temLikeDoAutenticado),T(3),_e(t.likes.length),T(2),R("ngIf",!t.temDislikeDoAutenticado),T(1),R("ngIf",t.temDislikeDoAutenticado),T(3),_e(t.dislikes.length),T(1),R("ngIf",t.comentarios),T(1),R("ngIf",t.mostrarComentarios)}}function AG(n,e){if(1&n&&(p(0,"div",7),V(1,PG,34,14,"div",8),g()),2&n){const t=j();T(1),R("ngForOf",t.posts)}}let Db=(()=>{class n{constructor(t,i,r,o){this.router=t,this.utilizadoresService=i,this.postsService=r,this.comentariosService=o,this.emitEvent=new It,this.posts=[],this.aCarregarPosts=!0,this.comentario="",this.tags="",this.aProcessarLikePost=!1,this.aProcessarDislikePost=!1,this.aProcessarLikeComentario=!1,this.aProcessarDislikeComentario=!1}ngOnInit(){this.utilizadoresService.getUtilizadorAutenticado().subscribe(t=>{this.autenticado=t}),this.utilizador?this.postsService.getPostsByUtilizador(this.utilizador.id).subscribe(t=>{this.posts=t,this.carregarNumeroReacoes()},()=>{this.aCarregarPosts=!1}):this.atualizarFeed(!1)}irParaPerfil(t){this.router.navigate(["/utilizador/"+t])}atualizarFeed(t){this.postsService.getPostsDosAmigosDoUtilizadorAutenticado().subscribe(i=>{this.posts=i,this.carregarNumeroReacoes(),t&&this.emitEvent.next("feed atualizado")},()=>this.aCarregarPosts=!1)}like(t){this.aProcessarLikePost||(this.aProcessarLikePost=!0,this.postsService.like(t.id).subscribe(i=>{t.reacoes=i.reacoes,this.carregarLikesDislikes(t),this.aProcessarLikePost=!1},i=>{console.log(i),vt().fire({position:"bottom-end",icon:"error",title:i.error,showConfirmButton:!1,timer:1500}),this.aProcessarLikePost=!1}))}likeNoComentario(t){this.aProcessarLikeComentario||(this.aProcessarLikeComentario=!0,this.comentariosService.like(t.id).subscribe(i=>{t.reacoes=i.reacoes,this.carregarLikesDislikesComentario(t),this.aProcessarLikeComentario=!1},i=>{console.log(i),vt().fire({position:"bottom-end",icon:"error",title:i.error,showConfirmButton:!1,timer:1500}),this.aProcessarLikeComentario=!1}))}tirarLike(t){this.aProcessarLikePost||(this.aProcessarLikePost=!0,this.postsService.tirarLike(t.id).subscribe(i=>{t.reacoes=i.reacoes,this.carregarLikesDislikes(t),this.aProcessarLikePost=!1},i=>{console.log(i),this.aProcessarLikePost=!1}))}tirarLikeNoComentario(t){this.aProcessarLikeComentario||(this.aProcessarLikeComentario=!0,this.comentariosService.tirarLike(t.id).subscribe(i=>{t.reacoes=i.reacoes,this.carregarLikesDislikesComentario(t),this.aProcessarLikeComentario=!1},i=>{console.log(i),this.aProcessarLikeComentario=!1}))}dislike(t){this.aProcessarDislikePost||(this.aProcessarDislikePost=!0,this.postsService.dislike(t.id).subscribe(i=>{t.reacoes=i.reacoes,this.carregarLikesDislikes(t),this.aProcessarDislikePost=!1},i=>{console.log(i),vt().fire({position:"bottom-end",icon:"error",title:i.error,showConfirmButton:!1,timer:1500}),this.aProcessarDislikePost=!1}))}dislikeNoComentario(t){this.aProcessarDislikeComentario||(this.aProcessarDislikeComentario=!0,this.comentariosService.dislike(t.id).subscribe(i=>{t.reacoes=i.reacoes,this.carregarLikesDislikesComentario(t),this.aProcessarDislikeComentario=!1},i=>{console.log(i),vt().fire({position:"bottom-end",icon:"error",title:i.error,showConfirmButton:!1,timer:1500}),this.aProcessarDislikeComentario=!1}))}tirarDislike(t){this.aProcessarDislikePost||(this.aProcessarDislikePost=!0,this.postsService.tirarDislike(t.id).subscribe(i=>{t.reacoes=i.reacoes,this.carregarLikesDislikes(t),this.aProcessarDislikePost=!1},i=>{console.log(i),this.aProcessarDislikePost=!1}))}tirarDislikeNoComentario(t){this.aProcessarDislikeComentario||(this.aProcessarDislikeComentario=!0,this.comentariosService.tirarDislike(t.id).subscribe(i=>{t.reacoes=i.reacoes,this.carregarLikesDislikesComentario(t),this.aProcessarDislikeComentario=!1},i=>{console.log(i),this.aProcessarDislikeComentario=!1}))}comentarios(t){t.mostrarComentarios=!t.mostrarComentarios,t.mostrarComentarios&&this.carregarComentarios(t,!1)}verificarCarregamento(t){t==this.posts.length&&(this.aCarregarPosts=!1)}carregarNumeroReacoes(){var t=0;0==this.posts.length&&(this.aCarregarPosts=!1),this.posts.forEach(i=>{this.carregarLikesDislikes(i),this.comentariosService.getComentariosByPost(i.id).subscribe(r=>{i.comentarios=r,this.verificarSeJ\u00e1Comentou(i),t++,i.comentarios.forEach(o=>this.carregarLikesDislikesComentario(o)),this.verificarCarregamento(t)})})}carregarLikesDislikes(t){t.likes=t.reacoes.filter(o=>"LIKE"===o.tipo),t.dislikes=t.reacoes.filter(o=>"DISLIKE"===o.tipo);var i=t.likes.find(o=>o.utilizador.id===this.autenticado.id),r=t.dislikes.find(o=>o.utilizador.id===this.autenticado.id);t.temLikeDoAutenticado=!!i,t.temDislikeDoAutenticado=!!r}verificarSeJ\u00e1Comentou(t){t.temComentarioDoAutenticado=!!t.comentarios.find(r=>r.utilizador.id===this.autenticado.id)}carregarLikesDislikesComentario(t){t.likes=t.reacoes.filter(o=>"LIKE"===o.tipo),t.dislikes=t.reacoes.filter(o=>"DISLIKE"===o.tipo);var i=t.likes.find(o=>o.utilizador.id===this.autenticado.id),r=t.dislikes.find(o=>o.utilizador.id===this.autenticado.id);t.temLikeDoAutenticado=!!i,t.temDislikeDoAutenticado=!!r}carregarComentarios(t,i){this.comentariosService.getComentariosByPost(t.id).subscribe(r=>{t.comentarios=r,t.comentarios.forEach(o=>this.carregarLikesDislikesComentario(o)),i&&this.comentarioPublicado(t)},r=>{console.log(r)})}comentarioPublicado(t){vt().fire({position:"bottom-end",icon:"success",title:"O coment\xe1rio foi publicado!",showConfirmButton:!1,timer:1500}),t.temComentarioDoAutenticado=!0,this.comentario="",this.tags="",t.aPublicarComentario=!1}publicar(t){t.aPublicarComentario=!0;const i=this.tags.replace(/\s/g,""),r=i.length>0?i.toString().split(","):[];this.comentariosService.novoComentario({idPost:t.id,data:"",id:"",tags:r,texto:this.comentario,utilizador:this.utilizador,reacoes:[],likes:[],dislikes:[],temDislikeDoAutenticado:!1,temLikeDoAutenticado:!1}).subscribe(s=>{this.carregarComentarios(t,!0)},s=>{console.log(s),vt().fire({position:"bottom-end",icon:"error",title:s.error,showConfirmButton:!1,timer:1500}),t.aPublicarComentario=!1})}}return n.\u0275fac=function(t){return new(t||n)(G(Bt),G(Bo),G(mA),G(sG))},n.\u0275cmp=Pt({type:n,selectors:[["app-feed-posts"]],inputs:{utilizador:"utilizador"},outputs:{emitEvent:"emitEvent"},decls:4,vars:3,consts:[[1,"pagina"],["class","aCarregar",4,"ngIf"],["class","semPublicacoes",4,"ngIf"],["class","posts",4,"ngIf"],[1,"aCarregar"],[1,"loader"],[1,"semPublicacoes"],[1,"posts"],["class","post",4,"ngFor","ngForOf"],[1,"post"],[1,"topo"],[2,"cursor","pointer",3,"src","click"],[1,"info"],[1,"cima"],[1,"baixo"],[1,"tags"],[4,"ngFor","ngForOf"],[1,"main"],[1,"reacoes-comentarios"],[1,"reacao"],["src","../../../assets/like_nao_preenchido.png",3,"click",4,"ngIf"],["src","../../../assets/like_preenchido.png",3,"click",4,"ngIf"],["src","../../../assets/dislike_nao_preenchido.png",3,"click",4,"ngIf"],["src","../../../assets/dislike_preenchido.png",3,"click",4,"ngIf"],["class","reacao",4,"ngIf"],["class","comentarios",4,"ngIf"],["src","../../../assets/like_nao_preenchido.png",3,"click"],["src","../../../assets/like_preenchido.png",3,"click"],["src","../../../assets/dislike_nao_preenchido.png",3,"click"],["src","../../../assets/dislike_preenchido.png",3,"click"],["src","../../../assets/comentario_nao_preenchido.png",3,"click",4,"ngIf"],["src","../../../assets/comentario_preenchido.png",3,"click",4,"ngIf"],["src","../../../assets/comentario_nao_preenchido.png",3,"click"],["src","../../../assets/comentario_preenchido.png",3,"click"],[1,"comentarios"],[1,"lista-comentarios"],["class","a-carregar-comentarios",4,"ngIf"],[4,"ngIf"],["class","comentario",4,"ngFor","ngForOf"],[1,"fazer-comentario"],["alt","avatar",3,"src"],["type","text","placeholder","Faz um coment\xe1rio",3,"ngModel","ngModelChange"],["type","text","placeholder","Separadas por virgula (ex: Desporto, Netflix)",3,"ngModel","ngModelChange"],[3,"click",4,"ngIf"],["class","a-publicar",4,"ngIf"],[1,"a-carregar-comentarios"],[1,"comentario"],[3,"click"],[1,"a-publicar"]],template:function(t,i){1&t&&(p(0,"div",0),V(1,aG,4,0,"div",1),V(2,lG,3,0,"div",2),V(3,AG,2,1,"div",3),g()),2&t&&(T(1),R("ngIf",i.aCarregarPosts),T(1),R("ngIf",!i.aCarregarPosts&&0==i.posts.length),T(1),R("ngIf",!i.aCarregarPosts))},directives:[xn,Jn,fr,Dr,Lc],styles:['*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}.pagina[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center}.posts[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;overflow-y:auto;overflow-x:hidden}.post[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;background-color:#fff;border-radius:10px;padding:8px;margin-bottom:10px}.topo[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.main[_ngcontent-%COMP%]{padding:1%}.reacoes-comentarios[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:2px}.fundo[_ngcontent-%COMP%]{padding:2px}.topo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:5%}.topo[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:40%;height:100%}.topo[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;margin-right:3px;font-size:1rem}.topo[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:.7rem;color:#2a2a2a}.topo[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:.7rem}.topo[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .cima[_ngcontent-%COMP%]{display:flex;align-items:center}.topo[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%]{width:53%;height:100%;display:flex;align-items:center;justify-content:flex-end}.topo[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background-color:#20416a;font-size:.7rem;margin-right:2px;padding:2px 6px;border-radius:10px;color:#fff}.main[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif}.reacoes-comentarios[_ngcontent-%COMP%]   .reacao[_ngcontent-%COMP%]{display:flex;align-items:center;height:100%}.reacoes-comentarios[_ngcontent-%COMP%]   .reacao[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30%;margin-right:2px;cursor:pointer}.reacoes-comentarios[_ngcontent-%COMP%]   .reacao[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:.8rem}.aCarregar[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.semPublicacoes[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center}.aCarregar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#20416a;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif}hr[_ngcontent-%COMP%]{border:0;clear:both;display:block;background-color:#dfdfdf;height:1px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:0}.loader[_ngcontent-%COMP%]{margin-top:2%;border:16px solid #f3f3f3;border-radius:50%;border-top:16px solid #20416a;width:60px;height:60px;animation:spin 2s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.comentarios[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center}.comentarios[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border:0;clear:both;display:block;width:100%;background-color:#fff;height:1px}.lista-comentarios[_ngcontent-%COMP%]{padding:10px 0;width:100%;display:flex;flex-direction:column;align-items:center}.fazer-comentario[_ngcontent-%COMP%]{padding:8px 0 0;width:100%;height:90px;display:flex;flex-direction:column;align-items:center;justify-content:space-around}.cima[_ngcontent-%COMP%]{width:100%;height:50%;display:flex;align-items:center}.cima[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px}.cima[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:80%;padding:5px 10px;border-radius:70px;border:0;background-color:#dfdfdf}.cima[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:0}.baixo[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:space-between}.baixo[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:7px 15px;background-image:url(background.b8b8e9811b070779.jpg);background-size:cover;color:#fff;border-radius:10px;border:0;cursor:pointer;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif}.baixo[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-position:center}.baixo[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%]{margin-left:2%;display:flex;align-items:center;width:80%;height:100%}.baixo[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding-left:1%;border:0}.baixo[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:.9rem}.baixo[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:0}.a-publicar[_ngcontent-%COMP%]{width:18%;border:0;display:flex;align-items:center;justify-content:flex-end}.a-publicar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:.8rem;margin-right:10%;color:#20416a}.a-publicar[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]{margin-top:2%;border:8px solid #f3f3f3;border-radius:50%;border-top:8px solid #20416a;width:20px;height:20px;animation:spin 2s linear infinite}.a-carregar-comentarios[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center}.a-carregar-comentarios[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#20416a;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif}.a-carregar-comentarios[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]{margin-left:2%;border:8px solid #f3f3f3;border-radius:50%;border-top:8px solid #20416a;width:15px;height:15px;animation:spin 2s linear infinite}.comentario[_ngcontent-%COMP%]{width:99%;display:flex;flex-direction:column;background-color:#dfdfdf;border-radius:10px;padding:8px;margin-bottom:10px}.comentario[_ngcontent-%COMP%]   .cima[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:.8rem}.comentario[_ngcontent-%COMP%]   .cima[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.7rem}.comentario[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem}.comentario[_ngcontent-%COMP%]   .reacoes-comentarios[_ngcontent-%COMP%]   .reacao[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25%;margin-right:2px;cursor:pointer}.reacoes-comentarios[_ngcontent-%COMP%]   .reacao[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:.7rem}.fazer-publicacao[_ngcontent-%COMP%]{background-color:#fff;width:100%;height:18%;padding:12px 15px;border-radius:10px}']}),n})(),Ob=(()=>{class n{constructor(t){this.http=t,this.url=zo_baseUrl+"/pedidosIntroducao"}getTodosPedidosDoUtilizadorAutenticado(){return this.http.get(this.url)}enviarPedido(t,i,r,o,s,a){return this.http.post(this.url,{paraUtilizadorId:t,utilizadorObjetivoId:i,mensagemLigacao:r,mensagemIntroducao:o,tags:s,forcaLigacao:a})}aceitarPedido(t){return this.http.put(this.url+"/"+t,{id:t,estado:"Aceite"})}recusarPedido(t){return this.http.put(this.url+"/"+t,{id:t,estado:"Recusado"})}}return n.\u0275fac=function(t){return new(t||n)(Le(Ro))},n.\u0275prov=We({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ib=(()=>{class n{constructor(t,i,r){this.fb=t,this.pedidosLigacaoService=i,this.router=r,this.janelaAberta=new It,this.formAceitarLigacao=t.group({tags:[""],forcaLigacao:["50"]}),this.aProcessarAceitacao=!1}ngOnInit(){}cancelar(){this.janelaAberta.emit(!1)}aceitar(){if(!this.aProcessarAceitacao){this.aProcessarAceitacao=!0;var t=this.formAceitarLigacao.controls.tags.value;const i=this.formAceitarLigacao.controls.forcaLigacao.value,r=(t=t.replace(/\s/g,"")).toString().split(",");this.pedidosLigacaoService.aceitarPedido(this.pedido.id,r,i).subscribe(o=>{this.janelaAberta.emit(!0),this.aProcessarAceitacao=!1},o=>{vt().fire({position:"bottom-end",icon:"error",title:o.error.message,showConfirmButton:!1,timer:1500}),this.aProcessarAceitacao=!1})}}}return n.\u0275fac=function(t){return new(t||n)(G(Js),G(bh),G(Bt))},n.\u0275cmp=Pt({type:n,selectors:[["app-aceitar-pedido-ligacao"]],inputs:{pedido:"pedido"},outputs:{janelaAberta:"janelaAberta"},decls:27,vars:2,consts:[[1,"pagina"],[1,"topo"],[1,"meio"],[3,"formGroup"],[1,"tags"],["type","text","formControlName","tags"],[1,"forca-ligacao"],[1,"forca"],["type","range","value","50","min","1","max","100","oninput","this.nextElementSibling.value = this.value","formControlName","forcaLigacao"],[1,"fundo"],[2,"background-color","firebrick","margin-right","5px",3,"click"],[2,"background-color","forestgreen",3,"click"]],template:function(t,i){1&t&&(p(0,"div",0),p(1,"div",1),p(2,"h2"),S(3),g(),U(4,"hr"),g(),p(5,"div",2),p(6,"form",3),p(7,"div",4),p(8,"h2"),p(9,"b"),S(10,"Tags"),g(),g(),U(11,"input",5),g(),p(12,"div",6),p(13,"h2"),p(14,"b"),S(15,"Forca de Liga\xe7\xe3o"),g(),g(),p(16,"div",7),U(17,"input",8),p(18,"output"),S(19,"50"),g(),g(),g(),g(),g(),p(20,"div",9),p(21,"button",10),J("click",function(){return i.cancelar()}),p(22,"b"),S(23,"Cancelar"),g(),g(),p(24,"button",11),J("click",function(){return i.aceitar()}),p(25,"b"),S(26,"Aceitar"),g(),g(),g(),g()),2&t&&(T(3),ur("Aceitar pedido de liga\xe7\xe3o de ",i.pedido.deUtilizador.nome,""),T(3),R("formGroup",i.formAceitarLigacao))},directives:[Xs,qs,ko,fr,Dr,ds,kc],styles:['.pagina[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:space-between}.topo[_ngcontent-%COMP%]{width:100%;height:15%;display:flex;flex-direction:column;justify-content:space-around}.meio[_ngcontent-%COMP%]{width:100%;height:60%}.fundo[_ngcontent-%COMP%]{width:100%;height:20%;display:flex;align-items:center;justify-content:flex-end}.topo[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:1.2rem}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;align-items:center;justify-content:space-around;height:100%}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.2rem;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif}form[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%]{display:flex;width:60%;align-items:center;justify-content:flex-start;background-color:#fff;border-radius:10px}form[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{background-color:gray;padding:2px 5px;font-size:1.1rem;border-radius:10px}form[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:transparent;border:0;color:#20416a;width:100%;padding:0 5px}form[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:0}form[_ngcontent-%COMP%]   .forca-ligacao[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%}form[_ngcontent-%COMP%]   .forca[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}form[_ngcontent-%COMP%]   .forca[_ngcontent-%COMP%]   output[_ngcontent-%COMP%]{color:#fff;margin-left:5px}.fundo[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px;border:0;border-radius:10px;cursor:pointer;color:#fff}.fundo[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:.8}']}),n})();function DG(n,e){if(1&n&&(p(0,"option"),S(1),g()),2&n){const t=e.$implicit;T(1),_e(t)}}function OG(n,e){if(1&n){const t=$e();p(0,"div",12),p(1,"div",13),p(2,"img",14),J("click",function(){const o=be(t).$implicit;return j(2).irParaPerfil(o.deUtilizador.id)}),g(),p(3,"div",15),p(4,"h2"),S(5),g(),p(6,"p"),S(7),g(),g(),p(8,"div",16),p(9,"img",17),J("click",function(){const o=be(t).$implicit;return j(2).recusarPedido(o)}),g(),p(10,"img",18),J("click",function(){const o=be(t).$implicit;return j(2).aceitarPedido(o)}),g(),g(),g(),g()}if(2&n){const t=e.$implicit;T(2),hn("src","../../../assets/",t.deUtilizador.avatar,"",dn),T(3),_e(t.deUtilizador.nome),T(2),_e(t.mensagem)}}function IG(n,e){1&n&&(p(0,"p"),S(1,"N\xe3o tem pedidos de introdu\xe7\xe3o novos."),g())}function RG(n,e){1&n&&(p(0,"p"),S(1,"N\xe3o tem pedidos de liga\xe7\xe3o novos."),g())}function LG(n,e){if(1&n&&(p(0,"div",19),V(1,IG,2,0,"p",20),V(2,RG,2,0,"p",20),g()),2&n){const t=j(2);T(1),R("ngIf","Introdu\xe7\xe3o"==t.tipoPedidoSelecionado),T(1),R("ngIf","Liga\xe7\xe3o"==t.tipoPedidoSelecionado)}}function kG(n,e){if(1&n&&(p(0,"div",9),V(1,OG,11,3,"div",10),V(2,LG,3,2,"div",11),g()),2&n){const t=j();T(1),R("ngForOf",t.pedidos),T(1),R("ngIf",0==t.pedidos.length)}}function FG(n,e){1&n&&(p(0,"div",21),p(1,"p"),S(2,"A carregar pedidos..."),g(),U(3,"div",22),g())}function NG(n,e){if(1&n){const t=$e();p(0,"div",23),p(1,"app-aceitar-pedido-ligacao",24),J("janelaAberta",function(r){return be(t),j().respostaAoPedidoLigacao(r)}),g(),g()}if(2&n){const t=j();T(1),R("pedido",t.pedidoParaAceitar)}}let zG=(()=>{class n{constructor(t,i,r){this.pedidosLigacaoService=t,this.pedidosIntroducaoService=i,this.router=r,this.emitEvent=new It,this.tiposPedido=["Liga\xe7\xe3o","Introdu\xe7\xe3o"],this.tipoPedidoSelecionado="Liga\xe7\xe3o",this.pretendeAceitarPedidoLigacao=!1,this.aCarregarPedidos=!0}ngOnInit(){this.carregarPedidosLigacao()}alterarTipoPedido(t){this.tipoPedidoSelecionado=t,"Liga\xe7\xe3o"==this.tipoPedidoSelecionado?this.carregarPedidosLigacao():this.carregarPedidosIntroducao()}carregarPedidosLigacao(){this.aCarregarPedidos=!0,this.pedidosLigacaoService.getPedidosPendentesDoUtilizadorAutenticado().subscribe(t=>{this.pedidos=t,this.pedidos.forEach(i=>i.tipo="Liga\xe7\xe3o"),this.aCarregarPedidos=!1})}carregarPedidosIntroducao(){this.aCarregarPedidos=!0,this.pedidosIntroducaoService.getTodosPedidosDoUtilizadorAutenticado().subscribe(t=>{this.pedidos=t.filter(i=>"PENDENTE"==i.estado),this.pedidos.forEach(i=>i.tipo="Introdu\xe7\xe3o"),this.aCarregarPedidos=!1})}irParaPerfil(t){this.router.navigate(["/utilizador/"+t])}aceitarPedido(t){"Liga\xe7\xe3o"==t.tipo?(this.pedidoParaAceitar=t,this.janelaAceitarLigacao(!0)):this.pedidosIntroducaoService.aceitarPedido(t.id).subscribe(i=>{this.carregarPedidosIntroducao(),vt().fire({position:"bottom-end",icon:"success",title:"O pedido foi aceite!",showConfirmButton:!1,timer:1500})},i=>{console.log(i)})}recusarPedido(t){"Liga\xe7\xe3o"==t.tipo?this.pedidosLigacaoService.recusarPedido(t.id).subscribe(i=>{this.carregarPedidosLigacao(),vt().fire({position:"bottom-end",icon:"success",title:"O pedido foi recusado!",showConfirmButton:!1,timer:1500})},i=>{console.log(i)}):this.pedidosIntroducaoService.recusarPedido(t.id).subscribe(i=>{this.carregarPedidosIntroducao(),vt().fire({position:"bottom-end",icon:"success",title:"O pedido foi recusado!",showConfirmButton:!1,timer:1500})},i=>{console.log(i)})}janelaAceitarLigacao(t){this.pretendeAceitarPedidoLigacao=t}respostaAoPedidoLigacao(t){this.pretendeAceitarPedidoLigacao=!1,t&&this.emitEvent.next("novo amigo.")}}return n.\u0275fac=function(t){return new(t||n)(G(bh),G(Ob),G(Bt))},n.\u0275cmp=Pt({type:n,selectors:[["app-mini-pedidos"]],outputs:{emitEvent:"emitEvent"},decls:14,vars:4,consts:[[1,"topo"],[3,"change"],[4,"ngFor","ngForOf"],[1,"main"],["class","pedidos",4,"ngIf"],["class","aCarregar",4,"ngIf"],[1,"ver-mais"],["href","pedidos"],["class","aceitar-pedido-ligacao",4,"ngIf"],[1,"pedidos"],["class","pedido",4,"ngFor","ngForOf"],["class","sem-pedidos",4,"ngIf"],[1,"pedido"],[1,"o-pedido"],[1,"avatar",3,"src","click"],[1,"info-pedido"],[1,"opcoes"],["src","../../../assets/recusar.png","title","Recusar pedido",1,"opcao",3,"click"],["src","../../../assets/aceitar.png","title","Aceitar pedido",1,"opcao",3,"click"],[1,"sem-pedidos"],[4,"ngIf"],[1,"aCarregar"],[1,"loader"],[1,"aceitar-pedido-ligacao"],[3,"pedido","janelaAberta"]],template:function(t,i){1&t&&(p(0,"div",0),p(1,"h1"),S(2,"Pedidos"),g(),p(3,"select",1),J("change",function(o){return i.alterarTipoPedido(o.target.value)}),V(4,DG,2,1,"option",2),g(),g(),U(5,"hr"),p(6,"div",3),V(7,kG,3,2,"div",4),V(8,FG,4,0,"div",5),p(9,"div",6),U(10,"hr"),p(11,"a",7),S(12,"Ver Todos"),g(),g(),V(13,NG,2,1,"div",8),g()),2&t&&(T(4),R("ngForOf",i.tiposPedido),T(3),R("ngIf",!i.aCarregarPedidos),T(1),R("ngIf",i.aCarregarPedidos),T(5),R("ngIf",i.pretendeAceitarPedidoLigacao))},directives:[Jn,xn,Ys,Zs,Ib],styles:['*[_ngcontent-%COMP%]{box-sizing:border-box}.topo[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%;height:10%}.topo[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.2rem;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;color:#1d1d1d;padding-bottom:5px}.topo[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border:0}.topo[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .topo[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover{outline:0}hr[_ngcontent-%COMP%]{border:0;clear:both;display:block;width:96%;background-color:#dfdfdf;height:1px}.main[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:space-between;height:90%}.pedidos[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:flex-start;width:100%;overflow-x:hidden;overflow-y:auto;padding:15px 0}.pedido[_ngcontent-%COMP%]{width:100%;align-items:center;justify-content:space-between;padding:5px}.o-pedido[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-between;align-items:center}.ver-mais[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:space-around;align-items:center;padding:5px 0}.ver-mais[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-top:5px;color:#20416a;text-decoration:none;font-family:"Trebuchet MS","Lucida Sans Unicode","Lucida Grande","Lucida Sans",Arial,sans-serif}.avatar[_ngcontent-%COMP%]{width:40px;cursor:pointer}.opcoes[_ngcontent-%COMP%]{width:25%}.opcao[_ngcontent-%COMP%]{width:20px;height:20px;cursor:pointer}.info-pedido[_ngcontent-%COMP%]{max-width:55%;display:flex;flex-direction:column;height:100%}.info-pedido[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;color:#424242;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;max-width:100%}.info-pedido[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1rem;color:#1d1d1d;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;max-width:100%}.sem-pedidos[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.88rem}.aceitar-pedido-ligacao[_ngcontent-%COMP%]{position:absolute;background-image:url(background.b8b8e9811b070779.jpg);background-position:center;background-size:cover;padding:10px;border-radius:10px;width:30%;height:40%;margin:auto}[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:20px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#20416a;border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#6b6b6b}.aCarregar[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.aCarregar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#a1a1a1;font-size:.9rem}.loader[_ngcontent-%COMP%]{margin-top:5%;border:8px solid #f3f3f3;border-radius:50%;border-top:8px solid #20416a;width:40px;height:40px;animation:spin 2s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}']}),n})(),_A=(()=>{class n{constructor(t){this.http=t,this.url=zo_baseUrl+"/classificacao"}getClassificacao(){return this.http.get(this.url)}ordenarPorDimensao(t){return t.sort((i,r)=>i.dimensao>r.dimensao?-1:i.dimensao<r.dimensao?1:i.fortaleza>r.fortaleza?-1:1),t}ordenarPorFortaleza(t){return t.sort((i,r)=>i.fortaleza>r.fortaleza?-1:i.fortaleza<r.fortaleza?1:i.dimensao>r.dimensao?-1:1),t}}return n.\u0275fac=function(t){return new(t||n)(Le(Ro))},n.\u0275prov=We({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function BG(n,e){if(1&n&&(p(0,"option"),S(1),g()),2&n){const t=e.$implicit;T(1),_e(t)}}function UG(n,e){1&n&&U(0,"img",18)}function VG(n,e){1&n&&U(0,"img",19)}function HG(n,e){1&n&&U(0,"img",20)}function GG(n,e){if(1&n&&(p(0,"p"),S(1),g()),2&n){const t=j().index;T(1),ur("",t+1,".")}}function jG(n,e){if(1&n&&(p(0,"p"),p(1,"b"),S(2),g(),g()),2&n){const t=j().$implicit;T(2),_e(t.dimensao)}}function WG(n,e){if(1&n&&(p(0,"p"),p(1,"b"),S(2),g(),g()),2&n){const t=j().$implicit;T(2),_e(t.fortaleza)}}function $G(n,e){if(1&n){const t=$e();p(0,"div",10),J("click",function(){const o=be(t).$implicit;return j(2).irParaPerfil(o.utilizador.id)}),p(1,"div",11),V(2,UG,1,0,"img",12),V(3,VG,1,0,"img",13),V(4,HG,1,0,"img",14),V(5,GG,2,1,"p",15),g(),p(6,"div",16),p(7,"h2"),S(8),g(),p(9,"p"),S(10),g(),g(),p(11,"div",17),V(12,jG,3,1,"p",15),V(13,WG,3,1,"p",15),g(),g()}if(2&n){const t=e.$implicit,i=e.index,r=j(2);R("ngClass",r.opcaoStyle[i]),T(2),R("ngIf",0==i),T(1),R("ngIf",1==i),T(1),R("ngIf",2==i),T(1),R("ngIf",i>2),T(3),_e(t.utilizador.nome),T(2),_e(t.utilizador.email),T(2),R("ngIf","Dimens\xe3o"==r.tipoClassificacaoSelecionada),T(1),R("ngIf","Fortaleza"==r.tipoClassificacaoSelecionada)}}function qG(n,e){if(1&n&&(p(0,"div",8),V(1,$G,14,9,"div",9),g()),2&n){const t=j();T(1),R("ngForOf",t.classificacao)}}function XG(n,e){1&n&&(p(0,"div",21),p(1,"p"),S(2,"A calcular classifica\xe7\xf5es..."),g(),U(3,"div",22),g())}let YG=(()=>{class n{constructor(t,i){this.classificaoService=t,this.router=i,this.opcaoStyle=[],this.tipoClassificacao=["Dimens\xe3o","Fortaleza"],this.tipoClassificacaoSelecionada=this.tipoClassificacao[0],this.classificacao=[],this.dados=[],this.aCarregar=!0}ngOnInit(){this.carregarClassificacoes()}carregarClassificacoes(){this.classificaoService.getClassificacao().subscribe(t=>{this.dados=t,this.aCarregar=!1,this.ordenarPorTipoClassificacao()},t=>{this.aCarregar=!1})}ordenarPorTipoClassificacao(){this.classificacao=this.tipoClassificacaoSelecionada==this.tipoClassificacao[0]?this.classificaoService.ordenarPorDimensao(this.dados).slice(0,5):this.classificaoService.ordenarPorFortaleza(this.dados).slice(0,5),this.verificarAutenticadoExiste()}verificarAutenticadoExiste(){var t=0;const i=localStorage.getItem("idUtilizador");this.classificacao.forEach(r=>{this.opcaoStyle[t]=r.utilizador.id===i?"utilizador-autenticado":"utilizador",t++})}alterarTipoClassificacao(t){this.tipoClassificacaoSelecionada=t,this.ordenarPorTipoClassificacao()}irParaPerfil(t){this.router.navigate(["/utilizador/"+t])}}return n.\u0275fac=function(t){return new(t||n)(G(_A),G(Bt))},n.\u0275cmp=Pt({type:n,selectors:[["app-mini-classificacao"]],decls:13,vars:3,consts:[[1,"pagina"],[1,"topo"],[3,"change"],[4,"ngFor","ngForOf"],["class","main",4,"ngIf"],["class","aCarregar",4,"ngIf"],[1,"ver-mais"],["href","classificacao"],[1,"main"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"],[1,"posicao"],["src","../../../assets/primeiro_lugar.png",4,"ngIf"],["src","../../../assets/segundo_lugar.png",4,"ngIf"],["src","../../../assets/terceiro_lugar.png",4,"ngIf"],[4,"ngIf"],[1,"info-pessoal"],[1,"pontos"],["src","../../../assets/primeiro_lugar.png"],["src","../../../assets/segundo_lugar.png"],["src","../../../assets/terceiro_lugar.png"],[1,"aCarregar"],[1,"loader"]],template:function(t,i){1&t&&(p(0,"div",0),p(1,"div",1),p(2,"h1"),S(3,"Classifica\xe7\xe3o"),g(),p(4,"select",2),J("change",function(o){return i.alterarTipoClassificacao(o.target.value)}),V(5,BG,2,1,"option",3),g(),g(),U(6,"hr"),V(7,qG,2,1,"div",4),V(8,XG,4,0,"div",5),p(9,"div",6),U(10,"hr"),p(11,"a",7),S(12,"Ver Mais"),g(),g(),g()),2&t&&(T(5),R("ngForOf",i.tipoClassificacao),T(2),R("ngIf",!i.aCarregar),T(1),R("ngIf",i.aCarregar))},directives:[Jn,xn,Ys,Zs,Wa],styles:['.pagina[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:space-between}.topo[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%;height:10%}.topo[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.2rem;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;color:#1d1d1d;padding-bottom:5px}.topo[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border:0}.topo[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .topo[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover{outline:0}hr[_ngcontent-%COMP%]{border:0;clear:both;display:block;width:96%;background-color:#dfdfdf;height:1px}.main[_ngcontent-%COMP%]{width:100%;height:67%;display:flex;flex-direction:column;align-items:center;overflow-y:auto;overflow-x:hidden}.aCarregar[_ngcontent-%COMP%]{width:100%;height:67%;display:flex;flex-direction:column;align-items:center;justify-content:center}.ver-mais[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:space-around;align-items:center;padding:5px 0}.ver-mais[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-top:5px;color:#20416a;text-decoration:none;font-family:"Trebuchet MS","Lucida Sans Unicode","Lucida Grande","Lucida Sans",Arial,sans-serif}.utilizador[_ngcontent-%COMP%]{width:99%;display:flex;align-items:center;justify-content:space-between;padding:5px 10px 5px 0;cursor:pointer}.utilizador[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.utilizador-autenticado[_ngcontent-%COMP%]{width:99%;display:flex;align-items:center;justify-content:space-between;padding:5px 10px 5px 0;cursor:pointer;background-color:#dfdfdf;border-radius:10px}.utilizador-autenticado[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.posicao[_ngcontent-%COMP%]{height:100%;width:15%;display:flex;align-items:center;justify-content:center}.info-pessoal[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;width:71%;max-width:72%}.info-pessoal[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1rem;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.info-pessoal[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8rem;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;max-width:100%}.pontos[_ngcontent-%COMP%]{width:9%}[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:20px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#20416a;border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#6b6b6b}.aCarregar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#a1a1a1;font-size:.9rem}.loader[_ngcontent-%COMP%]{margin-top:2%;border:8px solid #f3f3f3;border-radius:50%;border-top:8px solid #20416a;width:40px;height:40px;animation:spin 2s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}']}),n})();const ZG=["fazerPost"],JG=["feedPosts"],QG=["pedidos"],KG=["perfil"],e8=["sugestoes"],t8=["classificacao"];let n8=(()=>{class n{constructor(t){this.loginService=t}ngOnInit(){this.loginService.redirecionarParaLoginSeNaoAutenticado(),console.log("O utilizado autenticado \xe9 o "+localStorage.getItem("idUtilizador"))}feitoPost(t){this.feedPosts.atualizarFeed(!0)}feedAtualizado(t){this.fazerPost.resetCampos(),this.fazerPost.aEsperaDeResposta=!1,vt().fire({position:"bottom-end",icon:"success",title:"O post foi criado!",showConfirmButton:!1,timer:1500})}novoAmigo(t){this.perfil.atualizarDadosLigacoes(),this.sugestoes.carregarSugestoes(),this.classificacoes.carregarClassificacoes(),this.feedPosts.atualizarFeed(!1),this.pedidos.carregarPedidosLigacao(),vt().fire({position:"bottom-end",icon:"success",title:"O pedido foi aceite!",showConfirmButton:!1,timer:1500})}}return n.\u0275fac=function(t){return new(t||n)(G(yh))},n.\u0275cmp=Pt({type:n,selectors:[["app-pagina-utilizador"]],viewQuery:function(t,i){if(1&t&&(ls(ZG,5),ls(JG,5),ls(QG,5),ls(KG,5),ls(e8,5),ls(t8,5)),2&t){let r;qr(r=Xr())&&(i.fazerPost=r.first),qr(r=Xr())&&(i.feedPosts=r.first),qr(r=Xr())&&(i.pedidos=r.first),qr(r=Xr())&&(i.perfil=r.first),qr(r=Xr())&&(i.sugestoes=r.first),qr(r=Xr())&&(i.classificacoes=r.first)}},decls:25,vars:0,consts:[[1,"pagina"],[1,"topo"],[1,"restante-pagina"],[1,"esquerda"],[1,"perfil"],["perfil",""],[1,"sugestoes"],["sugestoes",""],[1,"centro"],[1,"fazer-publicacao"],[3,"emitEvent"],["fazerPost",""],[1,"feed-posts"],["feedPosts",""],[1,"direita"],[1,"pedidos"],["pedidos",""],[1,"classificacao"],["classificacao",""]],template:function(t,i){1&t&&(p(0,"div",0),p(1,"div",1),U(2,"app-menu-topo-utilizador"),g(),p(3,"div",2),p(4,"div",3),p(5,"div",4),U(6,"app-mini-perfil",null,5),g(),p(8,"div",6),U(9,"app-mini-sugestoes",null,7),g(),g(),p(11,"div",8),p(12,"div",9),p(13,"app-fazer-post",10,11),J("emitEvent",function(o){return i.feitoPost(o)}),g(),g(),p(15,"div",12),p(16,"app-feed-posts",10,13),J("emitEvent",function(o){return i.feedAtualizado(o)}),g(),g(),g(),p(18,"div",14),p(19,"div",15),p(20,"app-mini-pedidos",10,16),J("emitEvent",function(o){return i.novoAmigo(o)}),g(),g(),p(22,"div",17),U(23,"app-mini-classificacao",null,18),g(),g(),g(),g())},directives:[el,j6,K6,rG,Db,zG,YG],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}.pagina[_ngcontent-%COMP%]{height:100vh;width:100%;background:rgb(223,223,223);display:flex;flex-direction:column;align-items:center;justify-content:flex-start}.topo[_ngcontent-%COMP%]{height:7%;width:100%;background-image:url(background.b8b8e9811b070779.jpg);background-size:cover}.restante-pagina[_ngcontent-%COMP%]{width:100%;height:100%;max-height:93%;display:flex;justify-content:space-between;padding:40px 100px}.esquerda[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:space-between;height:100%;width:23%}.centro[_ngcontent-%COMP%]{width:52%;display:flex;flex-direction:column;align-items:center;justify-content:space-between}.direita[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:space-between;height:100%;width:23%}.esquerda[_ngcontent-%COMP%]   .perfil[_ngcontent-%COMP%]{background:white;width:100%;border-radius:10px;height:50%;padding:20px}.esquerda[_ngcontent-%COMP%]   .sugestoes[_ngcontent-%COMP%]{background:white;padding:20px;width:100%;border-radius:10px;height:48%;max-height:48%}.direita[_ngcontent-%COMP%]   .pedidos[_ngcontent-%COMP%]{background:white;padding:20px;width:100%;border-radius:10px;height:58%}.direita[_ngcontent-%COMP%]   .classificacao[_ngcontent-%COMP%]{background:white;padding:15px;width:100%;border-radius:10px;height:40%}.centro[_ngcontent-%COMP%]   .fazer-publicacao[_ngcontent-%COMP%]{background-color:#fff;width:100%;height:18%;padding:12px 15px;border-radius:10px}.centro[_ngcontent-%COMP%]   .feed-posts[_ngcontent-%COMP%]{width:100%;height:80%;border-radius:10px}"]}),n})();function i8(n,e){1&n&&(p(0,"p",30),p(1,"b"),S(2,"Aceite"),g(),g())}function r8(n,e){1&n&&(p(0,"p",31),p(1,"b"),S(2,"Recusado"),g(),g())}function o8(n,e){1&n&&(p(0,"p",32),p(1,"b"),S(2,"Pendente"),g(),g())}function s8(n,e){if(1&n){const t=$e();p(0,"div",33),p(1,"button",34),J("click",function(){be(t);const r=j().$implicit;return j().recusarPedido(r)}),p(2,"b"),S(3,"Recusar"),g(),g(),p(4,"button",35),J("click",function(){be(t);const r=j().$implicit;return j().aceitarPedido(r)}),p(5,"b"),S(6,"Aceitar"),g(),g(),g()}}function a8(n,e){if(1&n&&(function(n,e,t){const i=pe(),r=Lt(),o=n+20,s=r.firstCreatePass?function(n,e,t,i,r){const o=e.consts,s=ks(o,i),a=oc(e,n,8,"ng-container",s);return null!==s&&_p(a,s,!0),n0(e,t,a,ks(o,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(o,r,i,e,t):r.data[o];xo(s,!0);const a=i[o]=i[11].createComment("");up(r,i,a,s),Si(a,i),Hl(s)&&(e0(r,i,s),HC(r,s,i)),null!=t&&t0(i,s)}(0),p(1,"h3"),S(2,"Mensagem: "),g(),p(3,"p"),S(4),g(),function(){let n=$n();const e=Lt();ev()?tv():(n=n.parent,xo(n,!1)),e.firstCreatePass&&($f(e,n),Vl(n)&&e.queries.elementEnd(n))}()),2&n){const t=j().$implicit;T(4),_e(t.mensagem)}}function l8(n,e){1&n&&(p(0,"p"),S(1,"Nenhuma mensagem foi especificada"),g())}function c8(n,e){if(1&n&&(p(0,"p",39),S(1),g()),2&n){const t=e.$implicit;T(1),_e(t)}}function u8(n,e){if(1&n&&(p(0,"div",36),p(1,"div",37),p(2,"h3"),S(3,"Tags: "),g(),V(4,c8,2,1,"p",38),g(),p(5,"div",37),p(6,"h3"),S(7,"For\xe7a: "),g(),p(8,"p"),S(9),g(),g(),g()),2&n){const t=j().$implicit;T(4),R("ngForOf",t.tags),T(5),_e(t.forcaLigacao)}}function d8(n,e){if(1&n&&(p(0,"div",40),U(1,"img",41),p(2,"h2"),S(3),g(),g()),2&n){const t=j().$implicit;T(1),hn("src","../../../assets/",t.utilizadorObjetivo.avatar,"",dn),T(2),_e(t.utilizadorObjetivo.nome)}}function h8(n,e){if(1&n){const t=$e();p(0,"div",15),p(1,"div",16),p(2,"img",17),J("click",function(){const o=be(t).$implicit;return j().irParaPerfil(o.deUtilizador.id)}),g(),p(3,"h3"),S(4),g(),p(5,"p"),S(6),g(),g(),p(7,"div",18),p(8,"div",19),V(9,i8,3,0,"p",20),V(10,r8,3,0,"p",21),V(11,o8,3,0,"p",22),V(12,s8,7,0,"div",23),p(13,"p",4),p(14,"b"),S(15),g(),g(),g(),U(16,"hr"),p(17,"div",24),p(18,"div",25),V(19,a8,5,1,"ng-container",26),V(20,l8,2,0,"ng-template",null,27,AS),g(),V(22,u8,10,2,"div",28),V(23,d8,4,2,"div",29),g(),g(),g()}if(2&n){const t=e.$implicit,i=function(n){return function(n,e){return n[e]}(it.lFrame.contextLView,20+n)}(21);T(2),hn("src","../../../assets/",t.deUtilizador.avatar,"",dn),T(2),_e(t.deUtilizador.nome),T(2),_e(t.data),T(3),R("ngIf","ACEITE"==t.estado),T(1),R("ngIf","RECUSADO"==t.estado),T(1),R("ngIf","PENDENTE"==t.estado),T(1),R("ngIf","PENDENTE"==t.estado),T(3),_e(t.tipo),T(4),R("ngIf",null!=t.mensagem)("ngIfElse",i),T(3),R("ngIf","Liga\xe7\xe3o"==t.tipo),T(1),R("ngIf","Introdu\xe7\xe3o"==t.tipo)}}function f8(n,e){if(1&n){const t=$e();p(0,"div",42),p(1,"app-aceitar-pedido-ligacao",43),J("janelaAberta",function(r){return be(t),j().janelaAceitarLigacao(r)}),g(),g()}if(2&n){const t=j();T(1),R("pedido",t.pedidoLigacaoParaAceitar)}}function p8(n,e){1&n&&(p(0,"div",44),p(1,"p"),S(2,"N\xe3o foram encontrados pedidos."),g(),g())}let g8=(()=>{class n{constructor(t,i,r,o){this.pedidosLigacaoService=t,this.pedidosIntroducaoService=i,this.loginService=r,this.router=o,this.ligacaoPendentes=!0,this.ligacaoAceites=!1,this.ligacaoRecusados=!1,this.introducaoPendentes=!0,this.introducaoAceites=!1,this.introducaoRecusados=!1,this.pedidos=[],this.pretendeAceitarPedidoLigacao=!1}ngOnInit(){this.loginService.redirecionarParaLoginSeNaoAutenticado(),this.carregarPedidos()}carregarPedidos(){this.pedidos=[];var t=[],i=[],r=[];(this.ligacaoAceites||this.ligacaoPendentes||this.ligacaoRecusados)&&this.pedidosLigacaoService.getTodosPedidosDoUtilizadorAutenticado().subscribe(o=>{t=o.filter(s=>"ACEITE"===s.estado),i=o.filter(s=>"RECUSADO"===s.estado),r=o.filter(s=>"PENDENTE"===s.estado),this.ligacaoAceites&&t.forEach(s=>this.pedidos.push(s)),this.ligacaoPendentes&&r.forEach(s=>this.pedidos.push(s)),this.ligacaoRecusados&&i.forEach(s=>this.pedidos.push(s)),this.pedidos.sort((s,a)=>s.data<a.data?1:s.data>a.data?-1:0),o.forEach(s=>s.tipo="Liga\xe7\xe3o")}),(this.introducaoAceites||this.introducaoPendentes||this.introducaoRecusados)&&this.pedidosIntroducaoService.getTodosPedidosDoUtilizadorAutenticado().subscribe(o=>{o.forEach(s=>s.tipo="Introdu\xe7\xe3o"),t=o.filter(s=>"ACEITE"==s.estado),i=o.filter(s=>"RECUSADO"==s.estado),r=o.filter(s=>"PENDENTE"==s.estado),this.introducaoAceites&&t.forEach(s=>this.pedidos.push(s)),this.introducaoPendentes&&r.forEach(s=>this.pedidos.push(s)),this.introducaoRecusados&&i.forEach(s=>this.pedidos.push(s)),this.pedidos.sort((s,a)=>s.data<a.data?1:s.data>a.data?-1:0)})}checkBoxAlterada(t,i){switch(t){case 1:this.ligacaoPendentes=i.currentTarget.checked;break;case 2:this.ligacaoAceites=i.currentTarget.checked;break;case 3:this.ligacaoRecusados=i.currentTarget.checked;break;case 4:this.introducaoPendentes=i.currentTarget.checked;break;case 5:this.introducaoAceites=i.currentTarget.checked;break;case 6:this.introducaoRecusados=i.currentTarget.checked}this.carregarPedidos()}irParaPerfil(t){this.router.navigate(["/utilizador/"+t])}aceitarPedido(t){"Liga\xe7\xe3o"==t.tipo?(this.pedidoLigacaoParaAceitar=t,this.janelaAceitarLigacao(!0)):this.pedidosIntroducaoService.aceitarPedido(t.id).subscribe(i=>{this.carregarPedidos(),vt().fire({position:"bottom-end",icon:"success",title:"O pedido foi aceite!",showConfirmButton:!1,timer:1500})},i=>{console.log(i)})}recusarPedido(t){"Liga\xe7\xe3o"==t.tipo?this.pedidosLigacaoService.recusarPedido(t.id).subscribe(i=>{this.carregarPedidos(),vt().fire({position:"bottom-end",icon:"success",title:"O pedido foi recusado!",showConfirmButton:!1,timer:1500})},i=>{console.log(i)}):this.pedidosIntroducaoService.recusarPedido(t.id).subscribe(i=>{this.carregarPedidos(),vt().fire({position:"bottom-end",icon:"success",title:"O pedido foi recusado!",showConfirmButton:!1,timer:1500})},i=>{console.log(i)})}janelaAceitarLigacao(t){this.pretendeAceitarPedidoLigacao=t,this.pretendeAceitarPedidoLigacao||this.carregarPedidos()}}return n.\u0275fac=function(t){return new(t||n)(G(bh),G(Ob),G(yh),G(Bt))},n.\u0275cmp=Pt({type:n,selectors:[["app-pedidos"]],decls:46,vars:9,consts:[[1,"pagina"],[1,"pagina-topo"],[1,"restante-pagina"],[1,"esquerda"],[1,"tipo-pedido"],[1,"topo"],["src","../../../assets/expandir.png","alt",""],[1,"opcoes"],[1,"opcao"],["type","checkbox",3,"ngModel","ngModelChange","change"],[1,"direita"],[1,"pedidos"],["class","pedido",4,"ngFor","ngForOf"],["class","aceitar-pedido-ligacao",4,"ngIf"],["class","sem-pedidos",4,"ngIf"],[1,"pedido"],[1,"pedido-esquerda"],[2,"cursor","pointer",3,"src","click"],[1,"pedido-direita"],[1,"pedido-direita-topo"],["class","estado-pedido","style","background-color: green;",4,"ngIf"],["class","estado-pedido","style","background-color: red;",4,"ngIf"],["class","estado-pedido","style","background-color: grey;",4,"ngIf"],["class","aceitar-recusar-pedido",4,"ngIf"],[1,"pedido-direita-baixo"],[1,"mensagem"],[4,"ngIf","ngIfElse"],["elseTemplate",""],["class","tags-e-forca",4,"ngIf"],["class","para-quem",4,"ngIf"],[1,"estado-pedido",2,"background-color","green"],[1,"estado-pedido",2,"background-color","red"],[1,"estado-pedido",2,"background-color","grey"],[1,"aceitar-recusar-pedido"],[2,"background-color","red",3,"click"],[2,"background-color","green",3,"click"],[1,"tags-e-forca"],[1,"tf"],["class","tag",4,"ngFor","ngForOf"],[1,"tag"],[1,"para-quem"],["alt","avatar",3,"src"],[1,"aceitar-pedido-ligacao"],[3,"pedido","janelaAberta"],[1,"sem-pedidos"]],template:function(t,i){1&t&&(p(0,"div",0),p(1,"div",1),U(2,"app-menu-topo-utilizador"),g(),p(3,"div",2),p(4,"div",3),p(5,"div",4),p(6,"div",5),p(7,"h2"),S(8,"Pedidos Liga\xe7\xe3o"),g(),U(9,"img",6),g(),p(10,"div",7),p(11,"div",8),p(12,"input",9),J("ngModelChange",function(o){return i.ligacaoPendentes=o})("change",function(o){return i.checkBoxAlterada(1,o)}),g(),p(13,"p"),S(14,"Pendentes"),g(),g(),p(15,"div",8),p(16,"input",9),J("ngModelChange",function(o){return i.ligacaoAceites=o})("change",function(o){return i.checkBoxAlterada(2,o)}),g(),p(17,"p"),S(18,"Aceites"),g(),g(),p(19,"div",8),p(20,"input",9),J("ngModelChange",function(o){return i.ligacaoRecusados=o})("change",function(o){return i.checkBoxAlterada(3,o)}),g(),p(21,"p"),S(22,"Recusados"),g(),g(),g(),g(),p(23,"div",4),p(24,"div",5),p(25,"h2"),S(26,"Pedidos Introdu\xe7\xe3o"),g(),U(27,"img",6),g(),p(28,"div",7),p(29,"div",8),p(30,"input",9),J("ngModelChange",function(o){return i.introducaoPendentes=o})("change",function(o){return i.checkBoxAlterada(4,o)}),g(),p(31,"p"),S(32,"Pendentes"),g(),g(),p(33,"div",8),p(34,"input",9),J("ngModelChange",function(o){return i.introducaoAceites=o})("change",function(o){return i.checkBoxAlterada(5,o)}),g(),p(35,"p"),S(36,"Aceites"),g(),g(),p(37,"div",8),p(38,"input",9),J("ngModelChange",function(o){return i.introducaoRecusados=o})("change",function(o){return i.checkBoxAlterada(6,o)}),g(),p(39,"p"),S(40,"Recusados"),g(),g(),g(),g(),g(),p(41,"div",10),p(42,"div",11),V(43,h8,24,12,"div",12),V(44,f8,2,1,"div",13),V(45,p8,3,0,"div",14),g(),g(),g(),g()),2&t&&(T(12),R("ngModel",i.ligacaoPendentes),T(4),R("ngModel",i.ligacaoAceites),T(4),R("ngModel",i.ligacaoRecusados),T(10),R("ngModel",i.introducaoPendentes),T(4),R("ngModel",i.introducaoAceites),T(4),R("ngModel",i.introducaoRecusados),T(5),R("ngForOf",i.pedidos),T(1),R("ngIf",i.pretendeAceitarPedidoLigacao),T(1),R("ngIf",0==i.pedidos.length))},directives:[el,th,Dr,Lc,Jn,xn,Ib],styles:['*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}.pagina[_ngcontent-%COMP%]{height:100vh;width:100%;background:rgb(223,223,223);display:flex;flex-direction:column;align-items:center;justify-content:flex-start}.pagina-topo[_ngcontent-%COMP%]{height:7%;width:100%;background-image:url(background.b8b8e9811b070779.jpg);background-size:cover}.restante-pagina[_ngcontent-%COMP%]{width:100%;height:100%;max-height:93%;display:flex;justify-content:space-between;padding:40px 100px}.esquerda[_ngcontent-%COMP%]{width:28%;border-radius:10px;display:flex;flex-direction:column}.direita[_ngcontent-%COMP%]{width:70%;border-radius:10px;display:flex;flex-direction:column;justify-content:space-between;height:100%}.esquerda[_ngcontent-%COMP%]   .tipo-pedido[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;background-image:url(background.b8b8e9811b070779.jpg);background-position:center;background-size:cover;border-radius:10px;margin-bottom:10px;width:100%}.esquerda[_ngcontent-%COMP%]   .topo[_ngcontent-%COMP%]{padding:10px;width:100%;display:flex;align-items:center;justify-content:space-between}.esquerda[_ngcontent-%COMP%]   .topo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:4%}.esquerda[_ngcontent-%COMP%]   .topo[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.1rem;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif}.esquerda[_ngcontent-%COMP%]   .opcoes[_ngcontent-%COMP%]{background-color:#fff;width:100%;display:flex;flex-direction:column;padding:10px 10px 10px 35px;border-radius:0 0 10px 10px}.esquerda[_ngcontent-%COMP%]   .opcoes[_ngcontent-%COMP%]   .opcao[_ngcontent-%COMP%]{display:flex;align-items:center;padding:5px}.esquerda[_ngcontent-%COMP%]   .opcoes[_ngcontent-%COMP%]   .opcao[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:5px}.esquerda[_ngcontent-%COMP%]   .opcoes[_ngcontent-%COMP%]   .opcao[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;font-family:"Gill Sans","Gill Sans MT",Calibri,"Trebuchet MS",sans-serif}.direita[_ngcontent-%COMP%]   .pedidos[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;overflow-y:scroll;overflow-x:hidden}.pedido[_ngcontent-%COMP%]{padding:8px;background:white;border-radius:10px;display:flex;justify-content:space-between;width:99%;margin-bottom:10px}.pedido-esquerda[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:20%}.pedido-esquerda[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30%}.pedido-esquerda[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:1rem}.pedido-esquerda[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:.6rem}.pedido-direita[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;width:78%;height:100%}.pedido-direita-topo[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:space-between;height:25px}.pedido-direita-baixo[_ngcontent-%COMP%]{padding-top:5px;width:100%;display:flex;justify-content:space-between}.pedido[_ngcontent-%COMP%]   .tipo-pedido[_ngcontent-%COMP%]{padding:5px;border-radius:10px;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:.9rem;color:#000}.pedido[_ngcontent-%COMP%]   .estado-pedido[_ngcontent-%COMP%]{padding:4px 5px;border-radius:10px;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:.8rem;color:#fff}.pedido-direita-baixo[_ngcontent-%COMP%]   .tags-e-forca[_ngcontent-%COMP%]{width:28%;display:flex;flex-direction:column}.pedido-direita-baixo[_ngcontent-%COMP%]   .para-quem[_ngcontent-%COMP%]{width:28%;display:flex;flex-direction:column;align-items:center;justify-content:space-between}.pedido-direita-baixo[_ngcontent-%COMP%]   .tags-e-forca[_ngcontent-%COMP%]   .tf[_ngcontent-%COMP%]{display:flex;align-items:center;padding:4px;border-bottom:solid #20416a 2px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.tag[_ngcontent-%COMP%]{padding:2px;background-color:#a9a9a9;border-radius:5px;margin-right:1px}.tf[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:.9rem;color:#20416a;margin-right:2px}.tf[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#20416a;font-size:.8rem}hr[_ngcontent-%COMP%]{border:0;clear:both;display:block;width:100%;background-color:#dfdfdf;height:1px}.mensagem[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.mensagem[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:1rem;color:#20416a;margin-right:2px}.mensagem[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#20416a;font-size:.9rem}.para-quem[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20%}.para-quem[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:.9rem;color:#20416a}.aceitar-recusar-pedido[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;padding:8px}.aceitar-recusar-pedido[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:3px 5px;color:#fff;border:0;margin-left:2%;cursor:pointer;border-radius:10px}.aceitar-recusar-pedido[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:.8}.info[_ngcontent-%COMP%]{display:flex;align-items:center;width:auto;padding:10px;border-radius:10px;background-color:#8d8d8d}.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-left:3px;color:#fff}.info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.sem-pedidos[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.aceitar-pedido-ligacao[_ngcontent-%COMP%]{position:absolute;background-image:url(background.b8b8e9811b070779.jpg);background-position:center;background-size:cover;padding:10px;border-radius:10px;width:40%;height:40%;margin:auto;z-index:10}[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:20px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:white;border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#6b6b6b}']}),n})(),vA=(()=>{class n{constructor(t,i,r){this.fb=t,this.ligacoesService=i,this.router=r,this.janelaAberta=new It,this.forcaLigacao=40,this.formEditarLigacao=t.group({tags:[""],forcaLigacao:[""]}),this.aProcessarAlteracoes=!1}ngOnInit(){this.formEditarLigacao.patchValue({tags:this.ligacao.tags,forcaLigacao:this.ligacao.forcaLigacao}),this.forcaLigacao=this.ligacao.forcaLigacao}cancelar(){this.janelaAberta.emit(!1)}guardar(){if(!this.aProcessarAlteracoes){this.aProcessarAlteracoes=!0;var t=this.formEditarLigacao.controls.tags.value;const i=this.formEditarLigacao.controls.forcaLigacao.value,r=(t=t.toString().replace(/\s/g,"")).toString().split(",");this.ligacoesService.editarLigacao(this.ligacao.id,r,i).subscribe(o=>{vt().fire({position:"bottom-end",icon:"success",title:"A liga\xe7\xe3o foi editada!",showConfirmButton:!1,timer:1500}),this.cancelar(),this.aProcessarAlteracoes=!1},o=>{vt().fire({position:"bottom-end",icon:"error",title:o.error.message,showConfirmButton:!1,timer:1500}),this.aProcessarAlteracoes=!1})}}}return n.\u0275fac=function(t){return new(t||n)(G(Js),G(Uo),G(Bt))},n.\u0275cmp=Pt({type:n,selectors:[["app-editar-ligacao"]],inputs:{ligacao:"ligacao"},outputs:{janelaAberta:"janelaAberta"},decls:27,vars:3,consts:[[1,"pagina"],[1,"topo"],[1,"meio"],[3,"formGroup"],[1,"tags"],["type","text","formControlName","tags"],[1,"forca-ligacao"],[1,"forca"],["type","range","value","50","min","1","max","100","oninput","this.nextElementSibling.value = this.value","formControlName","forcaLigacao"],[1,"fundo"],[2,"background-color","firebrick","margin-right","5px",3,"click"],[2,"background-color","forestgreen",3,"click"]],template:function(t,i){1&t&&(p(0,"div",0),p(1,"div",1),p(2,"h2"),S(3),g(),U(4,"hr"),g(),p(5,"div",2),p(6,"form",3),p(7,"div",4),p(8,"h2"),p(9,"b"),S(10,"Tags"),g(),g(),U(11,"input",5),g(),p(12,"div",6),p(13,"h2"),p(14,"b"),S(15,"Forca de Liga\xe7\xe3o"),g(),g(),p(16,"div",7),U(17,"input",8),p(18,"output"),S(19),g(),g(),g(),g(),g(),p(20,"div",9),p(21,"button",10),J("click",function(){return i.cancelar()}),p(22,"b"),S(23,"Cancelar"),g(),g(),p(24,"button",11),J("click",function(){return i.guardar()}),p(25,"b"),S(26,"Guardar"),g(),g(),g(),g()),2&t&&(T(3),ur("Editar liga\xe7\xe3o com ",i.ligacao.utilizadorB.nome,""),T(3),R("formGroup",i.formEditarLigacao),T(13),_e(i.forcaLigacao))},directives:[Xs,qs,ko,fr,Dr,ds,kc],styles:['.pagina[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:space-between}.topo[_ngcontent-%COMP%]{width:100%;height:15%;display:flex;flex-direction:column;justify-content:space-around}.meio[_ngcontent-%COMP%]{width:100%;height:60%}.fundo[_ngcontent-%COMP%]{width:100%;height:20%;display:flex;align-items:center;justify-content:flex-end}.topo[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:1.2rem}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;align-items:center;justify-content:space-around;height:100%}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.2rem;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif}form[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%]{display:flex;width:60%;align-items:center;justify-content:flex-start;background-color:#fff;border-radius:10px}form[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{background-color:gray;padding:2px 5px;font-size:1.1rem;border-radius:10px}form[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:transparent;border:0;color:#20416a;width:100%;padding:0 5px}form[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:0}form[_ngcontent-%COMP%]   .forca-ligacao[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%}form[_ngcontent-%COMP%]   .forca[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}form[_ngcontent-%COMP%]   .forca[_ngcontent-%COMP%]   output[_ngcontent-%COMP%]{color:#fff;margin-left:5px}.fundo[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px;border:0;border-radius:10px;cursor:pointer;color:#fff}.fundo[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:.8}']}),n})();function m8(n,e){1&n&&(p(0,"div",6),p(1,"h2",7),S(2,"Utilizador"),g(),p(3,"h2",8),S(4,"Tags"),g(),p(5,"h2",9),S(6,"For\xe7a de Liga\xe7\xe3o"),g(),p(7,"h2",10),S(8,"For\xe7a de Rela\xe7\xe3o"),g(),g())}function _8(n,e){if(1&n&&(p(0,"p"),S(1),g()),2&n){const t=e.$implicit;T(1),_e(t)}}function v8(n,e){if(1&n){const t=$e();p(0,"div",11),p(1,"img",12),J("click",function(){const o=be(t).$implicit;return j().irParaPerfil(o.utilizadorB.id)}),g(),p(2,"div",13),p(3,"h2"),S(4),g(),p(5,"h3"),S(6),g(),g(),p(7,"div",14),p(8,"div",15),V(9,_8,2,1,"p",16),g(),g(),p(10,"div",14),p(11,"p"),S(12),g(),g(),p(13,"div",14),p(14,"p"),S(15),g(),g(),p(16,"img",17),J("click",function(){const o=be(t).$implicit;return j().editarLigacao(o)}),g(),g()}if(2&n){const t=e.$implicit;T(1),hn("src","../../../assets/",t.utilizadorB.avatar,"",dn),T(3),_e(t.utilizadorB.nome),T(2),_e(t.utilizadorB.email),T(3),R("ngForOf",t.tags),T(3),_e(t.forcaLigacao),T(3),_e(t.forcaRelacao)}}function y8(n,e){if(1&n){const t=$e();p(0,"div",18),p(1,"app-editar-ligacao",19),J("janelaAberta",function(r){return be(t),j().setJanelaEditarLigacao(r)}),g(),g()}if(2&n){const t=j();T(1),R("ligacao",t.ligacaoParaEditar)}}function b8(n,e){1&n&&(p(0,"div",20),p(1,"p"),S(2,"N\xe3o possui nenhum amigo no momento."),g(),g())}function x8(n,e){1&n&&(p(0,"div",21),p(1,"p"),S(2,"A procurar..."),g(),U(3,"div",22),g())}let w8=(()=>{class n{constructor(t,i){this.ligacoesService=t,this.router=i,this.janelaEditarLigacao=!1}ngOnInit(){this.carregarAmigos()}carregarAmigos(){this.ligacoesService.getLigacoesDoUtilizadorAutenticado().subscribe(t=>{this.amigos=t,this.ordenarPorOrdemAlfabetica()},t=>{vt().fire({position:"bottom-end",icon:"error",title:"N\xe3o foi possivel contactar o servidor.",showConfirmButton:!1,timer:1500})})}ordenarPorOrdemAlfabetica(){this.amigos.sort((t,i)=>t.utilizadorB.nome>i.utilizadorB.nome?1:t.utilizadorB.nome<i.utilizadorB.nome?-1:0)}irParaPerfil(t){this.router.navigate(["/utilizador/"+t])}editarLigacao(t){this.ligacaoParaEditar=t,this.setJanelaEditarLigacao(!0)}setJanelaEditarLigacao(t){this.janelaEditarLigacao=t,this.janelaEditarLigacao||this.carregarAmigos()}}return n.\u0275fac=function(t){return new(t||n)(G(Uo),G(Bt))},n.\u0275cmp=Pt({type:n,selectors:[["app-lista-amigos"]],decls:6,vars:5,consts:[[1,"pagina"],["class","cabecalho",4,"ngIf"],["class","ligacao",4,"ngFor","ngForOf"],["class","editar-ligacao",4,"ngIf"],["class","semResultados",4,"ngIf"],["class","aProcurar",4,"ngIf"],[1,"cabecalho"],[1,"u"],[1,"t"],[1,"l"],[1,"r"],[1,"ligacao"],[1,"avatar",3,"src","click"],[1,"nomes"],[1,"info"],[1,"tags"],[4,"ngFor","ngForOf"],["src","../../../assets/edit_azul.png","title","Editar liga\xe7\xe3o",1,"botao-editar",3,"click"],[1,"editar-ligacao"],[3,"ligacao","janelaAberta"],[1,"semResultados"],[1,"aProcurar"],[1,"loader"]],template:function(t,i){1&t&&(p(0,"div",0),V(1,m8,9,0,"div",1),V(2,v8,17,6,"div",2),V(3,y8,2,1,"div",3),V(4,b8,3,0,"div",4),V(5,x8,4,0,"div",5),g()),2&t&&(T(1),R("ngIf",i.amigos&&i.amigos.length>0),T(1),R("ngForOf",i.amigos),T(1),R("ngIf",i.janelaEditarLigacao),T(1),R("ngIf",i.amigos&&0==i.amigos.length),T(1),R("ngIf",!i.amigos))},directives:[xn,Jn,vA],styles:['.pagina[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%;height:100%;overflow-y:auto;overflow-x:hidden}.ligacao[_ngcontent-%COMP%]{width:99%;display:flex;align-items:center;justify-content:space-between;background-color:#fff;border-radius:10px;margin-bottom:10px;padding:5px 2%}.avatar[_ngcontent-%COMP%]{width:50px;margin-right:2%;cursor:pointer}.ligacao[_ngcontent-%COMP%]   .nomes[_ngcontent-%COMP%]{width:19%;margin-right:2%}.ligacao[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{width:19%;margin-right:2%;display:flex;flex-direction:column;align-items:center}.nomes[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:1.1rem;color:#20416a}.nomes[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.9rem;color:#20416a}.info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;color:#20416a;font-size:1rem}.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#20416a;font-size:1rem}.botao-editar[_ngcontent-%COMP%]{width:25px;cursor:pointer}.tags[_ngcontent-%COMP%]{display:flex}.tags[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background-color:#20416a;padding:2px 5px;border-radius:10px;margin-right:2px;color:#fff}.editar-ligacao[_ngcontent-%COMP%]{position:absolute;background-image:url(background.b8b8e9811b070779.jpg);background-position:center;background-size:cover;padding:10px;border-radius:10px;width:40%;height:40%;margin:auto}[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:20px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#20416a;border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#6b6b6b}.cabecalho[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:space-around;margin-bottom:10px;background-color:#20416a;padding:10px 5% 10px 10px;border-radius:10px}.cabecalho[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:1.2rem;color:#fff;text-align:center}.u[_ngcontent-%COMP%]{width:26%}.t[_ngcontent-%COMP%]{width:20%}.l[_ngcontent-%COMP%]{width:20%}.r[_ngcontent-%COMP%]{width:20%}.aProcurar[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:100%}.loader[_ngcontent-%COMP%]{margin-top:2%;border:16px solid #f3f3f3;border-radius:50%;border-top:16px solid #20416a;width:60px;height:60px;animation:spin 2s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}']}),n})();function yA(n,e,t,i,r,o,s){try{var a=n[o](s),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(i,r)}const Ai=1001,Qn=1003,wn=1006,ta=1009,Mh=1012,gs=1015,qc=1016,Xc=1020,nl=1022,li=1023,il=1026,Yc=1027,Zc=2400,Jc=2401,nr=3e3,Eh=35044,Sh=35048;class na{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const r=this._listeners[e];if(void 0!==r){const o=r.indexOf(t);-1!==o&&r.splice(o,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const i=this._listeners[e.type];if(void 0!==i){e.target=this;const r=i.slice(0);for(let o=0,s=r.length;o<s;o++)r[o].call(this,e);e.target=null}}}const _i=[];for(let n=0;n<256;n++)_i[n]=(n<16?"0":"")+n.toString(16);const rl=Math.PI/180,Th=180/Math.PI;function gr(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(_i[255&n]+_i[n>>8&255]+_i[n>>16&255]+_i[n>>24&255]+"-"+_i[255&e]+_i[e>>8&255]+"-"+_i[e>>16&15|64]+_i[e>>24&255]+"-"+_i[63&t|128]+_i[t>>8&255]+"-"+_i[t>>16&255]+_i[t>>24&255]+_i[255&i]+_i[i>>8&255]+_i[i>>16&255]+_i[i>>24&255]).toUpperCase()}function vi(n,e,t){return Math.max(e,Math.min(t,n))}function Ph(n,e,t){return(1-t)*n+t*e}function Wb(n){return 0==(n&n-1)&&0!==n}function qA(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}class ne{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,i){return void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),o=this.x-e.x,s=this.y-e.y;return this.x=o*i-s*r+e.x,this.y=o*r+s*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}ne.prototype.isVector2=!0;class ci{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,r,o,s,a,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=o,u[5]=l,u[6]=i,u[7]=s,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,o=this.elements,s=i[0],a=i[3],l=i[6],c=i[1],u=i[4],d=i[7],h=i[2],f=i[5],m=i[8],v=r[0],w=r[3],y=r[6],_=r[1],M=r[4],C=r[7],A=r[2],L=r[5],P=r[8];return o[0]=s*v+a*_+l*A,o[3]=s*w+a*M+l*L,o[6]=s*y+a*C+l*P,o[1]=c*v+u*_+d*A,o[4]=c*w+u*M+d*L,o[7]=c*y+u*C+d*P,o[2]=h*v+f*_+m*A,o[5]=h*w+f*M+m*L,o[8]=h*y+f*C+m*P,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*s*u-t*a*c-i*o*u+i*a*l+r*o*c-r*s*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*s-a*c,h=a*l-u*o,f=c*o-s*l,m=t*d+i*h+r*f;if(0===m)return this.set(0,0,0,0,0,0,0,0,0);const v=1/m;return e[0]=d*v,e[1]=(r*c-u*i)*v,e[2]=(a*i-r*s)*v,e[3]=h*v,e[4]=(u*t-r*l)*v,e[5]=(r*o-a*t)*v,e[6]=f*v,e[7]=(i*l-c*t)*v,e[8]=(s*t-i*o)*v,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,o,s,a){const l=Math.cos(o),c=Math.sin(o);return this.set(i*l,i*c,-i*(l*s+c*a)+s+e,-r*c,r*l,-r*(-c*s+l*a)+a+t,0,0,1),this}scale(e,t){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),r=this.elements,o=r[0],s=r[3],a=r[6],l=r[1],c=r[4],u=r[7];return r[0]=t*o+i*l,r[3]=t*s+i*c,r[6]=t*a+i*u,r[1]=-i*o+t*l,r[4]=-i*s+t*c,r[7]=-i*a+t*u,this}translate(e,t){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function XA(n){if(0===n.length)return-1/0;let e=n[0];for(let t=1,i=n.length;t<i;++t)n[t]>e&&(e=n[t]);return e}function zg(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function YA(n,e=0){let t=3735928559^e,i=1103547991^e;for(let o,r=0;r<n.length;r++)o=n.charCodeAt(r),t=Math.imul(t^o,2654435761),i=Math.imul(i^o,1597334677);return t=Math.imul(t^t>>>16,2246822507)^Math.imul(i^i>>>13,3266489909),i=Math.imul(i^i>>>16,2246822507)^Math.imul(t^t>>>13,3266489909),4294967296*(2097151&i)+(t>>>0)}let eu;ci.prototype.isMatrix3=!0,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;class tu{static getDataURL(e){if(/^data:/i.test(e.src)||"undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===eu&&(eu=zg("canvas")),eu.width=e.width,eu.height=e.height;const i=eu.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=eu}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}}let hj=0;class Pn extends na{constructor(e=Pn.DEFAULT_IMAGE,t=Pn.DEFAULT_MAPPING,i=Ai,r=Ai,o=wn,s=1008,a=li,l=ta,c=1,u=nr){super(),Object.defineProperty(this,"id",{value:hj++}),this.uuid=gr(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=i,this.wrapT=r,this.magFilter=o,this.minFilter=s,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new ne(0,0),this.repeat=new ne(1,1),this.center=new ne(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ci,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const r=this.image;if(void 0===r.uuid&&(r.uuid=gr()),!t&&void 0===e.images[r.uuid]){let o;if(Array.isArray(r)){o=[];for(let s=0,a=r.length;s<a;s++)o.push($b(r[s].isDataTexture?r[s].image:r[s]))}else o=$b(r);e.images[r.uuid]={uuid:r.uuid,url:o}}i.image=r.uuid}return"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case 1e3:e.x=e.x-Math.floor(e.x);break;case Ai:e.x=e.x<0?0:1;break;case 1002:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case 1e3:e.y=e.y-Math.floor(e.y);break;case Ai:e.y=e.y<0?0:1;break;case 1002:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&this.version++}}function $b(n){return"undefined"!=typeof HTMLImageElement&&n instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&n instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&n instanceof ImageBitmap?tu.getDataURL(n):n.data?{data:Array.prototype.slice.call(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Pn.DEFAULT_IMAGE=void 0,Pn.DEFAULT_MAPPING=300,Pn.prototype.isTexture=!0;class qt{constructor(e=0,t=0,i=0,r=1){this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,o=this.w,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r+s[12]*o,this.y=s[1]*t+s[5]*i+s[9]*r+s[13]*o,this.z=s[2]*t+s[6]*i+s[10]*r+s[14]*o,this.w=s[3]*t+s[7]*i+s[11]*r+s[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,o;const s=.01,a=.1,l=e.elements,c=l[0],u=l[4],d=l[8],h=l[1],f=l[5],m=l[9],v=l[2],w=l[6],y=l[10];if(Math.abs(u-h)<s&&Math.abs(d-v)<s&&Math.abs(m-w)<s){if(Math.abs(u+h)<a&&Math.abs(d+v)<a&&Math.abs(m+w)<a&&Math.abs(c+f+y-3)<a)return this.set(1,0,0,0),this;t=Math.PI;const M=(c+1)/2,C=(f+1)/2,A=(y+1)/2,L=(u+h)/4,P=(d+v)/4,z=(m+w)/4;return M>C&&M>A?M<s?(i=0,r=.707106781,o=.707106781):(i=Math.sqrt(M),r=L/i,o=P/i):C>A?C<s?(i=.707106781,r=0,o=.707106781):(r=Math.sqrt(C),i=L/r,o=z/r):A<s?(i=.707106781,r=.707106781,o=0):(o=Math.sqrt(A),i=P/o,r=z/o),this.set(i,r,o,t),this}let _=Math.sqrt((w-m)*(w-m)+(d-v)*(d-v)+(h-u)*(h-u));return Math.abs(_)<.001&&(_=1),this.x=(w-m)/_,this.y=(d-v)/_,this.z=(h-u)/_,this.w=Math.acos((c+f+y-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,i){return void 0!==i&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}qt.prototype.isVector4=!0;class Gn extends na{constructor(e,t,i={}){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new qt(0,0,e,t),this.scissorTest=!1,this.viewport=new qt(0,0,e,t),this.texture=new Pn(void 0,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:e,height:t,depth:1},this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.internalFormat=void 0!==i.internalFormat?i.internalFormat:null,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:wn,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image=Ge({},this.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}Gn.prototype.isWebGLRenderTarget=!0,class extends Gn{constructor(e,t,i){super(e,t);const r=this.texture;this.texture=[];for(let o=0;o<i;o++)this.texture[o]=r.clone()}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,o=this.texture.length;r<o;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone();return this}}.prototype.isWebGLMultipleRenderTargets=!0;class qb extends Gn{constructor(e,t,i={}){super(e,t,i),this.samples=4,this.ignoreDepthForMultisampleCopy=void 0===i.ignoreDepth||i.ignoreDepth,this.useRenderToTexture=void 0!==i.useRenderToTexture&&i.useRenderToTexture,this.useRenderbuffer=!1===this.useRenderToTexture}copy(e){return super.copy.call(this,e),this.samples=e.samples,this.useRenderToTexture=e.useRenderToTexture,this.useRenderbuffer=e.useRenderbuffer,this}}qb.prototype.isWebGLMultisampleRenderTarget=!0;class ui{constructor(e=0,t=0,i=0,r=1){this._x=e,this._y=t,this._z=i,this._w=r}static slerp(e,t,i,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),i.slerpQuaternions(e,t,r)}static slerpFlat(e,t,i,r,o,s,a){let l=i[r+0],c=i[r+1],u=i[r+2],d=i[r+3];const h=o[s+0],f=o[s+1],m=o[s+2],v=o[s+3];if(0===a)return e[t+0]=l,e[t+1]=c,e[t+2]=u,void(e[t+3]=d);if(1===a)return e[t+0]=h,e[t+1]=f,e[t+2]=m,void(e[t+3]=v);if(d!==v||l!==h||c!==f||u!==m){let w=1-a;const y=l*h+c*f+u*m+d*v,_=y>=0?1:-1,M=1-y*y;if(M>Number.EPSILON){const A=Math.sqrt(M),L=Math.atan2(A,y*_);w=Math.sin(w*L)/A,a=Math.sin(a*L)/A}const C=a*_;if(l=l*w+h*C,c=c*w+f*C,u=u*w+m*C,d=d*w+v*C,w===1-a){const A=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=A,c*=A,u*=A,d*=A}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,o,s){const a=i[r],l=i[r+1],c=i[r+2],u=i[r+3],d=o[s],h=o[s+1],f=o[s+2],m=o[s+3];return e[t]=a*m+u*d+l*f-c*h,e[t+1]=l*m+u*h+c*d-a*f,e[t+2]=c*m+u*f+a*h-l*d,e[t+3]=u*m-a*d-l*h-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=e._x,r=e._y,o=e._z,s=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(r/2),d=a(o/2),h=l(i/2),f=l(r/2),m=l(o/2);switch(s){case"XYZ":this._x=h*u*d+c*f*m,this._y=c*f*d-h*u*m,this._z=c*u*m+h*f*d,this._w=c*u*d-h*f*m;break;case"YXZ":this._x=h*u*d+c*f*m,this._y=c*f*d-h*u*m,this._z=c*u*m-h*f*d,this._w=c*u*d+h*f*m;break;case"ZXY":this._x=h*u*d-c*f*m,this._y=c*f*d+h*u*m,this._z=c*u*m+h*f*d,this._w=c*u*d-h*f*m;break;case"ZYX":this._x=h*u*d-c*f*m,this._y=c*f*d+h*u*m,this._z=c*u*m-h*f*d,this._w=c*u*d+h*f*m;break;case"YZX":this._x=h*u*d+c*f*m,this._y=c*f*d+h*u*m,this._z=c*u*m-h*f*d,this._w=c*u*d-h*f*m;break;case"XZY":this._x=h*u*d-c*f*m,this._y=c*f*d-h*u*m,this._z=c*u*m+h*f*d,this._w=c*u*d+h*f*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],o=t[8],s=t[1],a=t[5],l=t[9],c=t[2],u=t[6],d=t[10],h=i+a+d;if(h>0){const f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(u-l)*f,this._y=(o-c)*f,this._z=(s-r)*f}else if(i>a&&i>d){const f=2*Math.sqrt(1+i-a-d);this._w=(u-l)/f,this._x=.25*f,this._y=(r+s)/f,this._z=(o+c)/f}else if(a>d){const f=2*Math.sqrt(1+a-i-d);this._w=(o-c)/f,this._x=(r+s)/f,this._y=.25*f,this._z=(l+u)/f}else{const f=2*Math.sqrt(1+d-i-a);this._w=(s-r)/f,this._x=(o+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(vi(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,o=e._z,s=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+s*a+r*c-o*l,this._y=r*u+s*l+o*a-i*c,this._z=o*u+s*c+i*l-r*a,this._w=s*u-i*a-r*l-o*c,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,r=this._y,o=this._z,s=this._w;let a=s*e._w+i*e._x+r*e._y+o*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=i,this._y=r,this._z=o,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-t;return this._w=f*s+t*this._w,this._x=f*i+t*this._x,this._y=f*r+t*this._y,this._z=f*o+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-t)*u)/c,h=Math.sin(t*u)/c;return this._w=s*d+this._w*h,this._x=i*d+this._x*h,this._y=r*d+this._y*h,this._z=o*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,i){this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),o=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(o),i*Math.cos(o),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}ui.prototype.isQuaternion=!0;class D{constructor(e=0,t=0,i=0){this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(ZA.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(ZA.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[3]*i+o[6]*r,this.y=o[1]*t+o[4]*i+o[7]*r,this.z=o[2]*t+o[5]*i+o[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,o=e.elements,s=1/(o[3]*t+o[7]*i+o[11]*r+o[15]);return this.x=(o[0]*t+o[4]*i+o[8]*r+o[12])*s,this.y=(o[1]*t+o[5]*i+o[9]*r+o[13])*s,this.z=(o[2]*t+o[6]*i+o[10]*r+o[14])*s,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,o=e.x,s=e.y,a=e.z,l=e.w,c=l*t+s*r-a*i,u=l*i+a*t-o*r,d=l*r+o*i-s*t,h=-o*t-s*i-a*r;return this.x=c*l+h*-o+u*-a-d*-s,this.y=u*l+h*-s+d*-o-c*-a,this.z=d*l+h*-a+c*-s-u*-o,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r,this.y=o[1]*t+o[5]*i+o[9]*r,this.z=o[2]*t+o[6]*i+o[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,o=e.z,s=t.x,a=t.y,l=t.z;return this.x=r*l-o*a,this.y=o*s-i*l,this.z=i*a-r*s,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Xb.copy(this).projectOnVector(e),this.sub(Xb)}reflect(e){return this.sub(Xb.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(vi(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}D.prototype.isVector3=!0;const Xb=new D,ZA=new ui;class Ir{constructor(e=new D(1/0,1/0,1/0),t=new D(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,r=1/0,o=-1/0,s=-1/0,a=-1/0;for(let l=0,c=e.length;l<c;l+=3){const u=e[l],d=e[l+1],h=e[l+2];u<t&&(t=u),d<i&&(i=d),h<r&&(r=h),u>o&&(o=u),d>s&&(s=d),h>a&&(a=h)}return this.min.set(t,i,r),this.max.set(o,s,a),this}setFromBufferAttribute(e){let t=1/0,i=1/0,r=1/0,o=-1/0,s=-1/0,a=-1/0;for(let l=0,c=e.count;l<c;l++){const u=e.getX(l),d=e.getY(l),h=e.getZ(l);u<t&&(t=u),d<i&&(i=d),h<r&&(r=h),u>o&&(o=u),d>s&&(s=d),h>a&&(a=h)}return this.min.set(t,i,r),this.max.set(o,s,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Ah.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),Yb.copy(t.boundingBox),Yb.applyMatrix4(e.matrixWorld),this.union(Yb));const i=e.children;for(let r=0,o=i.length;r<o;r++)this.expandByObject(i[r]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Ah),Ah.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Dh),Bg.subVectors(this.max,Dh),nu.subVectors(e.a,Dh),iu.subVectors(e.b,Dh),ru.subVectors(e.c,Dh),ia.subVectors(iu,nu),ra.subVectors(ru,iu),ol.subVectors(nu,ru);let t=[0,-ia.z,ia.y,0,-ra.z,ra.y,0,-ol.z,ol.y,ia.z,0,-ia.x,ra.z,0,-ra.x,ol.z,0,-ol.x,-ia.y,ia.x,0,-ra.y,ra.x,0,-ol.y,ol.x,0];return!(!Zb(t,nu,iu,ru,Bg)||(t=[1,0,0,0,1,0,0,0,1],!Zb(t,nu,iu,ru,Bg)))&&(Ug.crossVectors(ia,ra),t=[Ug.x,Ug.y,Ug.z],Zb(t,nu,iu,ru,Bg))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Ah.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(Ah).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(ms[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ms[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ms[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ms[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ms[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ms[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ms[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ms[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ms)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Ir.prototype.isBox3=!0;const ms=[new D,new D,new D,new D,new D,new D,new D,new D],Ah=new D,Yb=new Ir,nu=new D,iu=new D,ru=new D,ia=new D,ra=new D,ol=new D,Dh=new D,Bg=new D,Ug=new D,sl=new D;function Zb(n,e,t,i,r){for(let o=0,s=n.length-3;o<=s;o+=3){sl.fromArray(n,o);const a=r.x*Math.abs(sl.x)+r.y*Math.abs(sl.y)+r.z*Math.abs(sl.z),l=e.dot(sl),c=t.dot(sl),u=i.dot(sl);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const pj=new Ir,JA=new D,Jb=new D,Qb=new D;class al{constructor(e=new D,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):pj.setFromPoints(e).getCenter(i);let r=0;for(let o=0,s=e.length;o<s;o++)r=Math.max(r,i.distanceToSquared(e[o]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){Qb.subVectors(e,this.center);const t=Qb.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=.5*(i-this.radius);this.center.add(Qb.multiplyScalar(r/i)),this.radius+=r}return this}union(e){return Jb.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(JA.copy(e.center).add(Jb)),this.expandByPoint(JA.copy(e.center).sub(Jb)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const _s=new D,Kb=new D,Vg=new D,oa=new D,ex=new D,Hg=new D,tx=new D;class ll{constructor(e=new D,t=new D(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,_s)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=_s.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(_s.copy(this.direction).multiplyScalar(t).add(this.origin),_s.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){Kb.copy(e).add(t).multiplyScalar(.5),Vg.copy(t).sub(e).normalize(),oa.copy(this.origin).sub(Kb);const o=.5*e.distanceTo(t),s=-this.direction.dot(Vg),a=oa.dot(this.direction),l=-oa.dot(Vg),c=oa.lengthSq(),u=Math.abs(1-s*s);let d,h,f,m;if(u>0)if(d=s*l-a,h=s*a-l,m=o*u,d>=0)if(h>=-m)if(h<=m){const v=1/u;d*=v,h*=v,f=d*(d+s*h+2*a)+h*(s*d+h+2*l)+c}else h=o,d=Math.max(0,-(s*h+a)),f=-d*d+h*(h+2*l)+c;else h=-o,d=Math.max(0,-(s*h+a)),f=-d*d+h*(h+2*l)+c;else h<=-m?(d=Math.max(0,-(-s*o+a)),h=d>0?-o:Math.min(Math.max(-o,-l),o),f=-d*d+h*(h+2*l)+c):h<=m?(d=0,h=Math.min(Math.max(-o,-l),o),f=h*(h+2*l)+c):(d=Math.max(0,-(s*o+a)),h=d>0?o:Math.min(Math.max(-o,-l),o),f=-d*d+h*(h+2*l)+c);else h=s>0?-o:o,d=Math.max(0,-(s*h+a)),f=-d*d+h*(h+2*l)+c;return i&&i.copy(this.direction).multiplyScalar(d).add(this.origin),r&&r.copy(Vg).multiplyScalar(h).add(Kb),f}intersectSphere(e,t){_s.subVectors(e.center,this.origin);const i=_s.dot(this.direction),r=_s.dot(_s)-i*i,o=e.radius*e.radius;if(r>o)return null;const s=Math.sqrt(o-r),a=i-s,l=i+s;return a<0&&l<0?null:this.at(a<0?l:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,o,s,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return c>=0?(i=(e.min.x-h.x)*c,r=(e.max.x-h.x)*c):(i=(e.max.x-h.x)*c,r=(e.min.x-h.x)*c),u>=0?(o=(e.min.y-h.y)*u,s=(e.max.y-h.y)*u):(o=(e.max.y-h.y)*u,s=(e.min.y-h.y)*u),i>s||o>r||((o>i||i!=i)&&(i=o),(s<r||r!=r)&&(r=s),d>=0?(a=(e.min.z-h.z)*d,l=(e.max.z-h.z)*d):(a=(e.max.z-h.z)*d,l=(e.min.z-h.z)*d),i>l||a>r)||((a>i||i!=i)&&(i=a),(l<r||r!=r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return null!==this.intersectBox(e,_s)}intersectTriangle(e,t,i,r,o){ex.subVectors(t,e),Hg.subVectors(i,e),tx.crossVectors(ex,Hg);let a,s=this.direction.dot(tx);if(s>0){if(r)return null;a=1}else{if(!(s<0))return null;a=-1,s=-s}oa.subVectors(this.origin,e);const l=a*this.direction.dot(Hg.crossVectors(oa,Hg));if(l<0)return null;const c=a*this.direction.dot(ex.cross(oa));if(c<0||l+c>s)return null;const u=-a*oa.dot(tx);return u<0?null:this.at(u/s,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class He{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,r,o,s,a,l,c,u,d,h,f,m,v,w){const y=this.elements;return y[0]=e,y[4]=t,y[8]=i,y[12]=r,y[1]=o,y[5]=s,y[9]=a,y[13]=l,y[2]=c,y[6]=u,y[10]=d,y[14]=h,y[3]=f,y[7]=m,y[11]=v,y[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new He).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/ou.setFromMatrixColumn(e,0).length(),o=1/ou.setFromMatrixColumn(e,1).length(),s=1/ou.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*o,t[5]=i[5]*o,t[6]=i[6]*o,t[7]=0,t[8]=i[8]*s,t[9]=i[9]*s,t[10]=i[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,i=e.x,r=e.y,o=e.z,s=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(o),d=Math.sin(o);if("XYZ"===e.order){const h=s*u,f=s*d,m=a*u,v=a*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=f+m*c,t[5]=h-v*c,t[9]=-a*l,t[2]=v-h*c,t[6]=m+f*c,t[10]=s*l}else if("YXZ"===e.order){const h=l*u,f=l*d,m=c*u,v=c*d;t[0]=h+v*a,t[4]=m*a-f,t[8]=s*c,t[1]=s*d,t[5]=s*u,t[9]=-a,t[2]=f*a-m,t[6]=v+h*a,t[10]=s*l}else if("ZXY"===e.order){const h=l*u,f=l*d,m=c*u,v=c*d;t[0]=h-v*a,t[4]=-s*d,t[8]=m+f*a,t[1]=f+m*a,t[5]=s*u,t[9]=v-h*a,t[2]=-s*c,t[6]=a,t[10]=s*l}else if("ZYX"===e.order){const h=s*u,f=s*d,m=a*u,v=a*d;t[0]=l*u,t[4]=m*c-f,t[8]=h*c+v,t[1]=l*d,t[5]=v*c+h,t[9]=f*c-m,t[2]=-c,t[6]=a*l,t[10]=s*l}else if("YZX"===e.order){const h=s*l,f=s*c,m=a*l,v=a*c;t[0]=l*u,t[4]=v-h*d,t[8]=m*d+f,t[1]=d,t[5]=s*u,t[9]=-a*u,t[2]=-c*u,t[6]=f*d+m,t[10]=h-v*d}else if("XZY"===e.order){const h=s*l,f=s*c,m=a*l,v=a*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=h*d+v,t[5]=s*u,t[9]=f*d-m,t[2]=m*d-f,t[6]=a*u,t[10]=v*d+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(gj,e,mj)}lookAt(e,t,i){const r=this.elements;return mr.subVectors(e,t),0===mr.lengthSq()&&(mr.z=1),mr.normalize(),sa.crossVectors(i,mr),0===sa.lengthSq()&&(1===Math.abs(i.z)?mr.x+=1e-4:mr.z+=1e-4,mr.normalize(),sa.crossVectors(i,mr)),sa.normalize(),Gg.crossVectors(mr,sa),r[0]=sa.x,r[4]=Gg.x,r[8]=mr.x,r[1]=sa.y,r[5]=Gg.y,r[9]=mr.y,r[2]=sa.z,r[6]=Gg.z,r[10]=mr.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,o=this.elements,s=i[0],a=i[4],l=i[8],c=i[12],u=i[1],d=i[5],h=i[9],f=i[13],m=i[2],v=i[6],w=i[10],y=i[14],_=i[3],M=i[7],C=i[11],A=i[15],L=r[0],P=r[4],z=r[8],W=r[12],$=r[1],B=r[5],he=r[9],Y=r[13],q=r[2],K=r[6],Q=r[10],ie=r[14],Ce=r[3],ke=r[7],le=r[11],ue=r[15];return o[0]=s*L+a*$+l*q+c*Ce,o[4]=s*P+a*B+l*K+c*ke,o[8]=s*z+a*he+l*Q+c*le,o[12]=s*W+a*Y+l*ie+c*ue,o[1]=u*L+d*$+h*q+f*Ce,o[5]=u*P+d*B+h*K+f*ke,o[9]=u*z+d*he+h*Q+f*le,o[13]=u*W+d*Y+h*ie+f*ue,o[2]=m*L+v*$+w*q+y*Ce,o[6]=m*P+v*B+w*K+y*ke,o[10]=m*z+v*he+w*Q+y*le,o[14]=m*W+v*Y+w*ie+y*ue,o[3]=_*L+M*$+C*q+A*Ce,o[7]=_*P+M*B+C*K+A*ke,o[11]=_*z+M*he+C*Q+A*le,o[15]=_*W+M*Y+C*ie+A*ue,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],o=e[12],s=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],h=e[10],f=e[14];return e[3]*(+o*l*d-r*c*d-o*a*h+i*c*h+r*a*f-i*l*f)+e[7]*(+t*l*f-t*c*h+o*s*h-r*s*f+r*c*u-o*l*u)+e[11]*(+t*c*d-t*a*f-o*s*d+i*s*f+o*a*u-i*c*u)+e[15]*(-r*a*u-t*l*d+t*a*h+r*s*d-i*s*h+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],f=e[11],m=e[12],v=e[13],w=e[14],y=e[15],_=d*w*c-v*h*c+v*l*f-a*w*f-d*l*y+a*h*y,M=m*h*c-u*w*c-m*l*f+s*w*f+u*l*y-s*h*y,C=u*v*c-m*d*c+m*a*f-s*v*f-u*a*y+s*d*y,A=m*d*l-u*v*l-m*a*h+s*v*h+u*a*w-s*d*w,L=t*_+i*M+r*C+o*A;if(0===L)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/L;return e[0]=_*P,e[1]=(v*h*o-d*w*o-v*r*f+i*w*f+d*r*y-i*h*y)*P,e[2]=(a*w*o-v*l*o+v*r*c-i*w*c-a*r*y+i*l*y)*P,e[3]=(d*l*o-a*h*o-d*r*c+i*h*c+a*r*f-i*l*f)*P,e[4]=M*P,e[5]=(u*w*o-m*h*o+m*r*f-t*w*f-u*r*y+t*h*y)*P,e[6]=(m*l*o-s*w*o-m*r*c+t*w*c+s*r*y-t*l*y)*P,e[7]=(s*h*o-u*l*o+u*r*c-t*h*c-s*r*f+t*l*f)*P,e[8]=C*P,e[9]=(m*d*o-u*v*o-m*i*f+t*v*f+u*i*y-t*d*y)*P,e[10]=(s*v*o-m*a*o+m*i*c-t*v*c-s*i*y+t*a*y)*P,e[11]=(u*a*o-s*d*o-u*i*c+t*d*c+s*i*f-t*a*f)*P,e[12]=A*P,e[13]=(u*v*r-m*d*r+m*i*h-t*v*h-u*i*w+t*d*w)*P,e[14]=(m*a*r-s*v*r-m*i*l+t*v*l+s*i*w-t*a*w)*P,e[15]=(s*d*r-u*a*r+u*i*l-t*d*l-s*i*h+t*a*h)*P,this}scale(e){const t=this.elements,i=e.x,r=e.y,o=e.z;return t[0]*=i,t[4]*=r,t[8]*=o,t[1]*=i,t[5]*=r,t[9]*=o,t[2]*=i,t[6]*=r,t[10]*=o,t[3]*=i,t[7]*=r,t[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),o=1-i,s=e.x,a=e.y,l=e.z,c=o*s,u=o*a;return this.set(c*s+i,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+i,u*l-r*s,0,c*l-r*a,u*l+r*s,o*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,o,s){return this.set(1,i,o,0,e,1,s,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,o=t._x,s=t._y,a=t._z,l=t._w,c=o+o,u=s+s,d=a+a,h=o*c,f=o*u,m=o*d,v=s*u,w=s*d,y=a*d,_=l*c,M=l*u,C=l*d,A=i.x,L=i.y,P=i.z;return r[0]=(1-(v+y))*A,r[1]=(f+C)*A,r[2]=(m-M)*A,r[3]=0,r[4]=(f-C)*L,r[5]=(1-(h+y))*L,r[6]=(w+_)*L,r[7]=0,r[8]=(m+M)*P,r[9]=(w-_)*P,r[10]=(1-(h+v))*P,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let o=ou.set(r[0],r[1],r[2]).length();const s=ou.set(r[4],r[5],r[6]).length(),a=ou.set(r[8],r[9],r[10]).length();this.determinant()<0&&(o=-o),e.x=r[12],e.y=r[13],e.z=r[14],eo.copy(this);const c=1/o,u=1/s,d=1/a;return eo.elements[0]*=c,eo.elements[1]*=c,eo.elements[2]*=c,eo.elements[4]*=u,eo.elements[5]*=u,eo.elements[6]*=u,eo.elements[8]*=d,eo.elements[9]*=d,eo.elements[10]*=d,t.setFromRotationMatrix(eo),i.x=o,i.y=s,i.z=a,this}makePerspective(e,t,i,r,o,s){void 0===s&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,c=2*o/(i-r),u=(t+e)/(t-e),d=(i+r)/(i-r),h=-(s+o)/(s-o),f=-2*s*o/(s-o);return a[0]=2*o/(t-e),a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=d,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,i,r,o,s){const a=this.elements,l=1/(t-e),c=1/(i-r),u=1/(s-o),d=(t+e)*l,h=(i+r)*c,f=(s+o)*u;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-d,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}He.prototype.isMatrix4=!0;const ou=new D,eo=new He,gj=new D(0,0,0),mj=new D(1,1,1),sa=new D,Gg=new D,mr=new D,QA=new He,KA=new ui;class su{constructor(e=0,t=0,i=0,r=su.DefaultOrder){this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,o=r[0],s=r[4],a=r[8],l=r[1],c=r[5],u=r[9],d=r[2],h=r[6],f=r[10];switch(t){case"XYZ":this._y=Math.asin(vi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-s,o)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-vi(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,o),this._z=0);break;case"ZXY":this._x=Math.asin(vi(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-d,f),this._z=Math.atan2(-s,c)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-vi(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-s,c));break;case"YZX":this._z=Math.asin(vi(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,o)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-vi(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(a,o)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===i&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return QA.makeRotationFromQuaternion(e),this.setFromRotationMatrix(QA,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return KA.setFromEuler(this),this.setFromQuaternion(KA,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new D(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}su.prototype.isEuler=!0,su.DefaultOrder="XYZ",su.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class eD{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let _j=0;const tD=new D,au=new ui,vs=new He,jg=new D,Oh=new D,vj=new D,yj=new ui,nD=new D(1,0,0),iD=new D(0,1,0),rD=new D(0,0,1),bj={type:"added"},oD={type:"removed"};class Ut extends na{constructor(){super(),Object.defineProperty(this,"id",{value:_j++}),this.uuid=gr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ut.DefaultUp.clone();const e=new D,t=new su,i=new ui,r=new D(1,1,1);t._onChange(function(){i.setFromEuler(t,!1)}),i._onChange(function(){t.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new He},normalMatrix:{value:new ci}}),this.matrix=new He,this.matrixWorld=new He,this.matrixAutoUpdate=Ut.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new eD,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return au.setFromAxisAngle(e,t),this.quaternion.multiply(au),this}rotateOnWorldAxis(e,t){return au.setFromAxisAngle(e,t),this.quaternion.premultiply(au),this}rotateX(e){return this.rotateOnAxis(nD,e)}rotateY(e){return this.rotateOnAxis(iD,e)}rotateZ(e){return this.rotateOnAxis(rD,e)}translateOnAxis(e,t){return tD.copy(e).applyQuaternion(this.quaternion),this.position.add(tD.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(nD,e)}translateY(e){return this.translateOnAxis(iD,e)}translateZ(e){return this.translateOnAxis(rD,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(vs.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?jg.copy(e):jg.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Oh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?vs.lookAt(Oh,jg,this.up):vs.lookAt(jg,Oh,this.up),this.quaternion.setFromRotationMatrix(vs),r&&(vs.extractRotation(r.matrixWorld),au.setFromRotationMatrix(vs),this.quaternion.premultiply(au.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(bj)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(oD)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(oD)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),vs.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),vs.multiply(e.parent.matrixWorld)),e.applyMatrix4(vs),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const s=this.children[i].getObjectByProperty(e,t);if(void 0!==s)return s}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Oh,e,vj),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Oh,yj,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(!0===e&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const r=this.children;for(let o=0,s=r.length;o<s;o++)r[o].updateWorldMatrix(!1,!0)}}toJSON(e){const t=void 0===e||"string"==typeof e,i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function o(a,l){return void 0===a[l.uuid]&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=o(e.geometries,this.geometry);const a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++)o(e.shapes,l[c]);else o(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(o(e.materials,this.material[l]));r.material=a}else r.material=o(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++)r.animations.push(o(e.animations,this.animations[a]))}if(t){const a=s(e.geometries),l=s(e.materials),c=s(e.textures),u=s(e.images),d=s(e.shapes),h=s(e.skeletons),f=s(e.animations);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),d.length>0&&(i.shapes=d),h.length>0&&(i.skeletons=h),f.length>0&&(i.animations=f)}return i.object=r,i;function s(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let i=0;i<e.children.length;i++)this.add(e.children[i].clone());return this}}Ut.DefaultUp=new D(0,1,0),Ut.DefaultMatrixAutoUpdate=!0,Ut.prototype.isObject3D=!0;const to=new D,ys=new D,nx=new D,bs=new D,lu=new D,cu=new D,sD=new D,ix=new D,rx=new D,ox=new D;class jn{constructor(e=new D,t=new D,i=new D){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),to.subVectors(e,t),r.cross(to);const o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}static getBarycoord(e,t,i,r,o){to.subVectors(r,t),ys.subVectors(i,t),nx.subVectors(e,t);const s=to.dot(to),a=to.dot(ys),l=to.dot(nx),c=ys.dot(ys),u=ys.dot(nx),d=s*c-a*a;if(0===d)return o.set(-2,-1,-1);const h=1/d,f=(c*l-a*u)*h,m=(s*u-a*l)*h;return o.set(1-f-m,m,f)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,bs),bs.x>=0&&bs.y>=0&&bs.x+bs.y<=1}static getUV(e,t,i,r,o,s,a,l){return this.getBarycoord(e,t,i,r,bs),l.set(0,0),l.addScaledVector(o,bs.x),l.addScaledVector(s,bs.y),l.addScaledVector(a,bs.z),l}static isFrontFacing(e,t,i,r){return to.subVectors(i,t),ys.subVectors(e,t),to.cross(ys).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return to.subVectors(this.c,this.b),ys.subVectors(this.a,this.b),.5*to.cross(ys).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return jn.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return jn.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,o){return jn.getUV(e,this.a,this.b,this.c,t,i,r,o)}containsPoint(e){return jn.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return jn.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,o=this.c;let s,a;lu.subVectors(r,i),cu.subVectors(o,i),ix.subVectors(e,i);const l=lu.dot(ix),c=cu.dot(ix);if(l<=0&&c<=0)return t.copy(i);rx.subVectors(e,r);const u=lu.dot(rx),d=cu.dot(rx);if(u>=0&&d<=u)return t.copy(r);const h=l*d-u*c;if(h<=0&&l>=0&&u<=0)return s=l/(l-u),t.copy(i).addScaledVector(lu,s);ox.subVectors(e,o);const f=lu.dot(ox),m=cu.dot(ox);if(m>=0&&f<=m)return t.copy(o);const v=f*c-l*m;if(v<=0&&c>=0&&m<=0)return a=c/(c-m),t.copy(i).addScaledVector(cu,a);const w=u*m-f*d;if(w<=0&&d-u>=0&&f-m>=0)return sD.subVectors(o,r),a=(d-u)/(d-u+(f-m)),t.copy(r).addScaledVector(sD,a);const y=1/(w+v+h);return s=v*y,a=h*y,t.copy(i).addScaledVector(lu,s).addScaledVector(cu,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let xj=0;class yi extends na{constructor(){super(),Object.defineProperty(this,"id",{value:xj++}),this.uuid=gr(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.format=li,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const i=e[t];if(void 0===i){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===i;continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(o){const s=[];for(const a in o){const l=o[a];delete l.metadata,s.push(l)}return s}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.format!==li&&(i.format=this.format),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(i.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=this.flatShading),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),t){const o=r(e.textures),s=r(e.images);o.length>0&&(i.textures=o),s.length>0&&(i.images=s)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.format=e.format,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(null!==t){const r=t.length;i=new Array(r);for(let o=0;o!==r;++o)i[o]=t[o].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}yi.prototype.isMaterial=!0;const aD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},no={h:0,s:0,l:0},Wg={h:0,s:0,l:0};function sx(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+6*(e-n)*(2/3-t):n}function ax(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function lx(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}let xe=(()=>{class n{constructor(t,i,r){return void 0===i&&void 0===r?this.set(t):this.setRGB(t,i,r)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}setRGB(t,i,r){return this.r=t,this.g=i,this.b=r,this}setHSL(t,i,r){if(t=function(n,e){return(n%e+e)%e}(t,1),i=vi(i,0,1),r=vi(r,0,1),0===i)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+i):r+i-r*i,s=2*r-o;this.r=sx(s,o,t+1/3),this.g=sx(s,o,t),this.b=sx(s,o,t-1/3)}return this}setStyle(t){function i(o){void 0!==o&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let o;const a=r[2];switch(r[1]){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,i(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,i(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const l=parseFloat(o[1])/360,c=parseInt(o[2],10)/100,u=parseInt(o[3],10)/100;return i(o[4]),this.setHSL(l,c,u)}}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){const o=r[1],s=o.length;if(3===s)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,this;if(6===s)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){const i=aD[t.toLowerCase()];return void 0!==i?this.setHex(i):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copyGammaToLinear(t,i=2){return this.r=Math.pow(t.r,i),this.g=Math.pow(t.g,i),this.b=Math.pow(t.b,i),this}copyLinearToGamma(t,i=2){const r=i>0?1/i:1;return this.r=Math.pow(t.r,r),this.g=Math.pow(t.g,r),this.b=Math.pow(t.b,r),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.r=ax(t.r),this.g=ax(t.g),this.b=ax(t.b),this}copyLinearToSRGB(t){return this.r=lx(t.r),this.g=lx(t.g),this.b=lx(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){const i=this.r,r=this.g,o=this.b,s=Math.max(i,r,o),a=Math.min(i,r,o);let l,c;const u=(a+s)/2;if(a===s)l=0,c=0;else{const d=s-a;switch(c=u<=.5?d/(s+a):d/(2-s-a),s){case i:l=(r-o)/d+(r<o?6:0);break;case r:l=(o-i)/d+2;break;case o:l=(i-r)/d+4}l/=6}return t.h=l,t.s=c,t.l=u,t}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(t,i,r){return this.getHSL(no),no.h+=t,no.s+=i,no.l+=r,this.setHSL(no.h,no.s,no.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,i){return this.r=t.r+i.r,this.g=t.g+i.g,this.b=t.b+i.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,i){return this.r+=(t.r-this.r)*i,this.g+=(t.g-this.g)*i,this.b+=(t.b-this.b)*i,this}lerpColors(t,i,r){return this.r=t.r+(i.r-t.r)*r,this.g=t.g+(i.g-t.g)*r,this.b=t.b+(i.b-t.b)*r,this}lerpHSL(t,i){this.getHSL(no),t.getHSL(Wg);const r=Ph(no.h,Wg.h,i),o=Ph(no.s,Wg.s,i),s=Ph(no.l,Wg.l,i);return this.setHSL(r,o,s),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,i=0){return this.r=t[i],this.g=t[i+1],this.b=t[i+2],this}toArray(t=[],i=0){return t[i]=this.r,t[i+1]=this.g,t[i+2]=this.b,t}fromBufferAttribute(t,i){return this.r=t.getX(i),this.g=t.getY(i),this.b=t.getZ(i),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}return n.NAMES=aD,n})();xe.prototype.isColor=!0,xe.prototype.r=1,xe.prototype.g=1,xe.prototype.b=1;class xs extends yi{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new xe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}xs.prototype.isMeshBasicMaterial=!0;const nn=new D,$g=new ne;class Zt{constructor(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===i,this.usage=Eh,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,o=this.itemSize;r<o;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let i=0;for(let r=0,o=e.length;r<o;r++){let s=e[r];void 0===s&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),s=new xe),t[i++]=s.r,t[i++]=s.g,t[i++]=s.b}return this}copyVector2sArray(e){const t=this.array;let i=0;for(let r=0,o=e.length;r<o;r++){let s=e[r];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),s=new ne),t[i++]=s.x,t[i++]=s.y}return this}copyVector3sArray(e){const t=this.array;let i=0;for(let r=0,o=e.length;r<o;r++){let s=e[r];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),s=new D),t[i++]=s.x,t[i++]=s.y,t[i++]=s.z}return this}copyVector4sArray(e){const t=this.array;let i=0;for(let r=0,o=e.length;r<o;r++){let s=e[r];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),s=new qt),t[i++]=s.x,t[i++]=s.y,t[i++]=s.z,t[i++]=s.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)$g.fromBufferAttribute(this,t),$g.applyMatrix3(e),this.setXY(t,$g.x,$g.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)nn.fromBufferAttribute(this,t),nn.applyMatrix3(e),this.setXYZ(t,nn.x,nn.y,nn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)nn.x=this.getX(t),nn.y=this.getY(t),nn.z=this.getZ(t),nn.applyMatrix4(e),this.setXYZ(t,nn.x,nn.y,nn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)nn.x=this.getX(t),nn.y=this.getY(t),nn.z=this.getZ(t),nn.applyNormalMatrix(e),this.setXYZ(t,nn.x,nn.y,nn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)nn.x=this.getX(t),nn.y=this.getY(t),nn.z=this.getZ(t),nn.transformDirection(e),this.setXYZ(t,nn.x,nn.y,nn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,o){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Eh&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}}Zt.prototype.isBufferAttribute=!0;class cx extends Zt{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class ux extends Zt{constructor(e,t,i){super(new Uint32Array(e),t,i)}}(class extends Zt{constructor(e,t,i){super(new Uint16Array(e),t,i)}}).prototype.isFloat16BufferAttribute=!0;class Fe extends Zt{constructor(e,t,i){super(new Float32Array(e),t,i)}}let Aj=0;const Rr=new He,dx=new Ut,uu=new D,_r=new Ir,Ih=new Ir,di=new D;class Ze extends na{constructor(){super(),Object.defineProperty(this,"id",{value:Aj++}),this.uuid=gr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(XA(e)>65535?ux:cx)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const o=(new ci).getNormalMatrix(e);i.applyNormalMatrix(o),i.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Rr.makeRotationFromQuaternion(e),this.applyMatrix4(Rr),this}rotateX(e){return Rr.makeRotationX(e),this.applyMatrix4(Rr),this}rotateY(e){return Rr.makeRotationY(e),this.applyMatrix4(Rr),this}rotateZ(e){return Rr.makeRotationZ(e),this.applyMatrix4(Rr),this}translate(e,t,i){return Rr.makeTranslation(e,t,i),this.applyMatrix4(Rr),this}scale(e,t,i){return Rr.makeScale(e,t,i),this.applyMatrix4(Rr),this}lookAt(e){return dx.lookAt(e),dx.updateMatrix(),this.applyMatrix4(dx.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(uu).negate(),this.translate(uu.x,uu.y,uu.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const o=e[i];t.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new Fe(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Ir);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new D(-1/0,-1/0,-1/0),new D(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++)_r.setFromBufferAttribute(t[i]),this.morphTargetsRelative?(di.addVectors(this.boundingBox.min,_r.min),this.boundingBox.expandByPoint(di),di.addVectors(this.boundingBox.max,_r.max),this.boundingBox.expandByPoint(di)):(this.boundingBox.expandByPoint(_r.min),this.boundingBox.expandByPoint(_r.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new al);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new D,1/0);if(e){const i=this.boundingSphere.center;if(_r.setFromBufferAttribute(e),t)for(let o=0,s=t.length;o<s;o++)Ih.setFromBufferAttribute(t[o]),this.morphTargetsRelative?(di.addVectors(_r.min,Ih.min),_r.expandByPoint(di),di.addVectors(_r.max,Ih.max),_r.expandByPoint(di)):(_r.expandByPoint(Ih.min),_r.expandByPoint(Ih.max));_r.getCenter(i);let r=0;for(let o=0,s=e.count;o<s;o++)di.fromBufferAttribute(e,o),r=Math.max(r,i.distanceToSquared(di));if(t)for(let o=0,s=t.length;o<s;o++){const a=t[o],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)di.fromBufferAttribute(a,c),l&&(uu.fromBufferAttribute(e,c),di.add(uu)),r=Math.max(r,i.distanceToSquared(di))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=e.array,r=t.position.array,o=t.normal.array,s=t.uv.array,a=r.length/3;void 0===t.tangent&&this.setAttribute("tangent",new Zt(new Float32Array(4*a),4));const l=t.tangent.array,c=[],u=[];for(let $=0;$<a;$++)c[$]=new D,u[$]=new D;const d=new D,h=new D,f=new D,m=new ne,v=new ne,w=new ne,y=new D,_=new D;function M($,B,he){d.fromArray(r,3*$),h.fromArray(r,3*B),f.fromArray(r,3*he),m.fromArray(s,2*$),v.fromArray(s,2*B),w.fromArray(s,2*he),h.sub(d),f.sub(d),v.sub(m),w.sub(m);const Y=1/(v.x*w.y-w.x*v.y);!isFinite(Y)||(y.copy(h).multiplyScalar(w.y).addScaledVector(f,-v.y).multiplyScalar(Y),_.copy(f).multiplyScalar(v.x).addScaledVector(h,-w.x).multiplyScalar(Y),c[$].add(y),c[B].add(y),c[he].add(y),u[$].add(_),u[B].add(_),u[he].add(_))}let C=this.groups;0===C.length&&(C=[{start:0,count:i.length}]);for(let $=0,B=C.length;$<B;++$){const he=C[$],Y=he.start;for(let K=Y,Q=Y+he.count;K<Q;K+=3)M(i[K+0],i[K+1],i[K+2])}const A=new D,L=new D,P=new D,z=new D;function W($){P.fromArray(o,3*$),z.copy(P);const B=c[$];A.copy(B),A.sub(P.multiplyScalar(P.dot(B))).normalize(),L.crossVectors(z,B);const Y=L.dot(u[$])<0?-1:1;l[4*$]=A.x,l[4*$+1]=A.y,l[4*$+2]=A.z,l[4*$+3]=Y}for(let $=0,B=C.length;$<B;++$){const he=C[$],Y=he.start;for(let K=Y,Q=Y+he.count;K<Q;K+=3)W(i[K+0]),W(i[K+1]),W(i[K+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new Zt(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let h=0,f=i.count;h<f;h++)i.setXYZ(h,0,0,0);const r=new D,o=new D,s=new D,a=new D,l=new D,c=new D,u=new D,d=new D;if(e)for(let h=0,f=e.count;h<f;h+=3){const m=e.getX(h+0),v=e.getX(h+1),w=e.getX(h+2);r.fromBufferAttribute(t,m),o.fromBufferAttribute(t,v),s.fromBufferAttribute(t,w),u.subVectors(s,o),d.subVectors(r,o),u.cross(d),a.fromBufferAttribute(i,m),l.fromBufferAttribute(i,v),c.fromBufferAttribute(i,w),a.add(u),l.add(u),c.add(u),i.setXYZ(m,a.x,a.y,a.z),i.setXYZ(v,l.x,l.y,l.z),i.setXYZ(w,c.x,c.y,c.z)}else for(let h=0,f=t.count;h<f;h+=3)r.fromBufferAttribute(t,h+0),o.fromBufferAttribute(t,h+1),s.fromBufferAttribute(t,h+2),u.subVectors(s,o),d.subVectors(r,o),u.cross(d),i.setXYZ(h+0,u.x,u.y,u.z),i.setXYZ(h+1,u.x,u.y,u.z),i.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const i=this.attributes;for(const r in i){if(void 0===e.attributes[r])continue;const s=i[r].array,a=e.attributes[r],l=a.array,c=a.itemSize*t,u=Math.min(l.length,s.length-c);for(let d=0,h=c;d<u;d++,h++)s[h]=l[d]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)di.fromBufferAttribute(e,t),di.normalize(),e.setXYZ(t,di.x,di.y,di.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,h=new c.constructor(l.length*u);let f=0,m=0;for(let v=0,w=l.length;v<w;v++){f=a.isInterleavedBufferAttribute?l[v]*a.data.stride+a.offset:l[v]*u;for(let y=0;y<u;y++)h[m++]=c[f++]}return new Zt(h,u,d)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Ze,i=this.index.array,r=this.attributes;for(const a in r){const c=e(r[a],i);t.setAttribute(a,c)}const o=this.morphAttributes;for(const a in o){const l=[],c=o[a];for(let u=0,d=c.length;u<d;u++){const f=e(c[u],i);l.push(f)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let a=0,l=s.length;a<l;a++){const c=s[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const l=this.parameters;for(const c in l)void 0!==l[c]&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i)e.data.attributes[l]=i[l].toJSON(e.data);const r={};let o=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,h=c.length;d<h;d++)u.push(c[d].toJSON(e.data));u.length>0&&(r[l]=u,o=!0)}o&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r)this.setAttribute(c,r[c].clone(t));const o=e.morphAttributes;for(const c in o){const u=[],d=o[c];for(let h=0,f=d.length;h<f;h++)u.push(d[h].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let c=0,u=s.length;c<u;c++){const d=s[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const l=e.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}Ze.prototype.isBufferGeometry=!0;const lD=new He,du=new ll,hx=new al,aa=new D,la=new D,ca=new D,fx=new D,px=new D,gx=new D,qg=new D,Xg=new D,Yg=new D,Zg=new ne,Jg=new ne,Qg=new ne,mx=new D,Kg=new D;class Cn extends Ut{constructor(e=new Ze,t=new xs){super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){const a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const i=this.geometry,r=this.material,o=this.matrixWorld;if(void 0===r||(null===i.boundingSphere&&i.computeBoundingSphere(),hx.copy(i.boundingSphere),hx.applyMatrix4(o),!1===e.ray.intersectsSphere(hx))||(lD.copy(o).invert(),du.copy(e.ray).applyMatrix4(lD),null!==i.boundingBox&&!1===du.intersectsBox(i.boundingBox)))return;let s;if(i.isBufferGeometry){const a=i.index,l=i.attributes.position,c=i.morphAttributes.position,u=i.morphTargetsRelative,d=i.attributes.uv,h=i.attributes.uv2,f=i.groups,m=i.drawRange;if(null!==a)if(Array.isArray(r))for(let v=0,w=f.length;v<w;v++){const y=f[v],_=r[y.materialIndex];for(let A=Math.max(y.start,m.start),L=Math.min(a.count,Math.min(y.start+y.count,m.start+m.count));A<L;A+=3){const P=a.getX(A),z=a.getX(A+1),W=a.getX(A+2);s=em(this,_,e,du,l,c,u,d,h,P,z,W),s&&(s.faceIndex=Math.floor(A/3),s.face.materialIndex=y.materialIndex,t.push(s))}}else for(let y=Math.max(0,m.start),_=Math.min(a.count,m.start+m.count);y<_;y+=3){const M=a.getX(y),C=a.getX(y+1),A=a.getX(y+2);s=em(this,r,e,du,l,c,u,d,h,M,C,A),s&&(s.faceIndex=Math.floor(y/3),t.push(s))}else if(void 0!==l)if(Array.isArray(r))for(let v=0,w=f.length;v<w;v++){const y=f[v],_=r[y.materialIndex];for(let A=Math.max(y.start,m.start),L=Math.min(l.count,Math.min(y.start+y.count,m.start+m.count));A<L;A+=3)s=em(this,_,e,du,l,c,u,d,h,A,A+1,A+2),s&&(s.faceIndex=Math.floor(A/3),s.face.materialIndex=y.materialIndex,t.push(s))}else for(let y=Math.max(0,m.start),_=Math.min(l.count,m.start+m.count);y<_;y+=3)s=em(this,r,e,du,l,c,u,d,h,y,y+1,y+2),s&&(s.faceIndex=Math.floor(y/3),t.push(s))}else i.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function em(n,e,t,i,r,o,s,a,l,c,u,d){aa.fromBufferAttribute(r,c),la.fromBufferAttribute(r,u),ca.fromBufferAttribute(r,d);const h=n.morphTargetInfluences;if(o&&h){qg.set(0,0,0),Xg.set(0,0,0),Yg.set(0,0,0);for(let m=0,v=o.length;m<v;m++){const w=h[m],y=o[m];0!==w&&(fx.fromBufferAttribute(y,c),px.fromBufferAttribute(y,u),gx.fromBufferAttribute(y,d),s?(qg.addScaledVector(fx,w),Xg.addScaledVector(px,w),Yg.addScaledVector(gx,w)):(qg.addScaledVector(fx.sub(aa),w),Xg.addScaledVector(px.sub(la),w),Yg.addScaledVector(gx.sub(ca),w)))}aa.add(qg),la.add(Xg),ca.add(Yg)}n.isSkinnedMesh&&(n.boneTransform(c,aa),n.boneTransform(u,la),n.boneTransform(d,ca));const f=function(n,e,t,i,r,o,s,a){let l;if(l=1===e.side?i.intersectTriangle(s,o,r,!0,a):i.intersectTriangle(r,o,s,2!==e.side,a),null===l)return null;Kg.copy(a),Kg.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(Kg);return c<t.near||c>t.far?null:{distance:c,point:Kg.clone(),object:n}}(n,e,t,i,aa,la,ca,mx);if(f){a&&(Zg.fromBufferAttribute(a,c),Jg.fromBufferAttribute(a,u),Qg.fromBufferAttribute(a,d),f.uv=jn.getUV(mx,aa,la,ca,Zg,Jg,Qg,new ne)),l&&(Zg.fromBufferAttribute(l,c),Jg.fromBufferAttribute(l,u),Qg.fromBufferAttribute(l,d),f.uv2=jn.getUV(mx,aa,la,ca,Zg,Jg,Qg,new ne));const m={a:c,b:u,c:d,normal:new D,materialIndex:0};jn.getNormal(aa,la,ca,m.normal),f.face=m}return f}Cn.prototype.isMesh=!0;class cl extends Ze{constructor(e=1,t=1,i=1,r=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:o,depthSegments:s};const a=this;r=Math.floor(r),o=Math.floor(o),s=Math.floor(s);const l=[],c=[],u=[],d=[];let h=0,f=0;function m(v,w,y,_,M,C,A,L,P,z,W){const $=C/P,B=A/z,he=C/2,Y=A/2,q=L/2,K=P+1,Q=z+1;let ie=0,Ce=0;const ke=new D;for(let le=0;le<Q;le++){const ue=le*B-Y;for(let Ie=0;Ie<K;Ie++)ke[v]=(Ie*$-he)*_,ke[w]=ue*M,ke[y]=q,c.push(ke.x,ke.y,ke.z),ke[v]=0,ke[w]=0,ke[y]=L>0?1:-1,u.push(ke.x,ke.y,ke.z),d.push(Ie/P),d.push(1-le/z),ie+=1}for(let le=0;le<z;le++)for(let ue=0;ue<P;ue++){const Ae=h+ue+K*(le+1),ze=h+(ue+1)+K*(le+1),St=h+(ue+1)+K*le;l.push(h+ue+K*le,Ae,St),l.push(Ae,ze,St),Ce+=6}a.addGroup(f,Ce,W),f+=Ce,h+=ie}m("z","y","x",-1,-1,i,t,e,s,o,0),m("z","y","x",1,-1,i,t,-e,s,o,1),m("x","z","y",1,1,e,i,t,r,s,2),m("x","z","y",1,-1,e,i,-t,r,s,3),m("x","y","z",1,-1,e,t,i,r,o,4),m("x","y","z",-1,-1,e,t,-i,r,o,5),this.setIndex(l),this.setAttribute("position",new Fe(c,3)),this.setAttribute("normal",new Fe(u,3)),this.setAttribute("uv",new Fe(d,2))}static fromJSON(e){return new cl(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function hu(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];e[t][i]=r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.clone():Array.isArray(r)?r.slice():r}}return e}function Di(n){const e={};for(let t=0;t<n.length;t++){const i=hu(n[t]);for(const r in i)e[r]=i[r]}return e}const _x={clone:hu,merge:Di};class qi extends yi{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=hu(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const s=this.uniforms[r].value;t.uniforms[r]=s&&s.isTexture?{type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?{type:"c",value:s.getHex()}:s&&s.isVector2?{type:"v2",value:s.toArray()}:s&&s.isVector3?{type:"v3",value:s.toArray()}:s&&s.isVector4?{type:"v4",value:s.toArray()}:s&&s.isMatrix3?{type:"m3",value:s.toArray()}:s&&s.isMatrix4?{type:"m4",value:s.toArray()}:{value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)!0===this.extensions[r]&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}qi.prototype.isShaderMaterial=!0;class tm extends Ut{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new He,this.projectionMatrix=new He,this.projectionMatrixInverse=new He}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}tm.prototype.isCamera=!0;class Kn extends tm{constructor(e=50,t=1,i=.1,r=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Th*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*rl*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Th*Math.atan(Math.tan(.5*rl*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,o,s){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*rl*this.fov)/this.zoom,i=2*t,r=this.aspect*i,o=-.5*r;const s=this.view;if(null!==this.view&&this.view.enabled){const l=s.fullWidth,c=s.fullHeight;o+=s.offsetX*r/l,t-=s.offsetY*i/c,r*=s.width/l,i*=s.height/c}const a=this.filmOffset;0!==a&&(o+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}Kn.prototype.isPerspectiveCamera=!0;class vx extends Ut{constructor(e,t,i){if(super(),this.type="CubeCamera",!0!==i.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=i;const r=new Kn(90,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new D(1,0,0)),this.add(r);const o=new Kn(90,1,e,t);o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new D(-1,0,0)),this.add(o);const s=new Kn(90,1,e,t);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(new D(0,1,0)),this.add(s);const a=new Kn(90,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new D(0,-1,0)),this.add(a);const l=new Kn(90,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new D(0,0,1)),this.add(l);const c=new Kn(90,1,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new D(0,0,-1)),this.add(c)}update(e,t){null===this.parent&&this.updateMatrixWorld();const i=this.renderTarget,[r,o,s,a,l,c]=this.children,u=e.xr.enabled,d=e.getRenderTarget();e.xr.enabled=!1;const h=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,o),e.setRenderTarget(i,2),e.render(t,s),e.setRenderTarget(i,3),e.render(t,a),e.setRenderTarget(i,4),e.render(t,l),i.texture.generateMipmaps=h,e.setRenderTarget(i,5),e.render(t,c),e.setRenderTarget(d),e.xr.enabled=u}}class Rh extends Pn{constructor(e,t,i,r,o,s,a,l,c,u){super(e=void 0!==e?e:[],t=void 0!==t?t:301,i,r,o,s,a,l,c,u),this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}Rh.prototype.isCubeTexture=!0;class yx extends Gn{constructor(e,t,i){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=i),super(e,e,t),this.texture=new Rh(void 0,(t=t||{}).mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:wn,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=li,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i_uniforms={tEquirect:{value:null}},i_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new cl(5,5,5),o=new qi({name:"CubemapFromEquirect",uniforms:hu(i_uniforms),vertexShader:i_vertexShader,fragmentShader:i_fragmentShader,side:1,blending:0});o.uniforms.tEquirect.value=t;const s=new Cn(r,o),a=t.minFilter;return 1008===t.minFilter&&(t.minFilter=wn),new vx(1,10,this).update(e,s),t.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,i,r){const o=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,i,r);e.setRenderTarget(o)}}yx.prototype.isWebGLCubeRenderTarget=!0;const bx=new D,Rj=new D,Lj=new ci;class ws{constructor(e=new D(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=bx.subVectors(i,t).cross(Rj.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const i=e.delta(bx),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/r;return o<0||o>1?null:t.copy(i).multiplyScalar(o).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||Lj.getNormalMatrix(e),r=this.coplanarPoint(bx).applyMatrix4(e),o=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}ws.prototype.isPlane=!0;const gu=new al,nm=new D;class im{constructor(e=new ws,t=new ws,i=new ws,r=new ws,o=new ws,s=new ws){this.planes=[e,t,i,r,o,s]}set(e,t,i,r,o,s){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(o),a[5].copy(s),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,r=i[0],o=i[1],s=i[2],a=i[3],l=i[4],c=i[5],u=i[6],d=i[7],h=i[8],f=i[9],m=i[10],v=i[11],w=i[12],y=i[13],_=i[14],M=i[15];return t[0].setComponents(a-r,d-l,v-h,M-w).normalize(),t[1].setComponents(a+r,d+l,v+h,M+w).normalize(),t[2].setComponents(a+o,d+c,v+f,M+y).normalize(),t[3].setComponents(a-o,d-c,v-f,M-y).normalize(),t[4].setComponents(a-s,d-u,v-m,M-_).normalize(),t[5].setComponents(a+s,d+u,v+m,M+_).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),gu.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(gu)}intersectsSprite(e){return gu.center.set(0,0,0),gu.radius=.7071067811865476,gu.applyMatrix4(e.matrixWorld),this.intersectsSphere(gu)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(nm.x=r.normal.x>0?e.max.x:e.min.x,nm.y=r.normal.y>0?e.max.y:e.min.y,nm.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(nm)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function cD(){let n=null,e=!1,t=null,i=null;function r(o,s){t(o,s),i=n.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==t&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(o){t=o},setContext:function(o){n=o}}}function kj(n,e){const t=e.isWebGL2,i=new WeakMap;return{get:function(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)},remove:function(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=i.get(c);u&&(n.deleteBuffer(u.buffer),i.delete(c))},update:function(c,u){if(c.isGLBufferAttribute){const h=i.get(c);return void((!h||h.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version}))}c.isInterleavedBufferAttribute&&(c=c.data);const d=i.get(c);void 0===d?i.set(c,function(c,u){const d=c.array,h=c.usage,f=n.createBuffer();n.bindBuffer(u,f),n.bufferData(u,d,h),c.onUploadCallback();let m=5126;return d instanceof Float32Array?m=5126:d instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):d instanceof Uint16Array?c.isFloat16BufferAttribute?t?m=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):m=5123:d instanceof Int16Array?m=5122:d instanceof Uint32Array?m=5125:d instanceof Int32Array?m=5124:d instanceof Int8Array?m=5120:(d instanceof Uint8Array||d instanceof Uint8ClampedArray)&&(m=5121),{buffer:f,type:m,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version}}(c,u)):d.version<c.version&&(function(c,u,d){const h=u.array,f=u.updateRange;n.bindBuffer(d,c),-1===f.count?n.bufferSubData(d,0,h):(t?n.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h,f.offset,f.count):n.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h.subarray(f.offset,f.offset+f.count)),f.count=-1)}(d.buffer,c,u),d.version=c.version)}}}class Lh extends Ze{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const o=e/2,s=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,u=l+1,d=e/a,h=t/l,f=[],m=[],v=[],w=[];for(let y=0;y<u;y++){const _=y*h-s;for(let M=0;M<c;M++)m.push(M*d-o,-_,0),v.push(0,0,1),w.push(M/a),w.push(1-y/l)}for(let y=0;y<l;y++)for(let _=0;_<a;_++){const C=_+c*(y+1),A=_+1+c*(y+1),L=_+1+c*y;f.push(_+c*y,C,L),f.push(C,A,L)}this.setIndex(f),this.setAttribute("position",new Fe(m,3)),this.setAttribute("normal",new Fe(v,3)),this.setAttribute("uv",new Fe(w,2))}static fromJSON(e){return new Lh(e.width,e.height,e.widthSegments,e.heightSegments)}}const Et={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= specularColorMapTexelToLinear( texture2D( specularColorMap, vUv ) ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= sheenColorMapTexelToLinear( texture2D( sheenColorMap, vUv ) ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\t\tvec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {\n\t\t\tfloat texelIndex = float( vertexIndex * stride + offset );\n\t\t\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV ).xyz;\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\t#ifndef USE_MORPHNORMALS\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];\n\t\t\t#else\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];\n\t\t\t#endif\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( float roughness, float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\n\t\tvec3 attenuationColor, float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Pe={common:{diffuse:{value:new xe(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new ci},uv2Transform:{value:new ci},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new ne(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new xe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new xe(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ci}},sprite:{diffuse:{value:new xe(16777215)},opacity:{value:1},center:{value:new ne(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ci}}},Ho={basic:{uniforms:Di([Pe.common,Pe.specularmap,Pe.envmap,Pe.aomap,Pe.lightmap,Pe.fog]),vertexShader:Et.meshbasic_vert,fragmentShader:Et.meshbasic_frag},lambert:{uniforms:Di([Pe.common,Pe.specularmap,Pe.envmap,Pe.aomap,Pe.lightmap,Pe.emissivemap,Pe.fog,Pe.lights,{emissive:{value:new xe(0)}}]),vertexShader:Et.meshlambert_vert,fragmentShader:Et.meshlambert_frag},phong:{uniforms:Di([Pe.common,Pe.specularmap,Pe.envmap,Pe.aomap,Pe.lightmap,Pe.emissivemap,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.fog,Pe.lights,{emissive:{value:new xe(0)},specular:{value:new xe(1118481)},shininess:{value:30}}]),vertexShader:Et.meshphong_vert,fragmentShader:Et.meshphong_frag},standard:{uniforms:Di([Pe.common,Pe.envmap,Pe.aomap,Pe.lightmap,Pe.emissivemap,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.roughnessmap,Pe.metalnessmap,Pe.fog,Pe.lights,{emissive:{value:new xe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Et.meshphysical_vert,fragmentShader:Et.meshphysical_frag},toon:{uniforms:Di([Pe.common,Pe.aomap,Pe.lightmap,Pe.emissivemap,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.gradientmap,Pe.fog,Pe.lights,{emissive:{value:new xe(0)}}]),vertexShader:Et.meshtoon_vert,fragmentShader:Et.meshtoon_frag},matcap:{uniforms:Di([Pe.common,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.fog,{matcap:{value:null}}]),vertexShader:Et.meshmatcap_vert,fragmentShader:Et.meshmatcap_frag},points:{uniforms:Di([Pe.points,Pe.fog]),vertexShader:Et.points_vert,fragmentShader:Et.points_frag},dashed:{uniforms:Di([Pe.common,Pe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Et.linedashed_vert,fragmentShader:Et.linedashed_frag},depth:{uniforms:Di([Pe.common,Pe.displacementmap]),vertexShader:Et.depth_vert,fragmentShader:Et.depth_frag},normal:{uniforms:Di([Pe.common,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,{opacity:{value:1}}]),vertexShader:Et.meshnormal_vert,fragmentShader:Et.meshnormal_frag},sprite:{uniforms:Di([Pe.sprite,Pe.fog]),vertexShader:Et.sprite_vert,fragmentShader:Et.sprite_frag},background:{uniforms:{uvTransform:{value:new ci},t2D:{value:null}},vertexShader:Et.background_vert,fragmentShader:Et.background_frag},cube:{uniforms:Di([Pe.envmap,{opacity:{value:1}}]),vertexShader:Et.cube_vert,fragmentShader:Et.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Et.equirect_vert,fragmentShader:Et.equirect_frag},distanceRGBA:{uniforms:Di([Pe.common,Pe.displacementmap,{referencePosition:{value:new D},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Et.distanceRGBA_vert,fragmentShader:Et.distanceRGBA_frag},shadow:{uniforms:Di([Pe.lights,Pe.fog,{color:{value:new xe(0)},opacity:{value:1}}]),vertexShader:Et.shadow_vert,fragmentShader:Et.shadow_frag}};function D9(n,e,t,i,r){const o=new xe(0);let a,l,s=0,c=null,u=0,d=null;function f(m,v){t.buffers.color.setClear(m.r,m.g,m.b,v,r)}return{getClearColor:function(){return o},setClearColor:function(m,v=1){o.set(m),s=v,f(o,s)},getClearAlpha:function(){return s},setClearAlpha:function(m){s=m,f(o,s)},render:function(m,v){let w=!1,y=!0===v.isScene?v.background:null;y&&y.isTexture&&(y=e.get(y));const _=n.xr,M=_.getSession&&_.getSession();M&&"additive"===M.environmentBlendMode&&(y=null),null===y?f(o,s):y&&y.isColor&&(f(y,1),w=!0),(n.autoClear||w)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),y&&(y.isCubeTexture||306===y.mapping)?(void 0===l&&(l=new Cn(new cl(1,1,1),new qi({name:"BackgroundCubeMaterial",uniforms:hu(Ho.cube.uniforms),vertexShader:Ho.cube.vertexShader,fragmentShader:Ho.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(C,A,L){this.matrixWorld.copyPosition(L.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(l)),l.material.uniforms.envMap.value=y,l.material.uniforms.flipEnvMap.value=y.isCubeTexture&&!1===y.isRenderTargetTexture?-1:1,(c!==y||u!==y.version||d!==n.toneMapping)&&(l.material.needsUpdate=!0,c=y,u=y.version,d=n.toneMapping),m.unshift(l,l.geometry,l.material,0,0,null)):y&&y.isTexture&&(void 0===a&&(a=new Cn(new Lh(2,2),new qi({name:"BackgroundMaterial",uniforms:hu(Ho.background.uniforms),vertexShader:Ho.background.vertexShader,fragmentShader:Ho.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(a)),a.material.uniforms.t2D.value=y,!0===y.matrixAutoUpdate&&y.updateMatrix(),a.material.uniforms.uvTransform.value.copy(y.matrix),(c!==y||u!==y.version||d!==n.toneMapping)&&(a.material.needsUpdate=!0,c=y,u=y.version,d=n.toneMapping),m.unshift(a,a.geometry,a.material,0,0,null))}}}function O9(n,e,t,i){const r=n.getParameter(34921),o=i.isWebGL2?null:e.get("OES_vertex_array_object"),s=i.isWebGL2||null!==o,a={},l=v(null);let c=l;function h(Y){return i.isWebGL2?n.bindVertexArray(Y):o.bindVertexArrayOES(Y)}function f(Y){return i.isWebGL2?n.deleteVertexArray(Y):o.deleteVertexArrayOES(Y)}function v(Y){const q=[],K=[],Q=[];for(let ie=0;ie<r;ie++)q[ie]=0,K[ie]=0,Q[ie]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:q,enabledAttributes:K,attributeDivisors:Q,object:Y,attributes:{},index:null}}function _(){const Y=c.newAttributes;for(let q=0,K=Y.length;q<K;q++)Y[q]=0}function M(Y){C(Y,0)}function C(Y,q){const Q=c.enabledAttributes,ie=c.attributeDivisors;c.newAttributes[Y]=1,0===Q[Y]&&(n.enableVertexAttribArray(Y),Q[Y]=1),ie[Y]!==q&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Y,q),ie[Y]=q)}function A(){const Y=c.newAttributes,q=c.enabledAttributes;for(let K=0,Q=q.length;K<Q;K++)q[K]!==Y[K]&&(n.disableVertexAttribArray(K),q[K]=0)}function L(Y,q,K,Q,ie,Ce){!0!==i.isWebGL2||5124!==K&&5125!==K?n.vertexAttribPointer(Y,q,K,Q,ie,Ce):n.vertexAttribIPointer(Y,q,K,ie,Ce)}function B(){he(),c!==l&&(c=l,h(c.object))}function he(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(Y,q,K,Q,ie){let Ce=!1;if(s){const ke=function(Y,q,K){const Q=!0===K.wireframe;let ie=a[Y.id];void 0===ie&&(ie={},a[Y.id]=ie);let Ce=ie[q.id];void 0===Ce&&(Ce={},ie[q.id]=Ce);let ke=Ce[Q];return void 0===ke&&(ke=v(i.isWebGL2?n.createVertexArray():o.createVertexArrayOES()),Ce[Q]=ke),ke}(Q,K,q);c!==ke&&(c=ke,h(c.object)),Ce=function(Y,q){const K=c.attributes,Q=Y.attributes;let ie=0;for(const Ce in Q){const ke=K[Ce],le=Q[Ce];if(void 0===ke||ke.attribute!==le||ke.data!==le.data)return!0;ie++}return c.attributesNum!==ie||c.index!==q}(Q,ie),Ce&&function(Y,q){const K={},Q=Y.attributes;let ie=0;for(const Ce in Q){const ke=Q[Ce],le={};le.attribute=ke,ke.data&&(le.data=ke.data),K[Ce]=le,ie++}c.attributes=K,c.attributesNum=ie,c.index=q}(Q,ie)}else{const ke=!0===q.wireframe;(c.geometry!==Q.id||c.program!==K.id||c.wireframe!==ke)&&(c.geometry=Q.id,c.program=K.id,c.wireframe=ke,Ce=!0)}!0===Y.isInstancedMesh&&(Ce=!0),null!==ie&&t.update(ie,34963),Ce&&(function(Y,q,K,Q){if(!1===i.isWebGL2&&(Y.isInstancedMesh||Q.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;_();const ie=Q.attributes,Ce=K.getAttributes(),ke=q.defaultAttributeValues;for(const le in Ce){const ue=Ce[le];if(ue.location>=0){let Ie=ie[le];if(void 0===Ie&&("instanceMatrix"===le&&Y.instanceMatrix&&(Ie=Y.instanceMatrix),"instanceColor"===le&&Y.instanceColor&&(Ie=Y.instanceColor)),void 0!==Ie){const Ae=Ie.normalized,ze=Ie.itemSize,St=t.get(Ie);if(void 0===St)continue;const me=St.buffer,_t=St.type,Qe=St.bytesPerElement;if(Ie.isInterleavedBufferAttribute){const Ue=Ie.data,qe=Ue.stride,Dt=Ie.offset;if(Ue&&Ue.isInstancedInterleavedBuffer){for(let ae=0;ae<ue.locationSize;ae++)C(ue.location+ae,Ue.meshPerAttribute);!0!==Y.isInstancedMesh&&void 0===Q._maxInstanceCount&&(Q._maxInstanceCount=Ue.meshPerAttribute*Ue.count)}else for(let ae=0;ae<ue.locationSize;ae++)M(ue.location+ae);n.bindBuffer(34962,me);for(let ae=0;ae<ue.locationSize;ae++)L(ue.location+ae,ze/ue.locationSize,_t,Ae,qe*Qe,(Dt+ze/ue.locationSize*ae)*Qe)}else{if(Ie.isInstancedBufferAttribute){for(let Ue=0;Ue<ue.locationSize;Ue++)C(ue.location+Ue,Ie.meshPerAttribute);!0!==Y.isInstancedMesh&&void 0===Q._maxInstanceCount&&(Q._maxInstanceCount=Ie.meshPerAttribute*Ie.count)}else for(let Ue=0;Ue<ue.locationSize;Ue++)M(ue.location+Ue);n.bindBuffer(34962,me);for(let Ue=0;Ue<ue.locationSize;Ue++)L(ue.location+Ue,ze/ue.locationSize,_t,Ae,ze*Qe,ze/ue.locationSize*Ue*Qe)}}else if(void 0!==ke){const Ae=ke[le];if(void 0!==Ae)switch(Ae.length){case 2:n.vertexAttrib2fv(ue.location,Ae);break;case 3:n.vertexAttrib3fv(ue.location,Ae);break;case 4:n.vertexAttrib4fv(ue.location,Ae);break;default:n.vertexAttrib1fv(ue.location,Ae)}}}}A()}(Y,q,K,Q),null!==ie&&n.bindBuffer(34963,t.get(ie).buffer))},reset:B,resetDefaultState:he,dispose:function(){B();for(const Y in a){const q=a[Y];for(const K in q){const Q=q[K];for(const ie in Q)f(Q[ie].object),delete Q[ie];delete q[K]}delete a[Y]}},releaseStatesOfGeometry:function(Y){if(void 0===a[Y.id])return;const q=a[Y.id];for(const K in q){const Q=q[K];for(const ie in Q)f(Q[ie].object),delete Q[ie];delete q[K]}delete a[Y.id]},releaseStatesOfProgram:function(Y){for(const q in a){const K=a[q];if(void 0===K[Y.id])continue;const Q=K[Y.id];for(const ie in Q)f(Q[ie].object),delete Q[ie];delete K[Y.id]}},initAttributes:_,enableAttribute:M,disableUnusedAttributes:A}}function I9(n,e,t,i){const r=i.isWebGL2;let o;this.setMode=function(c){o=c},this.render=function(c,u){n.drawArrays(o,c,u),t.update(u,o,1)},this.renderInstances=function(c,u,d){if(0===d)return;let h,f;if(r)h=n,f="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",null===h)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[f](o,c,u,d),t.update(u,o,d)}}function R9(n,e,t){let i;function o(P){if("highp"===P){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";P="mediump"}return"mediump"===P&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const s="undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&n instanceof WebGL2ComputeRenderingContext;let a=void 0!==t.precision?t.precision:"highp";const l=o(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=s||e.has("WEBGL_draw_buffers"),u=!0===t.logarithmicDepthBuffer,d=n.getParameter(34930),h=n.getParameter(35660),f=n.getParameter(3379),m=n.getParameter(34076),v=n.getParameter(34921),w=n.getParameter(36347),y=n.getParameter(36348),_=n.getParameter(36349),M=h>0,C=s||e.has("OES_texture_float");return{isWebGL2:s,drawBuffers:c,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===e.has("EXT_texture_filter_anisotropic")){const P=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:o,precision:a,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:m,maxAttributes:v,maxVertexUniforms:w,maxVaryings:y,maxFragmentUniforms:_,vertexTextures:M,floatFragmentTextures:C,floatVertexTextures:M&&C,maxSamples:s?n.getParameter(36183):0}}function L9(n){const e=this;let t=null,i=0,r=!1,o=!1;const s=new ws,a=new ci,l={value:null,needsUpdate:!1};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(d,h,f,m){const v=null!==d?d.length:0;let w=null;if(0!==v){if(w=l.value,!0!==m||null===w){const y=f+4*v,_=h.matrixWorldInverse;a.getNormalMatrix(_),(null===w||w.length<y)&&(w=new Float32Array(y));for(let M=0,C=f;M!==v;++M,C+=4)s.copy(d[M]).applyMatrix4(_,a),s.normal.toArray(w,C),w[C+3]=s.constant}l.value=w,l.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,w}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h,f){const m=0!==d.length||h||0!==i||r;return r=h,t=u(d,f,0),i=d.length,m},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1,c()},this.setState=function(d,h,f){const m=d.clippingPlanes,v=d.clipIntersection,w=d.clipShadows,y=n.get(d);if(!r||null===m||0===m.length||o&&!w)o?u(null):c();else{const _=o?0:i,M=4*_;let C=y.clippingState||null;l.value=C,C=u(m,h,M,f);for(let A=0;A!==M;++A)C[A]=t[A];y.clippingState=C,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=_}}}function k9(n){let e=new WeakMap;function t(s,a){return 303===a?s.mapping=301:304===a&&(s.mapping=302),s}function r(s){const a=s.target;a.removeEventListener("dispose",r);const l=e.get(a);void 0!==l&&(e.delete(a),l.dispose())}return{get:function(s){if(s&&s.isTexture&&!1===s.isRenderTargetTexture){const a=s.mapping;if(303===a||304===a){if(e.has(s))return t(e.get(s).texture,s.mapping);{const l=s.image;if(l&&l.height>0){const c=n.getRenderTarget(),u=new yx(l.height/2);return u.fromEquirectangularTexture(n,s),e.set(s,u),n.setRenderTarget(c),s.addEventListener("dispose",r),t(u.texture,s.mapping)}return null}}}return s},dispose:function(){e=new WeakMap}}}Ho.physical={uniforms:Di([Ho.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new ne(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new xe(0)},sheenColorMap:{value:null},sheenRoughness:{value:0},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new ne},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new xe(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularColor:{value:new xe(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Et.meshphysical_vert,fragmentShader:Et.meshphysical_frag};class ua extends tm{constructor(e=-1,t=1,i=1,r=-1,o=.1,s=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,o,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let o=i-e,s=i+e,a=r+t,l=r-t;if(null!==this.view&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=c*this.view.offsetX,s=o+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}ua.prototype.isOrthographicCamera=!0;class kh extends qi{constructor(e){super(e),this.type="RawShaderMaterial"}}kh.prototype.isRawShaderMaterial=!0;const Go=Math.pow(2,8),uD=[.125,.215,.35,.446,.526,.582],dD=5+uD.length,ul={[nr]:0,3001:1,3002:2,3004:3,3005:4,3006:5,3007:6},xx=new ua,{_lodPlanes:Fh,_sizeLods:hD,_sigmas:rm}=z9(),fD=new xe;let wx=null;const dl=(1+Math.sqrt(5))/2,vu=1/dl,pD=[new D(1,1,1),new D(-1,1,1),new D(1,1,-1),new D(-1,1,-1),new D(0,dl,vu),new D(0,dl,-vu),new D(vu,0,dl),new D(-vu,0,dl),new D(dl,vu,0),new D(-dl,vu,0)];class F9{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=function(n){const e=new Float32Array(20),t=new D(0,1,0);return new kh({name:"SphericalGaussianBlur",defines:{n:20},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:t},inputEncoding:{value:ul[nr]},outputEncoding:{value:ul[nr]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){wx=this._renderer.getRenderTarget();const o=this._allocateTargets();return this._sceneToCubeUV(e,i,r,o),t>0&&this._blur(o,0,0,t),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e){return this._fromTexture(e)}fromCubemap(e){return this._fromTexture(e)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=_D(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=mD(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let e=0;e<Fh.length;e++)Fh[e].dispose()}_cleanup(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(wx),e.scissorTest=!1,om(e,0,0,e.width,e.height)}_fromTexture(e){wx=this._renderer.getRenderTarget();const t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(e){const t={magFilter:Qn,minFilter:Qn,generateMipmaps:!1,type:ta,format:1023,encoding:(n=e,void 0===n||n.type!==ta||n.encoding!==nr&&3001!==n.encoding&&3007!==n.encoding?3002:e.encoding),depthBuffer:!1},i=gD(t);var n;return i.depthBuffer=!e,this._pingPongRenderTarget=gD(t),i}_compileMaterial(e){const t=new Cn(Fh[0],e);this._renderer.compile(t,xx)}_sceneToCubeUV(e,t,i,r){const a=new Kn(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,h=u.outputEncoding,f=u.toneMapping;u.getClearColor(fD),u.toneMapping=0,u.outputEncoding=nr,u.autoClear=!1;const m=new xs({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),v=new Cn(new cl,m);let w=!1;const y=e.background;y?y.isColor&&(m.color.copy(y),e.background=null,w=!0):(m.color.copy(fD),w=!0);for(let _=0;_<6;_++){const M=_%3;0==M?(a.up.set(0,l[_],0),a.lookAt(c[_],0,0)):1==M?(a.up.set(0,0,l[_]),a.lookAt(0,c[_],0)):(a.up.set(0,l[_],0),a.lookAt(0,0,c[_])),om(r,M*Go,_>2?Go:0,Go,Go),u.setRenderTarget(r),w&&u.render(v,a),u.render(e,a)}v.geometry.dispose(),v.material.dispose(),u.toneMapping=f,u.outputEncoding=h,u.autoClear=d,e.background=y}_setEncoding(e,t){e.value=ul[t.encoding]}_textureToCubeUV(e,t){const i=this._renderer,r=301===e.mapping||302===e.mapping;r?null==this._cubemapShader&&(this._cubemapShader=_D()):null==this._equirectShader&&(this._equirectShader=mD());const o=r?this._cubemapShader:this._equirectShader,s=new Cn(Fh[0],o),a=o.uniforms;a.envMap.value=e,r||a.texelSize.value.set(1/e.image.width,1/e.image.height),this._setEncoding(a.inputEncoding,e),this._setEncoding(a.outputEncoding,t.texture),om(t,0,0,3*Go,2*Go),i.setRenderTarget(t),i.render(s,xx)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<dD;r++){const o=Math.sqrt(rm[r]*rm[r]-rm[r-1]*rm[r-1]);this._blur(e,r-1,r,o,pD[(r-1)%pD.length])}t.autoClear=i}_blur(e,t,i,r,o){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,i,r,"latitudinal",o),this._halfBlur(s,e,i,i,r,"longitudinal",o)}_halfBlur(e,t,i,r,o,s,a){const l=this._renderer,c=this._blurMaterial;"latitudinal"!==s&&"longitudinal"!==s&&console.error("blur direction must be either latitudinal or longitudinal!");const d=new Cn(Fh[r],c),h=c.uniforms,f=hD[i]-1,m=isFinite(o)?Math.PI/(2*f):2*Math.PI/39,v=o/m,w=isFinite(o)?1+Math.floor(3*v):20;w>20&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${w} samples when the maximum is set to 20`);const y=[];let _=0;for(let L=0;L<20;++L){const P=L/v,z=Math.exp(-P*P/2);y.push(z),0==L?_+=z:L<w&&(_+=2*z)}for(let L=0;L<y.length;L++)y[L]=y[L]/_;h.envMap.value=e.texture,h.samples.value=w,h.weights.value=y,h.latitudinal.value="latitudinal"===s,a&&(h.poleAxis.value=a),h.dTheta.value=m,h.mipInt.value=8-i,this._setEncoding(h.inputEncoding,e.texture),this._setEncoding(h.outputEncoding,e.texture);const M=hD[r];om(t,3*Math.max(0,Go-2*M),(0===r?0:2*Go)+2*M*(r>4?r-8+4:0),3*M,2*M),l.setRenderTarget(t),l.render(d,xx)}}function z9(){const n=[],e=[],t=[];let i=8;for(let r=0;r<dD;r++){const o=Math.pow(2,i);e.push(o);let s=1/o;r>4?s=uD[r-8+4-1]:0==r&&(s=0),t.push(s);const a=1/(o-1),l=-a/2,c=1+a/2,u=[l,l,c,l,c,c,l,l,c,c,l,c],d=6,h=6,f=3,m=2,v=1,w=new Float32Array(f*h*d),y=new Float32Array(m*h*d),_=new Float32Array(v*h*d);for(let C=0;C<d;C++){const A=C%3*2/3-1,L=C>2?0:-1;w.set([A,L,0,A+2/3,L,0,A+2/3,L+1,0,A,L,0,A+2/3,L+1,0,A,L+1,0],f*h*C),y.set(u,m*h*C),_.set([C,C,C,C,C,C],v*h*C)}const M=new Ze;M.setAttribute("position",new Zt(w,f)),M.setAttribute("uv",new Zt(y,m)),M.setAttribute("faceIndex",new Zt(_,v)),n.push(M),i>4&&i--}return{_lodPlanes:n,_sizeLods:e,_sigmas:t}}function gD(n){const e=new Gn(3*Go,3*Go,n);return e.texture.mapping=306,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function om(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function mD(){const n=new ne(1,1);return new kh({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:n},inputEncoding:{value:ul[nr]},outputEncoding:{value:ul[nr]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function _D(){return new kh({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:ul[nr]},outputEncoding:{value:ul[nr]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function U9(n){let e=new WeakMap,t=null;function o(a){const l=a.target;l.removeEventListener("dispose",o);const c=e.get(l);void 0!==c&&(e.delete(l),c.dispose())}return{get:function(a){if(a&&a.isTexture&&!1===a.isRenderTargetTexture){const l=a.mapping,c=303===l||304===l,u=301===l||302===l;if(c||u){if(e.has(a))return e.get(a).texture;{const d=a.image;if(c&&d&&d.height>0||u&&d&&function(a){let l=0;for(let u=0;u<6;u++)void 0!==a[u]&&l++;return 6===l}(d)){const h=n.getRenderTarget();null===t&&(t=new F9(n));const f=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,f),n.setRenderTarget(h),a.addEventListener("dispose",o),f.texture}return null}}}return a},dispose:function(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function V9(n){const e={};function t(i){if(void 0!==e[i])return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return null!==t(i)},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return null===r&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function H9(n,e,t,i){const r={},o=new WeakMap;function s(d){const h=d.target;null!==h.index&&e.remove(h.index);for(const m in h.attributes)e.remove(h.attributes[m]);h.removeEventListener("dispose",s),delete r[h.id];const f=o.get(h);f&&(e.remove(f),o.delete(h)),i.releaseStatesOfGeometry(h),!0===h.isInstancedBufferGeometry&&delete h._maxInstanceCount,t.memory.geometries--}function c(d){const h=[],f=d.index,m=d.attributes.position;let v=0;if(null!==f){const _=f.array;v=f.version;for(let M=0,C=_.length;M<C;M+=3){const A=_[M+0],L=_[M+1],P=_[M+2];h.push(A,L,L,P,P,A)}}else{v=m.version;for(let M=0,C=m.array.length/3-1;M<C;M+=3){const A=M+0,L=M+1,P=M+2;h.push(A,L,L,P,P,A)}}const w=new(XA(h)>65535?ux:cx)(h,1);w.version=v;const y=o.get(d);y&&e.remove(y),o.set(d,w)}return{get:function(d,h){return!0===r[h.id]||(h.addEventListener("dispose",s),r[h.id]=!0,t.memory.geometries++),h},update:function(d){const h=d.attributes;for(const m in h)e.update(h[m],34962);const f=d.morphAttributes;for(const m in f){const v=f[m];for(let w=0,y=v.length;w<y;w++)e.update(v[w],34962)}},getWireframeAttribute:function(d){const h=o.get(d);if(h){const f=d.index;null!==f&&h.version<f.version&&c(d)}else c(d);return o.get(d)}}}function G9(n,e,t,i){const r=i.isWebGL2;let o,a,l;this.setMode=function(h){o=h},this.setIndex=function(h){a=h.type,l=h.bytesPerElement},this.render=function(h,f){n.drawElements(o,f,a,h*l),t.update(f,o,1)},this.renderInstances=function(h,f,m){if(0===m)return;let v,w;if(r)v=n,w="drawElementsInstanced";else if(v=e.get("ANGLE_instanced_arrays"),w="drawElementsInstancedANGLE",null===v)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");v[w](o,f,a,h*l,m),t.update(f,o,m)}}function j9(n){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(o,s,a){switch(t.calls++,s){case 4:t.triangles+=a*(o/3);break;case 1:t.lines+=a*(o/2);break;case 3:t.lines+=a*(o-1);break;case 2:t.lines+=a*o;break;case 0:t.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s)}}}}class Ex extends Pn{constructor(e=null,t=1,i=1,r=1){super(null),this.image={data:e,width:t,height:i,depth:r},this.magFilter=Qn,this.minFilter=Qn,this.wrapR=Ai,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}function W9(n,e){return n[0]-e[0]}function $9(n,e){return Math.abs(e[1])-Math.abs(n[1])}function vD(n,e){let t=1;const i=e.isInterleavedBufferAttribute?e.data.array:e.array;i instanceof Int8Array?t=127:i instanceof Int16Array?t=32767:i instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",i),n.divideScalar(t)}function q9(n,e,t){const i={},r=new Float32Array(8),o=new WeakMap,s=new D,a=[];for(let c=0;c<8;c++)a[c]=[c,0];return{update:function(c,u,d,h){const f=c.morphTargetInfluences;if(!0===e.isWebGL2){const m=u.morphAttributes.position.length;let v=o.get(u);if(void 0===v||v.count!==m){void 0!==v&&v.texture.dispose();const _=void 0!==u.morphAttributes.normal,M=u.morphAttributes.position,C=u.morphAttributes.normal||[],L=!0===_?2:1;let P=u.attributes.position.count*L,z=1;P>e.maxTextureSize&&(z=Math.ceil(P/e.maxTextureSize),P=e.maxTextureSize);const W=new Float32Array(P*z*4*m),$=new Ex(W,P,z,m);$.format=li,$.type=gs;const B=4*L;for(let he=0;he<m;he++){const Y=M[he],q=C[he],K=P*z*4*he;for(let Q=0;Q<Y.count;Q++){s.fromBufferAttribute(Y,Q),!0===Y.normalized&&vD(s,Y);const ie=Q*B;W[K+ie+0]=s.x,W[K+ie+1]=s.y,W[K+ie+2]=s.z,W[K+ie+3]=0,!0===_&&(s.fromBufferAttribute(q,Q),!0===q.normalized&&vD(s,q),W[K+ie+4]=s.x,W[K+ie+5]=s.y,W[K+ie+6]=s.z,W[K+ie+7]=0)}}v={count:m,texture:$,size:new ne(P,z)},o.set(u,v)}let w=0;for(let _=0;_<f.length;_++)w+=f[_];const y=u.morphTargetsRelative?1:1-w;h.getUniforms().setValue(n,"morphTargetBaseInfluence",y),h.getUniforms().setValue(n,"morphTargetInfluences",f),h.getUniforms().setValue(n,"morphTargetsTexture",v.texture,t),h.getUniforms().setValue(n,"morphTargetsTextureSize",v.size)}else{const m=void 0===f?0:f.length;let v=i[u.id];if(void 0===v||v.length!==m){v=[];for(let C=0;C<m;C++)v[C]=[C,0];i[u.id]=v}for(let C=0;C<m;C++){const A=v[C];A[0]=C,A[1]=f[C]}v.sort($9);for(let C=0;C<8;C++)C<m&&v[C][1]?(a[C][0]=v[C][0],a[C][1]=v[C][1]):(a[C][0]=Number.MAX_SAFE_INTEGER,a[C][1]=0);a.sort(W9);const w=u.morphAttributes.position,y=u.morphAttributes.normal;let _=0;for(let C=0;C<8;C++){const A=a[C],L=A[0],P=A[1];L!==Number.MAX_SAFE_INTEGER&&P?(w&&u.getAttribute("morphTarget"+C)!==w[L]&&u.setAttribute("morphTarget"+C,w[L]),y&&u.getAttribute("morphNormal"+C)!==y[L]&&u.setAttribute("morphNormal"+C,y[L]),r[C]=P,_+=P):(w&&!0===u.hasAttribute("morphTarget"+C)&&u.deleteAttribute("morphTarget"+C),y&&!0===u.hasAttribute("morphNormal"+C)&&u.deleteAttribute("morphNormal"+C),r[C]=0)}const M=u.morphTargetsRelative?1:1-_;h.getUniforms().setValue(n,"morphTargetBaseInfluence",M),h.getUniforms().setValue(n,"morphTargetInfluences",r)}}}}function X9(n,e,t,i){let r=new WeakMap;function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),null!==c.instanceColor&&t.remove(c.instanceColor)}return{update:function(l){const c=i.render.frame,d=e.get(l,l.geometry);return r.get(d)!==c&&(e.update(d),r.set(d,c)),l.isInstancedMesh&&(!1===l.hasEventListener("dispose",a)&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,34962),null!==l.instanceColor&&t.update(l.instanceColor,34962)),d},dispose:function(){r=new WeakMap}}}Ex.prototype.isDataTexture2DArray=!0;class yD extends Pn{constructor(e=null,t=1,i=1,r=1){super(null),this.image={data:e,width:t,height:i,depth:r},this.magFilter=Qn,this.minFilter=Qn,this.wrapR=Ai,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}yD.prototype.isDataTexture3D=!0;const bD=new Pn,xD=new Ex,wD=new yD,CD=new Rh,MD=[],ED=[],SD=new Float32Array(16),TD=new Float32Array(9),PD=new Float32Array(4);function yu(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let o=MD[r];if(void 0===o&&(o=new Float32Array(r),MD[r]=o),0!==e){i.toArray(o,0);for(let s=1,a=0;s!==e;++s)a+=t,n[s].toArray(o,a)}return o}function Xi(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Oi(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function sm(n,e){let t=ED[e];void 0===t&&(t=new Int32Array(e),ED[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function Y9(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Z9(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Xi(t,e))return;n.uniform2fv(this.addr,e),Oi(t,e)}}function J9(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Xi(t,e))return;n.uniform3fv(this.addr,e),Oi(t,e)}}function Q9(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Xi(t,e))return;n.uniform4fv(this.addr,e),Oi(t,e)}}function K9(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Xi(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Oi(t,e)}else{if(Xi(t,i))return;PD.set(i),n.uniformMatrix2fv(this.addr,!1,PD),Oi(t,i)}}function e$(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Xi(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Oi(t,e)}else{if(Xi(t,i))return;TD.set(i),n.uniformMatrix3fv(this.addr,!1,TD),Oi(t,i)}}function t$(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Xi(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Oi(t,e)}else{if(Xi(t,i))return;SD.set(i),n.uniformMatrix4fv(this.addr,!1,SD),Oi(t,i)}}function n$(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function i$(n,e){const t=this.cache;Xi(t,e)||(n.uniform2iv(this.addr,e),Oi(t,e))}function r$(n,e){const t=this.cache;Xi(t,e)||(n.uniform3iv(this.addr,e),Oi(t,e))}function o$(n,e){const t=this.cache;Xi(t,e)||(n.uniform4iv(this.addr,e),Oi(t,e))}function s$(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function a$(n,e){const t=this.cache;Xi(t,e)||(n.uniform2uiv(this.addr,e),Oi(t,e))}function l$(n,e){const t=this.cache;Xi(t,e)||(n.uniform3uiv(this.addr,e),Oi(t,e))}function c$(n,e){const t=this.cache;Xi(t,e)||(n.uniform4uiv(this.addr,e),Oi(t,e))}function u$(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.safeSetTexture2D(e||bD,r)}function d$(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||wD,r)}function h$(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.safeSetTextureCube(e||CD,r)}function f$(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||xD,r)}function g$(n,e){n.uniform1fv(this.addr,e)}function m$(n,e){const t=yu(e,this.size,2);n.uniform2fv(this.addr,t)}function _$(n,e){const t=yu(e,this.size,3);n.uniform3fv(this.addr,t)}function v$(n,e){const t=yu(e,this.size,4);n.uniform4fv(this.addr,t)}function y$(n,e){const t=yu(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function b$(n,e){const t=yu(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function x$(n,e){const t=yu(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function w$(n,e){n.uniform1iv(this.addr,e)}function C$(n,e){n.uniform2iv(this.addr,e)}function M$(n,e){n.uniform3iv(this.addr,e)}function E$(n,e){n.uniform4iv(this.addr,e)}function S$(n,e){n.uniform1uiv(this.addr,e)}function T$(n,e){n.uniform2uiv(this.addr,e)}function P$(n,e){n.uniform3uiv(this.addr,e)}function A$(n,e){n.uniform4uiv(this.addr,e)}function D$(n,e,t){const i=e.length,r=sm(t,i);n.uniform1iv(this.addr,r);for(let o=0;o!==i;++o)t.safeSetTexture2D(e[o]||bD,r[o])}function O$(n,e,t){const i=e.length,r=sm(t,i);n.uniform1iv(this.addr,r);for(let o=0;o!==i;++o)t.setTexture3D(e[o]||wD,r[o])}function I$(n,e,t){const i=e.length,r=sm(t,i);n.uniform1iv(this.addr,r);for(let o=0;o!==i;++o)t.safeSetTextureCube(e[o]||CD,r[o])}function R$(n,e,t){const i=e.length,r=sm(t,i);n.uniform1iv(this.addr,r);for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||xD,r[o])}function k$(n,e,t){this.id=n,this.addr=t,this.cache=[],this.setValue=function(n){switch(n){case 5126:return Y9;case 35664:return Z9;case 35665:return J9;case 35666:return Q9;case 35674:return K9;case 35675:return e$;case 35676:return t$;case 5124:case 35670:return n$;case 35667:case 35671:return i$;case 35668:case 35672:return r$;case 35669:case 35673:return o$;case 5125:return s$;case 36294:return a$;case 36295:return l$;case 36296:return c$;case 35678:case 36198:case 36298:case 36306:case 35682:return u$;case 35679:case 36299:case 36307:return d$;case 35680:case 36300:case 36308:case 36293:return h$;case 36289:case 36303:case 36311:case 36292:return f$}}(e.type)}function AD(n,e,t){this.id=n,this.addr=t,this.cache=[],this.size=e.size,this.setValue=function(n){switch(n){case 5126:return g$;case 35664:return m$;case 35665:return _$;case 35666:return v$;case 35674:return y$;case 35675:return b$;case 35676:return x$;case 5124:case 35670:return w$;case 35667:case 35671:return C$;case 35668:case 35672:return M$;case 35669:case 35673:return E$;case 5125:return S$;case 36294:return T$;case 36295:return P$;case 36296:return A$;case 35678:case 36198:case 36298:case 36306:case 35682:return D$;case 35679:case 36299:case 36307:return O$;case 35680:case 36300:case 36308:case 36293:return I$;case 36289:case 36303:case 36311:case 36292:return R$}}(e.type)}function DD(n){this.id=n,this.seq=[],this.map={}}AD.prototype.updateCache=function(n){const e=this.cache;n instanceof Float32Array&&e.length!==n.length&&(this.cache=new Float32Array(n.length)),Oi(e,n)},DD.prototype.setValue=function(n,e,t){const i=this.seq;for(let r=0,o=i.length;r!==o;++r){const s=i[r];s.setValue(n,e[s.id],t)}};const Sx=/(\w+)(\])?(\[|\.)?/g;function OD(n,e){n.seq.push(e),n.map[e.id]=e}function F$(n,e,t){const i=n.name,r=i.length;for(Sx.lastIndex=0;;){const o=Sx.exec(i),s=Sx.lastIndex;let a=o[1];const c=o[3];if("]"===o[2]&&(a|=0),void 0===c||"["===c&&s+2===r){OD(t,void 0===c?new k$(a,n,e):new AD(a,n,e));break}{let d=t.map[a];void 0===d&&(d=new DD(a),OD(t,d)),t=d}}}function ha(n,e){this.seq=[],this.map={};const t=n.getProgramParameter(e,35718);for(let i=0;i<t;++i){const r=n.getActiveUniform(e,i);F$(r,n.getUniformLocation(e,r.name),this)}}function ID(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}ha.prototype.setValue=function(n,e,t,i){const r=this.map[e];void 0!==r&&r.setValue(n,t,i)},ha.prototype.setOptional=function(n,e,t){const i=e[t];void 0!==i&&this.setValue(n,t,i)},ha.upload=function(n,e,t,i){for(let r=0,o=e.length;r!==o;++r){const s=e[r],a=t[s.id];!1!==a.needsUpdate&&s.setValue(n,a.value,i)}},ha.seqWithValue=function(n,e){const t=[];for(let i=0,r=n.length;i!==r;++i){const o=n[i];o.id in e&&t.push(o)}return t};let N$=0;function RD(n){switch(n){case nr:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function LD(n,e,t){const i=n.getShaderParameter(e,35713),r=n.getShaderInfoLog(e).trim();return i&&""===r?"":t.toUpperCase()+"\n\n"+r+"\n\n"+function(n){const e=n.split("\n");for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join("\n")}(n.getShaderSource(e))}function hl(n,e){const t=RD(e);return"vec4 "+n+"( vec4 value ) { return "+t[0]+"ToLinear"+t[1]+"; }"}function B$(n,e){const t=RD(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function U$(n,e){let t;switch(e){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="OptimizedCineon";break;case 4:t="ACESFilmic";break;case 5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Nh(n){return""!==n}function kD(n,e){return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function FD(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const j$=/^[ \t]*#include +<([\w\d./]+)>/gm;function Tx(n){return n.replace(j$,W$)}function W$(n,e){const t=Et[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return Tx(t)}const $$=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,q$=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function ND(n){return n.replace(q$,zD).replace($$,X$)}function X$(n,e,t,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),zD(0,e,t,i)}function zD(n,e,t,i){let r="";for(let o=parseInt(e);o<parseInt(t);o++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function BD(n){let e="precision "+n.precision+" float;\nprecision "+n.precision+" int;";return"highp"===n.precision?e+="\n#define HIGH_PRECISION":"mediump"===n.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(e+="\n#define LOW_PRECISION"),e}function K$(n,e,t,i){const r=n.getContext(),o=t.defines;let s=t.vertexShader,a=t.fragmentShader;const l=function(n){let e="SHADOWMAP_TYPE_BASIC";return 1===n.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===n.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===n.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(t),c=function(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:case 307:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),u=function(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case 302:case 307:e="ENVMAP_MODE_REFRACTION"}return e}(t),d=function(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(t),h=n.gammaFactor>0?n.gammaFactor:1,f=t.isWebGL2?"":function(n){return[n.extensionDerivatives||n.envMapCubeUV||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Nh).join("\n")}(t),m=function(n){const e=[];for(const t in n){const i=n[t];!1!==i&&e.push("#define "+t+" "+i)}return e.join("\n")}(o),v=r.createProgram();let w,y,_=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(w=[m].filter(Nh).join("\n"),w.length>0&&(w+="\n"),y=[f,m].filter(Nh).join("\n"),y.length>0&&(y+="\n")):(w=[BD(t),"#define SHADER_NAME "+t.shaderName,m,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+h,"#define MAX_BONES "+t.maxBones,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.useVertexTexture?"#define BONE_TEXTURE":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphTargets&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargets&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Nh).join("\n"),y=[f,BD(t),"#define SHADER_NAME "+t.shaderName,m,"#define GAMMA_FACTOR "+h,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?Et.tonemapping_pars_fragment:"",0!==t.toneMapping?U$("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.format===nl?"#define OPAQUE":"",Et.encodings_pars_fragment,t.map?hl("mapTexelToLinear",t.mapEncoding):"",t.matcap?hl("matcapTexelToLinear",t.matcapEncoding):"",t.envMap?hl("envMapTexelToLinear",t.envMapEncoding):"",t.emissiveMap?hl("emissiveMapTexelToLinear",t.emissiveMapEncoding):"",t.specularColorMap?hl("specularColorMapTexelToLinear",t.specularColorMapEncoding):"",t.sheenColorMap?hl("sheenColorMapTexelToLinear",t.sheenColorMapEncoding):"",t.lightMap?hl("lightMapTexelToLinear",t.lightMapEncoding):"",B$("linearToOutputTexel",t.outputEncoding),t.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(Nh).join("\n")),s=Tx(s),s=kD(s,t),s=FD(s,t),a=Tx(a),a=kD(a,t),a=FD(a,t),s=ND(s),a=ND(a),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(_="#version 300 es\n",w=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+w,y=["#define varying in","300 es"===t.glslVersion?"":"out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+y);const C=_+y+a,A=ID(r,35633,_+w+s),L=ID(r,35632,C);if(r.attachShader(v,A),r.attachShader(v,L),void 0!==t.index0AttributeName?r.bindAttribLocation(v,0,t.index0AttributeName):!0===t.morphTargets&&r.bindAttribLocation(v,0,"position"),r.linkProgram(v),n.debug.checkShaderErrors){const W=r.getProgramInfoLog(v).trim(),$=r.getShaderInfoLog(A).trim(),B=r.getShaderInfoLog(L).trim();let he=!0,Y=!0;if(!1===r.getProgramParameter(v,35714)){he=!1;const q=LD(r,A,"vertex"),K=LD(r,L,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(v,35715)+"\n\nProgram Info Log: "+W+"\n"+q+"\n"+K)}else""!==W?console.warn("THREE.WebGLProgram: Program Info Log:",W):(""===$||""===B)&&(Y=!1);Y&&(this.diagnostics={runnable:he,programLog:W,vertexShader:{log:$,prefix:w},fragmentShader:{log:B,prefix:y}})}let P,z;return r.deleteShader(A),r.deleteShader(L),this.getUniforms=function(){return void 0===P&&(P=new ha(r,v)),P},this.getAttributes=function(){return void 0===z&&(z=function(n,e){const t={},i=n.getProgramParameter(e,35721);for(let r=0;r<i;r++){const o=n.getActiveAttrib(e,r),s=o.name;let a=1;35674===o.type&&(a=2),35675===o.type&&(a=3),35676===o.type&&(a=4),t[s]={type:o.type,location:n.getAttribLocation(e,s),locationSize:a}}return t}(r,v)),z},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(v),this.program=void 0},this.name=t.shaderName,this.id=N$++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=A,this.fragmentShader=L,this}function eq(n,e,t,i,r,o,s){const a=[],l=r.isWebGL2,c=r.logarithmicDepthBuffer,u=r.floatVertexTextures,d=r.maxVertexUniforms,h=r.vertexTextures;let f=r.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},v=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap",,"roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","morphTargetsCount","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","specularIntensityMap","specularColorMap","specularColorMapEncoding","transmission","transmissionMap","thicknessMap","sheen","sheenColorMap","sheenColorMapEncoding","sheenRoughnessMap"];function y(P){let z;return P&&P.isTexture?z=P.encoding:P&&P.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),z=P.texture.encoding):z=nr,z}return{getParameters:function(P,z,W,$,B){const he=$.fog,q=(P.isMeshStandardMaterial?t:e).get(P.envMap||(P.isMeshStandardMaterial?$.environment:null)),K=m[P.type],Q=B.isSkinnedMesh?function(P){const W=P.skeleton.bones;if(u)return 1024;{const B=Math.floor((d-20)/4),he=Math.min(B,W.length);return he<W.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+W.length+" bones. This GPU supports "+he+"."),0):he}}(B):0;let ie,Ce;if(null!==P.precision&&(f=r.getMaxPrecision(P.precision),f!==P.precision&&console.warn("THREE.WebGLProgram.getParameters:",P.precision,"not supported, using",f,"instead.")),K){const Ae=Ho[K];ie=Ae.vertexShader,Ce=Ae.fragmentShader}else ie=P.vertexShader,Ce=P.fragmentShader;const ke=n.getRenderTarget(),le=P.alphaTest>0,ue=P.clearcoat>0;return{isWebGL2:l,shaderID:K,shaderName:P.type,vertexShader:ie,fragmentShader:Ce,defines:P.defines,isRawShaderMaterial:!0===P.isRawShaderMaterial,glslVersion:P.glslVersion,precision:f,instancing:!0===B.isInstancedMesh,instancingColor:!0===B.isInstancedMesh&&null!==B.instanceColor,supportsVertexTextures:h,outputEncoding:null!==ke?y(ke.texture):n.outputEncoding,map:!!P.map,mapEncoding:y(P.map),matcap:!!P.matcap,matcapEncoding:y(P.matcap),envMap:!!q,envMapMode:q&&q.mapping,envMapEncoding:y(q),envMapCubeUV:!!q&&(306===q.mapping||307===q.mapping),lightMap:!!P.lightMap,lightMapEncoding:y(P.lightMap),aoMap:!!P.aoMap,emissiveMap:!!P.emissiveMap,emissiveMapEncoding:y(P.emissiveMap),bumpMap:!!P.bumpMap,normalMap:!!P.normalMap,objectSpaceNormalMap:1===P.normalMapType,tangentSpaceNormalMap:0===P.normalMapType,clearcoat:ue,clearcoatMap:ue&&!!P.clearcoatMap,clearcoatRoughnessMap:ue&&!!P.clearcoatRoughnessMap,clearcoatNormalMap:ue&&!!P.clearcoatNormalMap,displacementMap:!!P.displacementMap,roughnessMap:!!P.roughnessMap,metalnessMap:!!P.metalnessMap,specularMap:!!P.specularMap,specularIntensityMap:!!P.specularIntensityMap,specularColorMap:!!P.specularColorMap,specularColorMapEncoding:y(P.specularColorMap),alphaMap:!!P.alphaMap,alphaTest:le,gradientMap:!!P.gradientMap,sheen:P.sheen>0,sheenColorMap:!!P.sheenColorMap,sheenColorMapEncoding:y(P.sheenColorMap),sheenRoughnessMap:!!P.sheenRoughnessMap,transmission:P.transmission>0,transmissionMap:!!P.transmissionMap,thicknessMap:!!P.thicknessMap,combine:P.combine,vertexTangents:!!P.normalMap&&!!B.geometry&&!!B.geometry.attributes.tangent,vertexColors:P.vertexColors,vertexAlphas:!0===P.vertexColors&&!!B.geometry&&!!B.geometry.attributes.color&&4===B.geometry.attributes.color.itemSize,vertexUvs:!!P.map||!!P.bumpMap||!!P.normalMap||!!P.specularMap||!!P.alphaMap||!!P.emissiveMap||!!P.roughnessMap||!!P.metalnessMap||!!P.clearcoatMap||!!P.clearcoatRoughnessMap||!!P.clearcoatNormalMap||!!P.displacementMap||!!P.transmissionMap||!!P.thicknessMap||!!P.specularIntensityMap||!!P.specularColorMap||!!P.sheenColorMap||P.sheenRoughnessMap,uvsVertexOnly:!(P.map||P.bumpMap||P.normalMap||P.specularMap||P.alphaMap||P.emissiveMap||P.roughnessMap||P.metalnessMap||P.clearcoatNormalMap||P.transmission>0||P.transmissionMap||P.thicknessMap||P.specularIntensityMap||P.specularColorMap||P.sheen>0||P.sheenColorMap||P.sheenRoughnessMap||!P.displacementMap),fog:!!he,useFog:P.fog,fogExp2:he&&he.isFogExp2,flatShading:!!P.flatShading,sizeAttenuation:P.sizeAttenuation,logarithmicDepthBuffer:c,skinning:!0===B.isSkinnedMesh&&Q>0,maxBones:Q,useVertexTexture:u,morphTargets:!!B.geometry&&!!B.geometry.morphAttributes.position,morphNormals:!!B.geometry&&!!B.geometry.morphAttributes.normal,morphTargetsCount:B.geometry&&B.geometry.morphAttributes.position?B.geometry.morphAttributes.position.length:0,numDirLights:z.directional.length,numPointLights:z.point.length,numSpotLights:z.spot.length,numRectAreaLights:z.rectArea.length,numHemiLights:z.hemi.length,numDirLightShadows:z.directionalShadowMap.length,numPointLightShadows:z.pointShadowMap.length,numSpotLightShadows:z.spotShadowMap.length,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,format:P.format,dithering:P.dithering,shadowMapEnabled:n.shadowMap.enabled&&W.length>0,shadowMapType:n.shadowMap.type,toneMapping:P.toneMapped?n.toneMapping:0,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:P.premultipliedAlpha,doubleSided:2===P.side,flipSided:1===P.side,depthPacking:void 0!==P.depthPacking&&P.depthPacking,index0AttributeName:P.index0AttributeName,extensionDerivatives:P.extensions&&P.extensions.derivatives,extensionFragDepth:P.extensions&&P.extensions.fragDepth,extensionDrawBuffers:P.extensions&&P.extensions.drawBuffers,extensionShaderTextureLOD:P.extensions&&P.extensions.shaderTextureLOD,rendererExtensionFragDepth:l||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:l||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:l||i.has("EXT_shader_texture_lod"),customProgramCacheKey:P.customProgramCacheKey()}},getProgramCacheKey:function(P){const z=[];if(P.shaderID?z.push(P.shaderID):(z.push(YA(P.fragmentShader)),z.push(YA(P.vertexShader))),void 0!==P.defines)for(const W in P.defines)z.push(W),z.push(P.defines[W]);if(!1===P.isRawShaderMaterial){for(let W=0;W<v.length;W++)z.push(P[v[W]]);z.push(n.outputEncoding),z.push(n.gammaFactor)}return z.push(P.customProgramCacheKey),z.join()},getUniforms:function(P){const z=m[P.type];let W;return W=z?_x.clone(Ho[z].uniforms):P.uniforms,W},acquireProgram:function(P,z){let W;for(let $=0,B=a.length;$<B;$++){const he=a[$];if(he.cacheKey===z){W=he,++W.usedTimes;break}}return void 0===W&&(W=new K$(n,z,P,o),a.push(W)),W},releaseProgram:function(P){if(0==--P.usedTimes){const z=a.indexOf(P);a[z]=a[a.length-1],a.pop(),P.destroy()}},programs:a}}function tq(){let n=new WeakMap;return{get:function(o){let s=n.get(o);return void 0===s&&(s={},n.set(o,s)),s},remove:function(o){n.delete(o)},update:function(o,s,a){n.get(o)[s]=a},dispose:function(){n=new WeakMap}}}function nq(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.program!==e.program?n.program.id-e.program.id:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function UD(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function VD(n){const e=[];let t=0;const i=[],r=[],o=[],s={id:-1};function l(f,m,v,w,y,_){let M=e[t];const C=n.get(v);return void 0===M?(M={id:f.id,object:f,geometry:m,material:v,program:C.program||s,groupOrder:w,renderOrder:f.renderOrder,z:y,group:_},e[t]=M):(M.id=f.id,M.object=f,M.geometry=m,M.material=v,M.program=C.program||s,M.groupOrder=w,M.renderOrder=f.renderOrder,M.z=y,M.group=_),t++,M}return{opaque:i,transmissive:r,transparent:o,init:function(){t=0,i.length=0,r.length=0,o.length=0},push:function(f,m,v,w,y,_){const M=l(f,m,v,w,y,_);v.transmission>0?r.push(M):!0===v.transparent?o.push(M):i.push(M)},unshift:function(f,m,v,w,y,_){const M=l(f,m,v,w,y,_);v.transmission>0?r.unshift(M):!0===v.transparent?o.unshift(M):i.unshift(M)},finish:function(){for(let f=t,m=e.length;f<m;f++){const v=e[f];if(null===v.id)break;v.id=null,v.object=null,v.geometry=null,v.material=null,v.program=null,v.group=null}},sort:function(f,m){i.length>1&&i.sort(f||nq),r.length>1&&r.sort(m||UD),o.length>1&&o.sort(m||UD)}}}function iq(n){let e=new WeakMap;return{get:function(r,o){let s;return!1===e.has(r)?(s=new VD(n),e.set(r,[s])):o>=e.get(r).length?(s=new VD(n),e.get(r).push(s)):s=e.get(r)[o],s},dispose:function(){e=new WeakMap}}}function rq(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new D,color:new xe};break;case"SpotLight":t={position:new D,direction:new D,color:new xe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new D,color:new xe,distance:0,decay:0};break;case"HemisphereLight":t={direction:new D,skyColor:new xe,groundColor:new xe};break;case"RectAreaLight":t={color:new xe,position:new D,halfWidth:new D,halfHeight:new D}}return n[e.id]=t,t}}}let sq=0;function aq(n,e){return(e.castShadow?1:0)-(n.castShadow?1:0)}function lq(n,e){const t=new rq,i=function(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ne};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ne,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let u=0;u<9;u++)r.probe.push(new D);const o=new D,s=new He,a=new He;return{setup:function(u,d){let h=0,f=0,m=0;for(let W=0;W<9;W++)r.probe[W].set(0,0,0);let v=0,w=0,y=0,_=0,M=0,C=0,A=0,L=0;u.sort(aq);const P=!0!==d?Math.PI:1;for(let W=0,$=u.length;W<$;W++){const B=u[W],he=B.color,Y=B.intensity,q=B.distance,K=B.shadow&&B.shadow.map?B.shadow.map.texture:null;if(B.isAmbientLight)h+=he.r*Y*P,f+=he.g*Y*P,m+=he.b*Y*P;else if(B.isLightProbe)for(let Q=0;Q<9;Q++)r.probe[Q].addScaledVector(B.sh.coefficients[Q],Y);else if(B.isDirectionalLight){const Q=t.get(B);if(Q.color.copy(B.color).multiplyScalar(B.intensity*P),B.castShadow){const ie=B.shadow,Ce=i.get(B);Ce.shadowBias=ie.bias,Ce.shadowNormalBias=ie.normalBias,Ce.shadowRadius=ie.radius,Ce.shadowMapSize=ie.mapSize,r.directionalShadow[v]=Ce,r.directionalShadowMap[v]=K,r.directionalShadowMatrix[v]=B.shadow.matrix,C++}r.directional[v]=Q,v++}else if(B.isSpotLight){const Q=t.get(B);if(Q.position.setFromMatrixPosition(B.matrixWorld),Q.color.copy(he).multiplyScalar(Y*P),Q.distance=q,Q.coneCos=Math.cos(B.angle),Q.penumbraCos=Math.cos(B.angle*(1-B.penumbra)),Q.decay=B.decay,B.castShadow){const ie=B.shadow,Ce=i.get(B);Ce.shadowBias=ie.bias,Ce.shadowNormalBias=ie.normalBias,Ce.shadowRadius=ie.radius,Ce.shadowMapSize=ie.mapSize,r.spotShadow[y]=Ce,r.spotShadowMap[y]=K,r.spotShadowMatrix[y]=B.shadow.matrix,L++}r.spot[y]=Q,y++}else if(B.isRectAreaLight){const Q=t.get(B);Q.color.copy(he).multiplyScalar(Y),Q.halfWidth.set(.5*B.width,0,0),Q.halfHeight.set(0,.5*B.height,0),r.rectArea[_]=Q,_++}else if(B.isPointLight){const Q=t.get(B);if(Q.color.copy(B.color).multiplyScalar(B.intensity*P),Q.distance=B.distance,Q.decay=B.decay,B.castShadow){const ie=B.shadow,Ce=i.get(B);Ce.shadowBias=ie.bias,Ce.shadowNormalBias=ie.normalBias,Ce.shadowRadius=ie.radius,Ce.shadowMapSize=ie.mapSize,Ce.shadowCameraNear=ie.camera.near,Ce.shadowCameraFar=ie.camera.far,r.pointShadow[w]=Ce,r.pointShadowMap[w]=K,r.pointShadowMatrix[w]=B.shadow.matrix,A++}r.point[w]=Q,w++}else if(B.isHemisphereLight){const Q=t.get(B);Q.skyColor.copy(B.color).multiplyScalar(Y*P),Q.groundColor.copy(B.groundColor).multiplyScalar(Y*P),r.hemi[M]=Q,M++}}_>0&&(e.isWebGL2||!0===n.has("OES_texture_float_linear")?(r.rectAreaLTC1=Pe.LTC_FLOAT_1,r.rectAreaLTC2=Pe.LTC_FLOAT_2):!0===n.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=Pe.LTC_HALF_1,r.rectAreaLTC2=Pe.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=h,r.ambient[1]=f,r.ambient[2]=m;const z=r.hash;(z.directionalLength!==v||z.pointLength!==w||z.spotLength!==y||z.rectAreaLength!==_||z.hemiLength!==M||z.numDirectionalShadows!==C||z.numPointShadows!==A||z.numSpotShadows!==L)&&(r.directional.length=v,r.spot.length=y,r.rectArea.length=_,r.point.length=w,r.hemi.length=M,r.directionalShadow.length=C,r.directionalShadowMap.length=C,r.pointShadow.length=A,r.pointShadowMap.length=A,r.spotShadow.length=L,r.spotShadowMap.length=L,r.directionalShadowMatrix.length=C,r.pointShadowMatrix.length=A,r.spotShadowMatrix.length=L,z.directionalLength=v,z.pointLength=w,z.spotLength=y,z.rectAreaLength=_,z.hemiLength=M,z.numDirectionalShadows=C,z.numPointShadows=A,z.numSpotShadows=L,r.version=sq++)},setupView:function(u,d){let h=0,f=0,m=0,v=0,w=0;const y=d.matrixWorldInverse;for(let _=0,M=u.length;_<M;_++){const C=u[_];if(C.isDirectionalLight){const A=r.directional[h];A.direction.setFromMatrixPosition(C.matrixWorld),o.setFromMatrixPosition(C.target.matrixWorld),A.direction.sub(o),A.direction.transformDirection(y),h++}else if(C.isSpotLight){const A=r.spot[m];A.position.setFromMatrixPosition(C.matrixWorld),A.position.applyMatrix4(y),A.direction.setFromMatrixPosition(C.matrixWorld),o.setFromMatrixPosition(C.target.matrixWorld),A.direction.sub(o),A.direction.transformDirection(y),m++}else if(C.isRectAreaLight){const A=r.rectArea[v];A.position.setFromMatrixPosition(C.matrixWorld),A.position.applyMatrix4(y),a.identity(),s.copy(C.matrixWorld),s.premultiply(y),a.extractRotation(s),A.halfWidth.set(.5*C.width,0,0),A.halfHeight.set(0,.5*C.height,0),A.halfWidth.applyMatrix4(a),A.halfHeight.applyMatrix4(a),v++}else if(C.isPointLight){const A=r.point[f];A.position.setFromMatrixPosition(C.matrixWorld),A.position.applyMatrix4(y),f++}else if(C.isHemisphereLight){const A=r.hemi[w];A.direction.setFromMatrixPosition(C.matrixWorld),A.direction.transformDirection(y),A.direction.normalize(),w++}}},state:r}}function HD(n,e){const t=new lq(n,e),i=[],r=[];return{init:function(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:function(d){t.setup(i,d)},setupLightsView:function(d){t.setupView(i,d)},pushLight:function(d){i.push(d)},pushShadow:function(d){r.push(d)}}}function cq(n,e){let t=new WeakMap;return{get:function(o,s=0){let a;return!1===t.has(o)?(a=new HD(n,e),t.set(o,[a])):s>=t.get(o).length?(a=new HD(n,e),t.get(o).push(a)):a=t.get(o)[s],a},dispose:function(){t=new WeakMap}}}class am extends yi{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}am.prototype.isMeshDepthMaterial=!0;class Px extends yi{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new D,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function GD(n,e,t){let i=new im;const r=new ne,o=new ne,s=new qt,a=new am({depthPacking:3201}),l=new Px,c={},u=t.maxTextureSize,d={0:1,1:0,2:2},h=new qi({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ne},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=h.clone();f.defines.HORIZONTAL_PASS=1;const m=new Ze;m.setAttribute("position",new Zt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new Cn(m,h),w=this;function y(C,A){const L=e.update(v);h.defines.VSM_SAMPLES!==C.blurSamples&&(h.defines.VSM_SAMPLES=C.blurSamples,f.defines.VSM_SAMPLES=C.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),h.uniforms.shadow_pass.value=C.map.texture,h.uniforms.resolution.value=C.mapSize,h.uniforms.radius.value=C.radius,n.setRenderTarget(C.mapPass),n.clear(),n.renderBufferDirect(A,null,L,h,v,null),f.uniforms.shadow_pass.value=C.mapPass.texture,f.uniforms.resolution.value=C.mapSize,f.uniforms.radius.value=C.radius,n.setRenderTarget(C.map),n.clear(),n.renderBufferDirect(A,null,L,f,v,null)}function _(C,A,L,P,z,W,$){let B=null;const he=!0===P.isPointLight?C.customDistanceMaterial:C.customDepthMaterial;if(B=void 0!==he?he:!0===P.isPointLight?l:a,n.localClippingEnabled&&!0===L.clipShadows&&0!==L.clippingPlanes.length||L.displacementMap&&0!==L.displacementScale||L.alphaMap&&L.alphaTest>0){const Y=B.uuid,q=L.uuid;let K=c[Y];void 0===K&&(K={},c[Y]=K);let Q=K[q];void 0===Q&&(Q=B.clone(),K[q]=Q),B=Q}return B.visible=L.visible,B.wireframe=L.wireframe,B.side=3===$?null!==L.shadowSide?L.shadowSide:L.side:null!==L.shadowSide?L.shadowSide:d[L.side],B.alphaMap=L.alphaMap,B.alphaTest=L.alphaTest,B.clipShadows=L.clipShadows,B.clippingPlanes=L.clippingPlanes,B.clipIntersection=L.clipIntersection,B.displacementMap=L.displacementMap,B.displacementScale=L.displacementScale,B.displacementBias=L.displacementBias,B.wireframeLinewidth=L.wireframeLinewidth,B.linewidth=L.linewidth,!0===P.isPointLight&&!0===B.isMeshDistanceMaterial&&(B.referencePosition.setFromMatrixPosition(P.matrixWorld),B.nearDistance=z,B.farDistance=W),B}function M(C,A,L,P,z){if(!1===C.visible)return;if(C.layers.test(A.layers)&&(C.isMesh||C.isLine||C.isPoints)&&(C.castShadow||C.receiveShadow&&3===z)&&(!C.frustumCulled||i.intersectsObject(C))){C.modelViewMatrix.multiplyMatrices(L.matrixWorldInverse,C.matrixWorld);const B=e.update(C),he=C.material;if(Array.isArray(he)){const Y=B.groups;for(let q=0,K=Y.length;q<K;q++){const Q=Y[q],ie=he[Q.materialIndex];if(ie&&ie.visible){const Ce=_(C,0,ie,P,L.near,L.far,z);n.renderBufferDirect(L,null,B,Ce,C,Q)}}}else if(he.visible){const Y=_(C,0,he,P,L.near,L.far,z);n.renderBufferDirect(L,null,B,Y,C,null)}}const $=C.children;for(let B=0,he=$.length;B<he;B++)M($[B],A,L,P,z)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(C,A,L){if(!1===w.enabled||!1===w.autoUpdate&&!1===w.needsUpdate||0===C.length)return;const P=n.getRenderTarget(),z=n.getActiveCubeFace(),W=n.getActiveMipmapLevel(),$=n.state;$.setBlending(0),$.buffers.color.setClear(1,1,1,1),$.buffers.depth.setTest(!0),$.setScissorTest(!1);for(let B=0,he=C.length;B<he;B++){const Y=C[B],q=Y.shadow;if(void 0===q){console.warn("THREE.WebGLShadowMap:",Y,"has no shadow.");continue}if(!1===q.autoUpdate&&!1===q.needsUpdate)continue;r.copy(q.mapSize);const K=q.getFrameExtents();if(r.multiply(K),o.copy(q.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(o.x=Math.floor(u/K.x),r.x=o.x*K.x,q.mapSize.x=o.x),r.y>u&&(o.y=Math.floor(u/K.y),r.y=o.y*K.y,q.mapSize.y=o.y)),null===q.map&&!q.isPointLightShadow&&3===this.type){const ie={minFilter:wn,magFilter:wn,format:li};q.map=new Gn(r.x,r.y,ie),q.map.texture.name=Y.name+".shadowMap",q.mapPass=new Gn(r.x,r.y,ie),q.camera.updateProjectionMatrix()}null===q.map&&(q.map=new Gn(r.x,r.y,{minFilter:Qn,magFilter:Qn,format:li}),q.map.texture.name=Y.name+".shadowMap",q.camera.updateProjectionMatrix()),n.setRenderTarget(q.map),n.clear();const Q=q.getViewportCount();for(let ie=0;ie<Q;ie++){const Ce=q.getViewport(ie);s.set(o.x*Ce.x,o.y*Ce.y,o.x*Ce.z,o.y*Ce.w),$.viewport(s),q.updateMatrices(Y,ie),i=q.getFrustum(),M(A,L,q.camera,Y,this.type)}!q.isPointLightShadow&&3===this.type&&y(q,L),q.needsUpdate=!1}w.needsUpdate=!1,n.setRenderTarget(P,z,W)}}function hq(n,e,t){const i=t.isWebGL2,a=new function(){let H=!1;const Me=new qt;let k=null;const se=new qt(0,0,0,0);return{setMask:function(ve){k!==ve&&!H&&(n.colorMask(ve,ve,ve,ve),k=ve)},setLocked:function(ve){H=ve},setClear:function(ve,Ee,Oe,tt,rn){!0===rn&&(ve*=tt,Ee*=tt,Oe*=tt),Me.set(ve,Ee,Oe,tt),!1===se.equals(Me)&&(n.clearColor(ve,Ee,Oe,tt),se.copy(Me))},reset:function(){H=!1,k=null,se.set(-1,0,0,0)}}},l=new function(){let H=!1,Me=null,k=null,se=null;return{setTest:function(ve){ve?Ae(2929):ze(2929)},setMask:function(ve){Me!==ve&&!H&&(n.depthMask(ve),Me=ve)},setFunc:function(ve){if(k!==ve){if(ve)switch(ve){case 0:n.depthFunc(512);break;case 1:n.depthFunc(519);break;case 2:n.depthFunc(513);break;default:n.depthFunc(515);break;case 4:n.depthFunc(514);break;case 5:n.depthFunc(518);break;case 6:n.depthFunc(516);break;case 7:n.depthFunc(517)}else n.depthFunc(515);k=ve}},setLocked:function(ve){H=ve},setClear:function(ve){se!==ve&&(n.clearDepth(ve),se=ve)},reset:function(){H=!1,Me=null,k=null,se=null}}},c=new function(){let H=!1,Me=null,k=null,se=null,ve=null,Ee=null,Oe=null,tt=null,rn=null;return{setTest:function(kt){H||(kt?Ae(2960):ze(2960))},setMask:function(kt){Me!==kt&&!H&&(n.stencilMask(kt),Me=kt)},setFunc:function(kt,On,In){(k!==kt||se!==On||ve!==In)&&(n.stencilFunc(kt,On,In),k=kt,se=On,ve=In)},setOp:function(kt,On,In){(Ee!==kt||Oe!==On||tt!==In)&&(n.stencilOp(kt,On,In),Ee=kt,Oe=On,tt=In)},setLocked:function(kt){H=kt},setClear:function(kt){rn!==kt&&(n.clearStencil(kt),rn=kt)},reset:function(){H=!1,Me=null,k=null,se=null,ve=null,Ee=null,Oe=null,tt=null,rn=null}}};let u={},d={},h=null,f=!1,m=null,v=null,w=null,y=null,_=null,M=null,C=null,A=!1,L=null,P=null,z=null,W=null,$=null;const B=n.getParameter(35661);let he=!1,Y=0;const q=n.getParameter(7938);-1!==q.indexOf("WebGL")?(Y=parseFloat(/^WebGL (\d)/.exec(q)[1]),he=Y>=1):-1!==q.indexOf("OpenGL ES")&&(Y=parseFloat(/^OpenGL ES (\d)/.exec(q)[1]),he=Y>=2);let K=null,Q={};const ie=n.getParameter(3088),Ce=n.getParameter(2978),ke=(new qt).fromArray(ie),le=(new qt).fromArray(Ce);function ue(H,Me,k){const se=new Uint8Array(4),ve=n.createTexture();n.bindTexture(H,ve),n.texParameteri(H,10241,9728),n.texParameteri(H,10240,9728);for(let Ee=0;Ee<k;Ee++)n.texImage2D(Me+Ee,0,6408,1,1,0,6408,5121,se);return ve}const Ie={};function Ae(H){!0!==u[H]&&(n.enable(H),u[H]=!0)}function ze(H){!1!==u[H]&&(n.disable(H),u[H]=!1)}Ie[3553]=ue(3553,3553,1),Ie[34067]=ue(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),Ae(2929),l.setFunc(3),Dt(!1),ae(1),Ae(2884),Ue(0);const _t={100:32774,101:32778,102:32779};if(i)_t[103]=32775,_t[104]=32776;else{const H=e.get("EXT_blend_minmax");null!==H&&(_t[103]=H.MIN_EXT,_t[104]=H.MAX_EXT)}const Qe={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function Ue(H,Me,k,se,ve,Ee,Oe,tt){if(0!==H){if(!1===f&&(Ae(3042),f=!0),5===H)ve=ve||Me,Ee=Ee||k,Oe=Oe||se,(Me!==v||ve!==_)&&(n.blendEquationSeparate(_t[Me],_t[ve]),v=Me,_=ve),(k!==w||se!==y||Ee!==M||Oe!==C)&&(n.blendFuncSeparate(Qe[k],Qe[se],Qe[Ee],Qe[Oe]),w=k,y=se,M=Ee,C=Oe),m=H,A=null;else if(H!==m||tt!==A){if((100!==v||100!==_)&&(n.blendEquation(32774),v=100,_=100),tt)switch(H){case 1:n.blendFuncSeparate(1,771,1,771);break;case 2:n.blendFunc(1,1);break;case 3:n.blendFuncSeparate(0,0,769,771);break;case 4:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",H)}else switch(H){case 1:n.blendFuncSeparate(770,771,1,771);break;case 2:n.blendFunc(770,1);break;case 3:n.blendFunc(0,769);break;case 4:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",H)}w=null,y=null,M=null,C=null,m=H,A=tt}}else!0===f&&(ze(3042),f=!1)}function Dt(H){L!==H&&(n.frontFace(H?2304:2305),L=H)}function ae(H){0!==H?(Ae(2884),H!==P&&n.cullFace(1===H?1029:2===H?1028:1032)):ze(2884),P=H}function we(H,Me,k){H?(Ae(32823),(W!==Me||$!==k)&&(n.polygonOffset(Me,k),W=Me,$=k)):ze(32823)}function Se(H){void 0===H&&(H=33984+B-1),K!==H&&(n.activeTexture(H),K=H)}return{buffers:{color:a,depth:l,stencil:c},enable:Ae,disable:ze,bindFramebuffer:function(H,Me){return d[H]!==Me&&(n.bindFramebuffer(H,Me),d[H]=Me,i&&(36009===H&&(d[36160]=Me),36160===H&&(d[36009]=Me)),!0)},useProgram:function(H){return h!==H&&(n.useProgram(H),h=H,!0)},setBlending:Ue,setMaterial:function(H,Me){2===H.side?ze(2884):Ae(2884);let k=1===H.side;Me&&(k=!k),Dt(k),1===H.blending&&!1===H.transparent?Ue(0):Ue(H.blending,H.blendEquation,H.blendSrc,H.blendDst,H.blendEquationAlpha,H.blendSrcAlpha,H.blendDstAlpha,H.premultipliedAlpha),l.setFunc(H.depthFunc),l.setTest(H.depthTest),l.setMask(H.depthWrite),a.setMask(H.colorWrite);const se=H.stencilWrite;c.setTest(se),se&&(c.setMask(H.stencilWriteMask),c.setFunc(H.stencilFunc,H.stencilRef,H.stencilFuncMask),c.setOp(H.stencilFail,H.stencilZFail,H.stencilZPass)),we(H.polygonOffset,H.polygonOffsetFactor,H.polygonOffsetUnits),!0===H.alphaToCoverage?Ae(32926):ze(32926)},setFlipSided:Dt,setCullFace:ae,setLineWidth:function(H){H!==z&&(he&&n.lineWidth(H),z=H)},setPolygonOffset:we,setScissorTest:function(H){H?Ae(3089):ze(3089)},activeTexture:Se,bindTexture:function(H,Me){null===K&&Se();let k=Q[K];void 0===k&&(k={type:void 0,texture:void 0},Q[K]=k),(k.type!==H||k.texture!==Me)&&(n.bindTexture(H,Me||Ie[H]),k.type=H,k.texture=Me)},unbindTexture:function(){const H=Q[K];void 0!==H&&void 0!==H.type&&(n.bindTexture(H.type,null),H.type=void 0,H.texture=void 0)},compressedTexImage2D:function(){try{n.compressedTexImage2D.apply(n,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},texImage2D:function(){try{n.texImage2D.apply(n,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},texImage3D:function(){try{n.texImage3D.apply(n,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},texStorage2D:function(){try{n.texStorage2D.apply(n,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},texSubImage2D:function(){try{n.texSubImage2D.apply(n,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},scissor:function(H){!1===ke.equals(H)&&(n.scissor(H.x,H.y,H.z,H.w),ke.copy(H))},viewport:function(H){!1===le.equals(H)&&(n.viewport(H.x,H.y,H.z,H.w),le.copy(H))},reset:function(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),!0===i&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},K=null,Q={},d={},h=null,f=!1,m=null,v=null,w=null,y=null,_=null,M=null,C=null,A=!1,L=null,P=null,z=null,W=null,$=null,ke.set(0,0,n.canvas.width,n.canvas.height),le.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}}}function fq(n,e,t,i,r,o,s){const a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,d=r.maxSamples,f=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):void 0,m=new WeakMap;let v,w=!1;try{w="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(N){}function y(N,I){return w?new OffscreenCanvas(N,I):zg("canvas")}function _(N,I,ge,fe){let Ve=1;if((N.width>fe||N.height>fe)&&(Ve=fe/Math.max(N.width,N.height)),Ve<1||!0===I){if("undefined"!=typeof HTMLImageElement&&N instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&N instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&N instanceof ImageBitmap){const Ne=I?qA:Math.floor,H=Ne(Ve*N.width),Me=Ne(Ve*N.height);void 0===v&&(v=y(H,Me));const k=ge?y(H,Me):v;return k.width=H,k.height=Me,k.getContext("2d").drawImage(N,0,0,H,Me),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+N.width+"x"+N.height+") to ("+H+"x"+Me+")."),k}return"data"in N&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+N.width+"x"+N.height+")."),N}return N}function M(N){return Wb(N.width)&&Wb(N.height)}function A(N,I){return N.generateMipmaps&&I&&N.minFilter!==Qn&&N.minFilter!==wn}function L(N){n.generateMipmap(N)}function P(N,I,ge){if(!1===a)return I;if(null!==N){if(void 0!==n[N])return n[N];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+N+"'")}let fe=I;return 6403===I&&(5126===ge&&(fe=33326),5131===ge&&(fe=33325),5121===ge&&(fe=33321)),6407===I&&(5126===ge&&(fe=34837),5131===ge&&(fe=34843),5121===ge&&(fe=32849)),6408===I&&(5126===ge&&(fe=34836),5131===ge&&(fe=34842),5121===ge&&(fe=32856)),(33325===fe||33326===fe||34842===fe||34836===fe)&&e.get("EXT_color_buffer_float"),fe}function W(N){return N===Qn||1004===N||1005===N?9728:9729}function $(N){const I=N.target;I.removeEventListener("dispose",$),function(N){const I=i.get(N);void 0!==I.__webglInit&&(n.deleteTexture(I.__webglTexture),i.remove(N))}(I),I.isVideoTexture&&m.delete(I),s.memory.textures--}function B(N){const I=N.target;I.removeEventListener("dispose",B),function(N){const I=N.texture,ge=i.get(N),fe=i.get(I);if(N){if(void 0!==fe.__webglTexture&&(n.deleteTexture(fe.__webglTexture),s.memory.textures--),N.depthTexture&&N.depthTexture.dispose(),N.isWebGLCubeRenderTarget)for(let Ve=0;Ve<6;Ve++)n.deleteFramebuffer(ge.__webglFramebuffer[Ve]),ge.__webglDepthbuffer&&n.deleteRenderbuffer(ge.__webglDepthbuffer[Ve]);else n.deleteFramebuffer(ge.__webglFramebuffer),ge.__webglDepthbuffer&&n.deleteRenderbuffer(ge.__webglDepthbuffer),ge.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ge.__webglMultisampledFramebuffer),ge.__webglColorRenderbuffer&&n.deleteRenderbuffer(ge.__webglColorRenderbuffer),ge.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ge.__webglDepthRenderbuffer);if(N.isWebGLMultipleRenderTargets)for(let Ve=0,Ne=I.length;Ve<Ne;Ve++){const H=i.get(I[Ve]);H.__webglTexture&&(n.deleteTexture(H.__webglTexture),s.memory.textures--),i.remove(I[Ve])}i.remove(I),i.remove(N)}}(I)}let q=0;function ie(N,I){const ge=i.get(N);if(N.isVideoTexture&&function(N){const I=s.render.frame;m.get(N)!==I&&(m.set(N,I),N.update())}(N),N.version>0&&ge.__version!==N.version){const fe=N.image;if(void 0===fe)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==fe.complete)return void St(ge,N,I);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.activeTexture(33984+I),t.bindTexture(3553,ge.__webglTexture)}function le(N,I){const ge=i.get(N);N.version>0&&ge.__version!==N.version?function(N,I,ge){if(6!==I.image.length)return;ze(N,I),t.activeTexture(33984+ge),t.bindTexture(34067,N.__webglTexture),n.pixelStorei(37440,I.flipY),n.pixelStorei(37441,I.premultiplyAlpha),n.pixelStorei(3317,I.unpackAlignment),n.pixelStorei(37443,0);const fe=I&&(I.isCompressedTexture||I.image[0].isCompressedTexture),Ve=I.image[0]&&I.image[0].isDataTexture,Ne=[];for(let Oe=0;Oe<6;Oe++)Ne[Oe]=fe||Ve?Ve?I.image[Oe].image:I.image[Oe]:_(I.image[Oe],!1,!0,c);const Me=M(Ne[0])||a,k=o.convert(I.format),se=o.convert(I.type),ve=P(I.internalFormat,k,se);let Ee;if(Ae(34067,I,Me),fe)for(let Oe=0;Oe<6;Oe++){Ee=Ne[Oe].mipmaps;for(let tt=0;tt<Ee.length;tt++){const rn=Ee[tt];I.format!==li&&I.format!==nl?null!==k?t.compressedTexImage2D(34069+Oe,tt,ve,rn.width,rn.height,0,rn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):t.texImage2D(34069+Oe,tt,ve,rn.width,rn.height,0,k,se,rn.data)}}else{Ee=I.mipmaps;for(let Oe=0;Oe<6;Oe++)if(Ve){t.texImage2D(34069+Oe,0,ve,Ne[Oe].width,Ne[Oe].height,0,k,se,Ne[Oe].data);for(let tt=0;tt<Ee.length;tt++){const kt=Ee[tt].image[Oe].image;t.texImage2D(34069+Oe,tt+1,ve,kt.width,kt.height,0,k,se,kt.data)}}else{t.texImage2D(34069+Oe,0,ve,k,se,Ne[Oe]);for(let tt=0;tt<Ee.length;tt++)t.texImage2D(34069+Oe,tt+1,ve,k,se,Ee[tt].image[Oe])}}A(I,Me)&&L(34067),N.__version=I.version,I.onUpdate&&I.onUpdate(I)}(ge,N,I):(t.activeTexture(33984+I),t.bindTexture(34067,ge.__webglTexture))}const ue={1e3:10497,[Ai]:33071,1002:33648},Ie={[Qn]:9728,1004:9984,1005:9986,[wn]:9729,1007:9985,1008:9987};function Ae(N,I,ge){if(ge?(n.texParameteri(N,10242,ue[I.wrapS]),n.texParameteri(N,10243,ue[I.wrapT]),(32879===N||35866===N)&&n.texParameteri(N,32882,ue[I.wrapR]),n.texParameteri(N,10240,Ie[I.magFilter]),n.texParameteri(N,10241,Ie[I.minFilter])):(n.texParameteri(N,10242,33071),n.texParameteri(N,10243,33071),(32879===N||35866===N)&&n.texParameteri(N,32882,33071),(I.wrapS!==Ai||I.wrapT!==Ai)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(N,10240,W(I.magFilter)),n.texParameteri(N,10241,W(I.minFilter)),I.minFilter!==Qn&&I.minFilter!==wn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const fe=e.get("EXT_texture_filter_anisotropic");if(I.type===gs&&!1===e.has("OES_texture_float_linear")||!1===a&&I.type===qc&&!1===e.has("OES_texture_half_float_linear"))return;(I.anisotropy>1||i.get(I).__currentAnisotropy)&&(n.texParameterf(N,fe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(I.anisotropy,r.getMaxAnisotropy())),i.get(I).__currentAnisotropy=I.anisotropy)}}function ze(N,I){void 0===N.__webglInit&&(N.__webglInit=!0,I.addEventListener("dispose",$),N.__webglTexture=n.createTexture(),s.memory.textures++)}function St(N,I,ge){let fe=3553;I.isDataTexture2DArray&&(fe=35866),I.isDataTexture3D&&(fe=32879),ze(N,I),t.activeTexture(33984+ge),t.bindTexture(fe,N.__webglTexture),n.pixelStorei(37440,I.flipY),n.pixelStorei(37441,I.premultiplyAlpha),n.pixelStorei(3317,I.unpackAlignment),n.pixelStorei(37443,0);const Ve=function(N){return!a&&(N.wrapS!==Ai||N.wrapT!==Ai||N.minFilter!==Qn&&N.minFilter!==wn)}(I)&&!1===M(I.image),Ne=_(I.image,Ve,!1,u),H=M(Ne)||a,Me=o.convert(I.format);let ve,k=o.convert(I.type),se=P(I.internalFormat,Me,k);Ae(fe,I,H);const Ee=I.mipmaps;if(I.isDepthTexture)se=6402,a?se=I.type===gs?36012:1014===I.type?33190:I.type===Xc?35056:33189:I.type===gs&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),I.format===il&&6402===se&&I.type!==Mh&&1014!==I.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),I.type=Mh,k=o.convert(I.type)),I.format===Yc&&6402===se&&(se=34041,I.type!==Xc&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),I.type=Xc,k=o.convert(I.type))),t.texImage2D(3553,0,se,Ne.width,Ne.height,0,Me,k,null);else if(I.isDataTexture)if(Ee.length>0&&H){for(let Oe=0,tt=Ee.length;Oe<tt;Oe++)ve=Ee[Oe],t.texImage2D(3553,Oe,se,ve.width,ve.height,0,Me,k,ve.data);I.generateMipmaps=!1}else t.texImage2D(3553,0,se,Ne.width,Ne.height,0,Me,k,Ne.data);else if(I.isCompressedTexture)for(let Oe=0,tt=Ee.length;Oe<tt;Oe++)ve=Ee[Oe],I.format!==li&&I.format!==nl?null!==Me?t.compressedTexImage2D(3553,Oe,se,ve.width,ve.height,0,ve.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):t.texImage2D(3553,Oe,se,ve.width,ve.height,0,Me,k,ve.data);else if(I.isDataTexture2DArray)t.texImage3D(35866,0,se,Ne.width,Ne.height,Ne.depth,0,Me,k,Ne.data);else if(I.isDataTexture3D)t.texImage3D(32879,0,se,Ne.width,Ne.height,Ne.depth,0,Me,k,Ne.data);else{const Oe=function(N,I,ge){return!0===A(N,ge)?Math.log2(Math.max(I.width,I.height))+1:N.mipmaps.length>0?N.mipmaps.length:1}(I,Ne,H),tt=a&&!0!==I.isVideoTexture,rn=void 0===N.__version;if(Ee.length>0&&H){tt&&rn&&t.texStorage2D(3553,Oe,se,Ee[0].width,Ee[0].height);for(let kt=0,On=Ee.length;kt<On;kt++)ve=Ee[kt],tt?t.texSubImage2D(3553,kt,0,0,Me,k,ve):t.texImage2D(3553,kt,se,Me,k,ve);I.generateMipmaps=!1}else tt?(rn&&t.texStorage2D(3553,Oe,se,Ne.width,Ne.height),t.texSubImage2D(3553,0,0,0,Me,k,Ne)):t.texImage2D(3553,0,se,Me,k,Ne)}A(I,H)&&L(fe),N.__version=I.version,I.onUpdate&&I.onUpdate(I)}function _t(N,I,ge,fe,Ve){const Ne=o.convert(ge.format),H=o.convert(ge.type),Me=P(ge.internalFormat,Ne,H);i.get(I).__hasExternalTextures||(32879===Ve||35866===Ve?t.texImage3D(Ve,0,Me,I.width,I.height,I.depth,0,Ne,H,null):t.texImage2D(Ve,0,Me,I.width,I.height,0,Ne,H,null)),t.bindFramebuffer(36160,N),I.useRenderToTexture?f.framebufferTexture2DMultisampleEXT(36160,fe,Ve,i.get(ge).__webglTexture,0,Re(I)):n.framebufferTexture2D(36160,fe,Ve,i.get(ge).__webglTexture,0),t.bindFramebuffer(36160,null)}function Qe(N,I,ge){if(n.bindRenderbuffer(36161,N),I.depthBuffer&&!I.stencilBuffer){let fe=33189;if(ge||I.useRenderToTexture){const Ve=I.depthTexture;Ve&&Ve.isDepthTexture&&(Ve.type===gs?fe=36012:1014===Ve.type&&(fe=33190));const Ne=Re(I);I.useRenderToTexture?f.renderbufferStorageMultisampleEXT(36161,Ne,fe,I.width,I.height):n.renderbufferStorageMultisample(36161,Ne,fe,I.width,I.height)}else n.renderbufferStorage(36161,fe,I.width,I.height);n.framebufferRenderbuffer(36160,36096,36161,N)}else if(I.depthBuffer&&I.stencilBuffer){const fe=Re(I);ge&&I.useRenderbuffer?n.renderbufferStorageMultisample(36161,fe,35056,I.width,I.height):I.useRenderToTexture?f.renderbufferStorageMultisampleEXT(36161,fe,35056,I.width,I.height):n.renderbufferStorage(36161,34041,I.width,I.height),n.framebufferRenderbuffer(36160,33306,36161,N)}else{const fe=!0===I.isWebGLMultipleRenderTargets?I.texture[0]:I.texture,Ve=o.convert(fe.format),Ne=o.convert(fe.type),H=P(fe.internalFormat,Ve,Ne),Me=Re(I);ge&&I.useRenderbuffer?n.renderbufferStorageMultisample(36161,Me,H,I.width,I.height):I.useRenderToTexture?f.renderbufferStorageMultisampleEXT(36161,Me,H,I.width,I.height):n.renderbufferStorage(36161,H,I.width,I.height)}n.bindRenderbuffer(36161,null)}function qe(N){const I=i.get(N),ge=!0===N.isWebGLCubeRenderTarget;if(N.depthTexture&&!I.__autoAllocateDepthBuffer){if(ge)throw new Error("target.depthTexture not supported in Cube render targets");!function(N,I){if(I&&I.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,N),!I.depthTexture||!I.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(I.depthTexture).__webglTexture||I.depthTexture.image.width!==I.width||I.depthTexture.image.height!==I.height)&&(I.depthTexture.image.width=I.width,I.depthTexture.image.height=I.height,I.depthTexture.needsUpdate=!0),ie(I.depthTexture,0);const fe=i.get(I.depthTexture).__webglTexture,Ve=Re(I);if(I.depthTexture.format===il)I.useRenderToTexture?f.framebufferTexture2DMultisampleEXT(36160,36096,3553,fe,0,Ve):n.framebufferTexture2D(36160,36096,3553,fe,0);else{if(I.depthTexture.format!==Yc)throw new Error("Unknown depthTexture format");I.useRenderToTexture?f.framebufferTexture2DMultisampleEXT(36160,33306,3553,fe,0,Ve):n.framebufferTexture2D(36160,33306,3553,fe,0)}}(I.__webglFramebuffer,N)}else if(ge){I.__webglDepthbuffer=[];for(let fe=0;fe<6;fe++)t.bindFramebuffer(36160,I.__webglFramebuffer[fe]),I.__webglDepthbuffer[fe]=n.createRenderbuffer(),Qe(I.__webglDepthbuffer[fe],N,!1)}else t.bindFramebuffer(36160,I.__webglFramebuffer),I.__webglDepthbuffer=n.createRenderbuffer(),Qe(I.__webglDepthbuffer,N,!1);t.bindFramebuffer(36160,null)}function Re(N){return a&&(N.useRenderbuffer||N.useRenderToTexture)?Math.min(d,N.samples):0}let rt=!1,st=!1;this.allocateTextureUnit=function(){const N=q;return N>=l&&console.warn("THREE.WebGLTextures: Trying to use "+N+" texture units while this GPU supports only "+l),q+=1,N},this.resetTextureUnits=function(){q=0},this.setTexture2D=ie,this.setTexture2DArray=function(N,I){const ge=i.get(N);N.version>0&&ge.__version!==N.version?St(ge,N,I):(t.activeTexture(33984+I),t.bindTexture(35866,ge.__webglTexture))},this.setTexture3D=function(N,I){const ge=i.get(N);N.version>0&&ge.__version!==N.version?St(ge,N,I):(t.activeTexture(33984+I),t.bindTexture(32879,ge.__webglTexture))},this.setTextureCube=le,this.rebindTextures=function(N,I,ge){const fe=i.get(N);void 0!==I&&_t(fe.__webglFramebuffer,N,N.texture,36064,3553),void 0!==ge&&qe(N)},this.setupRenderTarget=function(N){const I=N.texture,ge=i.get(N),fe=i.get(I);N.addEventListener("dispose",B),!0!==N.isWebGLMultipleRenderTargets&&(void 0===fe.__webglTexture&&(fe.__webglTexture=n.createTexture()),fe.__version=I.version,s.memory.textures++);const Ve=!0===N.isWebGLCubeRenderTarget,Ne=!0===N.isWebGLMultipleRenderTargets,H=I.isDataTexture3D||I.isDataTexture2DArray,Me=M(N)||a;if(a&&I.format===nl&&(I.type===gs||I.type===qc)&&(I.format=li,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),Ve){ge.__webglFramebuffer=[];for(let k=0;k<6;k++)ge.__webglFramebuffer[k]=n.createFramebuffer()}else if(ge.__webglFramebuffer=n.createFramebuffer(),Ne)if(r.drawBuffers){const k=N.texture;for(let se=0,ve=k.length;se<ve;se++){const Ee=i.get(k[se]);void 0===Ee.__webglTexture&&(Ee.__webglTexture=n.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(N.useRenderbuffer)if(a){ge.__webglMultisampledFramebuffer=n.createFramebuffer(),ge.__webglColorRenderbuffer=n.createRenderbuffer(),n.bindRenderbuffer(36161,ge.__webglColorRenderbuffer);const k=o.convert(I.format),se=o.convert(I.type),ve=P(I.internalFormat,k,se),Ee=Re(N);n.renderbufferStorageMultisample(36161,Ee,ve,N.width,N.height),t.bindFramebuffer(36160,ge.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064,36161,ge.__webglColorRenderbuffer),n.bindRenderbuffer(36161,null),N.depthBuffer&&(ge.__webglDepthRenderbuffer=n.createRenderbuffer(),Qe(ge.__webglDepthRenderbuffer,N,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Ve){t.bindTexture(34067,fe.__webglTexture),Ae(34067,I,Me);for(let k=0;k<6;k++)_t(ge.__webglFramebuffer[k],N,I,36064,34069+k);A(I,Me)&&L(34067),t.unbindTexture()}else if(Ne){const k=N.texture;for(let se=0,ve=k.length;se<ve;se++){const Ee=k[se],Oe=i.get(Ee);t.bindTexture(3553,Oe.__webglTexture),Ae(3553,Ee,Me),_t(ge.__webglFramebuffer,N,Ee,36064+se,3553),A(Ee,Me)&&L(3553)}t.unbindTexture()}else{let k=3553;H&&(a?k=I.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),t.bindTexture(k,fe.__webglTexture),Ae(k,I,Me),_t(ge.__webglFramebuffer,N,I,36064,k),A(I,Me)&&L(k),t.unbindTexture()}N.depthBuffer&&qe(N)},this.updateRenderTargetMipmap=function(N){const I=M(N)||a,ge=!0===N.isWebGLMultipleRenderTargets?N.texture:[N.texture];for(let fe=0,Ve=ge.length;fe<Ve;fe++){const Ne=ge[fe];if(A(Ne,I)){const H=N.isWebGLCubeRenderTarget?34067:3553,Me=i.get(Ne).__webglTexture;t.bindTexture(H,Me),L(H),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function(N){if(N.useRenderbuffer)if(a){const I=N.width,ge=N.height;let fe=16384;const Ve=[36064],Ne=N.stencilBuffer?33306:36096;N.depthBuffer&&Ve.push(Ne),N.ignoreDepthForMultisampleCopy||(N.depthBuffer&&(fe|=256),N.stencilBuffer&&(fe|=1024));const H=i.get(N);t.bindFramebuffer(36008,H.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,H.__webglFramebuffer),N.ignoreDepthForMultisampleCopy&&(n.invalidateFramebuffer(36008,[Ne]),n.invalidateFramebuffer(36009,[Ne])),n.blitFramebuffer(0,0,I,ge,0,0,I,ge,fe,9728),n.invalidateFramebuffer(36008,Ve),t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,H.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.setupDepthRenderbuffer=qe,this.setupFrameBufferTexture=_t,this.safeSetTexture2D=function(N,I){N&&N.isWebGLRenderTarget&&(!1===rt&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),rt=!0),N=N.texture),ie(N,I)},this.safeSetTextureCube=function(N,I){N&&N.isWebGLCubeRenderTarget&&(!1===st&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),st=!0),N=N.texture),le(N,I)}}function pq(n,e,t){const i=t.isWebGL2;return{convert:function(o){let s;if(o===ta)return 5121;if(1017===o)return 32819;if(1018===o)return 32820;if(1019===o)return 33635;if(1010===o)return 5120;if(1011===o)return 5122;if(o===Mh)return 5123;if(1013===o)return 5124;if(1014===o)return 5125;if(o===gs)return 5126;if(o===qc)return i?5131:(s=e.get("OES_texture_half_float"),null!==s?s.HALF_FLOAT_OES:null);if(1021===o)return 6406;if(o===nl)return 6407;if(o===li)return 6408;if(1024===o)return 6409;if(1025===o)return 6410;if(o===il)return 6402;if(o===Yc)return 34041;if(1028===o)return 6403;if(1029===o)return 36244;if(1030===o)return 33319;if(1031===o)return 33320;if(1032===o)return 36248;if(1033===o)return 36249;if(33776===o||33777===o||33778===o||33779===o){if(s=e.get("WEBGL_compressed_texture_s3tc"),null===s)return null;if(33776===o)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===o)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===o)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===o)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===o||35841===o||35842===o||35843===o){if(s=e.get("WEBGL_compressed_texture_pvrtc"),null===s)return null;if(35840===o)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===o)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===o)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===o)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===o)return s=e.get("WEBGL_compressed_texture_etc1"),null!==s?s.COMPRESSED_RGB_ETC1_WEBGL:null;if((37492===o||37496===o)&&(s=e.get("WEBGL_compressed_texture_etc"),null!==s)){if(37492===o)return s.COMPRESSED_RGB8_ETC2;if(37496===o)return s.COMPRESSED_RGBA8_ETC2_EAC}return 37808===o||37809===o||37810===o||37811===o||37812===o||37813===o||37814===o||37815===o||37816===o||37817===o||37818===o||37819===o||37820===o||37821===o||37840===o||37841===o||37842===o||37843===o||37844===o||37845===o||37846===o||37847===o||37848===o||37849===o||37850===o||37851===o||37852===o||37853===o?(s=e.get("WEBGL_compressed_texture_astc"),null!==s?o:null):36492===o?(s=e.get("EXT_texture_compression_bptc"),null!==s?o:null):o===Xc?i?34042:(s=e.get("WEBGL_depth_texture"),null!==s?s.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}Px.prototype.isMeshDistanceMaterial=!0;class jD extends Kn{constructor(e=[]){super(),this.cameras=e}}jD.prototype.isArrayCamera=!0;class fl extends Ut{constructor(){super(),this.type="Group"}}fl.prototype.isGroup=!0;const gq={type:"move"};class Ax{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new fl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new fl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new D,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new D),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new fl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new D,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new D),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let r=null,o=null,s=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==a&&(r=t.getPose(e.targetRaySpace,i),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(gq))),c&&e.hand){s=!0;for(const v of e.hand.values()){const w=t.getJointPose(v,i);if(void 0===c.joints[v.jointName]){const _=new fl;_.matrixAutoUpdate=!1,_.visible=!1,c.joints[v.jointName]=_,c.add(_)}const y=c.joints[v.jointName];null!==w&&(y.matrix.fromArray(w.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),y.jointRadius=w.radius),y.visible=null!==w}const h=c.joints["index-finger-tip"].position.distanceTo(c.joints["thumb-tip"].position),f=.02,m=.005;c.inputState.pinching&&h>f+m?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=f-m&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==l&&e.gripSpace&&(o=t.getPose(e.gripSpace,i),null!==o&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1));return null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==o),null!==c&&(c.visible=null!==s),this}}class Dx extends Pn{constructor(e,t,i,r,o,s,a,l,c,u){if((u=void 0!==u?u:il)!==il&&u!==Yc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&u===il&&(i=Mh),void 0===i&&u===Yc&&(i=Xc),super(null,r,o,s,a,l,u,i,c),this.image={width:e,height:t},this.magFilter=void 0!==a?a:Qn,this.minFilter=void 0!==l?l:Qn,this.flipY=!1,this.generateMipmaps=!1}}Dx.prototype.isDepthTexture=!0;class mq extends na{constructor(e,t){super();const i=this;let r=null,o=1,s=null,a="local-floor";const l=e.extensions.has("WEBGL_multisampled_render_to_texture");let c=null,u=null,d=null,h=null,f=!1,m=null;const v=t.getContextAttributes();let w=null,y=null;const _=[],M=new Map,C=new Kn;C.layers.enable(1),C.viewport=new qt;const A=new Kn;A.layers.enable(2),A.viewport=new qt;const L=[C,A],P=new jD;P.layers.enable(1),P.layers.enable(2);let z=null,W=null;function $(le){const ue=M.get(le.inputSource);ue&&ue.dispatchEvent({type:le.type,data:le.inputSource})}function B(){M.forEach(function(le,ue){le.disconnect(ue)}),M.clear(),z=null,W=null,e.setRenderTarget(w),h=null,d=null,u=null,r=null,y=null,ke.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function he(le){const ue=r.inputSources;for(let Ie=0;Ie<_.length;Ie++)M.set(ue[Ie],_[Ie]);for(let Ie=0;Ie<le.removed.length;Ie++){const Ae=le.removed[Ie],ze=M.get(Ae);ze&&(ze.dispatchEvent({type:"disconnected",data:Ae}),M.delete(Ae))}for(let Ie=0;Ie<le.added.length;Ie++){const Ae=le.added[Ie],ze=M.get(Ae);ze&&ze.dispatchEvent({type:"connected",data:Ae})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(le){let ue=_[le];return void 0===ue&&(ue=new Ax,_[le]=ue),ue.getTargetRaySpace()},this.getControllerGrip=function(le){let ue=_[le];return void 0===ue&&(ue=new Ax,_[le]=ue),ue.getGripSpace()},this.getHand=function(le){let ue=_[le];return void 0===ue&&(ue=new Ax,_[le]=ue),ue.getHandSpace()},this.setFramebufferScaleFactor=function(le){o=le,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(le){a=le,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return s},this.getBaseLayer=function(){return null!==d?d:h},this.getBinding=function(){return u},this.getFrame=function(){return m},this.getSession=function(){return r},this.setSession=function(){var n,le=(n=function*(ue){if(r=ue,null!==r){if(w=e.getRenderTarget(),r.addEventListener("select",$),r.addEventListener("selectstart",$),r.addEventListener("selectend",$),r.addEventListener("squeeze",$),r.addEventListener("squeezestart",$),r.addEventListener("squeezeend",$),r.addEventListener("end",B),r.addEventListener("inputsourceschange",he),!0!==v.xrCompatible&&(yield t.makeXRCompatible()),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2)h=new XRWebGLLayer(r,t,{antialias:void 0!==r.renderState.layers||v.antialias,alpha:v.alpha,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:o}),r.updateRenderState({baseLayer:h}),y=new Gn(h.framebufferWidth,h.framebufferHeight);else{f=v.antialias;let Ie=null,Ae=null,ze=null;v.depth&&(ze=v.stencil?35056:33189,Ie=v.stencil?Yc:il,Ae=v.stencil?Xc:Mh);const St={colorFormat:v.alpha||f?32856:32849,depthFormat:ze,scaleFactor:o};u=new XRWebGLBinding(r,t),d=u.createProjectionLayer(St),r.updateRenderState({layers:[d]}),y=f?new qb(d.textureWidth,d.textureHeight,{format:li,type:ta,depthTexture:new Dx(d.textureWidth,d.textureHeight,Ae,void 0,void 0,void 0,void 0,void 0,void 0,Ie),stencilBuffer:v.stencil,ignoreDepth:d.ignoreDepthValues,useRenderToTexture:l}):new Gn(d.textureWidth,d.textureHeight,{format:v.alpha?li:nl,type:ta,depthTexture:new Dx(d.textureWidth,d.textureHeight,Ae,void 0,void 0,void 0,void 0,void 0,void 0,Ie),stencilBuffer:v.stencil,ignoreDepth:d.ignoreDepthValues})}this.setFoveation(0),s=yield r.requestReferenceSpace(a),ke.setContext(r),ke.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},function(){var e=this,t=arguments;return new Promise(function(i,r){var o=n.apply(e,t);function s(l){yA(o,i,r,s,a,"next",l)}function a(l){yA(o,i,r,s,a,"throw",l)}s(void 0)})});return function(ue){return le.apply(this,arguments)}}();const Y=new D,q=new D;function Q(le,ue){null===ue?le.matrixWorld.copy(le.matrix):le.matrixWorld.multiplyMatrices(ue.matrixWorld,le.matrix),le.matrixWorldInverse.copy(le.matrixWorld).invert()}this.updateCamera=function(le){if(null===r)return;P.near=A.near=C.near=le.near,P.far=A.far=C.far=le.far,(z!==P.near||W!==P.far)&&(r.updateRenderState({depthNear:P.near,depthFar:P.far}),z=P.near,W=P.far);const ue=le.parent,Ie=P.cameras;Q(P,ue);for(let ze=0;ze<Ie.length;ze++)Q(Ie[ze],ue);P.matrixWorld.decompose(P.position,P.quaternion,P.scale),le.position.copy(P.position),le.quaternion.copy(P.quaternion),le.scale.copy(P.scale),le.matrix.copy(P.matrix),le.matrixWorld.copy(P.matrixWorld);const Ae=le.children;for(let ze=0,St=Ae.length;ze<St;ze++)Ae[ze].updateMatrixWorld(!0);2===Ie.length?function(le,ue,Ie){Y.setFromMatrixPosition(ue.matrixWorld),q.setFromMatrixPosition(Ie.matrixWorld);const Ae=Y.distanceTo(q),ze=ue.projectionMatrix.elements,St=Ie.projectionMatrix.elements,me=ze[14]/(ze[10]-1),_t=ze[14]/(ze[10]+1),Qe=(ze[9]+1)/ze[5],Ue=(ze[9]-1)/ze[5],qe=(ze[8]-1)/ze[0],Dt=(St[8]+1)/St[0],ae=me*qe,ye=me*Dt,we=Ae/(-qe+Dt),Re=we*-qe;ue.matrixWorld.decompose(le.position,le.quaternion,le.scale),le.translateX(Re),le.translateZ(we),le.matrixWorld.compose(le.position,le.quaternion,le.scale),le.matrixWorldInverse.copy(le.matrixWorld).invert();const Se=me+we,rt=_t+we;le.projectionMatrix.makePerspective(ae-Re,ye+(Ae-Re),Qe*_t/rt*Se,Ue*_t/rt*Se,Se,rt)}(P,C,A):P.projectionMatrix.copy(C.projectionMatrix)},this.getCamera=function(){return P},this.getFoveation=function(){return null!==d?d.fixedFoveation:null!==h?h.fixedFoveation:void 0},this.setFoveation=function(le){null!==d&&(d.fixedFoveation=le),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=le)};let ie=null;const ke=new cD;ke.setAnimationLoop(function(le,ue){if(c=ue.getViewerPose(s),m=ue,null!==c){const Ae=c.views;null!==h&&(e.setRenderTargetFramebuffer(y,h.framebuffer),e.setRenderTarget(y));let ze=!1;Ae.length!==P.cameras.length&&(P.cameras.length=0,ze=!0);for(let St=0;St<Ae.length;St++){const me=Ae[St];let _t=null;if(null!==h)_t=h.getViewport(me);else{const Ue=u.getViewSubImage(d,me);_t=Ue.viewport,0===St&&(e.setRenderTargetTextures(y,Ue.colorTexture,d.ignoreDepthValues?void 0:Ue.depthStencilTexture),e.setRenderTarget(y))}const Qe=L[St];Qe.matrix.fromArray(me.transform.matrix),Qe.projectionMatrix.fromArray(me.projectionMatrix),Qe.viewport.set(_t.x,_t.y,_t.width,_t.height),0===St&&P.matrix.copy(Qe.matrix),!0===ze&&P.cameras.push(Qe)}}const Ie=r.inputSources;for(let Ae=0;Ae<_.length;Ae++)_[Ae].update(Ie[Ae],ue,s);ie&&ie(le,ue),m=null}),this.setAnimationLoop=function(le){ie=le},this.dispose=function(){}}}function _q(n){function i(y,_){y.opacity.value=_.opacity,_.color&&y.diffuse.value.copy(_.color),_.emissive&&y.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(y.map.value=_.map),_.alphaMap&&(y.alphaMap.value=_.alphaMap),_.specularMap&&(y.specularMap.value=_.specularMap),_.alphaTest>0&&(y.alphaTest.value=_.alphaTest);const M=n.get(_).envMap;let C,A;M&&(y.envMap.value=M,y.flipEnvMap.value=M.isCubeTexture&&!1===M.isRenderTargetTexture?-1:1,y.reflectivity.value=_.reflectivity,y.ior.value=_.ior,y.refractionRatio.value=_.refractionRatio),_.lightMap&&(y.lightMap.value=_.lightMap,y.lightMapIntensity.value=_.lightMapIntensity),_.aoMap&&(y.aoMap.value=_.aoMap,y.aoMapIntensity.value=_.aoMapIntensity),_.map?C=_.map:_.specularMap?C=_.specularMap:_.displacementMap?C=_.displacementMap:_.normalMap?C=_.normalMap:_.bumpMap?C=_.bumpMap:_.roughnessMap?C=_.roughnessMap:_.metalnessMap?C=_.metalnessMap:_.alphaMap?C=_.alphaMap:_.emissiveMap?C=_.emissiveMap:_.clearcoatMap?C=_.clearcoatMap:_.clearcoatNormalMap?C=_.clearcoatNormalMap:_.clearcoatRoughnessMap?C=_.clearcoatRoughnessMap:_.specularIntensityMap?C=_.specularIntensityMap:_.specularColorMap?C=_.specularColorMap:_.transmissionMap?C=_.transmissionMap:_.thicknessMap?C=_.thicknessMap:_.sheenColorMap?C=_.sheenColorMap:_.sheenRoughnessMap&&(C=_.sheenRoughnessMap),void 0!==C&&(C.isWebGLRenderTarget&&(C=C.texture),!0===C.matrixAutoUpdate&&C.updateMatrix(),y.uvTransform.value.copy(C.matrix)),_.aoMap?A=_.aoMap:_.lightMap&&(A=_.lightMap),void 0!==A&&(A.isWebGLRenderTarget&&(A=A.texture),!0===A.matrixAutoUpdate&&A.updateMatrix(),y.uv2Transform.value.copy(A.matrix))}function d(y,_){y.roughness.value=_.roughness,y.metalness.value=_.metalness,_.roughnessMap&&(y.roughnessMap.value=_.roughnessMap),_.metalnessMap&&(y.metalnessMap.value=_.metalnessMap),_.emissiveMap&&(y.emissiveMap.value=_.emissiveMap),_.bumpMap&&(y.bumpMap.value=_.bumpMap,y.bumpScale.value=_.bumpScale,1===_.side&&(y.bumpScale.value*=-1)),_.normalMap&&(y.normalMap.value=_.normalMap,y.normalScale.value.copy(_.normalScale),1===_.side&&y.normalScale.value.negate()),_.displacementMap&&(y.displacementMap.value=_.displacementMap,y.displacementScale.value=_.displacementScale,y.displacementBias.value=_.displacementBias),n.get(_).envMap&&(y.envMapIntensity.value=_.envMapIntensity)}return{refreshFogUniforms:function(y,_){y.fogColor.value.copy(_.color),_.isFog?(y.fogNear.value=_.near,y.fogFar.value=_.far):_.isFogExp2&&(y.fogDensity.value=_.density)},refreshMaterialUniforms:function(y,_,M,C,A){_.isMeshBasicMaterial?i(y,_):_.isMeshLambertMaterial?(i(y,_),function(y,_){_.emissiveMap&&(y.emissiveMap.value=_.emissiveMap)}(y,_)):_.isMeshToonMaterial?(i(y,_),function(y,_){_.gradientMap&&(y.gradientMap.value=_.gradientMap),_.emissiveMap&&(y.emissiveMap.value=_.emissiveMap),_.bumpMap&&(y.bumpMap.value=_.bumpMap,y.bumpScale.value=_.bumpScale,1===_.side&&(y.bumpScale.value*=-1)),_.normalMap&&(y.normalMap.value=_.normalMap,y.normalScale.value.copy(_.normalScale),1===_.side&&y.normalScale.value.negate()),_.displacementMap&&(y.displacementMap.value=_.displacementMap,y.displacementScale.value=_.displacementScale,y.displacementBias.value=_.displacementBias)}(y,_)):_.isMeshPhongMaterial?(i(y,_),function(y,_){y.specular.value.copy(_.specular),y.shininess.value=Math.max(_.shininess,1e-4),_.emissiveMap&&(y.emissiveMap.value=_.emissiveMap),_.bumpMap&&(y.bumpMap.value=_.bumpMap,y.bumpScale.value=_.bumpScale,1===_.side&&(y.bumpScale.value*=-1)),_.normalMap&&(y.normalMap.value=_.normalMap,y.normalScale.value.copy(_.normalScale),1===_.side&&y.normalScale.value.negate()),_.displacementMap&&(y.displacementMap.value=_.displacementMap,y.displacementScale.value=_.displacementScale,y.displacementBias.value=_.displacementBias)}(y,_)):_.isMeshStandardMaterial?(i(y,_),_.isMeshPhysicalMaterial?function(y,_,M){d(y,_),y.ior.value=_.ior,_.sheen>0&&(y.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),y.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&&(y.sheenColorMap.value=_.sheenColorMap),_.sheenRoughnessMap&&(y.sheenRoughnessMap.value=_.sheenRoughnessMap)),_.clearcoat>0&&(y.clearcoat.value=_.clearcoat,y.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&&(y.clearcoatMap.value=_.clearcoatMap),_.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap),_.clearcoatNormalMap&&(y.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),y.clearcoatNormalMap.value=_.clearcoatNormalMap,1===_.side&&y.clearcoatNormalScale.value.negate())),_.transmission>0&&(y.transmission.value=_.transmission,y.transmissionSamplerMap.value=M.texture,y.transmissionSamplerSize.value.set(M.width,M.height),_.transmissionMap&&(y.transmissionMap.value=_.transmissionMap),y.thickness.value=_.thickness,_.thicknessMap&&(y.thicknessMap.value=_.thicknessMap),y.attenuationDistance.value=_.attenuationDistance,y.attenuationColor.value.copy(_.attenuationColor)),y.specularIntensity.value=_.specularIntensity,y.specularColor.value.copy(_.specularColor),_.specularIntensityMap&&(y.specularIntensityMap.value=_.specularIntensityMap),_.specularColorMap&&(y.specularColorMap.value=_.specularColorMap)}(y,_,A):d(y,_)):_.isMeshMatcapMaterial?(i(y,_),function(y,_){_.matcap&&(y.matcap.value=_.matcap),_.bumpMap&&(y.bumpMap.value=_.bumpMap,y.bumpScale.value=_.bumpScale,1===_.side&&(y.bumpScale.value*=-1)),_.normalMap&&(y.normalMap.value=_.normalMap,y.normalScale.value.copy(_.normalScale),1===_.side&&y.normalScale.value.negate()),_.displacementMap&&(y.displacementMap.value=_.displacementMap,y.displacementScale.value=_.displacementScale,y.displacementBias.value=_.displacementBias)}(y,_)):_.isMeshDepthMaterial?(i(y,_),function(y,_){_.displacementMap&&(y.displacementMap.value=_.displacementMap,y.displacementScale.value=_.displacementScale,y.displacementBias.value=_.displacementBias)}(y,_)):_.isMeshDistanceMaterial?(i(y,_),function(y,_){_.displacementMap&&(y.displacementMap.value=_.displacementMap,y.displacementScale.value=_.displacementScale,y.displacementBias.value=_.displacementBias),y.referencePosition.value.copy(_.referencePosition),y.nearDistance.value=_.nearDistance,y.farDistance.value=_.farDistance}(y,_)):_.isMeshNormalMaterial?(i(y,_),function(y,_){_.bumpMap&&(y.bumpMap.value=_.bumpMap,y.bumpScale.value=_.bumpScale,1===_.side&&(y.bumpScale.value*=-1)),_.normalMap&&(y.normalMap.value=_.normalMap,y.normalScale.value.copy(_.normalScale),1===_.side&&y.normalScale.value.negate()),_.displacementMap&&(y.displacementMap.value=_.displacementMap,y.displacementScale.value=_.displacementScale,y.displacementBias.value=_.displacementBias)}(y,_)):_.isLineBasicMaterial?(function(y,_){y.diffuse.value.copy(_.color),y.opacity.value=_.opacity}(y,_),_.isLineDashedMaterial&&function(y,_){y.dashSize.value=_.dashSize,y.totalSize.value=_.dashSize+_.gapSize,y.scale.value=_.scale}(y,_)):_.isPointsMaterial?function(y,_,M,C){let A;y.diffuse.value.copy(_.color),y.opacity.value=_.opacity,y.size.value=_.size*M,y.scale.value=.5*C,_.map&&(y.map.value=_.map),_.alphaMap&&(y.alphaMap.value=_.alphaMap),_.alphaTest>0&&(y.alphaTest.value=_.alphaTest),_.map?A=_.map:_.alphaMap&&(A=_.alphaMap),void 0!==A&&(!0===A.matrixAutoUpdate&&A.updateMatrix(),y.uvTransform.value.copy(A.matrix))}(y,_,M,C):_.isSpriteMaterial?function(y,_){let M;y.diffuse.value.copy(_.color),y.opacity.value=_.opacity,y.rotation.value=_.rotation,_.map&&(y.map.value=_.map),_.alphaMap&&(y.alphaMap.value=_.alphaMap),_.alphaTest>0&&(y.alphaTest.value=_.alphaTest),_.map?M=_.map:_.alphaMap&&(M=_.alphaMap),void 0!==M&&(!0===M.matrixAutoUpdate&&M.updateMatrix(),y.uvTransform.value.copy(M.matrix))}(y,_):_.isShadowMaterial?(y.color.value.copy(_.color),y.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}}}function $t(n={}){const e=void 0!==n.canvas?n.canvas:function(){const n=zg("canvas");return n.style.display="block",n}(),t=void 0!==n.context?n.context:null,i=void 0!==n.alpha&&n.alpha,r=void 0===n.depth||n.depth,o=void 0===n.stencil||n.stencil,s=void 0!==n.antialias&&n.antialias,a=void 0===n.premultipliedAlpha||n.premultipliedAlpha,l=void 0!==n.preserveDrawingBuffer&&n.preserveDrawingBuffer,c=void 0!==n.powerPreference?n.powerPreference:"default",u=void 0!==n.failIfMajorPerformanceCaveat&&n.failIfMajorPerformanceCaveat;let d=null,h=null;const f=[],m=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=nr,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const v=this;let w=!1,y=0,_=0,M=null,C=-1,A=null;const L=new qt,P=new qt;let z=null,W=e.width,$=e.height,B=1,he=null,Y=null;const q=new qt(0,0,W,$),K=new qt(0,0,W,$);let Q=!1;const ie=[],Ce=new im;let ke=!1,le=!1,ue=null;const Ie=new He,Ae=new D,ze={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function St(){return null===M?B:1}let Qe,Ue,qe,Dt,ae,ye,we,Re,Se,rt,st,bt,Xt,N,I,ge,fe,Ve,Ne,H,Me,k,se,me=t;function _t(O,Z){for(let re=0;re<O.length;re++){const de=e.getContext(O[re],Z);if(null!==de)return de}return null}try{const O={alpha:i,depth:r,stencil:o,antialias:s,premultipliedAlpha:a,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r135"),e.addEventListener("webglcontextlost",Oe,!1),e.addEventListener("webglcontextrestored",tt,!1),null===me){const Z=["webgl2","webgl","experimental-webgl"];if(!0===v.isWebGL1Renderer&&Z.shift(),me=_t(Z,O),null===me)throw _t(Z)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===me.getShaderPrecisionFormat&&(me.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(O){throw console.error("THREE.WebGLRenderer: "+O.message),O}function ve(){Qe=new V9(me),Ue=new R9(me,Qe,n),Qe.init(Ue),k=new pq(me,Qe,Ue),qe=new hq(me,Qe,Ue),ie[0]=1029,Dt=new j9(me),ae=new tq,ye=new fq(me,Qe,qe,ae,Ue,k,Dt),we=new k9(v),Re=new U9(v),Se=new kj(me,Ue),se=new O9(me,Qe,Se,Ue),rt=new H9(me,Se,Dt,se),st=new X9(me,rt,Se,Dt),Ne=new q9(me,Ue,ye),ge=new L9(ae),bt=new eq(v,we,Re,Qe,Ue,se,ge),Xt=new _q(ae),N=new iq(ae),I=new cq(Qe,Ue),Ve=new D9(v,we,qe,st,a),fe=new GD(v,st,Ue),H=new I9(me,Qe,Dt,Ue),Me=new G9(me,Qe,Dt,Ue),Dt.programs=bt.programs,v.capabilities=Ue,v.extensions=Qe,v.properties=ae,v.renderLists=N,v.shadowMap=fe,v.state=qe,v.info=Dt}ve();const Ee=new mq(v,me);function Oe(O){O.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function tt(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const O=Dt.autoReset,Z=fe.enabled,re=fe.autoUpdate,ee=fe.needsUpdate,de=fe.type;ve(),Dt.autoReset=O,fe.enabled=Z,fe.autoUpdate=re,fe.needsUpdate=ee,fe.type=de}function rn(O){const Z=O.target;Z.removeEventListener("dispose",rn),function(O){(function(O){const Z=ae.get(O).programs;void 0!==Z&&Z.forEach(function(re){bt.releaseProgram(re)})})(O),ae.remove(O)}(Z)}this.xr=Ee,this.getContext=function(){return me},this.getContextAttributes=function(){return me.getContextAttributes()},this.forceContextLoss=function(){const O=Qe.get("WEBGL_lose_context");O&&O.loseContext()},this.forceContextRestore=function(){const O=Qe.get("WEBGL_lose_context");O&&O.restoreContext()},this.getPixelRatio=function(){return B},this.setPixelRatio=function(O){void 0!==O&&(B=O,this.setSize(W,$,!1))},this.getSize=function(O){return O.set(W,$)},this.setSize=function(O,Z,re){Ee.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(W=O,$=Z,e.width=Math.floor(O*B),e.height=Math.floor(Z*B),!1!==re&&(e.style.width=O+"px",e.style.height=Z+"px"),this.setViewport(0,0,O,Z))},this.getDrawingBufferSize=function(O){return O.set(W*B,$*B).floor()},this.setDrawingBufferSize=function(O,Z,re){W=O,$=Z,B=re,e.width=Math.floor(O*re),e.height=Math.floor(Z*re),this.setViewport(0,0,O,Z)},this.getCurrentViewport=function(O){return O.copy(L)},this.getViewport=function(O){return O.copy(q)},this.setViewport=function(O,Z,re,ee){O.isVector4?q.set(O.x,O.y,O.z,O.w):q.set(O,Z,re,ee),qe.viewport(L.copy(q).multiplyScalar(B).floor())},this.getScissor=function(O){return O.copy(K)},this.setScissor=function(O,Z,re,ee){O.isVector4?K.set(O.x,O.y,O.z,O.w):K.set(O,Z,re,ee),qe.scissor(P.copy(K).multiplyScalar(B).floor())},this.getScissorTest=function(){return Q},this.setScissorTest=function(O){qe.setScissorTest(Q=O)},this.setOpaqueSort=function(O){he=O},this.setTransparentSort=function(O){Y=O},this.getClearColor=function(O){return O.copy(Ve.getClearColor())},this.setClearColor=function(){Ve.setClearColor.apply(Ve,arguments)},this.getClearAlpha=function(){return Ve.getClearAlpha()},this.setClearAlpha=function(){Ve.setClearAlpha.apply(Ve,arguments)},this.clear=function(O,Z,re){let ee=0;(void 0===O||O)&&(ee|=16384),(void 0===Z||Z)&&(ee|=256),(void 0===re||re)&&(ee|=1024),me.clear(ee)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Oe,!1),e.removeEventListener("webglcontextrestored",tt,!1),N.dispose(),I.dispose(),ae.dispose(),we.dispose(),Re.dispose(),st.dispose(),se.dispose(),Ee.dispose(),Ee.removeEventListener("sessionstart",GI),Ee.removeEventListener("sessionend",jI),ue&&(ue.dispose(),ue=null),wl.stop()},this.renderBufferDirect=function(O,Z,re,ee,de,lt){null===Z&&(Z=ze);const Ke=de.isMesh&&de.matrixWorld.determinant()<0,xt=function(O,Z,re,ee,de){!0!==Z.isScene&&(Z=ze),ye.resetTextureUnits();const lt=Z.fog,xt=null===M?v.outputEncoding:M.texture.encoding,ct=(ee.isMeshStandardMaterial?Re:we).get(ee.envMap||(ee.isMeshStandardMaterial?Z.environment:null)),Nt=!0===ee.vertexColors&&!!re.attributes.color&&4===re.attributes.color.itemSize,wt=!!ee.normalMap&&!!re.attributes.tangent,Ft=!!re.morphAttributes.position,En=!!re.morphAttributes.normal,Cl=re.morphAttributes.position?re.morphAttributes.position.length:0,Vt=ae.get(ee),uf=h.state.lights;!0!==ke||!0!==le&&O===A||ge.setState(ee,O,O===A&&ee.id===C);let sn=!1;ee.version===Vt.__version?(Vt.needsLights&&Vt.lightsStateVersion!==uf.state.version||Vt.outputEncoding!==xt||de.isInstancedMesh&&!1===Vt.instancing||!de.isInstancedMesh&&!0===Vt.instancing||de.isSkinnedMesh&&!1===Vt.skinning||!de.isSkinnedMesh&&!0===Vt.skinning||Vt.envMap!==ct||ee.fog&&Vt.fog!==lt||void 0!==Vt.numClippingPlanes&&(Vt.numClippingPlanes!==ge.numPlanes||Vt.numIntersection!==ge.numIntersection)||Vt.vertexAlphas!==Nt||Vt.vertexTangents!==wt||Vt.morphTargets!==Ft||Vt.morphNormals!==En||!0===Ue.isWebGL2&&Vt.morphTargetsCount!==Cl)&&(sn=!0):(sn=!0,Vt.__version=ee.version);let Ml=Vt.currentProgram;!0===sn&&(Ml=ww(ee,Z,de));let El=!1,Sl=!1,Ma=!1;const Sn=Ml.getUniforms(),df=Vt.uniforms;if(qe.useProgram(Ml.program)&&(El=!0,Sl=!0,Ma=!0),ee.id!==C&&(C=ee.id,Sl=!0),El||A!==O){if(Sn.setValue(me,"projectionMatrix",O.projectionMatrix),Ue.logarithmicDepthBuffer&&Sn.setValue(me,"logDepthBufFC",2/(Math.log(O.far+1)/Math.LN2)),A!==O&&(A=O,Sl=!0,Ma=!0),ee.isShaderMaterial||ee.isMeshPhongMaterial||ee.isMeshToonMaterial||ee.isMeshStandardMaterial||ee.envMap){const oo=Sn.map.cameraPosition;void 0!==oo&&oo.setValue(me,Ae.setFromMatrixPosition(O.matrixWorld))}(ee.isMeshPhongMaterial||ee.isMeshToonMaterial||ee.isMeshLambertMaterial||ee.isMeshBasicMaterial||ee.isMeshStandardMaterial||ee.isShaderMaterial)&&Sn.setValue(me,"isOrthographic",!0===O.isOrthographicCamera),(ee.isMeshPhongMaterial||ee.isMeshToonMaterial||ee.isMeshLambertMaterial||ee.isMeshBasicMaterial||ee.isMeshStandardMaterial||ee.isShaderMaterial||ee.isShadowMaterial||de.isSkinnedMesh)&&Sn.setValue(me,"viewMatrix",O.matrixWorldInverse)}if(de.isSkinnedMesh){Sn.setOptional(me,de,"bindMatrix"),Sn.setOptional(me,de,"bindMatrixInverse");const oo=de.skeleton;oo&&(Ue.floatVertexTextures?(null===oo.boneTexture&&oo.computeBoneTexture(),Sn.setValue(me,"boneTexture",oo.boneTexture,ye),Sn.setValue(me,"boneTextureSize",oo.boneTextureSize)):Sn.setOptional(me,oo,"boneMatrices"))}return!!re&&(void 0!==re.morphAttributes.position||void 0!==re.morphAttributes.normal)&&Ne.update(de,re,ee,Ml),(Sl||Vt.receiveShadow!==de.receiveShadow)&&(Vt.receiveShadow=de.receiveShadow,Sn.setValue(me,"receiveShadow",de.receiveShadow)),Sl&&(Sn.setValue(me,"toneMappingExposure",v.toneMappingExposure),Vt.needsLights&&function(O,Z){O.ambientLightColor.needsUpdate=Z,O.lightProbe.needsUpdate=Z,O.directionalLights.needsUpdate=Z,O.directionalLightShadows.needsUpdate=Z,O.pointLights.needsUpdate=Z,O.pointLightShadows.needsUpdate=Z,O.spotLights.needsUpdate=Z,O.spotLightShadows.needsUpdate=Z,O.rectAreaLights.needsUpdate=Z,O.hemisphereLights.needsUpdate=Z}(df,Ma),lt&&ee.fog&&Xt.refreshFogUniforms(df,lt),Xt.refreshMaterialUniforms(df,ee,B,$,ue),ha.upload(me,Vt.uniformsList,df,ye)),ee.isShaderMaterial&&!0===ee.uniformsNeedUpdate&&(ha.upload(me,Vt.uniformsList,df,ye),ee.uniformsNeedUpdate=!1),ee.isSpriteMaterial&&Sn.setValue(me,"center",de.center),Sn.setValue(me,"modelViewMatrix",de.modelViewMatrix),Sn.setValue(me,"normalMatrix",de.normalMatrix),Sn.setValue(me,"modelMatrix",de.matrixWorld),Ml}(O,Z,re,ee,de);qe.setMaterial(ee,Ke);let ct=re.index;const Nt=re.attributes.position;if(null===ct){if(void 0===Nt||0===Nt.count)return}else if(0===ct.count)return;let wt=1;!0===ee.wireframe&&(ct=rt.getWireframeAttribute(re),wt=2),se.setup(de,ee,xt,re,ct);let Ft,En=H;null!==ct&&(Ft=Se.get(ct),En=Me,En.setIndex(Ft));const Cl=null!==ct?ct.count:Nt.count,Vt=re.drawRange.start*wt,uf=re.drawRange.count*wt,sn=null!==lt?lt.start*wt:0,Ml=null!==lt?lt.count*wt:1/0,El=Math.max(Vt,sn),Sl=Math.min(Cl,Vt+uf,sn+Ml)-1,Ma=Math.max(0,Sl-El+1);if(0!==Ma){if(de.isMesh)!0===ee.wireframe?(qe.setLineWidth(ee.wireframeLinewidth*St()),En.setMode(1)):En.setMode(4);else if(de.isLine){let Sn=ee.linewidth;void 0===Sn&&(Sn=1),qe.setLineWidth(Sn*St()),En.setMode(de.isLineSegments?1:de.isLineLoop?2:3)}else de.isPoints?En.setMode(0):de.isSprite&&En.setMode(4);if(de.isInstancedMesh)En.renderInstances(El,Ma,de.count);else if(re.isInstancedBufferGeometry){const Sn=Math.min(re.instanceCount,re._maxInstanceCount);En.renderInstances(El,Ma,Sn)}else En.render(El,Ma)}},this.compile=function(O,Z){h=I.get(O),h.init(),m.push(h),O.traverseVisible(function(re){re.isLight&&re.layers.test(Z.layers)&&(h.pushLight(re),re.castShadow&&h.pushShadow(re))}),h.setupLights(v.physicallyCorrectLights),O.traverse(function(re){const ee=re.material;if(ee)if(Array.isArray(ee))for(let de=0;de<ee.length;de++)ww(ee[de],O,re);else ww(ee,O,re)}),m.pop(),h=null};let In=null;function GI(){wl.stop()}function jI(){wl.start()}const wl=new cD;function WI(O,Z,re,ee){if(!1===O.visible)return;if(O.layers.test(Z.layers))if(O.isGroup)re=O.renderOrder;else if(O.isLOD)!0===O.autoUpdate&&O.update(Z);else if(O.isLight)h.pushLight(O),O.castShadow&&h.pushShadow(O);else if(O.isSprite){if(!O.frustumCulled||Ce.intersectsSprite(O)){ee&&Ae.setFromMatrixPosition(O.matrixWorld).applyMatrix4(Ie);const Ke=st.update(O),xt=O.material;xt.visible&&d.push(O,Ke,xt,re,Ae.z,null)}}else if((O.isMesh||O.isLine||O.isPoints)&&(O.isSkinnedMesh&&O.skeleton.frame!==Dt.render.frame&&(O.skeleton.update(),O.skeleton.frame=Dt.render.frame),!O.frustumCulled||Ce.intersectsObject(O))){ee&&Ae.setFromMatrixPosition(O.matrixWorld).applyMatrix4(Ie);const Ke=st.update(O),xt=O.material;if(Array.isArray(xt)){const ct=Ke.groups;for(let Nt=0,wt=ct.length;Nt<wt;Nt++){const Ft=ct[Nt],En=xt[Ft.materialIndex];En&&En.visible&&d.push(O,Ke,En,re,Ae.z,Ft)}}else xt.visible&&d.push(O,Ke,xt,re,Ae.z,null)}const lt=O.children;for(let Ke=0,xt=lt.length;Ke<xt;Ke++)WI(lt[Ke],Z,re,ee)}function $I(O,Z,re,ee){const de=O.opaque,lt=O.transmissive,Ke=O.transparent;h.setupLightsView(re),lt.length>0&&function(O,Z,re){null===ue&&(ue=new(!0===s&&!0===Ue.isWebGL2?qb:Gn)(1024,1024,{generateMipmaps:!0,type:null!==k.convert(qc)?qc:ta,minFilter:1008,magFilter:Qn,wrapS:Ai,wrapT:Ai,useRenderToTexture:Qe.has("WEBGL_multisampled_render_to_texture")}));const ee=v.getRenderTarget();v.setRenderTarget(ue),v.clear();const de=v.toneMapping;v.toneMapping=0,s_(O,Z,re),v.toneMapping=de,ye.updateMultisampleRenderTarget(ue),ye.updateRenderTargetMipmap(ue),v.setRenderTarget(ee)}(de,Z,re),ee&&qe.viewport(L.copy(ee)),de.length>0&&s_(de,Z,re),lt.length>0&&s_(lt,Z,re),Ke.length>0&&s_(Ke,Z,re)}function s_(O,Z,re){const ee=!0===Z.isScene?Z.overrideMaterial:null;for(let de=0,lt=O.length;de<lt;de++){const Ke=O[de],xt=Ke.object,ct=Ke.geometry,Nt=null===ee?Ke.material:ee,wt=Ke.group;xt.layers.test(re.layers)&&zJ(xt,Z,re,ct,Nt,wt)}}function zJ(O,Z,re,ee,de,lt){O.onBeforeRender(v,Z,re,ee,de,lt),O.modelViewMatrix.multiplyMatrices(re.matrixWorldInverse,O.matrixWorld),O.normalMatrix.getNormalMatrix(O.modelViewMatrix),de.onBeforeRender(v,Z,re,ee,O,lt),!0===de.transparent&&2===de.side?(de.side=1,de.needsUpdate=!0,v.renderBufferDirect(re,Z,ee,de,O,lt),de.side=0,de.needsUpdate=!0,v.renderBufferDirect(re,Z,ee,de,O,lt),de.side=2):v.renderBufferDirect(re,Z,ee,de,O,lt),O.onAfterRender(v,Z,re,ee,de,lt)}function ww(O,Z,re){!0!==Z.isScene&&(Z=ze);const ee=ae.get(O),de=h.state.lights,Ke=de.state.version,xt=bt.getParameters(O,de.state,h.state.shadowsArray,Z,re),ct=bt.getProgramCacheKey(xt);let Nt=ee.programs;ee.environment=O.isMeshStandardMaterial?Z.environment:null,ee.fog=Z.fog,ee.envMap=(O.isMeshStandardMaterial?Re:we).get(O.envMap||ee.environment),void 0===Nt&&(O.addEventListener("dispose",rn),Nt=new Map,ee.programs=Nt);let wt=Nt.get(ct);if(void 0!==wt){if(ee.currentProgram===wt&&ee.lightsStateVersion===Ke)return qI(O,xt),wt}else xt.uniforms=bt.getUniforms(O),O.onBuild(re,xt,v),O.onBeforeCompile(xt,v),wt=bt.acquireProgram(xt,ct),Nt.set(ct,wt),ee.uniforms=xt.uniforms;const Ft=ee.uniforms;(!O.isShaderMaterial&&!O.isRawShaderMaterial||!0===O.clipping)&&(Ft.clippingPlanes=ge.uniform),qI(O,xt),ee.needsLights=function(O){return O.isMeshLambertMaterial||O.isMeshToonMaterial||O.isMeshPhongMaterial||O.isMeshStandardMaterial||O.isShadowMaterial||O.isShaderMaterial&&!0===O.lights}(O),ee.lightsStateVersion=Ke,ee.needsLights&&(Ft.ambientLightColor.value=de.state.ambient,Ft.lightProbe.value=de.state.probe,Ft.directionalLights.value=de.state.directional,Ft.directionalLightShadows.value=de.state.directionalShadow,Ft.spotLights.value=de.state.spot,Ft.spotLightShadows.value=de.state.spotShadow,Ft.rectAreaLights.value=de.state.rectArea,Ft.ltc_1.value=de.state.rectAreaLTC1,Ft.ltc_2.value=de.state.rectAreaLTC2,Ft.pointLights.value=de.state.point,Ft.pointLightShadows.value=de.state.pointShadow,Ft.hemisphereLights.value=de.state.hemi,Ft.directionalShadowMap.value=de.state.directionalShadowMap,Ft.directionalShadowMatrix.value=de.state.directionalShadowMatrix,Ft.spotShadowMap.value=de.state.spotShadowMap,Ft.spotShadowMatrix.value=de.state.spotShadowMatrix,Ft.pointShadowMap.value=de.state.pointShadowMap,Ft.pointShadowMatrix.value=de.state.pointShadowMatrix);const En=wt.getUniforms(),Cl=ha.seqWithValue(En.seq,Ft);return ee.currentProgram=wt,ee.uniformsList=Cl,wt}function qI(O,Z){const re=ae.get(O);re.outputEncoding=Z.outputEncoding,re.instancing=Z.instancing,re.skinning=Z.skinning,re.morphTargets=Z.morphTargets,re.morphNormals=Z.morphNormals,re.morphTargetsCount=Z.morphTargetsCount,re.numClippingPlanes=Z.numClippingPlanes,re.numIntersection=Z.numClipIntersection,re.vertexAlphas=Z.vertexAlphas,re.vertexTangents=Z.vertexTangents}wl.setAnimationLoop(function(O){In&&In(O)}),"undefined"!=typeof window&&wl.setContext(window),this.setAnimationLoop=function(O){In=O,Ee.setAnimationLoop(O),null===O?wl.stop():wl.start()},Ee.addEventListener("sessionstart",GI),Ee.addEventListener("sessionend",jI),this.render=function(O,Z){if(void 0===Z||!0===Z.isCamera){if(!0!==w){if(!0===O.autoUpdate&&O.updateMatrixWorld(),null===Z.parent&&Z.updateMatrixWorld(),!0===Ee.enabled&&!0===Ee.isPresenting&&(!0===Ee.cameraAutoUpdate&&Ee.updateCamera(Z),Z=Ee.getCamera()),!0===O.isScene&&O.onBeforeRender(v,O,Z,M),h=I.get(O,m.length),h.init(),m.push(h),Ie.multiplyMatrices(Z.projectionMatrix,Z.matrixWorldInverse),Ce.setFromProjectionMatrix(Ie),le=this.localClippingEnabled,ke=ge.init(this.clippingPlanes,le,Z),d=N.get(O,f.length),d.init(),f.push(d),WI(O,Z,0,v.sortObjects),d.finish(),!0===v.sortObjects&&d.sort(he,Y),!0===ke&&ge.beginShadows(),fe.render(h.state.shadowsArray,O,Z),!0===ke&&ge.endShadows(),!0===this.info.autoReset&&this.info.reset(),Ve.render(d,O),h.setupLights(v.physicallyCorrectLights),Z.isArrayCamera){const ee=Z.cameras;for(let de=0,lt=ee.length;de<lt;de++){const Ke=ee[de];$I(d,O,Ke,Ke.viewport)}}else $I(d,O,Z);null!==M&&(ye.updateMultisampleRenderTarget(M),ye.updateRenderTargetMipmap(M)),!0===O.isScene&&O.onAfterRender(v,O,Z),qe.buffers.depth.setTest(!0),qe.buffers.depth.setMask(!0),qe.buffers.color.setMask(!0),qe.setPolygonOffset(!1),se.resetDefaultState(),C=-1,A=null,m.pop(),h=m.length>0?m[m.length-1]:null,f.pop(),d=f.length>0?f[f.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return y},this.getActiveMipmapLevel=function(){return _},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(O,Z,re){ae.get(O.texture).__webglTexture=Z,ae.get(O.depthTexture).__webglTexture=re;const ee=ae.get(O);ee.__hasExternalTextures=!0,ee.__hasExternalTextures&&(ee.__autoAllocateDepthBuffer=void 0===re,ee.__autoAllocateDepthBuffer||O.useRenderToTexture&&(console.warn("render-to-texture extension was disabled because an external texture was provided"),O.useRenderToTexture=!1,O.useRenderbuffer=!0))},this.setRenderTargetFramebuffer=function(O,Z){const re=ae.get(O);re.__webglFramebuffer=Z,re.__useDefaultFramebuffer=void 0===Z},this.setRenderTarget=function(O,Z=0,re=0){M=O,y=Z,_=re;let ee=!0;if(O){const ct=ae.get(O);void 0!==ct.__useDefaultFramebuffer?(qe.bindFramebuffer(36160,null),ee=!1):void 0===ct.__webglFramebuffer?ye.setupRenderTarget(O):ct.__hasExternalTextures&&ye.rebindTextures(O,ae.get(O.texture).__webglTexture,ae.get(O.depthTexture).__webglTexture)}let de=null,lt=!1,Ke=!1;if(O){const ct=O.texture;(ct.isDataTexture3D||ct.isDataTexture2DArray)&&(Ke=!0);const Nt=ae.get(O).__webglFramebuffer;O.isWebGLCubeRenderTarget?(de=Nt[Z],lt=!0):de=O.useRenderbuffer?ae.get(O).__webglMultisampledFramebuffer:Nt,L.copy(O.viewport),P.copy(O.scissor),z=O.scissorTest}else L.copy(q).multiplyScalar(B).floor(),P.copy(K).multiplyScalar(B).floor(),z=Q;if(qe.bindFramebuffer(36160,de)&&Ue.drawBuffers&&ee){let ct=!1;if(O)if(O.isWebGLMultipleRenderTargets){const Nt=O.texture;if(ie.length!==Nt.length||36064!==ie[0]){for(let wt=0,Ft=Nt.length;wt<Ft;wt++)ie[wt]=36064+wt;ie.length=Nt.length,ct=!0}}else(1!==ie.length||36064!==ie[0])&&(ie[0]=36064,ie.length=1,ct=!0);else(1!==ie.length||1029!==ie[0])&&(ie[0]=1029,ie.length=1,ct=!0);ct&&(Ue.isWebGL2?me.drawBuffers(ie):Qe.get("WEBGL_draw_buffers").drawBuffersWEBGL(ie))}if(qe.viewport(L),qe.scissor(P),qe.setScissorTest(z),lt){const ct=ae.get(O.texture);me.framebufferTexture2D(36160,36064,34069+Z,ct.__webglTexture,re)}else if(Ke){const ct=ae.get(O.texture);me.framebufferTextureLayer(36160,36064,ct.__webglTexture,re||0,Z||0)}C=-1},this.readRenderTargetPixels=function(O,Z,re,ee,de,lt,Ke){if(!O||!O.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let xt=ae.get(O).__webglFramebuffer;if(O.isWebGLCubeRenderTarget&&void 0!==Ke&&(xt=xt[Ke]),xt){qe.bindFramebuffer(36160,xt);try{const ct=O.texture,Nt=ct.format,wt=ct.type;if(Nt!==li&&k.convert(Nt)!==me.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const Ft=wt===qc&&(Qe.has("EXT_color_buffer_half_float")||Ue.isWebGL2&&Qe.has("EXT_color_buffer_float"));if(!(wt===ta||k.convert(wt)===me.getParameter(35738)||wt===gs&&(Ue.isWebGL2||Qe.has("OES_texture_float")||Qe.has("WEBGL_color_buffer_float"))||Ft))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===me.checkFramebufferStatus(36160)?Z>=0&&Z<=O.width-ee&&re>=0&&re<=O.height-de&&me.readPixels(Z,re,ee,de,k.convert(Nt),k.convert(wt),lt):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const ct=null!==M?ae.get(M).__webglFramebuffer:null;qe.bindFramebuffer(36160,ct)}}},this.copyFramebufferToTexture=function(O,Z,re=0){const ee=Math.pow(2,-re),de=Math.floor(Z.image.width*ee),lt=Math.floor(Z.image.height*ee);let Ke=k.convert(Z.format);Ue.isWebGL2&&(6407===Ke&&(Ke=32849),6408===Ke&&(Ke=32856)),ye.setTexture2D(Z,0),me.copyTexImage2D(3553,re,Ke,O.x,O.y,de,lt,0),qe.unbindTexture()},this.copyTextureToTexture=function(O,Z,re,ee=0){const de=Z.image.width,lt=Z.image.height,Ke=k.convert(re.format),xt=k.convert(re.type);ye.setTexture2D(re,0),me.pixelStorei(37440,re.flipY),me.pixelStorei(37441,re.premultiplyAlpha),me.pixelStorei(3317,re.unpackAlignment),Z.isDataTexture?me.texSubImage2D(3553,ee,O.x,O.y,de,lt,Ke,xt,Z.image.data):Z.isCompressedTexture?me.compressedTexSubImage2D(3553,ee,O.x,O.y,Z.mipmaps[0].width,Z.mipmaps[0].height,Ke,Z.mipmaps[0].data):me.texSubImage2D(3553,ee,O.x,O.y,Ke,xt,Z.image),0===ee&&re.generateMipmaps&&me.generateMipmap(3553),qe.unbindTexture()},this.copyTextureToTexture3D=function(O,Z,re,ee,de=0){if(v.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const lt=O.max.x-O.min.x+1,Ke=O.max.y-O.min.y+1,xt=O.max.z-O.min.z+1,ct=k.convert(ee.format),Nt=k.convert(ee.type);let wt;if(ee.isDataTexture3D)ye.setTexture3D(ee,0),wt=32879;else{if(!ee.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");ye.setTexture2DArray(ee,0),wt=35866}me.pixelStorei(37440,ee.flipY),me.pixelStorei(37441,ee.premultiplyAlpha),me.pixelStorei(3317,ee.unpackAlignment);const Ft=me.getParameter(3314),En=me.getParameter(32878),Cl=me.getParameter(3316),Vt=me.getParameter(3315),uf=me.getParameter(32877),sn=re.isCompressedTexture?re.mipmaps[0]:re.image;me.pixelStorei(3314,sn.width),me.pixelStorei(32878,sn.height),me.pixelStorei(3316,O.min.x),me.pixelStorei(3315,O.min.y),me.pixelStorei(32877,O.min.z),re.isDataTexture||re.isDataTexture3D?me.texSubImage3D(wt,de,Z.x,Z.y,Z.z,lt,Ke,xt,ct,Nt,sn.data):re.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),me.compressedTexSubImage3D(wt,de,Z.x,Z.y,Z.z,lt,Ke,xt,ct,sn.data)):me.texSubImage3D(wt,de,Z.x,Z.y,Z.z,lt,Ke,xt,ct,Nt,sn),me.pixelStorei(3314,Ft),me.pixelStorei(32878,En),me.pixelStorei(3316,Cl),me.pixelStorei(3315,Vt),me.pixelStorei(32877,uf),0===de&&ee.generateMipmaps&&me.generateMipmap(wt),qe.unbindTexture()},this.initTexture=function(O){ye.setTexture2D(O,0),qe.unbindTexture()},this.resetState=function(){y=0,_=0,M=null,qe.reset(),se.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}$t.prototype.isWebGLRenderer=!0,class extends $t{}.prototype.isWebGL1Renderer=!0;class lm{constructor(e,t=25e-5){this.name="",this.color=new xe(e),this.density=t}clone(){return new lm(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}lm.prototype.isFogExp2=!0;class cm{constructor(e,t=1,i=1e3){this.name="",this.color=new xe(e),this.near=t,this.far=i}clone(){return new cm(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}cm.prototype.isFog=!0;class um extends Ut{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}um.prototype.isScene=!0;class bu{constructor(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=Eh,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=gr()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,o=this.stride;r<o;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=gr()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=gr()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}bu.prototype.isInterleavedBuffer=!0;const An=new D;class pl{constructor(e,t,i,r=!1){this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)An.x=this.getX(t),An.y=this.getY(t),An.z=this.getZ(t),An.applyMatrix4(e),this.setXYZ(t,An.x,An.y,An.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)An.x=this.getX(t),An.y=this.getY(t),An.z=this.getZ(t),An.applyNormalMatrix(e),this.setXYZ(t,An.x,An.y,An.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)An.x=this.getX(t),An.y=this.getY(t),An.z=this.getZ(t),An.transformDirection(e),this.setXYZ(t,An.x,An.y,An.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,i){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,o){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=o,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[r+o])}return new Zt(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new pl(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[r+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}pl.prototype.isInterleavedBufferAttribute=!0;class zh extends yi{constructor(e){super(),this.type="SpriteMaterial",this.color=new xe(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}let xu;zh.prototype.isSpriteMaterial=!0;const Bh=new D,wu=new D,Cu=new D,Mu=new ne,Uh=new ne,WD=new He,dm=new D,Vh=new D,hm=new D,$D=new ne,Ox=new ne,qD=new ne;class Hh extends Ut{constructor(e){if(super(),this.type="Sprite",void 0===xu){xu=new Ze;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new bu(t,5);xu.setIndex([0,1,2,0,2,3]),xu.setAttribute("position",new pl(i,3,0,!1)),xu.setAttribute("uv",new pl(i,2,3,!1))}this.geometry=xu,this.material=void 0!==e?e:new zh,this.center=new ne(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),wu.setFromMatrixScale(this.matrixWorld),WD.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Cu.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&wu.multiplyScalar(-Cu.z);const i=this.material.rotation;let r,o;0!==i&&(o=Math.cos(i),r=Math.sin(i));const s=this.center;fm(dm.set(-.5,-.5,0),Cu,s,wu,r,o),fm(Vh.set(.5,-.5,0),Cu,s,wu,r,o),fm(hm.set(.5,.5,0),Cu,s,wu,r,o),$D.set(0,0),Ox.set(1,0),qD.set(1,1);let a=e.ray.intersectTriangle(dm,Vh,hm,!1,Bh);if(null===a&&(fm(Vh.set(-.5,.5,0),Cu,s,wu,r,o),Ox.set(0,1),a=e.ray.intersectTriangle(dm,hm,Vh,!1,Bh),null===a))return;const l=e.ray.origin.distanceTo(Bh);l<e.near||l>e.far||t.push({distance:l,point:Bh.clone(),uv:jn.getUV(Bh,dm,Vh,hm,$D,Ox,qD,new ne),face:null,object:this})}copy(e){return super.copy(e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function fm(n,e,t,i,r,o){Mu.subVectors(n,t).addScalar(.5).multiply(i),void 0!==r?(Uh.x=o*Mu.x-r*Mu.y,Uh.y=r*Mu.x+o*Mu.y):Uh.copy(Mu),n.copy(e),n.x+=Uh.x,n.y+=Uh.y,n.applyMatrix4(WD)}Hh.prototype.isSprite=!0;const YD=new D,ZD=new qt,JD=new qt,xq=new D,QD=new He;class Ix extends Cn{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new He,this.bindMatrixInverse=new He}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new qt,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.x=t.getX(i),e.y=t.getY(i),e.z=t.getZ(i),e.w=t.getW(i);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const i=this.skeleton,r=this.geometry;ZD.fromBufferAttribute(r.attributes.skinIndex,e),JD.fromBufferAttribute(r.attributes.skinWeight,e),YD.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let o=0;o<4;o++){const s=JD.getComponent(o);if(0!==s){const a=ZD.getComponent(o);QD.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(xq.copy(YD).applyMatrix4(QD),s)}}return t.applyMatrix4(this.bindMatrixInverse)}}Ix.prototype.isSkinnedMesh=!0;(class extends Ut{constructor(){super(),this.type="Bone"}}).prototype.isBone=!0;(class extends Pn{constructor(e=null,t=1,i=1,r,o,s,a,l,c=Qn,u=Qn,d,h){super(null,s,a,l,c,u,r,o,d,h),this.image={data:e,width:t,height:i},this.magFilter=c,this.minFilter=u,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}).prototype.isDataTexture=!0;class Su extends Zt{constructor(e,t,i,r=1){"number"==typeof i&&(r=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,i),this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}Su.prototype.isInstancedBufferAttribute=!0;const eO=new He,tO=new He,gm=[],Gh=new Cn;(class extends Cn{constructor(e,t,i){super(e,t),this.instanceMatrix=new Su(new Float32Array(16*i),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Gh.geometry=this.geometry,Gh.material=this.material,void 0!==Gh.material)for(let o=0;o<r;o++){this.getMatrixAt(o,eO),tO.multiplyMatrices(i,eO),Gh.matrixWorld=tO,Gh.raycast(e,gm);for(let s=0,a=gm.length;s<a;s++){const l=gm[s];l.instanceId=o,l.object=this,t.push(l)}gm.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new Su(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}).prototype.isInstancedMesh=!0;class bi extends yi{constructor(e){super(),this.type="LineBasicMaterial",this.color=new xe(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}bi.prototype.isLineBasicMaterial=!0;const iO=new D,rO=new D,oO=new He,kx=new ll,mm=new al;class gl extends Ut{constructor(e=new Ze,t=new bi){super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,i=[0];for(let r=1,o=t.count;r<o;r++)iO.fromBufferAttribute(t,r-1),rO.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=iO.distanceTo(rO);e.setAttribute("lineDistance",new Fe(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,o=e.params.Line.threshold,s=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),mm.copy(i.boundingSphere),mm.applyMatrix4(r),mm.radius+=o,!1===e.ray.intersectsSphere(mm))return;oO.copy(r).invert(),kx.copy(e.ray).applyMatrix4(oO);const a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new D,u=new D,d=new D,h=new D,f=this.isLineSegments?2:1;if(i.isBufferGeometry){const m=i.index,w=i.attributes.position;if(null!==m)for(let M=Math.max(0,s.start),C=Math.min(m.count,s.start+s.count)-1;M<C;M+=f){const A=m.getX(M),L=m.getX(M+1);if(c.fromBufferAttribute(w,A),u.fromBufferAttribute(w,L),kx.distanceSqToSegment(c,u,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const z=e.ray.origin.distanceTo(h);z<e.near||z>e.far||t.push({distance:z,point:d.clone().applyMatrix4(this.matrixWorld),index:M,face:null,faceIndex:null,object:this})}else for(let M=Math.max(0,s.start),C=Math.min(w.count,s.start+s.count)-1;M<C;M+=f){if(c.fromBufferAttribute(w,M),u.fromBufferAttribute(w,M+1),kx.distanceSqToSegment(c,u,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const L=e.ray.origin.distanceTo(h);L<e.near||L>e.far||t.push({distance:L,point:d.clone().applyMatrix4(this.matrixWorld),index:M,face:null,faceIndex:null,object:this})}}else i.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){const a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}gl.prototype.isLine=!0;const sO=new D,aO=new D;class fa extends gl{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,i=[];for(let r=0,o=t.count;r<o;r+=2)sO.fromBufferAttribute(t,r),aO.fromBufferAttribute(t,r+1),i[r]=0===r?0:i[r-1],i[r+1]=i[r]+sO.distanceTo(aO);e.setAttribute("lineDistance",new Fe(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}fa.prototype.isLineSegments=!0;(class extends gl{constructor(e,t){super(e,t),this.type="LineLoop"}}).prototype.isLineLoop=!0;class Tu extends yi{constructor(e){super(),this.type="PointsMaterial",this.color=new xe(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}Tu.prototype.isPointsMaterial=!0;const cO=new He,Fx=new ll,_m=new al,vm=new D;function uO(n,e,t,i,r,o,s){const a=Fx.distanceSqToPoint(n);if(a<t){const l=new D;Fx.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;o.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:s})}}(class extends Ut{constructor(e=new Ze,t=new Tu){super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,o=e.params.Points.threshold,s=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),_m.copy(i.boundingSphere),_m.applyMatrix4(r),_m.radius+=o,!1===e.ray.intersectsSphere(_m))return;cO.copy(r).invert(),Fx.copy(e.ray).applyMatrix4(cO);const a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a;if(i.isBufferGeometry){const c=i.index,d=i.attributes.position;if(null!==c)for(let m=Math.max(0,s.start),v=Math.min(c.count,s.start+s.count);m<v;m++){const w=c.getX(m);vm.fromBufferAttribute(d,w),uO(vm,w,l,r,e,t,this)}else for(let m=Math.max(0,s.start),v=Math.min(d.count,s.start+s.count);m<v;m++)vm.fromBufferAttribute(d,m),uO(vm,m,l,r,e,t,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){const a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}).prototype.isPoints=!0,class extends Pn{constructor(e,t,i,r,o,s,a,l,c){super(e,t,i,r,o,s,a,l,c),this.format=void 0!==a?a:nl,this.minFilter=void 0!==s?s:wn,this.magFilter=void 0!==o?o:wn,this.generateMipmaps=!1;const u=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(function d(){u.needsUpdate=!0,e.requestVideoFrameCallback(d)})}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e==0&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}.prototype.isVideoTexture=!0;(class extends Pn{constructor(e,t,i,r,o,s,a,l,c,u,d,h){super(null,s,a,l,c,u,r,o,d,h),this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}).prototype.isCompressedTexture=!0,class extends Pn{constructor(e,t,i,r,o,s,a,l,c){super(e,t,i,r,o,s,a,l,c),this.needsUpdate=!0}}.prototype.isCanvasTexture=!0;class ml extends Ze{constructor(e=1,t=1,i=1,r=8,o=1,s=!1,a=0,l=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:o,openEnded:s,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),o=Math.floor(o);const u=[],d=[],h=[],f=[];let m=0;const v=[],w=i/2;let y=0;function M(C){const A=m,L=new ne,P=new D;let z=0;const W=!0===C?e:t,$=!0===C?1:-1;for(let he=1;he<=r;he++)d.push(0,w*$,0),h.push(0,$,0),f.push(.5,.5),m++;const B=m;for(let he=0;he<=r;he++){const q=he/r*l+a,K=Math.cos(q),Q=Math.sin(q);P.x=W*Q,P.y=w*$,P.z=W*K,d.push(P.x,P.y,P.z),h.push(0,$,0),L.x=.5*K+.5,L.y=.5*Q*$+.5,f.push(L.x,L.y),m++}for(let he=0;he<r;he++){const Y=A+he,q=B+he;!0===C?u.push(q,q+1,Y):u.push(q+1,q,Y),z+=3}c.addGroup(y,z,!0===C?1:2),y+=z}(function(){const C=new D,A=new D;let L=0;const P=(t-e)/i;for(let z=0;z<=o;z++){const W=[],$=z/o,B=$*(t-e)+e;for(let he=0;he<=r;he++){const Y=he/r,q=Y*l+a,K=Math.sin(q),Q=Math.cos(q);A.x=B*K,A.y=-$*i+w,A.z=B*Q,d.push(A.x,A.y,A.z),C.set(K,P,Q).normalize(),h.push(C.x,C.y,C.z),f.push(Y,1-$),W.push(m++)}v.push(W)}for(let z=0;z<r;z++)for(let W=0;W<o;W++){const B=v[W+1][z],he=v[W+1][z+1],Y=v[W][z+1];u.push(v[W][z],B,Y),u.push(B,he,Y),L+=6}c.addGroup(y,L,0),y+=L})(),!1===s&&(e>0&&M(!0),t>0&&M(!1)),this.setIndex(u),this.setAttribute("position",new Fe(d,3)),this.setAttribute("normal",new Fe(h,3)),this.setAttribute("uv",new Fe(f,2))}static fromJSON(e){return new ml(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}new D,new D,new D,new jn;class Lr{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),o=0;t.push(0);for(let s=1;s<=e;s++)i=this.getPoint(s/e),o+=i.distanceTo(r),t.push(o),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const o=i.length;let s;s=t||e*i[o-1];let c,a=0,l=o-1;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-s,c<0)a=r+1;else{if(!(c>0)){l=r;break}l=r-1}if(r=l,i[r]===s)return r/(o-1);const u=i[r];return(r+(s-u)/(i[r+1]-u))/(o-1)}getTangent(e,t){const i=1e-4;let r=e-i,o=e+i;r<0&&(r=0),o>1&&(o=1);const s=this.getPoint(r),a=this.getPoint(o),l=t||(s.isVector2?new ne:new D);return l.copy(a).sub(s).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new D,r=[],o=[],s=[],a=new D,l=new He;for(let f=0;f<=e;f++)r[f]=this.getTangentAt(f/e,new D);o[0]=new D,s[0]=new D;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),d=Math.abs(r[0].y),h=Math.abs(r[0].z);u<=c&&(c=u,i.set(1,0,0)),d<=c&&(c=d,i.set(0,1,0)),h<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),o[0].crossVectors(r[0],a),s[0].crossVectors(r[0],o[0]);for(let f=1;f<=e;f++){if(o[f]=o[f-1].clone(),s[f]=s[f-1].clone(),a.crossVectors(r[f-1],r[f]),a.length()>Number.EPSILON){a.normalize();const m=Math.acos(vi(r[f-1].dot(r[f]),-1,1));o[f].applyMatrix4(l.makeRotationAxis(a,m))}s[f].crossVectors(r[f],o[f])}if(!0===t){let f=Math.acos(vi(o[0].dot(o[e]),-1,1));f/=e,r[0].dot(a.crossVectors(o[0],o[e]))>0&&(f=-f);for(let m=1;m<=e;m++)o[m].applyMatrix4(l.makeRotationAxis(r[m],f*m)),s[m].crossVectors(r[m],o[m])}return{tangents:r,normals:o,binormals:s}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Sm extends Lr{constructor(e=0,t=0,i=1,r=1,o=0,s=2*Math.PI,a=!1,l=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=o,this.aEndAngle=s,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const i=t||new ne,r=2*Math.PI;let o=this.aEndAngle-this.aStartAngle;const s=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=r;for(;o>r;)o-=r;o<Number.EPSILON&&(o=s?0:r),!0===this.aClockwise&&!s&&(o===r?o=-r:o-=r);const a=this.aStartAngle+e*o;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),h=l-this.aX,f=c-this.aY;l=h*u-f*d+this.aX,c=h*d+f*u+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}Sm.prototype.isEllipseCurve=!0;class fO extends Sm{constructor(e,t,i,r,o,s){super(e,t,i,i,r,o,s),this.type="ArcCurve"}}function zx(){let n=0,e=0,t=0,i=0;function r(o,s,a,l){n=o,e=a,t=-3*o+3*s-2*a-l,i=2*o-2*s+a+l}return{initCatmullRom:function(o,s,a,l,c){r(s,a,c*(a-o),c*(l-s))},initNonuniformCatmullRom:function(o,s,a,l,c,u,d){let h=(s-o)/c-(a-o)/(c+u)+(a-s)/u,f=(a-s)/u-(l-s)/(u+d)+(l-a)/d;h*=u,f*=u,r(s,a,h,f)},calc:function(o){const s=o*o;return n+e*o+t*s+i*(s*o)}}}fO.prototype.isArcCurve=!0;const Tm=new D,Bx=new zx,Ux=new zx,Vx=new zx;class pO extends Lr{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new D){const i=t,r=this.points,o=r.length,s=(o-(this.closed?0:1))*e;let c,u,a=Math.floor(s),l=s-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/o)+1)*o:0===l&&a===o-1&&(a=o-2,l=1),this.closed||a>0?c=r[(a-1)%o]:(Tm.subVectors(r[0],r[1]).add(r[0]),c=Tm);const d=r[a%o],h=r[(a+1)%o];if(this.closed||a+2<o?u=r[(a+2)%o]:(Tm.subVectors(r[o-1],r[o-2]).add(r[o-1]),u=Tm),"centripetal"===this.curveType||"chordal"===this.curveType){const f="chordal"===this.curveType?.5:.25;let m=Math.pow(c.distanceToSquared(d),f),v=Math.pow(d.distanceToSquared(h),f),w=Math.pow(h.distanceToSquared(u),f);v<1e-4&&(v=1),m<1e-4&&(m=v),w<1e-4&&(w=v),Bx.initNonuniformCatmullRom(c.x,d.x,h.x,u.x,m,v,w),Ux.initNonuniformCatmullRom(c.y,d.y,h.y,u.y,m,v,w),Vx.initNonuniformCatmullRom(c.z,d.z,h.z,u.z,m,v,w)}else"catmullrom"===this.curveType&&(Bx.initCatmullRom(c.x,d.x,h.x,u.x,this.tension),Ux.initCatmullRom(c.y,d.y,h.y,u.y,this.tension),Vx.initCatmullRom(c.z,d.z,h.z,u.z,this.tension));return i.set(Bx.calc(l),Ux.calc(l),Vx.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push((new D).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function gO(n,e,t,i,r){const o=.5*(i-e),s=.5*(r-t),a=n*n;return(2*t-2*i+o+s)*(n*a)+(-3*t+3*i-2*o-s)*a+o*n+t}function jh(n,e,t,i){return function(n,e){const t=1-n;return t*t*e}(n,e)+function(n,e){return 2*(1-n)*n*e}(n,t)+function(n,e){return n*n*e}(n,i)}function Wh(n,e,t,i,r){return function(n,e){const t=1-n;return t*t*t*e}(n,e)+function(n,e){const t=1-n;return 3*t*t*n*e}(n,t)+function(n,e){return 3*(1-n)*n*n*e}(n,i)+function(n,e){return n*n*n*e}(n,r)}pO.prototype.isCatmullRomCurve3=!0;class Hx extends Lr{constructor(e=new ne,t=new ne,i=new ne,r=new ne){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new ne){const i=t,r=this.v0,o=this.v1,s=this.v2,a=this.v3;return i.set(Wh(e,r.x,o.x,s.x,a.x),Wh(e,r.y,o.y,s.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}Hx.prototype.isCubicBezierCurve=!0;class mO extends Lr{constructor(e=new D,t=new D,i=new D,r=new D){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new D){const i=t,r=this.v0,o=this.v1,s=this.v2,a=this.v3;return i.set(Wh(e,r.x,o.x,s.x,a.x),Wh(e,r.y,o.y,s.y,a.y),Wh(e,r.z,o.z,s.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}mO.prototype.isCubicBezierCurve3=!0;class Pm extends Lr{constructor(e=new ne,t=new ne){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new ne){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const i=t||new ne;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Pm.prototype.isLineCurve=!0;class Gx extends Lr{constructor(e=new ne,t=new ne,i=new ne){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new ne){const i=t,r=this.v0,o=this.v1,s=this.v2;return i.set(jh(e,r.x,o.x,s.x),jh(e,r.y,o.y,s.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Gx.prototype.isQuadraticBezierCurve=!0;class jx extends Lr{constructor(e=new D,t=new D,i=new D){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new D){const i=t,r=this.v0,o=this.v1,s=this.v2;return i.set(jh(e,r.x,o.x,s.x),jh(e,r.y,o.y,s.y),jh(e,r.z,o.z,s.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}jx.prototype.isQuadraticBezierCurve3=!0;class Wx extends Lr{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new ne){const i=t,r=this.points,o=(r.length-1)*e,s=Math.floor(o),a=o-s,l=r[0===s?s:s-1],c=r[s],u=r[s>r.length-2?r.length-1:s+1],d=r[s>r.length-3?r.length-1:s+2];return i.set(gO(a,l.x,c.x,u.x,d.x),gO(a,l.y,c.y,u.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++)this.points.push(e.points[t].clone());return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++)e.points.push(this.points[t].toArray());return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push((new ne).fromArray(r))}return this}}Wx.prototype.isSplineCurve=!0;var $x=Object.freeze({__proto__:null,ArcCurve:fO,CatmullRomCurve3:pO,CubicBezierCurve:Hx,CubicBezierCurve3:mO,EllipseCurve:Sm,LineCurve:Pm,LineCurve3:class extends Lr{constructor(e=new D,t=new D){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new D){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:Gx,QuadraticBezierCurve3:jx,SplineCurve:Wx});class Rq extends Lr{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Pm(t,e))}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let o=0;for(;o<r.length;){if(r[o]>=i){const s=r[o]-i,a=this.curves[o],l=a.getLength();return a.getPointAt(0===l?0:1-s/l,t)}o++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,o=this.curves;r<o.length;r++){const s=o[r],l=s.getPoints(s&&s.isEllipseCurve?2*e:s&&(s.isLineCurve||s.isLineCurve3)?1:s&&s.isSplineCurve?e*s.points.length:e);for(let c=0;c<l.length;c++){const u=l[c];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++)e.curves.push(this.curves[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push((new $x[r.type]).fromJSON(r))}return this}}class Am extends Rq{constructor(e){super(),this.type="Path",this.currentPoint=new ne,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new Pm(this.currentPoint.clone(),new ne(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const o=new Gx(this.currentPoint.clone(),new ne(e,t),new ne(i,r));return this.curves.push(o),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,o,s){const a=new Hx(this.currentPoint.clone(),new ne(e,t),new ne(i,r),new ne(o,s));return this.curves.push(a),this.currentPoint.set(o,s),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new Wx(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,o,s){return this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,i,r,o,s),this}absarc(e,t,i,r,o,s){return this.absellipse(e,t,i,i,r,o,s),this}ellipse(e,t,i,r,o,s,a,l){return this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,i,r,o,s,a,l),this}absellipse(e,t,i,r,o,s,a,l){const c=new Sm(e,t,i,r,o,s,a,l);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Cs extends Am{constructor(e){super(e),this.uuid=gr(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++)this.holes.push(e.holes[t].clone());return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++)e.holes.push(this.holes[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push((new Am).fromJSON(r))}return this}}function _O(n,e,t,i,r){let o,s;if(r===function(n,e,t,i){let r=0;for(let o=e,s=t-i;o<t;o+=i)r+=(n[s]-n[o])*(n[o+1]+n[s+1]),s=o;return r}(n,e,t,i)>0)for(o=e;o<t;o+=i)s=bO(o,n[o],n[o+1],s);else for(o=t-i;o>=e;o-=i)s=bO(o,n[o],n[o+1],s);return s&&Dm(s,s.next)&&(Xh(s),s=s.next),s}function ga(n,e){if(!n)return n;e||(e=n);let i,t=n;do{if(i=!1,t.steiner||!Dm(t,t.next)&&0!==pn(t.prev,t,t.next))t=t.next;else{if(Xh(t),t=e=t.prev,t===t.next)break;i=!0}}while(i||t!==e);return e}function $h(n,e,t,i,r,o,s){if(!n)return;!s&&o&&function(n,e,t,i){let r=n;do{null===r.z&&(r.z=qx(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,function(n){let e,t,i,r,o,s,a,l,c=1;do{for(t=n,n=null,o=null,s=0;t;){for(s++,i=t,a=0,e=0;e<c&&(a++,i=i.nextZ,i);e++);for(l=c;a>0||l>0&&i;)0!==a&&(0===l||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:n=r,r.prevZ=o,o=r;t=i}o.nextZ=null,c*=2}while(s>1)}(r)}(n,i,r,o);let l,c,a=n;for(;n.prev!==n.next;)if(l=n.prev,c=n.next,o?Fq(n,i,r,o):kq(n))e.push(l.i/t),e.push(n.i/t),e.push(c.i/t),Xh(n),n=c.next,a=c.next;else if((n=c)===a){s?1===s?$h(n=Nq(ga(n),e,t),e,t,i,r,o,2):2===s&&zq(n,e,t,i,r,o):$h(ga(n),e,t,i,r,o,1);break}}function kq(n){const e=n.prev,t=n,i=n.next;if(pn(e,t,i)>=0)return!1;let r=n.next.next;for(;r!==n.prev;){if(Pu(e.x,e.y,t.x,t.y,i.x,i.y,r.x,r.y)&&pn(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Fq(n,e,t,i){const r=n.prev,o=n,s=n.next;if(pn(r,o,s)>=0)return!1;const c=r.x>o.x?r.x>s.x?r.x:s.x:o.x>s.x?o.x:s.x,u=r.y>o.y?r.y>s.y?r.y:s.y:o.y>s.y?o.y:s.y,d=qx(r.x<o.x?r.x<s.x?r.x:s.x:o.x<s.x?o.x:s.x,r.y<o.y?r.y<s.y?r.y:s.y:o.y<s.y?o.y:s.y,e,t,i),h=qx(c,u,e,t,i);let f=n.prevZ,m=n.nextZ;for(;f&&f.z>=d&&m&&m.z<=h;){if(f!==n.prev&&f!==n.next&&Pu(r.x,r.y,o.x,o.y,s.x,s.y,f.x,f.y)&&pn(f.prev,f,f.next)>=0||(f=f.prevZ,m!==n.prev&&m!==n.next&&Pu(r.x,r.y,o.x,o.y,s.x,s.y,m.x,m.y)&&pn(m.prev,m,m.next)>=0))return!1;m=m.nextZ}for(;f&&f.z>=d;){if(f!==n.prev&&f!==n.next&&Pu(r.x,r.y,o.x,o.y,s.x,s.y,f.x,f.y)&&pn(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;m&&m.z<=h;){if(m!==n.prev&&m!==n.next&&Pu(r.x,r.y,o.x,o.y,s.x,s.y,m.x,m.y)&&pn(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function Nq(n,e,t){let i=n;do{const r=i.prev,o=i.next.next;!Dm(r,o)&&vO(r,i,i.next,o)&&qh(r,o)&&qh(o,r)&&(e.push(r.i/t),e.push(i.i/t),e.push(o.i/t),Xh(i),Xh(i.next),i=n=o),i=i.next}while(i!==n);return ga(i)}function zq(n,e,t,i,r,o){let s=n;do{let a=s.next.next;for(;a!==s.prev;){if(s.i!==a.i&&qq(s,a)){let l=yO(s,a);return s=ga(s,s.next),l=ga(l,l.next),$h(s,e,t,i,r,o),void $h(l,e,t,i,r,o)}a=a.next}s=s.next}while(s!==n)}function Uq(n,e){return n.x-e.x}function Vq(n,e){if(e=function(n,e){let t=e;const i=n.x,r=n.y;let s,o=-1/0;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const h=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=i&&h>o){if(o=h,h===i){if(r===t.y)return t;if(r===t.next.y)return t.next}s=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!s)return null;if(i===o)return s;const a=s,l=s.x,c=s.y;let d,u=1/0;t=s;do{i>=t.x&&t.x>=l&&i!==t.x&&Pu(r<c?i:o,r,l,c,r<c?o:i,r,t.x,t.y)&&(d=Math.abs(r-t.y)/(i-t.x),qh(t,n)&&(d<u||d===u&&(t.x>s.x||t.x===s.x&&Gq(s,t)))&&(s=t,u=d)),t=t.next}while(t!==a);return s}(n,e),e){const t=yO(e,n);ga(e,e.next),ga(t,t.next)}}function Gq(n,e){return pn(n.prev,n,e.prev)<0&&pn(e.next,n,n.next)<0}function qx(n,e,t,i,r){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-t)*r)|n<<8))|n<<4))|n<<2))|n<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function $q(n){let e=n,t=n;do{(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next}while(e!==n);return t}function Pu(n,e,t,i,r,o,s,a){return(r-s)*(e-a)-(n-s)*(o-a)>=0&&(n-s)*(i-a)-(t-s)*(e-a)>=0&&(t-s)*(o-a)-(r-s)*(i-a)>=0}function qq(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!function(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&vO(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}(n,e)&&(qh(n,e)&&qh(e,n)&&function(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,o=(n.y+e.y)/2;do{t.y>o!=t.next.y>o&&t.next.y!==t.y&&r<(t.next.x-t.x)*(o-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next}while(t!==n);return i}(n,e)&&(pn(n.prev,n,e.prev)||pn(n,e.prev,e))||Dm(n,e)&&pn(n.prev,n,n.next)>0&&pn(e.prev,e,e.next)>0)}function pn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Dm(n,e){return n.x===e.x&&n.y===e.y}function vO(n,e,t,i){const r=Im(pn(n,e,t)),o=Im(pn(n,e,i)),s=Im(pn(t,i,n)),a=Im(pn(t,i,e));return!!(r!==o&&s!==a||0===r&&Om(n,t,e)||0===o&&Om(n,i,e)||0===s&&Om(t,n,i)||0===a&&Om(t,e,i))}function Om(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Im(n){return n>0?1:n<0?-1:0}function qh(n,e){return pn(n.prev,n,n.next)<0?pn(n,e,n.next)>=0&&pn(n,n.prev,e)>=0:pn(n,e,n.prev)<0||pn(n,n.next,e)<0}function yO(n,e){const t=new Xx(n.i,n.x,n.y),i=new Xx(e.i,e.x,e.y),r=n.next,o=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,o.next=i,i.prev=o,i}function bO(n,e,t,i){const r=new Xx(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Xh(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Xx(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Ms{static area(e){const t=e.length;let i=0;for(let r=t-1,o=0;o<t;r=o++)i+=e[r].x*e[o].y-e[o].x*e[r].y;return.5*i}static isClockWise(e){return Ms.area(e)<0}static triangulateShape(e,t){const i=[],r=[],o=[];xO(e),wO(i,e);let s=e.length;t.forEach(xO);for(let l=0;l<t.length;l++)r.push(s),s+=t[l].length,wO(i,t[l]);const a=function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let o=_O(n,0,r,t,!0);const s=[];if(!o||o.next===o.prev)return s;let a,l,c,u,d,h,f;if(i&&(o=function(n,e,t,i){const r=[];let o,s,a,l,c;for(o=0,s=e.length;o<s;o++)a=e[o]*i,l=o<s-1?e[o+1]*i:n.length,c=_O(n,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push($q(c));for(r.sort(Uq),o=0;o<r.length;o++)Vq(r[o],t),t=ga(t,t.next);return t}(n,e,o,t)),n.length>80*t){a=c=n[0],l=u=n[1];for(let m=t;m<r;m+=t)d=n[m],h=n[m+1],d<a&&(a=d),h<l&&(l=h),d>c&&(c=d),h>u&&(u=h);f=Math.max(c-a,u-l),f=0!==f?1/f:0}return $h(o,s,t,a,l,f),s}(i,r);for(let l=0;l<a.length;l+=3)o.push(a.slice(l,l+3));return o}}function xO(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function wO(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class ma extends Ze{constructor(e=new Cs([new ne(.5,.5),new ne(-.5,.5),new ne(-.5,-.5),new ne(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],o=[];for(let a=0,l=e.length;a<l;a++)s(e[a]);function s(a){const l=[],c=void 0!==t.curveSegments?t.curveSegments:12,u=void 0!==t.steps?t.steps:1;let d=void 0!==t.depth?t.depth:1,h=void 0===t.bevelEnabled||t.bevelEnabled,f=void 0!==t.bevelThickness?t.bevelThickness:.2,m=void 0!==t.bevelSize?t.bevelSize:f-.1,v=void 0!==t.bevelOffset?t.bevelOffset:0,w=void 0!==t.bevelSegments?t.bevelSegments:3;const y=t.extrudePath,_=void 0!==t.UVGenerator?t.UVGenerator:Jq;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),d=t.amount);let M,A,L,P,z,C=!1;y&&(M=y.getSpacedPoints(u),C=!0,h=!1,A=y.computeFrenetFrames(u,!1),L=new D,P=new D,z=new D),h||(w=0,f=0,m=0,v=0);const W=a.extractPoints(c);let $=W.shape;const B=W.holes;if(!Ms.isClockWise($)){$=$.reverse();for(let ae=0,ye=B.length;ae<ye;ae++){const we=B[ae];Ms.isClockWise(we)&&(B[ae]=we.reverse())}}const Y=Ms.triangulateShape($,B),q=$;for(let ae=0,ye=B.length;ae<ye;ae++)$=$.concat(B[ae]);function K(ae,ye,we){return ye||console.error("THREE.ExtrudeGeometry: vec does not exist"),ye.clone().multiplyScalar(we).add(ae)}const Q=$.length,ie=Y.length;function Ce(ae,ye,we){let Re,Se,rt;const st=ae.x-ye.x,bt=ae.y-ye.y,Xt=we.x-ae.x,N=we.y-ae.y,I=st*st+bt*bt;if(Math.abs(st*N-bt*Xt)>Number.EPSILON){const fe=Math.sqrt(I),Ve=Math.sqrt(Xt*Xt+N*N),Ne=ye.x-bt/fe,H=ye.y+st/fe,se=((we.x-N/Ve-Ne)*N-(we.y+Xt/Ve-H)*Xt)/(st*N-bt*Xt);Re=Ne+st*se-ae.x,Se=H+bt*se-ae.y;const ve=Re*Re+Se*Se;if(ve<=2)return new ne(Re,Se);rt=Math.sqrt(ve/2)}else{let fe=!1;st>Number.EPSILON?Xt>Number.EPSILON&&(fe=!0):st<-Number.EPSILON?Xt<-Number.EPSILON&&(fe=!0):Math.sign(bt)===Math.sign(N)&&(fe=!0),fe?(Re=-bt,Se=st,rt=Math.sqrt(I)):(Re=st,Se=bt,rt=Math.sqrt(I/2))}return new ne(Re/rt,Se/rt)}const ke=[];for(let ae=0,ye=q.length,we=ye-1,Re=ae+1;ae<ye;ae++,we++,Re++)we===ye&&(we=0),Re===ye&&(Re=0),ke[ae]=Ce(q[ae],q[we],q[Re]);const le=[];let ue,Ie=ke.concat();for(let ae=0,ye=B.length;ae<ye;ae++){const we=B[ae];ue=[];for(let Re=0,Se=we.length,rt=Se-1,st=Re+1;Re<Se;Re++,rt++,st++)rt===Se&&(rt=0),st===Se&&(st=0),ue[Re]=Ce(we[Re],we[rt],we[st]);le.push(ue),Ie=Ie.concat(ue)}for(let ae=0;ae<w;ae++){const ye=ae/w,we=f*Math.cos(ye*Math.PI/2),Re=m*Math.sin(ye*Math.PI/2)+v;for(let Se=0,rt=q.length;Se<rt;Se++){const st=K(q[Se],ke[Se],Re);_t(st.x,st.y,-we)}for(let Se=0,rt=B.length;Se<rt;Se++){const st=B[Se];ue=le[Se];for(let bt=0,Xt=st.length;bt<Xt;bt++){const N=K(st[bt],ue[bt],Re);_t(N.x,N.y,-we)}}}const Ae=m+v;for(let ae=0;ae<Q;ae++){const ye=h?K($[ae],Ie[ae],Ae):$[ae];C?(P.copy(A.normals[0]).multiplyScalar(ye.x),L.copy(A.binormals[0]).multiplyScalar(ye.y),z.copy(M[0]).add(P).add(L),_t(z.x,z.y,z.z)):_t(ye.x,ye.y,0)}for(let ae=1;ae<=u;ae++)for(let ye=0;ye<Q;ye++){const we=h?K($[ye],Ie[ye],Ae):$[ye];C?(P.copy(A.normals[ae]).multiplyScalar(we.x),L.copy(A.binormals[ae]).multiplyScalar(we.y),z.copy(M[ae]).add(P).add(L),_t(z.x,z.y,z.z)):_t(we.x,we.y,d/u*ae)}for(let ae=w-1;ae>=0;ae--){const ye=ae/w,we=f*Math.cos(ye*Math.PI/2),Re=m*Math.sin(ye*Math.PI/2)+v;for(let Se=0,rt=q.length;Se<rt;Se++){const st=K(q[Se],ke[Se],Re);_t(st.x,st.y,d+we)}for(let Se=0,rt=B.length;Se<rt;Se++){const st=B[Se];ue=le[Se];for(let bt=0,Xt=st.length;bt<Xt;bt++){const N=K(st[bt],ue[bt],Re);C?_t(N.x,N.y+M[u-1].y,M[u-1].x+we):_t(N.x,N.y,d+we)}}}function me(ae,ye){let we=ae.length;for(;--we>=0;){const Re=we;let Se=we-1;Se<0&&(Se=ae.length-1);for(let rt=0,st=u+2*w;rt<st;rt++){const bt=Q*rt,Xt=Q*(rt+1);Ue(ye+Re+bt,ye+Se+bt,ye+Se+Xt,ye+Re+Xt)}}}function _t(ae,ye,we){l.push(ae),l.push(ye),l.push(we)}function Qe(ae,ye,we){qe(ae),qe(ye),qe(we);const Re=r.length/3,Se=_.generateTopUV(i,r,Re-3,Re-2,Re-1);Dt(Se[0]),Dt(Se[1]),Dt(Se[2])}function Ue(ae,ye,we,Re){qe(ae),qe(ye),qe(Re),qe(ye),qe(we),qe(Re);const Se=r.length/3,rt=_.generateSideWallUV(i,r,Se-6,Se-3,Se-2,Se-1);Dt(rt[0]),Dt(rt[1]),Dt(rt[3]),Dt(rt[1]),Dt(rt[2]),Dt(rt[3])}function qe(ae){r.push(l[3*ae+0]),r.push(l[3*ae+1]),r.push(l[3*ae+2])}function Dt(ae){o.push(ae.x),o.push(ae.y)}(function(){const ae=r.length/3;if(h){let ye=0,we=Q*ye;for(let Re=0;Re<ie;Re++){const Se=Y[Re];Qe(Se[2]+we,Se[1]+we,Se[0]+we)}ye=u+2*w,we=Q*ye;for(let Re=0;Re<ie;Re++){const Se=Y[Re];Qe(Se[0]+we,Se[1]+we,Se[2]+we)}}else{for(let ye=0;ye<ie;ye++){const we=Y[ye];Qe(we[2],we[1],we[0])}for(let ye=0;ye<ie;ye++){const we=Y[ye];Qe(we[0]+Q*u,we[1]+Q*u,we[2]+Q*u)}}i.addGroup(ae,r.length/3-ae,0)})(),function(){const ae=r.length/3;let ye=0;me(q,ye),ye+=q.length;for(let we=0,Re=B.length;we<Re;we++){const Se=B[we];me(Se,ye),ye+=Se.length}i.addGroup(ae,r.length/3-ae,1)}()}this.setAttribute("position",new Fe(r,3)),this.setAttribute("uv",new Fe(o,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++)t.shapes.push(n[i].uuid);else t.shapes.push(n.uuid);return void 0!==e.extrudePath&&(t.options.extrudePath=e.extrudePath.toJSON()),t}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const i=[];for(let o=0,s=e.shapes.length;o<s;o++)i.push(t[e.shapes[o]]);const r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new $x[r.type]).fromJSON(r)),new ma(i,e.options)}}const Jq={generateTopUV:function(n,e,t,i,r){const a=e[3*i],l=e[3*i+1],c=e[3*r],u=e[3*r+1];return[new ne(e[3*t],e[3*t+1]),new ne(a,l),new ne(c,u)]},generateSideWallUV:function(n,e,t,i,r,o){const s=e[3*t],a=e[3*t+1],l=e[3*t+2],c=e[3*i],u=e[3*i+1],d=e[3*i+2],h=e[3*r],f=e[3*r+1],m=e[3*r+2],v=e[3*o],w=e[3*o+1],y=e[3*o+2];return Math.abs(a-u)<Math.abs(s-c)?[new ne(s,1-l),new ne(c,1-d),new ne(h,1-m),new ne(v,1-y)]:[new ne(a,1-l),new ne(u,1-d),new ne(f,1-m),new ne(w,1-y)]}};class Zh extends Ze{constructor(e=new Cs([new ne(0,.5),new ne(-.5,-.5),new ne(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],o=[],s=[];let a=0,l=0;if(!1===Array.isArray(e))c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;function c(u){const d=r.length/3,h=u.extractPoints(t);let f=h.shape;const m=h.holes;!1===Ms.isClockWise(f)&&(f=f.reverse());for(let w=0,y=m.length;w<y;w++){const _=m[w];!0===Ms.isClockWise(_)&&(m[w]=_.reverse())}const v=Ms.triangulateShape(f,m);for(let w=0,y=m.length;w<y;w++)f=f.concat(m[w]);for(let w=0,y=f.length;w<y;w++){const _=f[w];r.push(_.x,_.y,0),o.push(0,0,1),s.push(_.x,_.y)}for(let w=0,y=v.length;w<y;w++){const _=v[w];i.push(_[0]+d,_[1]+d,_[2]+d),l+=3}}this.setIndex(i),this.setAttribute("position",new Fe(r,3)),this.setAttribute("normal",new Fe(o,3)),this.setAttribute("uv",new Fe(s,2))}toJSON(){const e=super.toJSON();return function(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++)e.shapes.push(n[t].uuid);else e.shapes.push(n.uuid);return e}(this.parameters.shapes,e)}static fromJSON(e,t){const i=[];for(let r=0,o=e.shapes.length;r<o;r++)i.push(t[e.shapes[r]]);return new Zh(i,e.curveSegments)}}class Au extends Ze{constructor(e=1,t=32,i=16,r=0,o=2*Math.PI,s=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:o,thetaStart:s,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(s+a,Math.PI);let c=0;const u=[],d=new D,h=new D,f=[],m=[],v=[],w=[];for(let y=0;y<=i;y++){const _=[],M=y/i;let C=0;0==y&&0==s?C=.5/t:y==i&&l==Math.PI&&(C=-.5/t);for(let A=0;A<=t;A++){const L=A/t;d.x=-e*Math.cos(r+L*o)*Math.sin(s+M*a),d.y=e*Math.cos(s+M*a),d.z=e*Math.sin(r+L*o)*Math.sin(s+M*a),m.push(d.x,d.y,d.z),h.copy(d).normalize(),v.push(h.x,h.y,h.z),w.push(L+C,1-M),_.push(c++)}u.push(_)}for(let y=0;y<i;y++)for(let _=0;_<t;_++){const M=u[y][_+1],C=u[y][_],A=u[y+1][_],L=u[y+1][_+1];(0!==y||s>0)&&f.push(M,C,L),(y!==i-1||l<Math.PI)&&f.push(C,A,L)}this.setIndex(f),this.setAttribute("position",new Fe(m,3)),this.setAttribute("normal",new Fe(v,3)),this.setAttribute("uv",new Fe(w,2))}static fromJSON(e){return new Au(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}(class extends yi{constructor(e){super(),this.type="ShadowMaterial",this.color=new xe(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}).prototype.isShadowMaterial=!0;class Yx extends yi{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new xe(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ne(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}Yx.prototype.isMeshStandardMaterial=!0;(class extends Yx{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ne(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return vi(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenColor=new xe(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new xe(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new xe(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}).prototype.isMeshPhysicalMaterial=!0;class Um extends yi{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new xe(16777215),this.specular=new xe(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ne(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}Um.prototype.isMeshPhongMaterial=!0;(class extends yi{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new xe(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ne(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}).prototype.isMeshToonMaterial=!0;(class extends yi{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ne(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}).prototype.isMeshNormalMaterial=!0;(class extends yi{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new xe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}).prototype.isMeshLambertMaterial=!0;(class extends yi{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new xe(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ne(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}).prototype.isMeshMatcapMaterial=!0;(class extends bi{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}).prototype.isLineDashedMaterial=!0;const un={arraySlice:function(n,e,t){return un.isTypedArray(n)?new n.constructor(n.subarray(e,void 0!==t?t:n.length)):n.slice(e,t)},convertArray:function(n,e,t){return!n||!t&&n.constructor===e?n:"number"==typeof e.BYTES_PER_ELEMENT?new e(n):Array.prototype.slice.call(n)},isTypedArray:function(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)},getKeyframeOrder:function(n){const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(function(r,o){return n[r]-n[o]}),i},sortedArray:function(n,e,t){const i=n.length,r=new n.constructor(i);for(let o=0,s=0;s!==i;++o){const a=t[o]*e;for(let l=0;l!==e;++l)r[s++]=n[a+l]}return r},flattenJSON:function(n,e,t,i){let r=1,o=n[0];for(;void 0!==o&&void 0===o[i];)o=n[r++];if(void 0===o)return;let s=o[i];if(void 0!==s)if(Array.isArray(s))do{s=o[i],void 0!==s&&(e.push(o.time),t.push.apply(t,s)),o=n[r++]}while(void 0!==o);else if(void 0!==s.toArray)do{s=o[i],void 0!==s&&(e.push(o.time),s.toArray(t,t.length)),o=n[r++]}while(void 0!==o);else do{s=o[i],void 0!==s&&(e.push(o.time),t.push(s)),o=n[r++]}while(void 0!==o)},subclip:function(n,e,t,i,r=30){const o=n.clone();o.name=e;const s=[];for(let l=0;l<o.tracks.length;++l){const c=o.tracks[l],u=c.getValueSize(),d=[],h=[];for(let f=0;f<c.times.length;++f){const m=c.times[f]*r;if(!(m<t||m>=i)){d.push(c.times[f]);for(let v=0;v<u;++v)h.push(c.values[f*u+v])}}0!==d.length&&(c.times=un.convertArray(d,c.times.constructor),c.values=un.convertArray(h,c.values.constructor),s.push(c))}o.tracks=s;let a=1/0;for(let l=0;l<o.tracks.length;++l)a>o.tracks[l].times[0]&&(a=o.tracks[l].times[0]);for(let l=0;l<o.tracks.length;++l)o.tracks[l].shift(-1*a);return o.resetDuration(),o},makeClipAdditive:function(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,o=e/i;for(let s=0;s<r;++s){const a=t.tracks[s],l=a.ValueTypeName;if("bool"===l||"string"===l)continue;const c=n.tracks.find(function(y){return y.name===a.name&&y.ValueTypeName===l});if(void 0===c)continue;let u=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=d/3);let h=0;const f=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=f/3);const m=a.times.length-1;let v;if(o<=a.times[0])v=un.arraySlice(a.values,u,d-u);else if(o>=a.times[m]){const y=m*d+u;v=un.arraySlice(a.values,y,y+d-u)}else{const y=a.createInterpolant(),_=u,M=d-u;y.evaluate(o),v=un.arraySlice(y.resultBuffer,_,M)}"quaternion"===l&&(new ui).fromArray(v).normalize().conjugate().toArray(v);const w=c.times.length;for(let y=0;y<w;++y){const _=y*f+h;if("quaternion"===l)ui.multiplyQuaternionsFlat(c.values,_,v,0,c.values,_);else{const M=f-2*h;for(let C=0;C<M;++C)c.values[_+C]-=v[C]}}}return n.blendMode=2501,n}};class _a{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],o=t[i-1];e:{t:{let s;n:{i:if(!(e<r)){for(let a=i+2;;){if(void 0===r){if(e<o)break i;return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,e,o)}if(i===a)break;if(o=r,r=t[++i],e<r)break t}s=t.length;break n}if(e>=o)break e;{const a=t[1];e<a&&(i=2,o=a);for(let l=i-2;;){if(void 0===o)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(i===l)break;if(r=o,o=t[--i-1],e>=o)break t}s=i,i=0}}for(;i<s;){const a=i+s>>>1;e<t[a]?s=a:i=a+1}if(r=t[i],o=t[i-1],void 0===o)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,o,e)}this._cachedIndex=i,this.intervalChanged_(i,o,r)}return this.interpolate_(i,o,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,o=e*r;for(let s=0;s!==r;++s)t[s]=i[o+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}_a.prototype.beforeStart_=_a.prototype.copySampleValue_,_a.prototype.afterEnd_=_a.prototype.copySampleValue_;class tX extends _a{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Zc,endingEnd:Zc}}intervalChanged_(e,t,i){const r=this.parameterPositions;let o=e-2,s=e+1,a=r[o],l=r[s];if(void 0===a)switch(this.getSettings_().endingStart){case Jc:o=e,a=2*t-i;break;case 2402:o=r.length-2,a=t+r[o]-r[o+1];break;default:o=e,a=i}if(void 0===l)switch(this.getSettings_().endingEnd){case Jc:s=e,l=2*i-t;break;case 2402:s=1,l=i+r[1]-r[0];break;default:s=e-1,l=t}const c=.5*(i-t),u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=o*u,this._offsetNext=s*u}interpolate_(e,t,i,r){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,f=this._weightNext,m=(i-t)/(r-t),v=m*m,w=v*m,y=-h*w+2*h*v-h*m,_=(1+h)*w+(-1.5-2*h)*v+(-.5+h)*m+1,M=(-1-f)*w+(1.5+f)*v+.5*m,C=f*w-f*v;for(let A=0;A!==a;++A)o[A]=y*s[u+A]+_*s[c+A]+M*s[l+A]+C*s[d+A];return o}}class RO extends _a{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(i-t)/(r-t),d=1-u;for(let h=0;h!==a;++h)o[h]=s[c+h]*d+s[l+h]*u;return o}}class nX extends _a{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class jo{constructor(e,t,i,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=un.convertArray(t,this.TimeBufferType),this.values=un.convertArray(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:un.convertArray(e.times,Array),values:un.convertArray(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new nX(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new RO(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new tX(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let o=0,s=r-1;for(;o!==r&&i[o]<e;)++o;for(;-1!==s&&i[s]>t;)--s;if(++s,0!==o||s!==r){o>=s&&(s=Math.max(s,1),o=s-1);const a=this.getValueSize();this.times=un.arraySlice(i,o,s),this.values=un.arraySlice(this.values,o*a,s*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,o=i.length;0===o&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let a=0;a!==o;a++){const l=i[a];if("number"==typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(null!==s&&s>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,s),e=!1;break}s=l}if(void 0!==r&&un.isTypedArray(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=un.arraySlice(this.times),t=un.arraySlice(this.values),i=this.getValueSize(),r=2302===this.getInterpolation(),o=e.length-1;let s=1;for(let a=1;a<o;++a){let l=!1;const c=e[a];if(c!==e[a+1]&&(1!==a||c!==e[0]))if(r)l=!0;else{const d=a*i,h=d-i,f=d+i;for(let m=0;m!==i;++m){const v=t[d+m];if(v!==t[h+m]||v!==t[f+m]){l=!0;break}}}if(l){if(a!==s){e[s]=e[a];const d=a*i,h=s*i;for(let f=0;f!==i;++f)t[h+f]=t[d+f]}++s}}if(o>0){e[s]=e[o];for(let a=o*i,l=s*i,c=0;c!==i;++c)t[l+c]=t[a+c];++s}return s!==e.length?(this.times=un.arraySlice(e,0,s),this.values=un.arraySlice(t,0,s*i)):(this.times=e,this.values=t),this}clone(){const e=un.arraySlice(this.times,0),t=un.arraySlice(this.values,0),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}jo.prototype.TimeBufferType=Float32Array,jo.prototype.ValueBufferType=Float32Array,jo.prototype.DefaultInterpolation=2301;class Du extends jo{}Du.prototype.ValueTypeName="bool",Du.prototype.ValueBufferType=Array,Du.prototype.DefaultInterpolation=2300,Du.prototype.InterpolantFactoryMethodLinear=void 0,Du.prototype.InterpolantFactoryMethodSmooth=void 0;class LO extends jo{}LO.prototype.ValueTypeName="color";class Vm extends jo{}Vm.prototype.ValueTypeName="number";class iX extends _a{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let c=e*a;for(let u=c+a;c!==u;c+=4)ui.slerpFlat(o,0,s,c-a,s,c,l);return o}}class Jh extends jo{InterpolantFactoryMethodLinear(e){return new iX(this.times,this.values,this.getValueSize(),e)}}Jh.prototype.ValueTypeName="quaternion",Jh.prototype.DefaultInterpolation=2301,Jh.prototype.InterpolantFactoryMethodSmooth=void 0;class Ou extends jo{}Ou.prototype.ValueTypeName="string",Ou.prototype.ValueBufferType=Array,Ou.prototype.DefaultInterpolation=2300,Ou.prototype.InterpolantFactoryMethodLinear=void 0,Ou.prototype.InterpolantFactoryMethodSmooth=void 0;class Hm extends jo{}Hm.prototype.ValueTypeName="vector";class Gm{constructor(e,t=-1,i,r=2500){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=gr(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let s=0,a=i.length;s!==a;++s)t.push(oX(i[s]).scale(r));const o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,s=i.length;o!==s;++o)t.push(jo.toJSON(i[o]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const o=t.length,s=[];for(let a=0;a<o;a++){let l=[],c=[];l.push((a+o-1)%o,a,(a+1)%o),c.push(0,1,0);const u=un.getKeyframeOrder(l);l=un.sortedArray(l,1,u),c=un.sortedArray(c,1,u),!r&&0===l[0]&&(l.push(o),c.push(c[0])),s.push(new Vm(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,s)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},o=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(o);if(u&&u.length>1){const d=u[1];let h=r[d];h||(r[d]=h=[]),h.push(c)}}const s=[];for(const a in r)s.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return s}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,h,f,m,v){if(0!==f.length){const w=[],y=[];un.flattenJSON(f,w,y,m),0!==w.length&&v.push(new d(h,w,y))}},r=[],o=e.name||"default",s=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let d=0;d<c.length;d++){const h=c[d].keys;if(h&&0!==h.length)if(h[0].morphTargets){const f={};let m;for(m=0;m<h.length;m++)if(h[m].morphTargets)for(let v=0;v<h[m].morphTargets.length;v++)f[h[m].morphTargets[v]]=-1;for(const v in f){const w=[],y=[];for(let _=0;_!==h[m].morphTargets.length;++_){const M=h[m];w.push(M.time),y.push(M.morphTarget===v?1:0)}r.push(new Vm(".morphTargetInfluence["+v+"]",w,y))}l=f.length*(s||1)}else{const f=".bones["+t[d].name+"]";i(Hm,f+".position",h,"pos",r),i(Jh,f+".quaternion",h,"rot",r),i(Hm,f+".scale",h,"scl",r)}}return 0===r.length?null:new this(o,l,r,a)}resetDuration(){let t=0;for(let i=0,r=this.tracks.length;i!==r;++i){const o=this.tracks[i];t=Math.max(t,o.times[o.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function oX(n){if(void 0===n.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Vm;case"vector":case"vector2":case"vector3":case"vector4":return Hm;case"color":return LO;case"quaternion":return Jh;case"bool":case"boolean":return Du;case"string":return Ou}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}(n.type);if(void 0===n.times){const t=[],i=[];un.flattenJSON(n.keys,t,i,"value"),n.times=t,n.values=i}return void 0!==e.parse?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Iu={enabled:!1,files:{},add:function(n,e){!1!==this.enabled&&(this.files[n]=e)},get:function(n){if(!1!==this.enabled)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};const sX=new class{constructor(e,t,i){const r=this;let l,o=!1,s=0,a=0;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,!1===o&&void 0!==r.onStart&&r.onStart(u,s,a),o=!0},this.itemEnd=function(u){s++,void 0!==r.onProgress&&r.onProgress(u,s,a),s===a&&(o=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(u){void 0!==r.onError&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return-1!==d&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,h=c.length;d<h;d+=2){const f=c[d],m=c[d+1];if(f.global&&(f.lastIndex=0),f.test(u))return m}return null}}};class va{constructor(e){this.manager=void 0!==e?e:sX,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,o){i.load(e,r,t,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Es={};class Ss extends va{constructor(e){super(e)}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const o=Iu.get(e);if(void 0!==o)return this.manager.itemStart(e),setTimeout(()=>{t&&t(o),this.manager.itemEnd(e)},0),o;if(void 0!==Es[e])return void Es[e].push({onLoad:t,onProgress:i,onError:r});Es[e]=[],Es[e].push({onLoad:t,onProgress:i,onError:r});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"});fetch(s).then(a=>{if(200===a.status||0===a.status){0===a.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");const l=Es[e],c=a.body.getReader(),u=a.headers.get("Content-Length"),d=u?parseInt(u):0,h=0!==d;let f=0;return new ReadableStream({start(m){!function v(){c.read().then(({done:w,value:y})=>{if(w)m.close();else{f+=y.byteLength;const _=new ProgressEvent("progress",{lengthComputable:h,loaded:f,total:d});for(let M=0,C=l.length;M<C;M++){const A=l[M];A.onProgress&&A.onProgress(_)}m.enqueue(y),v()}})}()}})}throw Error(`fetch for "${a.url}" responded with ${a.status}: ${a.statusText}`)}).then(a=>{const l=new Response(a);switch(this.responseType){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(c=>(new DOMParser).parseFromString(c,this.mimeType));case"json":return l.json();default:return l.text()}}).then(a=>{Iu.add(e,a);const l=Es[e];delete Es[e];for(let c=0,u=l.length;c<u;c++){const d=l[c];d.onLoad&&d.onLoad(a)}this.manager.itemEnd(e)}).catch(a=>{const l=Es[e];delete Es[e];for(let c=0,u=l.length;c<u;c++){const d=l[c];d.onError&&d.onError(a)}this.manager.itemError(e),this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class jm extends va{constructor(e){super(e)}load(e,t,i,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,s=Iu.get(e);if(void 0!==s)return o.manager.itemStart(e),setTimeout(function(){t&&t(s),o.manager.itemEnd(e)},0),s;const a=zg("img");function l(){u(),Iu.add(e,this),t&&t(this),o.manager.itemEnd(e)}function c(d){u(),r&&r(d),o.manager.itemError(e),o.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),o.manager.itemStart(e),a.src=e,a}}class aX extends va{constructor(e){super(e)}load(e,t,i,r){const o=new Rh,s=new jm(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let a=0;function l(c){s.load(e[c],function(u){o.images[c]=u,a++,6===a&&(o.needsUpdate=!0,t&&t(o))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return o}}class cX extends va{constructor(e){super(e)}load(e,t,i,r){const o=new Pn,s=new jm(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(a){o.image=a,o.needsUpdate=!0,void 0!==t&&t(o)},i,r),o}}class Wo extends Ut{constructor(e,t=1){super(),this.type="Light",this.color=new xe(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}Wo.prototype.isLight=!0;(class extends Wo{constructor(e,t,i){super(e,i),this.type="HemisphereLight",this.position.copy(Ut.DefaultUp),this.updateMatrix(),this.groundColor=new xe(t)}copy(e){return Wo.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}).prototype.isHemisphereLight=!0;const NO=new He,zO=new D,BO=new D;class Zx{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ne(512,512),this.map=null,this.mapPass=null,this.matrix=new He,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new im,this._frameExtents=new ne(1,1),this._viewportCount=1,this._viewports=[new qt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;zO.setFromMatrixPosition(e.matrixWorld),t.position.copy(zO),BO.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(BO),t.updateMatrixWorld(),NO.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(NO),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(t.projectionMatrix),i.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class UO extends Zx{constructor(){super(new Kn(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,i=2*Th*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;(i!==t.fov||r!==t.aspect||o!==t.far)&&(t.fov=i,t.aspect=r,t.far=o,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}UO.prototype.isSpotLightShadow=!0;class Jx extends Wo{constructor(e,t,i=0,r=Math.PI/3,o=0,s=1){super(e,t),this.type="SpotLight",this.position.copy(Ut.DefaultUp),this.updateMatrix(),this.target=new Ut,this.distance=i,this.angle=r,this.penumbra=o,this.decay=s,this.shadow=new UO}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}Jx.prototype.isSpotLight=!0;const VO=new He,Qh=new D,Qx=new D;class HO extends Zx{constructor(){super(new Kn(90,1,.5,500)),this._frameExtents=new ne(4,2),this._viewportCount=6,this._viewports=[new qt(2,1,1,1),new qt(0,1,1,1),new qt(3,1,1,1),new qt(1,1,1,1),new qt(3,0,1,1),new qt(1,0,1,1)],this._cubeDirections=[new D(1,0,0),new D(-1,0,0),new D(0,0,1),new D(0,0,-1),new D(0,1,0),new D(0,-1,0)],this._cubeUps=[new D(0,1,0),new D(0,1,0),new D(0,1,0),new D(0,1,0),new D(0,0,1),new D(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,o=e.distance||i.far;o!==i.far&&(i.far=o,i.updateProjectionMatrix()),Qh.setFromMatrixPosition(e.matrixWorld),i.position.copy(Qh),Qx.copy(i.position),Qx.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Qx),i.updateMatrixWorld(),r.makeTranslation(-Qh.x,-Qh.y,-Qh.z),VO.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(VO)}}HO.prototype.isPointLightShadow=!0;class Wm extends Wo{constructor(e,t,i=0,r=1){super(e,t),this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new HO}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}Wm.prototype.isPointLight=!0;class GO extends Zx{constructor(){super(new ua(-5,5,5,-5,.5,500))}}GO.prototype.isDirectionalLightShadow=!0;(class extends Wo{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(Ut.DefaultUp),this.updateMatrix(),this.target=new Ut,this.shadow=new GO}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}).prototype.isDirectionalLight=!0;class Kx extends Wo{constructor(e,t){super(e,t),this.type="AmbientLight"}}Kx.prototype.isAmbientLight=!0;(class extends Wo{constructor(e,t,i=10,r=10){super(e,t),this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}).prototype.isRectAreaLight=!0;class $O{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new D)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,o=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.282095),t.addScaledVector(s[1],.488603*r),t.addScaledVector(s[2],.488603*o),t.addScaledVector(s[3],.488603*i),t.addScaledVector(s[4],i*r*1.092548),t.addScaledVector(s[5],r*o*1.092548),t.addScaledVector(s[6],.315392*(3*o*o-1)),t.addScaledVector(s[7],i*o*1.092548),t.addScaledVector(s[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,o=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.886227),t.addScaledVector(s[1],1.023328*r),t.addScaledVector(s[2],1.023328*o),t.addScaledVector(s[3],1.023328*i),t.addScaledVector(s[4],.858086*i*r),t.addScaledVector(s[5],.858086*r*o),t.addScaledVector(s[6],.743125*o*o-.247708),t.addScaledVector(s[7],.858086*i*o),t.addScaledVector(s[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+3*r);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){const i=e.x,r=e.y,o=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*o,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*o,t[6]=.315392*(3*o*o-1),t[7]=1.092548*i*o,t[8]=.546274*(i*i-r*r)}}$O.prototype.isSphericalHarmonics3=!0;class $m extends Wo{constructor(e=new $O,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}$m.prototype.isLightProbe=!0;let qm;(class extends Ze{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}).prototype.isInstancedBufferGeometry=!0,class extends va{constructor(e){super(e),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,s=Iu.get(e);if(void 0!==s)return o.manager.itemStart(e),setTimeout(function(){t&&t(s),o.manager.itemEnd(e)},0),s;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(l){Iu.add(e,l),t&&t(l),o.manager.itemEnd(e)}).catch(function(l){r&&r(l),o.manager.itemError(e),o.manager.itemEnd(e)}),o.manager.itemStart(e)}}.prototype.isImageBitmapLoader=!0;class pX extends va{constructor(e){super(e)}load(e,t,i,r){const o=this,s=new Ss(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(a){try{const l=a.slice(0);(void 0===qm&&(qm=new(window.AudioContext||window.webkitAudioContext)),qm).decodeAudioData(l,function(u){t(u)})}catch(l){r?r(l):console.error(l),o.manager.itemError(e)}},i,r)}}(class extends $m{constructor(e,t,i=1){super(void 0,i);const r=(new xe).set(e),o=(new xe).set(t),s=new D(r.r,r.g,r.b),a=new D(o.r,o.g,o.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(s).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(s).sub(a).multiplyScalar(c)}}).prototype.isHemisphereLightProbe=!0,class extends $m{constructor(e,t=1){super(void 0,t);const i=(new xe).set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}.prototype.isAmbientLightProbe=!0;class tw{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=KO(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=KO();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function KO(){return("undefined"==typeof performance?Date:performance).now()}class xX{constructor(e,t,i){let r,o,s;switch(this.binding=e,this.valueSize=i,t){case"quaternion":r=this._slerp,o=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":r=this._select,o=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:r=this._lerp,o=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=o,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,o=e*r+r;let s=this.cumulativeWeight;if(0===s){for(let a=0;a!==r;++a)i[o+a]=i[a];s=t}else s+=t,this._mixBufferRegion(i,o,0,t/s,r);this.cumulativeWeight=s}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,o=this.cumulativeWeight,s=this.cumulativeWeightAdditive,a=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1&&this._mixBufferRegion(i,r,t*this._origIndex,1-o,t),s>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const t=this.buffer,i=this.valueSize,r=i*this._origIndex;this.binding.getValue(t,r);for(let o=i,s=r;o!==s;++o)t[o]=t[r+o%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,o){if(r>=.5)for(let s=0;s!==o;++s)e[t+s]=e[i+s]}_slerp(e,t,i,r){ui.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,o){const s=this._workIndex*o;ui.multiplyQuaternionsFlat(e,s,e,t,e,i),ui.slerpFlat(e,t,e,t,e,s,r)}_lerp(e,t,i,r,o){const s=1-r;for(let a=0;a!==o;++a){const l=t+a;e[l]=e[l]*s+e[i+a]*r}}_lerpAdditive(e,t,i,r,o){for(let s=0;s!==o;++s){const a=t+s;e[a]=e[a]+e[i+s]*r}}}const nw="\\[\\]\\.:\\/",wX=new RegExp("["+nw+"]","g"),iw="[^"+nw+"]",CX="[^"+nw.replace("\\.","")+"]",MX=/((?:WC+[\/:])*)/.source.replace("WC",iw),EX=/(WCOD+)?/.source.replace("WCOD",CX),SX=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",iw),TX=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",iw),PX=new RegExp("^"+MX+EX+SX+TX+"$"),AX=["material","materials","bones"];class DX{constructor(e,t,i){const r=i||on.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,o=i.length;r!==o;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}let on=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(wX,"")}static parseTrackName(t){const i=PX.exec(t);if(!i)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},o=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==o&&-1!==o){const s=r.nodeName.substring(o+1);-1!==AX.indexOf(s)&&(r.nodeName=r.nodeName.substring(0,o),r.objectName=s)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(!i||""===i||"."===i||-1===i||i===t.name||i===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(i);if(void 0!==r)return r}if(t.children){const r=function(s){for(let a=0;a<s.length;a++){const l=s[a];if(l.name===i||l.uuid===i)return l;const c=r(l.children);if(c)return c}return null},o=r(t.children);if(o)return o}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){const r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)t[i++]=r[o]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){const r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[i++]}_setValue_array_setNeedsUpdate(t,i){const r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){const r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node;const i=this.parsedPath,r=i.objectName,o=i.propertyName;let s=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(r){let u=i.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let d=0;d<t.length;d++)if(t[d].name===u){u=d;break}break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==u){if(void 0===t[u])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[u]}}const a=t[o];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i.nodeName+"."+o+" but it wasn't found.",t);let l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(void 0!==s){if("morphTargetInfluences"===o){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[s]&&(s=t.morphTargetDictionary[s])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else void 0!==a.fromArray&&void 0!==a.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=o;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=DX,n})();on.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},on.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},on.prototype.GetterByBindingType=[on.prototype._getValue_direct,on.prototype._getValue_array,on.prototype._getValue_arrayElement,on.prototype._getValue_toArray],on.prototype.SetterByBindingTypeAndVersioning=[[on.prototype._setValue_direct,on.prototype._setValue_direct_setNeedsUpdate,on.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[on.prototype._setValue_array,on.prototype._setValue_array_setNeedsUpdate,on.prototype._setValue_array_setMatrixWorldNeedsUpdate],[on.prototype._setValue_arrayElement,on.prototype._setValue_arrayElement_setNeedsUpdate,on.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[on.prototype._setValue_fromArray,on.prototype._setValue_fromArray_setNeedsUpdate,on.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class IX{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const o=t.tracks,s=o.length,a=new Array(s),l={endingStart:Zc,endingEnd:Zc};for(let c=0;c!==s;++c){const u=o[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,o=e._clip.duration,a=r/o;e.warp(1,o/r,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,o=r.time,s=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=o,l[1]=o+i,c[0]=e/s,c[1]=t/s,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled)return void this._updateWeight(e);const o=this._startTime;if(null!==o){const l=(e-o)*i;if(l<0||0===i)return;this._startTime=null,t=i*l}t*=this._updateTimeScale(e);const s=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;if(2501===this.blendMode)for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(s),c[u].accumulateAdditive(a);else for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(s),c[u].accumulate(r,a)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(null!==i){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;null!==i&&(t*=i.evaluate(e)[0],e>i.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,o=this._loopCount;const s=2202===i;if(0===e)return-1===o?r:s&&1==(1&o)?t-r:r;if(2200===i){-1===o&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===o&&(e>=0?(o=0,this._setEndings(!0,0===this.repetitions,s)):this._setEndings(0===this.repetitions,!0,s)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,o+=Math.abs(a);const l=this.repetitions-o;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===l){const c=e<0;this._setEndings(c,!c,s)}else this._setEndings(!1,!1,s);this._loopCount=o,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(s&&1==(1&o))return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=Jc,r.endingEnd=Jc):(r.endingStart=e?this.zeroSlopeAtStart?Jc:Zc:2402,r.endingEnd=t?this.zeroSlopeAtEnd?Jc:Zc:2402)}_scheduleFading(e,t,i){const r=this._mixer,o=r.time;let s=this._weightInterpolant;null===s&&(s=r._lendControlInterpolant(),this._weightInterpolant=s);const a=s.parameterPositions,l=s.sampleValues;return a[0]=o,l[0]=t,a[1]=o+e,l[1]=i,this}}(class extends na{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,o=r.length,s=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let u=c[l];void 0===u&&(u={},c[l]=u);for(let d=0;d!==o;++d){const h=r[d],f=h.name;let m=u[f];if(void 0!==m)s[d]=m;else{if(m=s[d],void 0!==m){null===m._cacheIndex&&(++m.referenceCount,this._addInactiveBinding(m,l,f));continue}m=new xX(on.create(i,f,t&&t._propertyBindings[d].binding.parsedPath),h.ValueTypeName,h.getValueSize()),++m.referenceCount,this._addInactiveBinding(m,l,f),s[d]=m}a[d].resultBuffer=m.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,o=this._actionsByClip[r];this._bindAction(e,o&&o.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const o=t[i];0==o.useCount++&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const o=t[i];0==--o.useCount&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,o=this._actionsByClip;let s=o[t];if(void 0===s)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,o[t]=s;else{const a=s.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),s.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const o=e._clip.uuid,s=this._actionsByClip,a=s[o],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===l.length&&delete s[o],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const o=t[i];0==--o.referenceCount&&this._removeInactiveBinding(o)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,o=t[r];e._cacheIndex=r,t[r]=e,o._cacheIndex=i,t[i]=o}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,o=t[r];e._cacheIndex=r,t[r]=e,o._cacheIndex=i,t[i]=o}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,o=this._bindings;let s=r[t];void 0===s&&(s={},r[t]=s),s[i]=e,e._cacheIndex=o.length,o.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,o=i.path,s=this._bindingsByRootAndName,a=s[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[o],0===Object.keys(a).length&&delete s[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,o=t[r];e._cacheIndex=r,t[r]=e,o._cacheIndex=i,t[i]=o}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,o=t[r];e._cacheIndex=r,t[r]=e,o._cacheIndex=i,t[i]=o}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return void 0===i&&(i=new RO(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,o=t[r];e.__cacheIndex=r,t[r]=e,o.__cacheIndex=i,t[i]=o}clipAction(e,t,i){const r=t||this._root,o=r.uuid;let s="string"==typeof e?Gm.findByName(r,e):e;const a=null!==s?s.uuid:e,l=this._actionsByClip[a];let c=null;if(void 0===i&&(i=null!==s?s.blendMode:2500),void 0!==l){const d=l.actionByRoot[o];if(void 0!==d&&d.blendMode===i)return d;c=l.knownActions[0],null===s&&(s=c._clip)}if(null===s)return null;const u=new IX(this,s,t,i);return this._bindAction(u,c),this._addInactiveAction(u,a,o),u}existingAction(e,t){const i=t||this._root,r=i.uuid,o="string"==typeof e?Gm.findByName(i,e):e,a=this._actionsByClip[o?o.uuid:e];return void 0!==a&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let i=this._nActiveActions-1;i>=0;--i)e[i].stop();return this}update(e){const t=this._actions,i=this._nActiveActions,r=this.time+=e*=this.timeScale,o=Math.sign(e),s=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(r,e,o,s);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(s);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,o=r[i];if(void 0!==o){const s=o.knownActions;for(let a=0,l=s.length;a!==l;++a){const c=s[a];this._deactivateAction(c);const u=c._cacheIndex,d=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,d._cacheIndex=u,t[u]=d,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const s in i){const l=i[s].actionByRoot[t];void 0!==l&&(this._deactivateAction(l),this._removeInactiveAction(l))}const o=this._bindingsByRootAndName[t];if(void 0!==o)for(const s in o){const a=o[s];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);null!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}}).prototype._controlInterpolantsResultBuffer=new Float32Array(1);class rw{constructor(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new rw(void 0===this.value.clone?this.value:this.value.clone())}}(class extends bu{constructor(e,t,i=1){super(e,t),this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}).prototype.isInstancedInterleavedBuffer=!0;class $o{constructor(e,t,i=0,r=1/0){this.ray=new ll(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new eD,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return ow(e,this,i,t),i.sort(nI),i}intersectObjects(e,t=!0,i=[]){for(let r=0,o=e.length;r<o;r++)ow(e[r],this,i,t);return i.sort(nI),i}}function nI(n,e){return n.distance-e.distance}function ow(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),!0===i){const r=n.children;for(let o=0,s=r.length;o<s;o++)ow(r[o],e,t,!0)}}class iI{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(vi(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const rI=new ne;class Kh{constructor(e=new ne(1/0,1/0),t=new ne(-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=rI.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return rI.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Kh.prototype.isBox2=!0;const ya=new D,Ym=new He,sw=new He;function aI(n){const e=[];n&&n.isBone&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,aI(n.children[t]));return e}const hI=new D;let Km,aw;class fI extends Ut{constructor(e=new D(0,0,1),t=new D(0,0,0),i=1,r=16776960,o=.2*i,s=.2*o){super(),this.type="ArrowHelper",void 0===Km&&(Km=new Ze,Km.setAttribute("position",new Fe([0,0,0,0,1,0],3)),aw=new ml(0,.5,1,5,1),aw.translate(0,-.5,0)),this.position.copy(t),this.line=new gl(Km,new bi({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Cn(aw,new xs({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,o,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{hI.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(hI,t)}}setLength(e,t=.2*e,i=.2*t){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}const pI=new Float32Array(1);new Int32Array(pI.buffer),Lr.create=function(n,e){return console.log("THREE.Curve.create() has been deprecated"),n.prototype=Object.create(Lr.prototype),n.prototype.constructor=n,n.prototype.getPoint=e,n},Am.prototype.fromPoints=function(n){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(n)},class extends fa{constructor(e=10,t=10,i=4473924,r=8947848){i=new xe(i),r=new xe(r);const o=t/2,s=e/t,a=e/2,l=[],c=[];for(let h=0,f=0,m=-a;h<=t;h++,m+=s){l.push(-a,0,m,a,0,m),l.push(m,0,-a,m,0,a);const v=h===o?i:r;v.toArray(c,f),f+=3,v.toArray(c,f),f+=3,v.toArray(c,f),f+=3,v.toArray(c,f),f+=3}const u=new Ze;u.setAttribute("position",new Fe(l,3)),u.setAttribute("color",new Fe(c,3)),super(u,new bi({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},class extends fa{constructor(e){const t=aI(e),i=new Ze,r=[],o=[],s=new xe(0,0,1),a=new xe(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),o.push(s.r,s.g,s.b),o.push(a.r,a.g,a.b))}i.setAttribute("position",new Fe(r,3)),i.setAttribute("color",new Fe(o,3)),super(i,new bi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");sw.copy(this.root.matrixWorld).invert();for(let o=0,s=0;o<t.length;o++){const a=t[o];a.parent&&a.parent.isBone&&(Ym.multiplyMatrices(sw,a.matrixWorld),ya.setFromMatrixPosition(Ym),r.setXYZ(s,ya.x,ya.y,ya.z),Ym.multiplyMatrices(sw,a.parent.matrixWorld),ya.setFromMatrixPosition(Ym),r.setXYZ(s+1,ya.x,ya.y,ya.z),s+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},va.prototype.extractUrlBase=function(n){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),class{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch(i){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}.extractUrlBase(n)},va.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Kh.prototype.center=function(n){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(n)},Kh.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Kh.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},Kh.prototype.size=function(n){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(n)},Ir.prototype.center=function(n){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(n)},Ir.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Ir.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},Ir.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)},Ir.prototype.size=function(n){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(n)},al.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},im.prototype.setFromMatrix=function(n){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(n)},ci.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)},ci.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)},ci.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},ci.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)},ci.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},ci.prototype.getInverse=function(n){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()},He.prototype.extractPosition=function(n){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(n)},He.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)},He.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new D).setFromMatrixColumn(this,3)},He.prototype.setRotationFromQuaternion=function(n){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(n)},He.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},He.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},He.prototype.multiplyVector4=function(n){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},He.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},He.prototype.rotateAxis=function(n){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),n.transformDirection(this)},He.prototype.crossVector=function(n){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},He.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},He.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},He.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},He.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},He.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},He.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},He.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},He.prototype.makeFrustum=function(n,e,t,i,r,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(n,e,i,t,r,o)},He.prototype.getInverse=function(n){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()},ws.prototype.isIntersectionLine=function(n){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(n)},ui.prototype.multiplyVector3=function(n){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),n.applyQuaternion(this)},ui.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},ll.prototype.isIntersectionBox=function(n){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},ll.prototype.isIntersectionPlane=function(n){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(n)},ll.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)},jn.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},jn.prototype.barycoordFromPoint=function(n,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(n,e)},jn.prototype.midpoint=function(n){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(n)},jn.prototypenormal=function(n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(n)},jn.prototype.plane=function(n){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(n)},jn.barycoordFromPoint=function(n,e,t,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),jn.getBarycoord(n,e,t,i,r)},jn.normal=function(n,e,t,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),jn.getNormal(n,e,t,i)},Cs.prototype.extractAllPoints=function(n){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(n)},Cs.prototype.extrude=function(n){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ma(this,n)},Cs.prototype.makeGeometry=function(n){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Zh(this,n)},ne.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)},ne.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)},ne.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},D.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},D.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},D.prototype.getPositionFromMatrix=function(n){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(n)},D.prototype.getScaleFromMatrix=function(n){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(n)},D.prototype.getColumnFromMatrix=function(n,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,n)},D.prototype.applyProjection=function(n){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(n)},D.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)},D.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)},D.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},qt.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)},qt.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Ut.prototype.getChildByName=function(n){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(n)},Ut.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},Ut.prototype.translate=function(n,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,n)},Ut.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},Ut.prototype.applyMatrix=function(n){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)},Object.defineProperties(Ut.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(n){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=n}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Cn.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Cn.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Ix.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Kn.prototype.setLens=function(n,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(n)},Object.defineProperties(Wo.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(n){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=n}},shadowCameraLeft:{set:function(n){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=n}},shadowCameraRight:{set:function(n){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=n}},shadowCameraTop:{set:function(n){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=n}},shadowCameraBottom:{set:function(n){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=n}},shadowCameraNear:{set:function(n){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=n}},shadowCameraFar:{set:function(n){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=n}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(n){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=n}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(n){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=n}},shadowMapHeight:{set:function(n){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=n}}}),Object.defineProperties(Zt.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Sh},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Sh)}}}),Zt.prototype.setDynamic=function(n){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===n?Sh:Eh),this},Zt.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},Zt.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Ze.prototype.addIndex=function(n){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(n)},Ze.prototype.addAttribute=function(n,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===n?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(n,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(n,new Zt(arguments[1],arguments[2])))},Ze.prototype.addDrawCall=function(n,e,t){void 0!==t&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(n,e)},Ze.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},Ze.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},Ze.prototype.removeAttribute=function(n){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(n)},Ze.prototype.applyMatrix=function(n){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)},Object.defineProperties(Ze.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),bu.prototype.setDynamic=function(n){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===n?Sh:Eh),this},bu.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},ma.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},ma.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},ma.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},um.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},rw.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(yi.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new xe}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(n){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(n){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=n}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(qi.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(n){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=n}}}),$t.prototype.clearTarget=function(n,e,t,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(n),this.clear(e,t,i)},$t.prototype.animate=function(n){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(n)},$t.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},$t.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},$t.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},$t.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},$t.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},$t.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},$t.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},$t.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},$t.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},$t.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},$t.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},$t.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},$t.prototype.enableScissorTest=function(n){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(n)},$t.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},$t.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},$t.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},$t.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},$t.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},$t.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},$t.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},$t.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},$t.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},$t.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties($t.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=n}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=n}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(n){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===n?3001:nr}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(GD.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Gn.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=n}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=n}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=n}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=n}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(n){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=n}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(n){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=n}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(n){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=n}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(n){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=n}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(n){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=n}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(n){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=n}}}),class extends Ut{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}.prototype.load=function(n){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return(new pX).load(n,function(i){e.setBuffer(i)}),this},vx.prototype.updateCubeMap=function(n,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(n,e)},vx.prototype.clear=function(n,e,t,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(n,e,t,i)},tu.crossOrigin=void 0,tu.loadTexture=function(n,e,t,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new cX;r.setCrossOrigin(this.crossOrigin);const o=r.load(n,t,void 0,i);return e&&(o.mapping=e),o},tu.loadTextureCube=function(n,e,t,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new aX;r.setCrossOrigin(this.crossOrigin);const o=r.load(n,t,void 0,i);return e&&(o.mapping=e),o},tu.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},tu.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"135"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="135");const gI={type:"change"},lw={type:"start"},mI={type:"end"};class GX extends na{constructor(e,t){super(),void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new D,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(k){k.addEventListener("keydown",N),this._domElementKeyEvents=k},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(gI),i.update(),o=r.NONE},this.update=function(){const k=new D,se=(new ui).setFromUnitVectors(e.up,new D(0,1,0)),ve=se.clone().invert(),Ee=new D,Oe=new ui,tt=2*Math.PI;return function(){const kt=i.object.position;k.copy(kt).sub(i.target),k.applyQuaternion(se),a.setFromVector3(k),i.autoRotate&&o===r.NONE&&W(2*Math.PI/60/60*i.autoRotateSpeed),i.enableDamping?(a.theta+=l.theta*i.dampingFactor,a.phi+=l.phi*i.dampingFactor):(a.theta+=l.theta,a.phi+=l.phi);let On=i.minAzimuthAngle,In=i.maxAzimuthAngle;return isFinite(On)&&isFinite(In)&&(On<-Math.PI?On+=tt:On>Math.PI&&(On-=tt),In<-Math.PI?In+=tt:In>Math.PI&&(In-=tt),a.theta=On<=In?Math.max(On,Math.min(In,a.theta)):a.theta>(On+In)/2?Math.max(On,a.theta):Math.min(In,a.theta)),a.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=c,a.radius=Math.max(i.minDistance,Math.min(i.maxDistance,a.radius)),!0===i.enableDamping?i.target.addScaledVector(u,i.dampingFactor):i.target.add(u),k.setFromSpherical(a),k.applyQuaternion(ve),kt.copy(i.target).add(k),i.object.lookAt(i.target),!0===i.enableDamping?(l.theta*=1-i.dampingFactor,l.phi*=1-i.dampingFactor,u.multiplyScalar(1-i.dampingFactor)):(l.set(0,0,0),u.set(0,0,0)),c=1,!!(d||Ee.distanceToSquared(i.object.position)>s||8*(1-Oe.dot(i.object.quaternion))>s)&&(i.dispatchEvent(gI),Ee.copy(i.object.position),Oe.copy(i.object.quaternion),d=!1,!0)}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",fe),i.domElement.removeEventListener("pointerdown",we),i.domElement.removeEventListener("pointercancel",rt),i.domElement.removeEventListener("wheel",Xt),i.domElement.removeEventListener("pointermove",Re),i.domElement.removeEventListener("pointerup",Se),null!==i._domElementKeyEvents&&i._domElementKeyEvents.removeEventListener("keydown",N)};const i=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let o=r.NONE;const s=1e-6,a=new iI,l=new iI;let c=1;const u=new D;let d=!1;const h=new ne,f=new ne,m=new ne,v=new ne,w=new ne,y=new ne,_=new ne,M=new ne,C=new ne,A=[],L={};function z(){return Math.pow(.95,i.zoomSpeed)}function W(k){l.theta-=k}function $(k){l.phi-=k}const B=function(){const k=new D;return function(ve,Ee){k.setFromMatrixColumn(Ee,0),k.multiplyScalar(-ve),u.add(k)}}(),he=function(){const k=new D;return function(ve,Ee){!0===i.screenSpacePanning?k.setFromMatrixColumn(Ee,1):(k.setFromMatrixColumn(Ee,0),k.crossVectors(i.object.up,k)),k.multiplyScalar(ve),u.add(k)}}(),Y=function(){const k=new D;return function(ve,Ee){const Oe=i.domElement;if(i.object.isPerspectiveCamera){k.copy(i.object.position).sub(i.target);let rn=k.length();rn*=Math.tan(i.object.fov/2*Math.PI/180),B(2*ve*rn/Oe.clientHeight,i.object.matrix),he(2*Ee*rn/Oe.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(B(ve*(i.object.right-i.object.left)/i.object.zoom/Oe.clientWidth,i.object.matrix),he(Ee*(i.object.top-i.object.bottom)/i.object.zoom/Oe.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function q(k){i.object.isPerspectiveCamera?c/=k:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*k)),i.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function K(k){i.object.isPerspectiveCamera?c*=k:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/k)),i.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function Q(k){h.set(k.clientX,k.clientY)}function Ce(k){v.set(k.clientX,k.clientY)}function ze(){1===A.length?h.set(A[0].pageX,A[0].pageY):h.set(.5*(A[0].pageX+A[1].pageX),.5*(A[0].pageY+A[1].pageY))}function St(){1===A.length?v.set(A[0].pageX,A[0].pageY):v.set(.5*(A[0].pageX+A[1].pageX),.5*(A[0].pageY+A[1].pageY))}function me(){const k=A[0].pageX-A[1].pageX,se=A[0].pageY-A[1].pageY,ve=Math.sqrt(k*k+se*se);_.set(0,ve)}function Ue(k){if(1==A.length)f.set(k.pageX,k.pageY);else{const ve=Me(k);f.set(.5*(k.pageX+ve.x),.5*(k.pageY+ve.y))}m.subVectors(f,h).multiplyScalar(i.rotateSpeed);const se=i.domElement;W(2*Math.PI*m.x/se.clientHeight),$(2*Math.PI*m.y/se.clientHeight),h.copy(f)}function qe(k){if(1===A.length)w.set(k.pageX,k.pageY);else{const se=Me(k);w.set(.5*(k.pageX+se.x),.5*(k.pageY+se.y))}y.subVectors(w,v).multiplyScalar(i.panSpeed),Y(y.x,y.y),v.copy(w)}function Dt(k){const se=Me(k),ve=k.pageX-se.x,Ee=k.pageY-se.y,Oe=Math.sqrt(ve*ve+Ee*Ee);M.set(0,Oe),C.set(0,Math.pow(M.y/_.y,i.zoomSpeed)),q(C.y),_.copy(M)}function we(k){!1!==i.enabled&&(0===A.length&&(i.domElement.setPointerCapture(k.pointerId),i.domElement.addEventListener("pointermove",Re),i.domElement.addEventListener("pointerup",Se)),function(k){A.push(k)}(k),"touch"===k.pointerType?function(k){switch(H(k),A.length){case 1:switch(i.touches.ONE){case 0:if(!1===i.enableRotate)return;ze(),o=r.TOUCH_ROTATE;break;case 1:if(!1===i.enablePan)return;St(),o=r.TOUCH_PAN;break;default:o=r.NONE}break;case 2:switch(i.touches.TWO){case 2:if(!1===i.enableZoom&&!1===i.enablePan)return;i.enableZoom&&me(),i.enablePan&&St(),o=r.TOUCH_DOLLY_PAN;break;case 3:if(!1===i.enableZoom&&!1===i.enableRotate)return;i.enableZoom&&me(),i.enableRotate&&ze(),o=r.TOUCH_DOLLY_ROTATE;break;default:o=r.NONE}break;default:o=r.NONE}o!==r.NONE&&i.dispatchEvent(lw)}(k):function(k){let se;switch(k.button){case 0:se=i.mouseButtons.LEFT;break;case 1:se=i.mouseButtons.MIDDLE;break;case 2:se=i.mouseButtons.RIGHT;break;default:se=-1}switch(se){case 1:if(!1===i.enableZoom)return;(function(k){_.set(k.clientX,k.clientY)})(k),o=r.DOLLY;break;case 0:if(k.ctrlKey||k.metaKey||k.shiftKey){if(!1===i.enablePan)return;Ce(k),o=r.PAN}else{if(!1===i.enableRotate)return;Q(k),o=r.ROTATE}break;case 2:if(k.ctrlKey||k.metaKey||k.shiftKey){if(!1===i.enableRotate)return;Q(k),o=r.ROTATE}else{if(!1===i.enablePan)return;Ce(k),o=r.PAN}break;default:o=r.NONE}o!==r.NONE&&i.dispatchEvent(lw)}(k))}function Re(k){!1!==i.enabled&&("touch"===k.pointerType?function(k){switch(H(k),o){case r.TOUCH_ROTATE:if(!1===i.enableRotate)return;Ue(k),i.update();break;case r.TOUCH_PAN:if(!1===i.enablePan)return;qe(k),i.update();break;case r.TOUCH_DOLLY_PAN:if(!1===i.enableZoom&&!1===i.enablePan)return;(function(k){i.enableZoom&&Dt(k),i.enablePan&&qe(k)})(k),i.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===i.enableZoom&&!1===i.enableRotate)return;(function(k){i.enableZoom&&Dt(k),i.enableRotate&&Ue(k)})(k),i.update();break;default:o=r.NONE}}(k):function(k){if(!1!==i.enabled)switch(o){case r.ROTATE:if(!1===i.enableRotate)return;!function(k){f.set(k.clientX,k.clientY),m.subVectors(f,h).multiplyScalar(i.rotateSpeed);const se=i.domElement;W(2*Math.PI*m.x/se.clientHeight),$(2*Math.PI*m.y/se.clientHeight),h.copy(f),i.update()}(k);break;case r.DOLLY:if(!1===i.enableZoom)return;!function(k){M.set(k.clientX,k.clientY),C.subVectors(M,_),C.y>0?q(z()):C.y<0&&K(z()),_.copy(M),i.update()}(k);break;case r.PAN:if(!1===i.enablePan)return;!function(k){w.set(k.clientX,k.clientY),y.subVectors(w,v).multiplyScalar(i.panSpeed),Y(y.x,y.y),v.copy(w),i.update()}(k)}}(k))}function Se(k){Ne(k),0===A.length&&(i.domElement.releasePointerCapture(k.pointerId),i.domElement.removeEventListener("pointermove",Re),i.domElement.removeEventListener("pointerup",Se)),i.dispatchEvent(mI),o=r.NONE}function rt(k){Ne(k)}function Xt(k){!1===i.enabled||!1===i.enableZoom||o!==r.NONE||(k.preventDefault(),i.dispatchEvent(lw),function(k){k.deltaY<0?K(z()):k.deltaY>0&&q(z()),i.update()}(k),i.dispatchEvent(mI))}function N(k){!1===i.enabled||!1===i.enablePan||function(k){let se=!1;switch(k.code){case i.keys.UP:Y(0,i.keyPanSpeed),se=!0;break;case i.keys.BOTTOM:Y(0,-i.keyPanSpeed),se=!0;break;case i.keys.LEFT:Y(i.keyPanSpeed,0),se=!0;break;case i.keys.RIGHT:Y(-i.keyPanSpeed,0),se=!0}se&&(k.preventDefault(),i.update())}(k)}function fe(k){!1!==i.enabled&&k.preventDefault()}function Ne(k){delete L[k.pointerId];for(let se=0;se<A.length;se++)if(A[se].pointerId==k.pointerId)return void A.splice(se,1)}function H(k){let se=L[k.pointerId];void 0===se&&(se=new ne,L[k.pointerId]=se),se.set(k.pageX,k.pageY)}function Me(k){return L[(k.pointerId===A[0].pointerId?A[1]:A[0]).pointerId]}i.domElement.addEventListener("contextmenu",fe),i.domElement.addEventListener("pointerdown",we),i.domElement.addEventListener("pointercancel",rt),i.domElement.addEventListener("wheel",Xt,{passive:!1}),this.update()}}class _I{constructor(e,t,i,r,o,s,a,l,c,u){this.numeroLigacoes=0,this.posicao_x=e,this.posicao_y=t,this.nome=o,this.email=s,this.avatar=i,this.tags=r,this.estadoEmocional=a,this.anguloComAnterior=u,this.criarTextura();const d=new Au(l,32,16),h=new Um({color:c,map:this.textura,shininess:50});this.objeto=new Cn(d,h),this.objeto.castShadow=!0,this.objeto.receiveShadow=!0,this.objeto.position.set(e,t,0)}criarTextura(){var e=document.createElement("canvas"),t=e.getContext("2d");e.width=200,e.height=200,t.font="Bold 20px Arial";let i=this.nome;const r=i.length;t.fillStyle="white",t.fillText(i,50-r,100),t.strokeStyle="black",t.strokeText(i,50-r,100);var o=new Pn(e);o.needsUpdate=!0,this.textura=o}}class vI{constructor(e,t,i,r,o,s,a){this.utilizadorA=s,this.utilizadorB=a;let l=new D(e,t,0),c=new D(i,r,0);var u=(new D).subVectors(c,l),d=new fI(u.clone().normalize(),l);let h=new ml(o/25,o/25,u.length(),32);const f="#"+(16777216+16777215*Math.random()).toString(16).substr(1,6);let m=new Um({color:f,shininess:50});this.object=new Cn(h,m),this.object.castShadow=!0,this.object.receiveShadow=!0;var v=d.rotation.clone();this.object.rotateX(v.x),this.object.rotateY(v.y),this.object.rotateZ(v.z);var w=(new D).addVectors(l,u.multiplyScalar(.5));this.object.position.x=w.x,this.object.position.y=w.y,this.object.position.z=w.z}}class jX{constructor(e,t){this.rede=e,this.utilizador=t,this.utilizadoresAdicionados=[],this.raioUtilizador=2,this.distanciaNiveis=15,this.objeto=new fl,this.utilizadores=new Array,this.ligacoes=new Array,this.utilizadores_mesh=new Array,this.ligacoes_mesh=new Array,e[0].length>0?(this.utilizadorAutenticado=this.rede[0][0].utilizadorA,this.criarUtilizadorPrincipal(),this.carregarRede(this.rede)):(this.utilizadorAutenticado=t,this.criarUtilizadorPrincipal())}atualizarRede(e){this.objeto.children=[],this.utilizadores=[],this.ligacoes=[],this.utilizadores_mesh=[],this.ligacoes_mesh=[],this.utilizadoresAdicionados=[],this.utilizadorAutenticado=this.rede[0][0].utilizadorA,this.criarUtilizadorPrincipal(),this.carregarRede(e)}carregarRede(e){for(var t=0;t<e.length;t++)for(var i=0;i<e[t].length;i++){const r=e[t][i];this.carregarLigacao(r,this.numeroLigacoes(r.utilizadorA,t,e),t)}}numeroLigacoes(e,t,i){for(var r=0,o=0;o<i[t].length;o++){const s=i[t][o];(s.utilizadorA.email==e.email||s.utilizadorB.email==e.email)&&r++}return r}carregarLigacao(e,t,i){var r=Math.PI/t;0==i&&(r=2*Math.PI/t);const o=this.getNo(e.utilizadorA.email),s=this.getNo(e.utilizadorB.email);if(null!=s){const m=new vI(o.objeto.position.x,o.objeto.position.y,s.objeto.position.x,s.objeto.position.y,.15*e.forcaLigacao,o,s);this.ligacoes.push(m),this.ligacoes_mesh.push(m.object),this.objeto.add(m.object)}else{var a;a=0==i?"white":1==i?"yellow":"red";var l=o.anguloComAnterior-.4*Math.PI+r*o.numeroLigacoes;0==i&&(l=o.anguloComAnterior+r*o.numeroLigacoes);const c=o.objeto.position.x+Math.cos(l)*this.distanciaNiveis,u=o.objeto.position.y+Math.sin(l)*this.distanciaNiveis;o.numeroLigacoes++;const d=o.objeto.position.x,h=o.objeto.position.y,f=c,m=u,v=new _I(c,u,e.utilizadorB.avatar,e.utilizadorB.tags,e.utilizadorB.nome,e.utilizadorB.email,e.utilizadorB.estadoEmocional,this.raioUtilizador,a,l);this.utilizadoresAdicionados.push(v),this.utilizadores.push(v),this.utilizadores_mesh.push(v.objeto),this.objeto.add(v.objeto);const y=new vI(d,h,f,m,.15*e.forcaLigacao,o,v);this.ligacoes.push(y),this.ligacoes_mesh.push(y.object),this.objeto.add(y.object)}}getNo(e){var t;return this.utilizadoresAdicionados.forEach(i=>{i.email==e&&(t=i)}),t}criarUtilizadorPrincipal(){const t=new _I(0,0,this.utilizadorAutenticado.avatar,this.utilizadorAutenticado.tags,"Eu",this.utilizadorAutenticado.email,this.utilizadorAutenticado.estadoEmocional,this.raioUtilizador,"green",0);this.utilizadoresAdicionados.push(t),this.utilizadores.push(t),this.utilizadores_mesh.push(t.objeto),this.objeto.add(t.objeto)}}function Ru(n,e){var t=n.__state.conversionName.toString(),i=Math.round(n.r),r=Math.round(n.g),o=Math.round(n.b),s=n.a,a=Math.round(n.h),l=n.s.toFixed(1),c=n.v.toFixed(1);if(e||"THREE_CHAR_HEX"===t||"SIX_CHAR_HEX"===t){for(var u=n.hex.toString(16);u.length<6;)u="0"+u;return"#"+u}return"CSS_RGB"===t?"rgb("+i+","+r+","+o+")":"CSS_RGBA"===t?"rgba("+i+","+r+","+o+","+s+")":"HEX"===t?"0x"+n.hex.toString(16):"RGB_ARRAY"===t?"["+i+","+r+","+o+"]":"RGBA_ARRAY"===t?"["+i+","+r+","+o+","+s+"]":"RGB_OBJ"===t?"{r:"+i+",g:"+r+",b:"+o+"}":"RGBA_OBJ"===t?"{r:"+i+",g:"+r+",b:"+o+",a:"+s+"}":"HSV_OBJ"===t?"{h:"+a+",s:"+l+",v:"+c+"}":"HSVA_OBJ"===t?"{h:"+a+",s:"+l+",v:"+c+",a:"+s+"}":"unknown format"}var yI=Array.prototype.forEach,ef=Array.prototype.slice,ce={BREAK:{},extend:function(e){return this.each(ef.call(arguments,1),function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(r){this.isUndefined(t[r])||(e[r]=t[r])}.bind(this))},this),e},defaults:function(e){return this.each(ef.call(arguments,1),function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(r){this.isUndefined(e[r])&&(e[r]=t[r])}.bind(this))},this),e},compose:function(){var e=ef.call(arguments);return function(){for(var t=ef.call(arguments),i=e.length-1;i>=0;i--)t=[e[i].apply(this,t)];return t[0]}},each:function(e,t,i){if(e)if(yI&&e.forEach&&e.forEach===yI)e.forEach(t,i);else if(e.length===e.length+0){var o,r=void 0;for(r=0,o=e.length;r<o;r++)if(r in e&&t.call(i,e[r],r)===this.BREAK)return}else for(var s in e)if(t.call(i,e[s],s)===this.BREAK)return},defer:function(e){setTimeout(e,0)},debounce:function(e,t,i){var r=void 0;return function(){var o=this,s=arguments;function a(){r=null,i||e.apply(o,s)}var l=i||!r;clearTimeout(r),r=setTimeout(a,t),l&&e.apply(o,s)}},toArray:function(e){return e.toArray?e.toArray():ef.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(n){function e(t){return n.apply(this,arguments)}return e.toString=function(){return n.toString()},e}(function(n){return isNaN(n)}),isArray:Array.isArray||function(n){return n.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return e instanceof Function}},$X=[{litmus:ce.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:Ru},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:Ru},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:Ru},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:Ru}}},{litmus:ce.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:ce.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:ce.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(ce.isNumber(e.r)&&ce.isNumber(e.g)&&ce.isNumber(e.b)&&ce.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(ce.isNumber(e.r)&&ce.isNumber(e.g)&&ce.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(ce.isNumber(e.h)&&ce.isNumber(e.s)&&ce.isNumber(e.v)&&ce.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(ce.isNumber(e.h)&&ce.isNumber(e.s)&&ce.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],tf=void 0,e_=void 0,t_=function(){e_=!1;var e=arguments.length>1?ce.toArray(arguments):arguments[0];return ce.each($X,function(t){if(t.litmus(e))return ce.each(t.conversions,function(i,r){if(tf=i.read(e),!1===e_&&!1!==tf)return e_=tf,tf.conversionName=r,tf.conversion=i,ce.BREAK}),ce.BREAK}),e_},bI=void 0,nf={hsv_to_rgb:function(e,t,i){var r=Math.floor(e/60)%6,o=e/60-Math.floor(e/60),s=i*(1-t),a=i*(1-o*t),l=i*(1-(1-o)*t),c=[[i,l,s],[a,i,s],[s,i,l],[s,a,i],[l,s,i],[i,s,a]][r];return{r:255*c[0],g:255*c[1],b:255*c[2]}},rgb_to_hsv:function(e,t,i){var r=Math.min(e,t,i),o=Math.max(e,t,i),s=o-r,a=void 0;return 0===o?{h:NaN,s:0,v:0}:(a=e===o?(t-i)/s:t===o?2+(i-e)/s:4+(e-t)/s,(a/=6)<0&&(a+=1),{h:360*a,s:s/o,v:o/255})},rgb_to_hex:function(e,t,i){var r=this.hex_with_component(0,2,e);return r=this.hex_with_component(r,1,t),this.hex_with_component(r,0,i)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,i){return i<<(bI=8*t)|e&~(255<<bI)}},qX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},io=function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")},ro=function(){function n(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),ba=function n(e,t,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:n(o,t,i)}if("value"in r)return r.value;var s=r.get;return void 0===s?void 0:s.call(i)},xa=function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)},wa=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?n:e},ei=function(){function n(){if(io(this,n),this.__state=t_.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return ro(n,[{key:"toString",value:function(){return Ru(this)}},{key:"toHexString",value:function(){return Ru(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),n}();function cw(n,e,t){Object.defineProperty(n,e,{get:function(){return"RGB"===this.__state.space||ei.recalculateRGB(this,e,t),this.__state[e]},set:function(r){"RGB"!==this.__state.space&&(ei.recalculateRGB(this,e,t),this.__state.space="RGB"),this.__state[e]=r}})}function uw(n,e){Object.defineProperty(n,e,{get:function(){return"HSV"===this.__state.space||ei.recalculateHSV(this),this.__state[e]},set:function(i){"HSV"!==this.__state.space&&(ei.recalculateHSV(this),this.__state.space="HSV"),this.__state[e]=i}})}ei.recalculateRGB=function(n,e,t){if("HEX"===n.__state.space)n.__state[e]=nf.component_from_hex(n.__state.hex,t);else{if("HSV"!==n.__state.space)throw new Error("Corrupted color state");ce.extend(n.__state,nf.hsv_to_rgb(n.__state.h,n.__state.s,n.__state.v))}},ei.recalculateHSV=function(n){var e=nf.rgb_to_hsv(n.r,n.g,n.b);ce.extend(n.__state,{s:e.s,v:e.v}),ce.isNaN(e.h)?ce.isUndefined(n.__state.h)&&(n.__state.h=0):n.__state.h=e.h},ei.COMPONENTS=["r","g","b","h","s","v","hex","a"],cw(ei.prototype,"r",2),cw(ei.prototype,"g",1),cw(ei.prototype,"b",0),uw(ei.prototype,"h"),uw(ei.prototype,"s"),uw(ei.prototype,"v"),Object.defineProperty(ei.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(ei.prototype,"hex",{get:function(){return"HEX"!==this.__state.space&&(this.__state.hex=nf.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}});var Ca=function(){function n(e,t){io(this,n),this.initialValue=e[t],this.domElement=document.createElement("div"),this.object=e,this.property=t,this.__onChange=void 0,this.__onFinishChange=void 0}return ro(n,[{key:"onChange",value:function(t){return this.__onChange=t,this}},{key:"onFinishChange",value:function(t){return this.__onFinishChange=t,this}},{key:"setValue",value:function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),n}(),xI={};ce.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(n,e){ce.each(n,function(t){xI[t]=e})});var YX=/(\d+(\.\d+)?)px/;function qo(n){if("0"===n||ce.isUndefined(n))return 0;var e=n.match(YX);return ce.isNull(e)?0:parseFloat(e[1])}var X={makeSelectable:function(e,t){void 0===e||void 0===e.style||(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,i){var r=i,o=t;ce.isUndefined(o)&&(o=!0),ce.isUndefined(r)&&(r=!0),e.style.position="absolute",o&&(e.style.left=0,e.style.right=0),r&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,i,r){var o=i||{},s=xI[t];if(!s)throw new Error("Event type "+t+" not supported.");var a=document.createEvent(s);switch(s){case"MouseEvents":a.initMouseEvent(t,o.bubbles||!1,o.cancelable||!0,window,o.clickCount||1,0,0,o.x||o.clientX||0,o.y||o.clientY||0,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var u=a.initKeyboardEvent||a.initKeyEvent;ce.defaults(o,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),u(t,o.bubbles||!1,o.cancelable,window,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,o.keyCode,o.charCode);break;default:a.initEvent(t,o.bubbles||!1,o.cancelable||!0)}ce.defaults(a,r),e.dispatchEvent(a)},bind:function(e,t,i,r){return e.addEventListener?e.addEventListener(t,i,r||!1):e.attachEvent&&e.attachEvent("on"+t,i),X},unbind:function(e,t,i,r){return e.removeEventListener?e.removeEventListener(t,i,r||!1):e.detachEvent&&e.detachEvent("on"+t,i),X},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var i=e.className.split(/ +/);-1===i.indexOf(t)&&(i.push(t),e.className=i.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return X},removeClass:function(e,t){if(t)if(e.className===t)e.removeAttribute("class");else{var i=e.className.split(/ +/),r=i.indexOf(t);-1!==r&&(i.splice(r,1),e.className=i.join(" "))}else e.className=void 0;return X},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return qo(t["border-left-width"])+qo(t["border-right-width"])+qo(t["padding-left"])+qo(t["padding-right"])+qo(t.width)},getHeight:function(e){var t=getComputedStyle(e);return qo(t["border-top-width"])+qo(t["border-bottom-width"])+qo(t["padding-top"])+qo(t["padding-bottom"])+qo(t.height)},getOffset:function(e){var t=e,i={left:0,top:0};if(t.offsetParent)do{i.left+=t.offsetLeft,i.top+=t.offsetTop,t=t.offsetParent}while(t);return i},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},dw=function(n){function e(t,i){io(this,e);var r=wa(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i)),o=r;return r.__prev=r.getValue(),r.__checkbox=document.createElement("input"),r.__checkbox.setAttribute("type","checkbox"),X.bind(r.__checkbox,"change",function(){o.setValue(!o.__prev)},!1),r.domElement.appendChild(r.__checkbox),r.updateDisplay(),r}return xa(e,n),ro(e,[{key:"setValue",value:function(i){var r=ba(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,i);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),r}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),ba(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(Ca),wI=function(n){function e(t,i,r){io(this,e);var o=wa(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i)),s=r,a=o;if(o.__select=document.createElement("select"),ce.isArray(s)){var l={};ce.each(s,function(c){l[c]=c}),s=l}return ce.each(s,function(c,u){var d=document.createElement("option");d.innerHTML=u,d.setAttribute("value",c),a.__select.appendChild(d)}),o.updateDisplay(),X.bind(o.__select,"change",function(){a.setValue(this.options[this.selectedIndex].value)}),o.domElement.appendChild(o.__select),o}return xa(e,n),ro(e,[{key:"setValue",value:function(i){var r=ba(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,i);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),r}},{key:"updateDisplay",value:function(){return X.isActive(this.__select)?this:(this.__select.value=this.getValue(),ba(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this))}}]),e}(Ca),CI=function(n){function e(t,i){io(this,e);var r=wa(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i)),o=r;function s(){o.setValue(o.__input.value)}return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),X.bind(r.__input,"keyup",s),X.bind(r.__input,"change",s),X.bind(r.__input,"blur",function(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}),X.bind(r.__input,"keydown",function(l){13===l.keyCode&&this.blur()}),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return xa(e,n),ro(e,[{key:"updateDisplay",value:function(){return X.isActive(this.__input)||(this.__input.value=this.getValue()),ba(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(Ca);function MI(n){var e=n.toString();return e.indexOf(".")>-1?e.length-e.indexOf(".")-1:0}var hw=function(n){function e(t,i,r){io(this,e);var o=wa(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i)),s=r||{};return o.__min=s.min,o.__max=s.max,o.__step=s.step,o.__impliedStep=ce.isUndefined(o.__step)?0===o.initialValue?1:Math.pow(10,Math.floor(Math.log(Math.abs(o.initialValue))/Math.LN10))/10:o.__step,o.__precision=MI(o.__impliedStep),o}return xa(e,n),ro(e,[{key:"setValue",value:function(i){var r=i;return void 0!==this.__min&&r<this.__min?r=this.__min:void 0!==this.__max&&r>this.__max&&(r=this.__max),void 0!==this.__step&&r%this.__step!=0&&(r=Math.round(r/this.__step)*this.__step),ba(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,r)}},{key:"min",value:function(i){return this.__min=i,this}},{key:"max",value:function(i){return this.__max=i,this}},{key:"step",value:function(i){return this.__step=i,this.__impliedStep=i,this.__precision=MI(i),this}}]),e}(Ca),rf=function(n){function e(t,i,r){io(this,e);var o=wa(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,r));o.__truncationSuspended=!1;var s=o,a=void 0;function c(){s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}function d(m){var v=a-m.clientY;s.setValue(s.getValue()+v*s.__impliedStep),a=m.clientY}function h(){X.unbind(window,"mousemove",d),X.unbind(window,"mouseup",h),c()}return o.__input=document.createElement("input"),o.__input.setAttribute("type","text"),X.bind(o.__input,"change",function(){var m=parseFloat(s.__input.value);ce.isNaN(m)||s.setValue(m)}),X.bind(o.__input,"blur",function(){c()}),X.bind(o.__input,"mousedown",function(m){X.bind(window,"mousemove",d),X.bind(window,"mouseup",h),a=m.clientY}),X.bind(o.__input,"keydown",function(m){13===m.keyCode&&(s.__truncationSuspended=!0,this.blur(),s.__truncationSuspended=!1,c())}),o.updateDisplay(),o.domElement.appendChild(o.__input),o}return xa(e,n),ro(e,[{key:"updateDisplay",value:function(){return this.__input.value=this.__truncationSuspended?this.getValue():function(n,e){var t=Math.pow(10,e);return Math.round(n*t)/t}(this.getValue(),this.__precision),ba(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(hw);function EI(n,e,t,i,r){return i+(n-e)/(t-e)*(r-i)}var n_=function(n){function e(t,i,r,o,s){io(this,e);var a=wa(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,{min:r,max:o,step:s})),l=a;function u(v){v.preventDefault();var w=l.__background.getBoundingClientRect();return l.setValue(EI(v.clientX,w.left,w.right,l.__min,l.__max)),!1}function d(){X.unbind(window,"mousemove",u),X.unbind(window,"mouseup",d),l.__onFinishChange&&l.__onFinishChange.call(l,l.getValue())}function f(v){var w=v.touches[0].clientX,y=l.__background.getBoundingClientRect();l.setValue(EI(w,y.left,y.right,l.__min,l.__max))}function m(){X.unbind(window,"touchmove",f),X.unbind(window,"touchend",m),l.__onFinishChange&&l.__onFinishChange.call(l,l.getValue())}return a.__background=document.createElement("div"),a.__foreground=document.createElement("div"),X.bind(a.__background,"mousedown",function(v){document.activeElement.blur(),X.bind(window,"mousemove",u),X.bind(window,"mouseup",d),u(v)}),X.bind(a.__background,"touchstart",function(v){1===v.touches.length&&(X.bind(window,"touchmove",f),X.bind(window,"touchend",m),f(v))}),X.addClass(a.__background,"slider"),X.addClass(a.__foreground,"slider-fg"),a.updateDisplay(),a.__background.appendChild(a.__foreground),a.domElement.appendChild(a.__background),a}return xa(e,n),ro(e,[{key:"updateDisplay",value:function(){var i=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*i+"%",ba(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(hw),fw=function(n){function e(t,i,r){io(this,e);var o=wa(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i)),s=o;return o.__button=document.createElement("div"),o.__button.innerHTML=void 0===r?"Fire":r,X.bind(o.__button,"click",function(a){return a.preventDefault(),s.fire(),!1}),X.addClass(o.__button,"button"),o.domElement.appendChild(o.__button),o}return xa(e,n),ro(e,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),e}(Ca),i_=function(n){function e(t,i){io(this,e);var r=wa(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));r.__color=new ei(r.getValue()),r.__temp=new ei(0);var o=r;r.domElement=document.createElement("div"),X.makeSelectable(r.domElement,!1),r.__selector=document.createElement("div"),r.__selector.className="selector",r.__saturation_field=document.createElement("div"),r.__saturation_field.className="saturation-field",r.__field_knob=document.createElement("div"),r.__field_knob.className="field-knob",r.__field_knob_border="2px solid ",r.__hue_knob=document.createElement("div"),r.__hue_knob.className="hue-knob",r.__hue_field=document.createElement("div"),r.__hue_field.className="hue-field",r.__input=document.createElement("input"),r.__input.type="text",r.__input_textShadow="0 1px 1px ",X.bind(r.__input,"keydown",function(v){13===v.keyCode&&d.call(this)}),X.bind(r.__input,"blur",d),X.bind(r.__selector,"mousedown",function(){X.addClass(this,"drag").bind(window,"mouseup",function(){X.removeClass(o.__selector,"drag")})}),X.bind(r.__selector,"touchstart",function(){X.addClass(this,"drag").bind(window,"touchend",function(){X.removeClass(o.__selector,"drag")})});var s=document.createElement("div");function a(v){f(v),X.bind(window,"mousemove",f),X.bind(window,"touchmove",f),X.bind(window,"mouseup",c),X.bind(window,"touchend",c)}function l(v){m(v),X.bind(window,"mousemove",m),X.bind(window,"touchmove",m),X.bind(window,"mouseup",u),X.bind(window,"touchend",u)}function c(){X.unbind(window,"mousemove",f),X.unbind(window,"touchmove",f),X.unbind(window,"mouseup",c),X.unbind(window,"touchend",c),h()}function u(){X.unbind(window,"mousemove",m),X.unbind(window,"touchmove",m),X.unbind(window,"mouseup",u),X.unbind(window,"touchend",u),h()}function d(){var v=t_(this.value);!1!==v?(o.__color.__state=v,o.setValue(o.__color.toOriginal())):this.value=o.__color.toString()}function h(){o.__onFinishChange&&o.__onFinishChange.call(o,o.__color.toOriginal())}function f(v){-1===v.type.indexOf("touch")&&v.preventDefault();var w=o.__saturation_field.getBoundingClientRect(),y=v.touches&&v.touches[0]||v,C=(y.clientX-w.left)/(w.right-w.left),A=1-(y.clientY-w.top)/(w.bottom-w.top);return A>1?A=1:A<0&&(A=0),C>1?C=1:C<0&&(C=0),o.__color.v=A,o.__color.s=C,o.setValue(o.__color.toOriginal()),!1}function m(v){-1===v.type.indexOf("touch")&&v.preventDefault();var w=o.__hue_field.getBoundingClientRect(),M=1-((v.touches&&v.touches[0]||v).clientY-w.top)/(w.bottom-w.top);return M>1?M=1:M<0&&(M=0),o.__color.h=360*M,o.setValue(o.__color.toOriginal()),!1}return ce.extend(r.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),ce.extend(r.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:r.__field_knob_border+(r.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),ce.extend(r.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),ce.extend(r.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),ce.extend(s.style,{width:"100%",height:"100%",background:"none"}),SI(s,"top","rgba(0,0,0,0)","#000"),ce.extend(r.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),function(n){n.style.background="",n.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",n.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",n.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",n.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",n.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}(r.__hue_field),ce.extend(r.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:r.__input_textShadow+"rgba(0,0,0,0.7)"}),X.bind(r.__saturation_field,"mousedown",a),X.bind(r.__saturation_field,"touchstart",a),X.bind(r.__field_knob,"mousedown",a),X.bind(r.__field_knob,"touchstart",a),X.bind(r.__hue_field,"mousedown",l),X.bind(r.__hue_field,"touchstart",l),r.__saturation_field.appendChild(s),r.__selector.appendChild(r.__field_knob),r.__selector.appendChild(r.__saturation_field),r.__selector.appendChild(r.__hue_field),r.__hue_field.appendChild(r.__hue_knob),r.domElement.appendChild(r.__input),r.domElement.appendChild(r.__selector),r.updateDisplay(),r}return xa(e,n),ro(e,[{key:"updateDisplay",value:function(){var i=t_(this.getValue());if(!1!==i){var r=!1;ce.each(ei.COMPONENTS,function(a){if(!ce.isUndefined(i[a])&&!ce.isUndefined(this.__color.__state[a])&&i[a]!==this.__color.__state[a])return r=!0,{}},this),r&&ce.extend(this.__color.__state,i)}ce.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var o=this.__color.v<.5||this.__color.s>.5?255:0,s=255-o;ce.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+o+","+o+","+o+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,SI(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),ce.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+o+","+o+","+o+")",textShadow:this.__input_textShadow+"rgba("+s+","+s+","+s+",.7)"})}}]),e}(Ca),JX=["-moz-","-o-","-webkit-","-ms-",""];function SI(n,e,t,i){n.style.background="",ce.each(JX,function(r){n.style.cssText+="background: "+r+"linear-gradient("+e+", "+t+" 0%, "+i+" 100%); "})}var eY='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>',tY=function(e,t){var i=e[t];return ce.isArray(arguments[2])||ce.isObject(arguments[2])?new wI(e,t,arguments[2]):ce.isNumber(i)?ce.isNumber(arguments[2])&&ce.isNumber(arguments[3])?ce.isNumber(arguments[4])?new n_(e,t,arguments[2],arguments[3],arguments[4]):new n_(e,t,arguments[2],arguments[3]):ce.isNumber(arguments[4])?new rf(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new rf(e,t,{min:arguments[2],max:arguments[3]}):ce.isString(i)?new CI(e,t):ce.isFunction(i)?new fw(e,t,""):ce.isBoolean(i)?new dw(e,t):null},iY=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n){setTimeout(n,1e3/60)},rY=function(){function n(){io(this,n),this.backgroundElement=document.createElement("div"),ce.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),X.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),ce.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var e=this;X.bind(this.backgroundElement,"click",function(){e.hide()})}return ro(n,[{key:"show",value:function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),ce.defer(function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"})}},{key:"hide",value:function(){var t=this,i=function r(){t.domElement.style.display="none",t.backgroundElement.style.display="none",X.unbind(t.domElement,"webkitTransitionEnd",r),X.unbind(t.domElement,"transitionend",r),X.unbind(t.domElement,"oTransitionEnd",r)};X.bind(this.domElement,"webkitTransitionEnd",i),X.bind(this.domElement,"transitionend",i),X.bind(this.domElement,"oTransitionEnd",i),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-X.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-X.getHeight(this.domElement)/2+"px"}}]),n}();!function(e,t){var i=t||document,r=document.createElement("style");r.type="text/css",r.innerHTML=e;var o=i.getElementsByTagName("head")[0];try{o.appendChild(r)}catch(s){}}(function(n){if("undefined"!=typeof window){var e=document.createElement("style");return e.setAttribute("type","text/css"),e.innerHTML=n,document.head.appendChild(e),n}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n"));var of="Default",sf=function(){try{return!!window.localStorage}catch(n){return!1}}(),af=void 0,DI=!0,Lu=void 0,pw=!1,OI=[],Jt=function n(e){var t=this,i=e||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),X.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],i=ce.defaults(i,{closeOnTop:!1,autoPlace:!0,width:n.DEFAULT_WIDTH}),i=ce.defaults(i,{resizable:i.autoPlace,hideable:i.autoPlace}),ce.isUndefined(i.load)?i.load={preset:of}:i.preset&&(i.load.preset=i.preset),ce.isUndefined(i.parent)&&i.hideable&&OI.push(this),i.resizable=ce.isUndefined(i.parent)&&i.resizable,i.autoPlace&&ce.isUndefined(i.scrollable)&&(i.scrollable=!0);var d,r=sf&&"true"===localStorage.getItem(ku(0,"isLocal")),o=void 0,s=void 0;if(Object.defineProperties(this,{parent:{get:function(){return i.parent}},scrollable:{get:function(){return i.scrollable}},autoPlace:{get:function(){return i.autoPlace}},closeOnTop:{get:function(){return i.closeOnTop}},preset:{get:function(){return t.parent?t.getRoot().preset:i.load.preset},set:function(h){t.parent?t.getRoot().preset=h:i.load.preset=h,function(n){for(var e=0;e<n.__preset_select.length;e++)n.__preset_select[e].value===n.preset&&(n.__preset_select.selectedIndex=e)}(this),t.revert()}},width:{get:function(){return i.width},set:function(h){i.width=h,vw(t,h)}},name:{get:function(){return i.name},set:function(h){i.name=h,s&&(s.innerHTML=i.name)}},closed:{get:function(){return i.closed},set:function(h){i.closed=h,i.closed?X.addClass(t.__ul,n.CLASS_CLOSED):X.removeClass(t.__ul,n.CLASS_CLOSED),this.onResize(),t.__closeButton&&(t.__closeButton.innerHTML=h?n.TEXT_OPEN:n.TEXT_CLOSED)}},load:{get:function(){return i.load}},useLocalStorage:{get:function(){return r},set:function(h){sf&&(r=h,h?X.bind(window,"unload",o):X.unbind(window,"unload",o),localStorage.setItem(ku(0,"isLocal"),h))}}}),ce.isUndefined(i.parent)){if(this.closed=i.closed||!1,X.addClass(this.domElement,n.CLASS_MAIN),X.makeSelectable(this.domElement,!1),sf&&r){t.useLocalStorage=!0;var a=localStorage.getItem(ku(0,"gui"));a&&(i.load=JSON.parse(a))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=n.TEXT_CLOSED,X.addClass(this.__closeButton,n.CLASS_CLOSE_BUTTON),i.closeOnTop?(X.addClass(this.__closeButton,n.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(X.addClass(this.__closeButton,n.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),X.bind(this.__closeButton,"click",function(){t.closed=!t.closed})}else{void 0===i.closed&&(i.closed=!0);var l=document.createTextNode(i.name);X.addClass(l,"controller-name"),s=gw(t,l),X.addClass(this.__ul,n.CLASS_CLOSED),X.addClass(s,"title"),X.bind(s,"click",function(h){return h.preventDefault(),t.closed=!t.closed,!1}),i.closed||(this.closed=!1)}i.autoPlace&&(ce.isUndefined(i.parent)&&(DI&&(Lu=document.createElement("div"),X.addClass(Lu,"dg"),X.addClass(Lu,n.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(Lu),DI=!1),Lu.appendChild(this.domElement),X.addClass(this.domElement,n.CLASS_AUTO_PLACE)),this.parent||vw(t,i.width)),this.__resizeHandler=function(){t.onResizeDebounced()},X.bind(window,"resize",this.__resizeHandler),X.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),X.bind(this.__ul,"transitionend",this.__resizeHandler),X.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),i.resizable&&function(n){var e=void 0;function t(o){return o.preventDefault(),n.width+=e-o.clientX,n.onResize(),e=o.clientX,!1}function i(){X.removeClass(n.__closeButton,Jt.CLASS_DRAG),X.unbind(window,"mousemove",t),X.unbind(window,"mouseup",i)}function r(o){return o.preventDefault(),e=o.clientX,X.addClass(n.__closeButton,Jt.CLASS_DRAG),X.bind(window,"mousemove",t),X.bind(window,"mouseup",i),!1}n.__resize_handle=document.createElement("div"),ce.extend(n.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),X.bind(n.__resize_handle,"mousedown",r),X.bind(n.__closeButton,"mousedown",r),n.domElement.insertBefore(n.__resize_handle,n.domElement.firstElementChild)}(this),this.saveToLocalStorageIfPossible=o=function(){sf&&"true"===localStorage.getItem(ku(0,"isLocal"))&&localStorage.setItem(ku(0,"gui"),JSON.stringify(t.getSaveObject()))},i.parent||((d=t.getRoot()).width+=1,ce.defer(function(){d.width-=1}))};function gw(n,e,t){var i=document.createElement("li");return e&&i.appendChild(e),t?n.__ul.insertBefore(i,t):n.__ul.appendChild(i),n.onResize(),i}function II(n){X.unbind(window,"resize",n.__resizeHandler),n.saveToLocalStorageIfPossible&&X.unbind(window,"unload",n.saveToLocalStorageIfPossible)}function mw(n,e){var t=n.__preset_select[n.__preset_select.selectedIndex];t.innerHTML=e?t.value+"*":t.value}function RI(n,e){var t=n.getRoot(),i=t.__rememberedObjects.indexOf(e.object);if(-1!==i){var r=t.__rememberedObjectIndecesToControllers[i];if(void 0===r&&(t.__rememberedObjectIndecesToControllers[i]=r={}),r[e.property]=e,t.load&&t.load.remembered){var o=t.load.remembered,s=void 0;if(o[n.preset])s=o[n.preset];else{if(!o[of])return;s=o[of]}if(s[i]&&void 0!==s[i][e.property]){var a=s[i][e.property];e.initialValue=a,e.setValue(a)}}}}function lf(n,e,t,i){if(void 0===e[t])throw new Error('Object "'+e+'" has no property "'+t+'"');var r=void 0;if(i.color)r=new i_(e,t);else{var o=[e,t].concat(i.factoryArgs);r=tY.apply(n,o)}i.before instanceof Ca&&(i.before=i.before.__li),RI(n,r),X.addClass(r.domElement,"c");var s=document.createElement("span");X.addClass(s,"property-name"),s.innerHTML=r.property;var a=document.createElement("div");a.appendChild(s),a.appendChild(r.domElement);var l=gw(n,a,i.before);return X.addClass(l,Jt.CLASS_CONTROLLER_ROW),X.addClass(l,r instanceof i_?"color":qX(r.getValue())),function(n,e,t){if(t.__li=e,t.__gui=n,ce.extend(t,{options:function(s){if(arguments.length>1){var a=t.__li.nextElementSibling;return t.remove(),lf(n,t.object,t.property,{before:a,factoryArgs:[ce.toArray(arguments)]})}if(ce.isArray(s)||ce.isObject(s)){var l=t.__li.nextElementSibling;return t.remove(),lf(n,t.object,t.property,{before:l,factoryArgs:[s]})}},name:function(s){return t.__li.firstElementChild.firstElementChild.innerHTML=s,t},listen:function(){return t.__gui.listen(t),t},remove:function(){return t.__gui.remove(t),t}}),t instanceof n_){var i=new rf(t.object,t.property,{min:t.__min,max:t.__max,step:t.__step});ce.each(["updateDisplay","onChange","onFinishChange","step","min","max"],function(o){var s=t[o],a=i[o];t[o]=i[o]=function(){var l=Array.prototype.slice.call(arguments);return a.apply(i,l),s.apply(t,l)}}),X.addClass(e,"has-slider"),t.domElement.insertBefore(i.domElement,t.domElement.firstElementChild)}else if(t instanceof rf){var r=function(s){if(ce.isNumber(t.__min)&&ce.isNumber(t.__max)){var a=t.__li.firstElementChild.firstElementChild.innerHTML,l=t.__gui.__listening.indexOf(t)>-1;t.remove();var c=lf(n,t.object,t.property,{before:t.__li.nextElementSibling,factoryArgs:[t.__min,t.__max,t.__step]});return c.name(a),l&&c.listen(),c}return s};t.min=ce.compose(r,t.min),t.max=ce.compose(r,t.max)}else t instanceof dw?(X.bind(e,"click",function(){X.fakeEvent(t.__checkbox,"click")}),X.bind(t.__checkbox,"click",function(o){o.stopPropagation()})):t instanceof fw?(X.bind(e,"click",function(){X.fakeEvent(t.__button,"click")}),X.bind(e,"mouseover",function(){X.addClass(t.__button,"hover")}),X.bind(e,"mouseout",function(){X.removeClass(t.__button,"hover")})):t instanceof i_&&(X.addClass(e,"color"),t.updateDisplay=ce.compose(function(o){return e.style.borderLeftColor=t.__color.toString(),o},t.updateDisplay),t.updateDisplay());t.setValue=ce.compose(function(o){return n.getRoot().__preset_select&&t.isModified()&&mw(n.getRoot(),!0),o},t.setValue)}(n,l,r),n.__controllers.push(r),r}function ku(n,e){return document.location.href+"."+e}function _w(n,e,t){var i=document.createElement("option");i.innerHTML=e,i.value=e,n.__preset_select.appendChild(i),t&&(n.__preset_select.selectedIndex=n.__preset_select.length-1)}function LI(n,e){e.style.display=n.useLocalStorage?"block":"none"}function aY(n){var e=n.__save_row=document.createElement("li");X.addClass(n.domElement,"has-save"),n.__ul.insertBefore(e,n.__ul.firstChild),X.addClass(e,"save-row");var t=document.createElement("span");t.innerHTML="&nbsp;",X.addClass(t,"button gears");var i=document.createElement("span");i.innerHTML="Save",X.addClass(i,"button"),X.addClass(i,"save");var r=document.createElement("span");r.innerHTML="New",X.addClass(r,"button"),X.addClass(r,"save-as");var o=document.createElement("span");o.innerHTML="Revert",X.addClass(o,"button"),X.addClass(o,"revert");var s=n.__preset_select=document.createElement("select");if(n.load&&n.load.remembered?ce.each(n.load.remembered,function(d,h){_w(n,h,h===n.preset)}):_w(n,of,!1),X.bind(s,"change",function(){for(var d=0;d<n.__preset_select.length;d++)n.__preset_select[d].innerHTML=n.__preset_select[d].value;n.preset=this.value}),e.appendChild(s),e.appendChild(t),e.appendChild(i),e.appendChild(r),e.appendChild(o),sf){var a=document.getElementById("dg-local-explain"),l=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(ku(0,"isLocal"))&&l.setAttribute("checked","checked"),LI(n,a),X.bind(l,"change",function(){n.useLocalStorage=!n.useLocalStorage,LI(n,a)})}var u=document.getElementById("dg-new-constructor");X.bind(u,"keydown",function(d){d.metaKey&&(67===d.which||67===d.keyCode)&&af.hide()}),X.bind(t,"click",function(){u.innerHTML=JSON.stringify(n.getSaveObject(),void 0,2),af.show(),u.focus(),u.select()}),X.bind(i,"click",function(){n.save()}),X.bind(r,"click",function(){var d=prompt("Enter a new preset name.");d&&n.saveAs(d)}),X.bind(o,"click",function(){n.revert()})}function vw(n,e){n.domElement.style.width=e+"px",n.__save_row&&n.autoPlace&&(n.__save_row.style.width=e+"px"),n.__closeButton&&(n.__closeButton.style.width=e+"px")}function r_(n,e){var t={};return ce.each(n.__rememberedObjects,function(i,r){var o={};ce.each(n.__rememberedObjectIndecesToControllers[r],function(a,l){o[l]=e?a.initialValue:a.getValue()}),t[r]=o}),t}function kI(n){0!==n.length&&iY.call(window,function(){kI(n)}),ce.each(n,function(e){e.updateDisplay()})}Jt.toggleHide=function(){pw=!pw,ce.each(OI,function(n){n.domElement.style.display=pw?"none":""})},Jt.CLASS_AUTO_PLACE="a",Jt.CLASS_AUTO_PLACE_CONTAINER="ac",Jt.CLASS_MAIN="main",Jt.CLASS_CONTROLLER_ROW="cr",Jt.CLASS_TOO_TALL="taller-than-window",Jt.CLASS_CLOSED="closed",Jt.CLASS_CLOSE_BUTTON="close-button",Jt.CLASS_CLOSE_TOP="close-top",Jt.CLASS_CLOSE_BOTTOM="close-bottom",Jt.CLASS_DRAG="drag",Jt.DEFAULT_WIDTH=245,Jt.TEXT_CLOSED="Close Controls",Jt.TEXT_OPEN="Open Controls",Jt._keydownHandler=function(n){"text"!==document.activeElement.type&&(72===n.which||72===n.keyCode)&&Jt.toggleHide()},X.bind(window,"keydown",Jt._keydownHandler,!1),ce.extend(Jt.prototype,{add:function(e,t){return lf(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return lf(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;ce.defer(function(){t.onResize()})},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&Lu.removeChild(this.domElement);var e=this;ce.each(this.__folders,function(t){e.removeFolder(t)}),X.unbind(window,"keydown",Jt._keydownHandler,!1),II(this)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var i=new Jt(t);this.__folders[e]=i;var r=gw(this,i.domElement);return X.addClass(r,"folder"),i},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],II(e);var t=this;ce.each(e.__folders,function(i){e.removeFolder(i)}),ce.defer(function(){t.onResize()})},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=X.getOffset(e.__ul).top,i=0;ce.each(e.__ul.childNodes,function(r){e.autoPlace&&r===e.__save_row||(i+=X.getHeight(r))}),window.innerHeight-t-20<i?(X.addClass(e.domElement,Jt.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-20+"px"):(X.removeClass(e.domElement,Jt.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&ce.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:ce.debounce(function(){this.onResize()},50),remember:function(){if(ce.isUndefined(af)&&((af=new rY).domElement.innerHTML=eY),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;ce.each(Array.prototype.slice.call(arguments),function(t){0===e.__rememberedObjects.length&&aY(e),-1===e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)}),this.autoPlace&&vw(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=r_(this)),e.folders={},ce.each(this.__folders,function(t,i){e.folders[i]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=r_(this),mw(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[of]=r_(this,!0)),this.load.remembered[e]=r_(this),this.preset=e,_w(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){ce.each(this.__controllers,function(t){this.getRoot().load.remembered?RI(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())},this),ce.each(this.__folders,function(t){t.revert(t)}),e||mw(this.getRoot(),!1)},listen:function(e){var t=0===this.__listening.length;this.__listening.push(e),t&&kI(this.__listening)},updateDisplay:function(){ce.each(this.__controllers,function(e){e.updateDisplay()}),ce.each(this.__folders,function(e){e.updateDisplay()})}});var FI=Jt;class cf{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}const pY=new ua(-1,1,1,-1,0,1),yw=new Ze;yw.setAttribute("position",new Fe([-1,3,0,-1,-1,0,3,-1,0],3)),yw.setAttribute("uv",new Fe([0,2,0,0,2,0],2));class NI{constructor(e){this._mesh=new Cn(yw,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,pY)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}var o_={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = opacity * texel;\n\n\t\t}"};class Ts extends cf{constructor(e,t,i,r){super(),this.renderScene=t,this.renderCamera=i,this.selectedObjects=void 0!==r?r:[],this.visibleEdgeColor=new xe(1,1,1),this.hiddenEdgeColor=new xe(.1,.04,.02),this.edgeGlow=0,this.usePatternTexture=!1,this.edgeThickness=1,this.edgeStrength=3,this.downSampleRatio=2,this.pulsePeriod=0,this._visibilityCache=new Map,this.resolution=void 0!==e?new ne(e.x,e.y):new ne(256,256);const o={minFilter:wn,magFilter:wn,format:li},s=Math.round(this.resolution.x/this.downSampleRatio),a=Math.round(this.resolution.y/this.downSampleRatio);this.maskBufferMaterial=new xs({color:16777215}),this.maskBufferMaterial.side=2,this.renderTargetMaskBuffer=new Gn(this.resolution.x,this.resolution.y,o),this.renderTargetMaskBuffer.texture.name="OutlinePass.mask",this.renderTargetMaskBuffer.texture.generateMipmaps=!1,this.depthMaterial=new am,this.depthMaterial.side=2,this.depthMaterial.depthPacking=3201,this.depthMaterial.blending=0,this.prepareMaskMaterial=this.getPrepareMaskMaterial(),this.prepareMaskMaterial.side=2,this.prepareMaskMaterial.fragmentShader=this.prepareMaskMaterial.fragmentShader.replace(/DEPTH_TO_VIEW_Z/g,(this.renderCamera.isPerspectiveCamera?"perspective":"orthographic")+"DepthToViewZ"),this.renderTargetDepthBuffer=new Gn(this.resolution.x,this.resolution.y,o),this.renderTargetDepthBuffer.texture.name="OutlinePass.depth",this.renderTargetDepthBuffer.texture.generateMipmaps=!1,this.renderTargetMaskDownSampleBuffer=new Gn(s,a,o),this.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,this.renderTargetBlurBuffer1=new Gn(s,a,o),this.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",this.renderTargetBlurBuffer1.texture.generateMipmaps=!1,this.renderTargetBlurBuffer2=new Gn(Math.round(s/2),Math.round(a/2),o),this.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",this.renderTargetBlurBuffer2.texture.generateMipmaps=!1,this.edgeDetectionMaterial=this.getEdgeDetectionMaterial(),this.renderTargetEdgeBuffer1=new Gn(s,a,o),this.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",this.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,this.renderTargetEdgeBuffer2=new Gn(Math.round(s/2),Math.round(a/2),o),this.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",this.renderTargetEdgeBuffer2.texture.generateMipmaps=!1,this.separableBlurMaterial1=this.getSeperableBlurMaterial(4),this.separableBlurMaterial1.uniforms.texSize.value.set(s,a),this.separableBlurMaterial1.uniforms.kernelRadius.value=1,this.separableBlurMaterial2=this.getSeperableBlurMaterial(4),this.separableBlurMaterial2.uniforms.texSize.value.set(Math.round(s/2),Math.round(a/2)),this.separableBlurMaterial2.uniforms.kernelRadius.value=4,this.overlayMaterial=this.getOverlayMaterial(),void 0===o_&&console.error("THREE.OutlinePass relies on CopyShader");const u=o_;this.copyUniforms=_x.clone(u.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new qi({uniforms:this.copyUniforms,vertexShader:u.vertexShader,fragmentShader:u.fragmentShader,blending:0,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new xe,this.oldClearAlpha=1,this.fsQuad=new NI(null),this.tempPulseColor1=new xe,this.tempPulseColor2=new xe,this.textureMatrix=new He}dispose(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose()}setSize(e,t){this.renderTargetMaskBuffer.setSize(e,t),this.renderTargetDepthBuffer.setSize(e,t);let i=Math.round(e/this.downSampleRatio),r=Math.round(t/this.downSampleRatio);this.renderTargetMaskDownSampleBuffer.setSize(i,r),this.renderTargetBlurBuffer1.setSize(i,r),this.renderTargetEdgeBuffer1.setSize(i,r),this.separableBlurMaterial1.uniforms.texSize.value.set(i,r),i=Math.round(i/2),r=Math.round(r/2),this.renderTargetBlurBuffer2.setSize(i,r),this.renderTargetEdgeBuffer2.setSize(i,r),this.separableBlurMaterial2.uniforms.texSize.value.set(i,r)}changeVisibilityOfSelectedObjects(e){const t=this._visibilityCache;function i(r){r.isMesh&&(!0===e?r.visible=t.get(r):(t.set(r,r.visible),r.visible=e))}for(let r=0;r<this.selectedObjects.length;r++)this.selectedObjects[r].traverse(i)}changeVisibilityOfNonSelectedObjects(e){const t=this._visibilityCache,i=[];function r(s){s.isMesh&&i.push(s)}for(let s=0;s<this.selectedObjects.length;s++)this.selectedObjects[s].traverse(r);this.renderScene.traverse(function(s){if(s.isMesh||s.isSprite){let a=!1;for(let l=0;l<i.length;l++)if(i[l].id===s.id){a=!0;break}if(!1===a){const l=s.visible;(!1===e||!0===t.get(s))&&(s.visible=e),t.set(s,l)}}else(s.isPoints||s.isLine)&&(!0===e?s.visible=t.get(s):(t.set(s,s.visible),s.visible=e))})}updateTextureMatrix(){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.renderCamera.projectionMatrix),this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse)}render(e,t,i,r,o){if(this.selectedObjects.length>0){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const s=e.autoClear;e.autoClear=!1,o&&e.state.buffers.stencil.setTest(!1),e.setClearColor(16777215,1),this.changeVisibilityOfSelectedObjects(!1);const a=this.renderScene.background;if(this.renderScene.background=null,this.renderScene.overrideMaterial=this.depthMaterial,e.setRenderTarget(this.renderTargetDepthBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.changeVisibilityOfSelectedObjects(!0),this._visibilityCache.clear(),this.updateTextureMatrix(),this.changeVisibilityOfNonSelectedObjects(!1),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms.cameraNearFar.value.set(this.renderCamera.near,this.renderCamera.far),this.prepareMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,e.setRenderTarget(this.renderTargetMaskBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.renderScene.overrideMaterial=null,this.changeVisibilityOfNonSelectedObjects(!0),this._visibilityCache.clear(),this.renderScene.background=a,this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetMaskBuffer.texture,e.setRenderTarget(this.renderTargetMaskDownSampleBuffer),e.clear(),this.fsQuad.render(e),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),this.pulsePeriod>0){const l=.625+.75*Math.cos(.01*performance.now()/this.pulsePeriod)/2;this.tempPulseColor1.multiplyScalar(l),this.tempPulseColor2.multiplyScalar(l)}this.fsQuad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value.set(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value=this.tempPulseColor2,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=Ts.BlurDirectionX,this.separableBlurMaterial1.uniforms.kernelRadius.value=this.edgeThickness,e.setRenderTarget(this.renderTargetBlurBuffer1),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=Ts.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms.direction.value=Ts.BlurDirectionX,e.setRenderTarget(this.renderTargetBlurBuffer2),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms.direction.value=Ts.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer2),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.overlayMaterial,this.overlayMaterial.uniforms.maskTexture.value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms.edgeTexture1.value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms.edgeTexture2.value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms.patternTexture.value=this.patternTexture,this.overlayMaterial.uniforms.edgeStrength.value=this.edgeStrength,this.overlayMaterial.uniforms.edgeGlow.value=this.edgeGlow,this.overlayMaterial.uniforms.usePatternTexture.value=this.usePatternTexture,o&&e.state.buffers.stencil.setTest(!0),e.setRenderTarget(i),this.fsQuad.render(e),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=s}this.renderToScreen&&(this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=i.texture,e.setRenderTarget(null),this.fsQuad.render(e))}getPrepareMaskMaterial(){return new qi({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new ne(.5,.5)},textureMatrix:{value:null}},vertexShader:"#include <morphtarget_pars_vertex>\n\t\t\t\t#include <skinning_pars_vertex>\n\n\t\t\t\tvarying vec4 projTexCoord;\n\t\t\t\tvarying vec4 vPosition;\n\t\t\t\tuniform mat4 textureMatrix;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\t#include <skinbase_vertex>\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <morphtarget_vertex>\n\t\t\t\t\t#include <skinning_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t\tvPosition = mvPosition;\n\t\t\t\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t\t\t\t\tprojTexCoord = textureMatrix * worldPosition;\n\n\t\t\t\t}",fragmentShader:"#include <packing>\n\t\t\t\tvarying vec4 vPosition;\n\t\t\t\tvarying vec4 projTexCoord;\n\t\t\t\tuniform sampler2D depthTexture;\n\t\t\t\tuniform vec2 cameraNearFar;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tfloat depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));\n\t\t\t\t\tfloat viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );\n\t\t\t\t\tfloat depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;\n\t\t\t\t\tgl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);\n\n\t\t\t\t}"})}getEdgeDetectionMaterial(){return new qi({uniforms:{maskTexture:{value:null},texSize:{value:new ne(.5,.5)},visibleEdgeColor:{value:new D(1,1,1)},hiddenEdgeColor:{value:new D(1,1,1)}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\n\t\t\t\tuniform sampler2D maskTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec3 visibleEdgeColor;\n\t\t\t\tuniform vec3 hiddenEdgeColor;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tvec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);\n\t\t\t\t\tvec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);\n\t\t\t\t\tvec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);\n\t\t\t\t\tvec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);\n\t\t\t\t\tvec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);\n\t\t\t\t\tfloat diff1 = (c1.r - c2.r)*0.5;\n\t\t\t\t\tfloat diff2 = (c3.r - c4.r)*0.5;\n\t\t\t\t\tfloat d = length( vec2(diff1, diff2) );\n\t\t\t\t\tfloat a1 = min(c1.g, c2.g);\n\t\t\t\t\tfloat a2 = min(c3.g, c4.g);\n\t\t\t\t\tfloat visibilityFactor = min(a1, a2);\n\t\t\t\t\tvec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;\n\t\t\t\t\tgl_FragColor = vec4(edgeColor, 1.0) * vec4(d);\n\t\t\t\t}"})}getSeperableBlurMaterial(e){return new qi({defines:{MAX_RADIUS:e},uniforms:{colorTexture:{value:null},texSize:{value:new ne(.5,.5)},direction:{value:new ne(.5,.5)},kernelRadius:{value:1}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec2 direction;\n\t\t\t\tuniform float kernelRadius;\n\n\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\n\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, kernelRadius);\n\t\t\t\t\tvec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;\n\t\t\t\t\tvec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);\n\t\t\t\t\tvec2 uvOffset = delta;\n\t\t\t\t\tfor( int i = 1; i <= MAX_RADIUS; i ++ ) {\n\t\t\t\t\t\tfloat w = gaussianPdf(uvOffset.x, kernelRadius);\n\t\t\t\t\t\tvec4 sample1 = texture2D( colorTexture, vUv + uvOffset);\n\t\t\t\t\t\tvec4 sample2 = texture2D( colorTexture, vUv - uvOffset);\n\t\t\t\t\t\tdiffuseSum += ((sample1 + sample2) * w);\n\t\t\t\t\t\tweightSum += (2.0 * w);\n\t\t\t\t\t\tuvOffset += delta;\n\t\t\t\t\t}\n\t\t\t\t\tgl_FragColor = diffuseSum/weightSum;\n\t\t\t\t}"})}getOverlayMaterial(){return new qi({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\n\t\t\t\tuniform sampler2D maskTexture;\n\t\t\t\tuniform sampler2D edgeTexture1;\n\t\t\t\tuniform sampler2D edgeTexture2;\n\t\t\t\tuniform sampler2D patternTexture;\n\t\t\t\tuniform float edgeStrength;\n\t\t\t\tuniform float edgeGlow;\n\t\t\t\tuniform bool usePatternTexture;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec4 edgeValue1 = texture2D(edgeTexture1, vUv);\n\t\t\t\t\tvec4 edgeValue2 = texture2D(edgeTexture2, vUv);\n\t\t\t\t\tvec4 maskColor = texture2D(maskTexture, vUv);\n\t\t\t\t\tvec4 patternColor = texture2D(patternTexture, 6.0 * vUv);\n\t\t\t\t\tfloat visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;\n\t\t\t\t\tvec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;\n\t\t\t\t\tvec4 finalColor = edgeStrength * maskColor.r * edgeValue;\n\t\t\t\t\tif(usePatternTexture)\n\t\t\t\t\t\tfinalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);\n\t\t\t\t\tgl_FragColor = finalColor;\n\t\t\t\t}",blending:2,depthTest:!1,depthWrite:!1,transparent:!0})}}Ts.BlurDirectionX=new ne(1,0),Ts.BlurDirectionY=new ne(0,1);class gY extends cf{constructor(e,t,i,r,o){super(),this.scene=e,this.camera=t,this.overrideMaterial=i,this.clearColor=r,this.clearAlpha=void 0!==o?o:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new xe}render(e,t,i){const r=e.autoClear;let o,s;e.autoClear=!1,void 0!==this.overrideMaterial&&(s=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),o=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:i),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,o),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=s),e.autoClear=r}}class zI extends cf{constructor(e,t){super(),this.textureID=void 0!==t?t:"tDiffuse",e instanceof qi?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=_x.clone(e.uniforms),this.material=new qi({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new NI(this.material)}render(e,t,i){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}}class BI extends cf{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,i){const r=e.getContext(),o=e.state;let s,a;o.buffers.color.setMask(!1),o.buffers.depth.setMask(!1),o.buffers.color.setLocked(!0),o.buffers.depth.setLocked(!0),this.inverse?(s=0,a=1):(s=1,a=0),o.buffers.stencil.setTest(!0),o.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),o.buffers.stencil.setFunc(r.ALWAYS,s,4294967295),o.buffers.stencil.setClear(a),o.buffers.stencil.setLocked(!0),e.setRenderTarget(i),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),o.buffers.color.setLocked(!1),o.buffers.depth.setLocked(!1),o.buffers.stencil.setLocked(!1),o.buffers.stencil.setFunc(r.EQUAL,1,4294967295),o.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),o.buffers.stencil.setLocked(!0)}}class mY extends cf{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class _Y{constructor(e,t){if(this.renderer=e,void 0===t){const i={minFilter:wn,magFilter:wn,format:li},r=e.getSize(new ne);this._pixelRatio=e.getPixelRatio(),this._width=r.width,this._height=r.height,(t=new Gn(this._width*this._pixelRatio,this._height*this._pixelRatio,i)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===o_&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===zI&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new zI(o_),this.clock=new tw}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);-1!==t&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){void 0===e&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let i=!1;for(let r=0,o=this.passes.length;r<o;r++){const s=this.passes[r];if(!1!==s.enabled){if(s.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),s.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),s.needsSwap){if(i){const a=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),l.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==BI&&(s instanceof BI?i=!0:s instanceof mY&&(i=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(void 0===e){const t=this.renderer.getSize(new ne);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const i=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(i,r),this.renderTarget2.setSize(i,r);for(let o=0;o<this.passes.length;o++)this.passes[o].setSize(i,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}}new ua(-1,1,1,-1,0,1);const bw=new Ze;bw.setAttribute("position",new Fe([-1,3,0,-1,-1,0,3,-1,0],3)),bw.setAttribute("uv",new Fe([0,2,0,0,2,0],2));const yY=["pagina"];let bY=(()=>{class n{constructor(t,i){this.utilizadoresService=t,this.ligacoesService=i,this.animar=()=>{let r,o,s,a;this.deltaT=this.clock.getDelta(),0==this.userInterfaceCheckBox&&this.controls.update(),this.cameraSpotlight.position.set(this.camera.position.x,this.camera.position.y,this.camera.position.z),requestAnimationFrame(this.animar),r=Math.floor(0),o=Math.floor(0),s=Math.floor(this.larguraPagina),a=Math.floor(this.alturaPagina),this.renderer.setViewport(r,o,s,a),this.renderer.setScissor(r,o,s,a),this.renderer.setScissorTest(!0),this.scene.background=new xe(6316128),this.camera.updateProjectionMatrix(),this.renderer.render(this.scene,this.camera),this.composer.render(),r=Math.floor(this.larguraPagina-.2*this.larguraPagina),o=Math.floor(0),s=Math.floor(.2*this.larguraPagina),a=Math.floor(.2*this.alturaPagina),this.renderer.setViewport(r,o,s,a),this.renderer.setScissor(r,o,s,a),this.renderer.setScissorTest(!0),this.scene.background=new xe(4210752),this.minimap.updateProjectionMatrix(),this.renderer.render(this.scene,this.minimap),this.renderer.clearDepth();var l=this.camera.position,c=this.camera.clone(),u=new D(0,0,-1);this.raycaster_front.set(l,c.getWorldDirection(u).normalize());var d=this.raycaster_front.intersectObjects(this.colisiveis);this.frontCollision=d.length>0&&d[0].distance<.5,this.raycaster_back.set(l,c.getWorldDirection(u).normalize().negate());var h=this.raycaster_back.intersectObjects(this.colisiveis);this.backCollision=h.length>0&&h[0].distance<.5,c.rotateOnAxis(new D(1,0,0),Math.PI/2),this.raycaster_up.set(l,c.getWorldDirection(u).normalize());var f=this.raycaster_up.intersectObjects(this.colisiveis);this.upCollision=f.length>0&&f[0].distance<.5,this.raycaster_down.set(l,c.getWorldDirection(u).normalize().negate());var m=this.raycaster_down.intersectObjects(this.colisiveis);this.downCollision=m.length>0&&m[0].distance<.5;var v=new fI(c.getWorldDirection(u).normalize(),this.camera.position,1e3,16777215,5,5);this.cameraSpotlight.lookAt(v.up)},this.zoom=.035,this.zoomMinimo=.01,this.zoomMaximo=.5,this.larguraPagina=200,this.alturaPagina=200,this.alterarDistanciaCamera=!1,this.sensibilidadeCamera=.0016,this.cameraX=0,this.cameraY=0,this.larguraRatio=0,this.alturaRatio=0,this.frontCollision=!1,this.backCollision=!1,this.emotion_sprites=new Array,this.userInterfaceCheckBox=!1,this.keycodes=["KeyA","KeyD","KeyS","KeyW","KeyP","KeyL"],this.clock=new tw,this.nivelDaRede=1}ngAfterViewInit(){this.larguraPagina=this.pagina.nativeElement.offsetWidth,this.alturaPagina=this.pagina.nativeElement.offsetHeight,this.larguraRatio=window.innerWidth/this.larguraPagina,this.alturaRatio=window.innerHeight/this.alturaPagina}ngOnInit(){this.utilizadoresService.getUtilizadorAutenticado().subscribe(t=>{this.autenticado=t,this.ligacoesService.getRedeDoUtilizadorAutenticado(this.nivelDaRede).subscribe(i=>{this.rede=i,this.inicializar(),this.animar()})})}inicializar(){this.scene=new um,this.scene.background=new xe("#dfdfdf");const t=this.larguraPagina/this.alturaPagina;t<1?(this.camera=new Kn(5,t,.1,2e3),this.minimap=new ua(-1,1,1/t,-1/t,.1,2e3)):(this.camera=new Kn(5,t,.1,2e3),this.minimap=new ua(-t,t,1,-1,.1,2e3)),this.camera.position.set(0,0,15),this.minimap.position.set(0,0,100),this.camera.zoom=this.zoom,this.minimap.zoom=.03,this.cameraRotationReset=this.camera.rotation,this.cameraPositionReset=this.camera.position,this.renderer=new $t({antialias:!0,logarithmicDepthBuffer:!0}),this.renderer.setSize(this.larguraPagina,this.alturaPagina),this.renderer.shadowMap.enabled=!0,this.pagina.nativeElement.appendChild(this.renderer.domElement),this.controls=new GX(this.camera,this.renderer.domElement),this.redeObjeto=new jX(this.rede,this.autenticado),this.scene.add(this.redeObjeto.objeto),this.utilizadores_mesh=this.redeObjeto.utilizadores_mesh,this.ligacoes_mesh=this.redeObjeto.ligacoes_mesh,this.colisiveis=this.utilizadores_mesh,this.colisiveis=this.colisiveis.concat(this.ligacoes_mesh),this.utilizadores=this.redeObjeto.utilizadores;var r=this.camera.position,o=this.camera.clone(),s=new D(0,0,-1),a=new D(0,1,0);this.raycaster_front=new $o(r,o.getWorldDirection(s).normalize()),this.raycaster_back=new $o(r,o.getWorldDirection(s).negate().normalize()),this.raycaster_up=new $o(r,o.getWorldDirection(a).normalize()),this.raycaster_down=new $o(r,o.getWorldDirection(a).normalize().negate()),this.camera_raycaster=new $o,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.context.font="Bold 20px Arial",this.context.fillStyle="rgba(0,0,0,0.95)",this.context.fillText("Hello, world!",0,20),this.texture=new Pn(this.canvas),this.texture.needsUpdate=!0;var l=new zh({map:this.texture});this.sprite=new Hh(l),this.sprite.scale.set(20,10,1),this.sprite.position.set(this.utilizadores[0].objeto.position.x,this.utilizadores[0].objeto.position.y,.5),this.scene.add(this.sprite),this.sprite.visible=!1,this.sprite.renderOrder=999,this.sprite.onBeforeRender=function(m){m.clearDepth()},this.composer=new _Y(this.renderer),this.renderPass=new gY(this.scene,this.camera),this.composer.addPass(this.renderPass),this.outlinePass=new Ts(new ne(this.larguraPagina,this.alturaPagina),this.scene,this.camera),this.outlinePass.edgeStrength=50,this.outlinePass.edgeThickness=1,this.outlinePass.edgeGlow=0,this.outlinePass.visibleEdgeColor=new xe("rgb(0, 255, 255)"),this.outlinePass.hiddenEdgeColor=new xe("rgb(0, 100, 100)"),this.composer.addPass(this.outlinePass),this.caminho_outlinePass=new Ts(new ne(this.larguraPagina,this.alturaPagina),this.scene,this.camera),this.caminho_outlinePass.edgeStrength=25,this.caminho_outlinePass.edgeThickness=1,this.caminho_outlinePass.edgeGlow=0,this.caminho_outlinePass.pulsePeriod=0,this.caminho_outlinePass.visibleEdgeColor=new xe("rgb(255, 0, 0)"),this.caminho_outlinePass.hiddenEdgeColor=new xe("rgb(100, 0, 0)"),this.composer.addPass(this.caminho_outlinePass);var c=new Kx(16777215);c.intensity=.2,this.scene.add(c);var u=new Wm("white");u.position.set(20,30,40),u.intensity=1,u.distance=1e3,u.lookAt(this.utilizadores_mesh[0].position),u.castShadow=!0,this.scene.add(u);var d=new Wm("white");d.position.set(-20,-30,40),d.intensity=1,d.distance=1e3,d.lookAt(this.utilizadores_mesh[0].position),d.castShadow=!0,this.scene.add(d),this.cameraSpotlight=new Jx("red"),this.cameraSpotlight.position.set(this.camera.position.x,this.camera.position.y,this.camera.position.z),this.cameraSpotlight.intensity=1,this.cameraSpotlight.distance=0,this.cameraSpotlight.penumbra=1,this.cameraSpotlight.castShadow=!0,this.cameraSpotlight.angle=Math.PI/2,this.scene.add(this.cameraSpotlight);for(let m=0;m<this.utilizadores.length;m++){var h=this.utilizadores[m].estadoEmocional.toLowerCase();this.emotion_sprites.push(this.createEmotionBillboardLabel(this.utilizadores_mesh[m].position,"../../../assets/emocao_"+h+".png"))}this.elem_fullscreen=document.getElementById("visualizacao"),this.loadMenu()}handleKeyboardEvent(t){1==this.userInterfaceCheckBox&&(t.code==this.keycodes[0]?(this.camera.rotateY(2*this.deltaT),this.cameraSpotlight.rotateY(2*this.deltaT)):t.code==this.keycodes[1]&&(this.camera.rotateY(-2*this.deltaT),this.cameraSpotlight.rotateY(-2*this.deltaT)),t.code!=this.keycodes[2]||this.backCollision?t.code==this.keycodes[3]&&!this.frontCollision&&this.camera.translateZ(-10*this.deltaT):this.camera.translateZ(10*this.deltaT),t.code!=this.keycodes[4]||this.upCollision?t.code==this.keycodes[5]&&!this.downCollision&&this.camera.translateY(-10*this.deltaT):this.camera.translateY(10*this.deltaT),this.camera.updateProjectionMatrix())}onMousedown(t){t.preventDefault();var i=this.utilizadores,r=this.renderer.domElement.getBoundingClientRect(),a=new ne((t.clientX-r.left)/this.larguraPagina*2-1,-(t.clientY-r.top)/this.alturaPagina*2+1);this.camera_raycaster.setFromCamera(a,this.camera);var l=this.camera_raycaster.intersectObjects(this.utilizadores_mesh);if(l.length>0){var c=new Cn,h="Nome: ",f="Tags: ",m="";this.outlinePass.selectedObjects=[c=l[0].object],i.forEach(function(M){M.objeto==c&&(h+=M.nome,f+=M.tags,m=M.avatar)});var v=new Image;v.src="../../../assets/"+m,this.context.clearRect(0,0,640,480);var _=this.context.measureText(f).width;this.context.fillStyle="rgba(0,0,0,0.95)",this.context.fillRect(0,0,_+8,48),this.context.fillStyle="rgba(255,255,255,0.95)",this.context.fillRect(2,2,_+4,44),this.context.fillStyle="rgba(0,0,0,1)",this.context.fillText(h,4,20),this.context.fillText(f,4,40),this.context.drawImage(v,0,50,50,50),this.texture.needsUpdate=!0,this.sprite.position.set(c.position.x+3,c.position.y+5,.5),this.sprite.visible=!0}else this.sprite.visible=!1,this.outlinePass.selectedObjects=[]}onMouseClick(t){t.preventDefault();var o,i=new Array,r=this.redeObjeto.ligacoes,s=this.utilizadores,a=this.renderer.domElement.getBoundingClientRect(),u=new ne((t.clientX-a.left)/this.larguraPagina*2-1,-(t.clientY-a.top)/this.alturaPagina*2+1);this.camera_raycaster.setFromCamera(u,this.camera);var d=this.camera_raycaster.intersectObjects(this.utilizadores_mesh);if(d.length>0){this.caminho_outlinePass.selectedObjects=[];var h=d[0].object;if(s.forEach(function(f){f.objeto==h&&(o=f)}),null!=o){for(;o.email!=this.redeObjeto.utilizadorAutenticado.email;){i.push(o.objeto);for(let f=0;f<r.length;f++)r[f].utilizadorB.email==o.email&&(o=r[f].utilizadorA,i.push(r[f].object))}i.push(this.redeObjeto.utilizadores[0].objeto),this.caminho_outlinePass.selectedObjects=i}}}ControlChange(t){this.controls.enabled=!t,this.userInterfaceCheckBox=t,this.camera.setRotationFromEuler(this.cameraRotationReset),this.cameraRotationReset.setFromQuaternion(this.camera.quaternion),this.camera.position.set(this.cameraPositionReset.x,this.cameraPositionReset.y,this.cameraPositionReset.z),this.camera.updateProjectionMatrix()}onResize(t){document.fullscreenElement?(this.larguraPagina=t.target.innerWidth,this.alturaPagina=t.target.innerHeight):(this.larguraPagina=t.target.innerWidth/this.larguraRatio,this.alturaPagina=t.target.innerHeight/this.alturaRatio);const i=this.larguraPagina/this.alturaPagina;i<1?(this.minimap.left=-1,this.minimap.right=1,this.minimap.top=1/i,this.minimap.bottom=-1/i):(this.minimap.left=-i,this.minimap.right=i,this.minimap.top=1,this.minimap.bottom=-1),this.camera.aspect=i,this.camera.updateProjectionMatrix(),this.minimap.updateProjectionMatrix(),this.renderer.setSize(this.larguraPagina,this.alturaPagina)}createEmotionBillboardLabel(t,i){var r,o=document.createElement("canvas");r=o.getContext("2d");var s=new Image;s.src=i;var a=new Pn(o);s.onload=function(){r.drawImage(s,o.width/2,0,50,50),a.needsUpdate=!0},a.needsUpdate=!0;var l=new zh({map:a}),c=new Hh(l);return c.scale.set(20,10,1),c.position.set(t.x,t.y,.5),this.scene.add(c),c.visible=!0,a.needsUpdate=!0,c}openFullscreen(){this.elem_fullscreen.requestFullscreen()}loadMenu(){const i=new FI({autoPlace:!1}),r=i.addFolder("options");r.add({first_person:!1},"first_person").onFinishChange(s=>{this.ControlChange(s)}).listen(),r.open();var o=document.getElementById("gui-container");null!=o&&o.appendChild(i.domElement)}aumentarNivelRede(){if(this.nivelDaRede<6){this.nivelDaRede+=1,this.alterarNivelRede(this.nivelDaRede);var t=document.getElementById("nivelRede");t&&(t.innerHTML=this.nivelDaRede.toString())}else vt().fire({position:"bottom-end",icon:"error",title:"O valor m\xe1ximo do nivel de rede \xe9 6.",showConfirmButton:!1,timer:1500})}diminuirNivelRede(){if(this.nivelDaRede>1){this.nivelDaRede-=1,this.alterarNivelRede(this.nivelDaRede);var t=document.getElementById("nivelRede");t&&(t.innerHTML=this.nivelDaRede.toString())}else vt().fire({position:"bottom-end",icon:"error",title:"O valor minimo do nivel de rede \xe9 1.",showConfirmButton:!1,timer:1500})}alterarNivelRede(t){t>=1&&(this.nivelDaRede=t,this.ligacoesService.getRedeDoUtilizadorAutenticado(this.nivelDaRede).subscribe(i=>{this.redeObjeto.atualizarRede(i),this.rede=i,this.atualizarJogo()}))}atualizarJogo(){this.utilizadores_mesh=this.redeObjeto.utilizadores_mesh,this.ligacoes_mesh=this.redeObjeto.ligacoes_mesh,this.colisiveis=this.utilizadores_mesh,this.colisiveis=this.colisiveis.concat(this.ligacoes_mesh),this.utilizadores=this.redeObjeto.utilizadores;var t=this.camera.position,i=this.camera.clone(),r=new D(0,0,-1),o=new D(0,1,0);this.raycaster_front=new $o(t,i.getWorldDirection(r).normalize()),this.raycaster_back=new $o(t,i.getWorldDirection(r).negate().normalize()),this.raycaster_up=new $o(t,i.getWorldDirection(o).normalize()),this.raycaster_down=new $o(t,i.getWorldDirection(o).normalize().negate()),this.camera_raycaster=new $o,this.emotion_sprites.forEach(l=>{l.removeFromParent()}),this.emotion_sprites=new Array;for(let l=0;l<this.utilizadores.length;l++){var s=this.utilizadores[l].estadoEmocional.toLowerCase();this.emotion_sprites.push(this.createEmotionBillboardLabel(this.utilizadores_mesh[l].position,"../../../assets/emocao_"+s+".png"))}}}return n.\u0275fac=function(t){return new(t||n)(G(Bo),G(Uo))},n.\u0275cmp=Pt({type:n,selectors:[["app-consultar-rede"]],viewQuery:function(t,i){if(1&t&&ls(yY,5),2&t){let r;qr(r=Xr())&&(i.pagina=r.first)}},hostBindings:function(t,i){1&t&&J("keydown",function(o){return i.handleKeyboardEvent(o)},!1,iC)("mousemove",function(o){return i.onMousedown(o)})("mousedown",function(o){return i.onMouseClick(o)})},decls:16,vars:0,consts:[["id","opcoes"],[1,"fullscreen"],[3,"click"],[1,"nivelRede"],["id","nivelRede"],["id","visualizacao",1,"pagina",3,"resize"],["pagina",""],["id","gui-container"]],template:function(t,i){1&t&&(p(0,"div",0),p(1,"div",1),p(2,"button",2),J("click",function(){return i.openFullscreen()}),S(3,"Tela Cheia"),g(),g(),p(4,"div",3),p(5,"button",2),J("click",function(){return i.aumentarNivelRede()}),S(6,"Aumentar Rede"),g(),p(7,"button",2),J("click",function(){return i.diminuirNivelRede()}),S(8,"Diminuir Rede"),g(),p(9,"p"),S(10,"Nivel da Rede: "),g(),p(11,"p",4),S(12,"1"),g(),g(),g(),p(13,"div",5,6),J("resize",function(o){return i.onResize(o)},!1,Av),U(15,"div",7),g())},styles:['*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}.pagina[_ngcontent-%COMP%]{width:100%;height:100%}#gui-container[_ngcontent-%COMP%]{position:absolute;z-index:100}.fullscreen[_ngcontent-%COMP%]{margin-right:5px}.fullscreen[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#20416a;border:0;color:#fff;cursor:pointer;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:.9rem;padding:5px}.fullscreen[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#415b7c}.nivelRede[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.nivelRede[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:.9rem;margin-right:5px}.nivelRede[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#20416a;border:0;color:#fff;cursor:pointer;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:.9rem;margin-right:5px;padding:5px}.nivelRede[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#415b7c}#opcoes[_ngcontent-%COMP%]{background-color:#606060;width:100%;border-bottom:solid 1px white;display:flex;align-items:center}#test[_ngcontent-%COMP%]{z-index:9999}']}),n})(),CY=(()=>{class n{constructor(t,i){this.el=t,this.r2=i,this.data=[],this.config={},this.clicked=new It,this.dataChanges=new It,this.afterInit=new It,this.afterChecked=new It,this.cloudDataHtmlElements=[],this.dataArr=[]}get calculatedWidth(){let t=this.config.width||this.width||1;return this.el.nativeElement.parentNode.offsetWidth>0&&t<=1&&t>0&&(t*=this.el.nativeElement.parentNode.offsetWidth),t}get calculatedHeight(){let t=this.config.height||this.height||400;return this.el.nativeElement.parentNode.offsetHeight>0&&t<=1&&t>0&&(t*=this.el.nativeElement.parentNode.offsetHeight),t}onResize(t){this.logMessage("debug","rezisze triggered"),window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{this.options.realignOnResize&&this.reDraw()},200)}ngOnChanges(t){this.logMessage("debug","ngOnChanges fired",t),this.config=Ge({width:500,height:300,overflow:!0,strict:!1,zoomOnHover:{transitionTime:0,scale:1,delay:0},realignOnResize:!1,randomizeAngle:!1,step:2,log:!1},this.config),this.width&&(this.config.width=this.width),this.height&&(this.config.height=this.height),"boolean"==typeof this.overflow&&(this.config.overflow=this.overflow),"boolean"==typeof this.strict&&(this.config.strict=this.strict),"boolean"==typeof this.realignOnResize&&(this.config.realignOnResize=this.realignOnResize),"boolean"==typeof this.randomizeAngle&&(this.config.randomizeAngle=this.randomizeAngle),"string"==typeof this.background&&(this.config.background=this.background),"string"==typeof this.font&&(this.config.font=this.font),this.zoomOnHover&&(this.config.zoomOnHover=this.zoomOnHover),this.step&&(this.config.step=this.step),this.log&&(this.config.log=this.log),this.delay&&(this.config.delay=this.delay),this.logMessage("warn","cloud configuration",this.config),this.config.font&&this.r2.setStyle(this.el.nativeElement,"font",this.config.font),this.config.background&&this.r2.setStyle(this.el.nativeElement,"background",this.config.background),this.reDraw(t)}ngAfterContentInit(){var t;null==(t=this.afterInit)||t.emit(),this.logMessage("debug","afterInit emitted")}ngAfterContentChecked(){var t;null==(t=this.afterChecked)||t.emit(),this.logMessage("debug","afterChecked emitted")}reDraw(t){var i,r;null==(i=this.dataChanges)||i.emit(t),null==(r=this.afterChecked)||r.emit(),this.logMessage("debug","dataChanges emitted"),this.cloudDataHtmlElements=[],this.data?(this.el.nativeElement.innerHTML="",t&&t.data&&(this.dataArr=t.data.currentValue),this.options=ti(Ge({},this.config),{aspectRatio:this.calculatedWidth/this.calculatedHeight,width:this.calculatedWidth,height:this.calculatedHeight,center:{x:this.calculatedWidth/2,y:this.calculatedHeight/2}}),this.r2.setStyle(this.el.nativeElement,"width",this.options.width+"px"),this.r2.setStyle(this.el.nativeElement,"height",this.options.height+"px"),this.drawWordCloud(),this.logMessage("debug","reDraw finished")):console.error("angular-tag-cloud: No data passed. Please pass an Array of CloudData")}descriptiveEntry(t){let i=t.text;return i+=t.color?`-${t.color}`:"",i+=t.external?`-${t.external}`:"",i+=t.link?`-${t.link}`:"",i+=t.rotate?`-${t.rotate}`:"",i}drawWordCloud(){this.dataArr.sort((r,o)=>this.descriptiveEntry(r).localeCompare(this.descriptiveEntry(o))),this.dataArr.sort((r,o)=>o.weight-r.weight);const t=this.dataArr.filter(r=>r.position),i=this.dataArr.filter(r=>!r.position);t.forEach((r,o)=>{this.drawWord(o,r)}),i.forEach((r,o)=>{this.drawWord(o,r)})}hitTest(t){for(const i of this.cloudDataHtmlElements)if(this.overlapping(t,i))return!0;return!1}overlapping(t,i){const r=t.getBoundingClientRect(),o=i.getBoundingClientRect();return!(r.right<o.left||r.left>o.right||r.bottom<o.top||r.top>o.bottom)}getWeightForWord(t){let i=5;return this.dataArr[0].weight>this.dataArr[this.dataArr.length-1].weight&&(this.options.strict?t.weight>10?(i=10,this.logMessage("warn",`[TagCloud strict] Weight property ${t.weight} > 10. Fallback to 10 as you are using strict mode`,t)):t.weight<1?(i=1,this.logMessage("warn",`[TagCloud strict] Given weight property ${t.weight} < 1. Fallback to 1 as you are using strict mode`,t)):t.weight%1!=0?(i=Math.round(t.weight),this.logMessage("warn",`[TagCloud strict] Given weight property ${t.weight} is not an integer. Rounded value to ${i}`,t)):i=t.weight:i=Math.round((t.weight-this.dataArr[this.dataArr.length-1].weight)/(this.dataArr[0].weight-this.dataArr[this.dataArr.length-1].weight)*9)+1),i}setWordColor(t,i){this.r2.setStyle(t,"color",i)}setTooltip(t,i){this.r2.addClass(t,"tooltip");const r=this.r2.createElement("span");r.className="tooltiptext";const o=this.r2.createText(i);r.appendChild(o),t.appendChild(r)}setWordRotation(t,i){const r=i?`rotate(${i}deg)`:"";return this.r2.setStyle(t,"transform",r),r}wrapNodeIntoAnchorElement(t,i){const r=this.r2.createElement("a");return r.href=i.link||"",void 0!==i.external&&i.external&&(r.target="_blank"),r.appendChild(t),r}applyZoomStyle(t,i,r,o){this.options.zoomOnHover&&1!==this.options.zoomOnHover.scale&&(this.options.zoomOnHover.transitionTime||(this.options.zoomOnHover.transitionTime=0),this.options.zoomOnHover.scale||(this.options.zoomOnHover.scale=1),i.onmouseover=()=>{var s,a,l,c;(null==(s=this.options.zoomOnHover)?void 0:s.transitionTime)&&this.r2.setStyle(i,"transition",`transform ${this.options.zoomOnHover.transitionTime}s`),(null==(a=this.options.zoomOnHover)?void 0:a.scale)&&this.r2.setStyle(i,"transform",`scale(${this.options.zoomOnHover.scale}) ${o}`),(null==(l=this.options.zoomOnHover)?void 0:l.delay)&&this.r2.setStyle(i,"transition-delay",`${this.options.zoomOnHover.delay}s`),(null==(c=this.options.zoomOnHover)?void 0:c.color)&&this.r2.setStyle(r?t:i,"color",this.options.zoomOnHover.color)},i.onmouseout=()=>{var s;this.r2.setStyle(i,"transform",`none ${o}`),(null==(s=this.options.zoomOnHover)?void 0:s.color)&&this.r2.removeStyle(r?t:i,"color")})}setPosition(t,i,r){var f,m;let o=this.options.randomizeAngle?6.28*Math.random():0,s=0;const a=t.style;a.position="absolute";const l=Boolean(i.position&&i.position.left&&i.position.top),c=t.offsetWidth,u=t.offsetHeight;let d=l&&(null==(f=i.position)?void 0:f.left)?i.position.left:this.options.center.x-c/2,h=l&&(null==(m=i.position)?void 0:m.top)?i.position.top:this.options.center.y-u/2;if(a.left=d+"px",a.top=h+"px",this.options.delay&&(a.animation="fadeIn 0.5s",a.opacity="0",a.animationFillMode="forwards",a.animationDelay=this.options.delay*r+"ms"),!l)if(0===r)a.left=d+2*(Math.random()-.5)*(this.calculatedWidth/5)+"px",a.top=h+2*(Math.random()-.5)*(this.calculatedHeight/5)+"30px";else for(;this.options.width&&this.options.height&&t.offsetHeight&&t.offsetWidth&&this.hitTest(t);)s+=this.options.step||1,o+=(r%2==0?1:-1)*(this.options.step||1),d=this.options.center.x-c/2+s*Math.cos(o)*this.options.aspectRatio,h=this.options.center.y+s*Math.sin(o)-u/2,a.left=d+"px",a.top=h+"px";if(!this.options.overflow&&(d<0||h<0||d+c>this.calculatedWidth||h+u>this.calculatedHeight))return this.logMessage("warn","Word did not fit into the cloud and overflow is set to 'false'. The element will be removed",t),void t.remove()}drawWord(t,i){let r;const o=this.getWeightForWord(i);r=this.r2.createElement("span"),r.className=`w${o}`,r.onclick=()=>{var l;null==(l=this.clicked)||l.emit(i)},r.onmouseenter=()=>{r.style.zIndex="2"},r.onmouseleave=()=>{r.style.zIndex="1"};let s=this.r2.createText(i.text);i.color&&this.setWordColor(r,i.color);const a=this.setWordRotation(r,i.rotate);i.link&&(s=this.wrapNodeIntoAnchorElement(s,i)),this.options.zoomOnHover&&1!==this.options.zoomOnHover.scale&&this.applyZoomStyle(s,r,i.link,a),r.appendChild(s),this.r2.appendChild(this.el.nativeElement,r),i.tooltip&&this.setTooltip(r,i.tooltip),r.id=`angular-tag-cloud-item-${t}`,this.setPosition(r,i,t),this.logMessage("debug","Adds new word <span>",r),this.cloudDataHtmlElements.push(r),this.logMessage("debug","Placed words",this.cloudDataHtmlElements)}logMessage(t,...i){!this.config||("debug"===this.config.log?console.log(`[AngularTagCloudModule ${t}]`,...i):"warn"===this.config.log&&"warn"===t&&console.warn(`[AngularTagCloudModule ${t}]`,...i))}}return n.\u0275fac=function(t){return new(t||n)(G(er),G(Oo))},n.\u0275cmp=Pt({type:n,selectors:[["angular-tag-cloud"],["ng-tag-cloud"],["ngtc"]],hostBindings:function(t,i){1&t&&J("resize",function(o){return i.onResize(o)},!1,Av)},inputs:{data:"data",width:"width",height:"height",step:"step",overflow:"overflow",strict:"strict",zoomOnHover:"zoomOnHover",realignOnResize:"realignOnResize",randomizeAngle:"randomizeAngle",background:"background",font:"font",delay:"delay",config:"config",log:"log"},outputs:{clicked:"clicked",dataChanges:"dataChanges",afterInit:"afterInit",afterChecked:"afterChecked"},features:[oe],decls:0,vars:0,template:function(t,i){},styles:['[_nghost-%COMP%]{font-family:Helvetica,Arial,sans-serif;font-size:10px;line-height:normal;color:#09f;overflow:hidden;position:relative;display:block}span[_ngcontent-%COMP%]{padding:0}span.w10[_ngcontent-%COMP%]{font-size:550%}span.w9[_ngcontent-%COMP%]{font-size:500%}span.w8[_ngcontent-%COMP%]{font-size:450%}span.w7[_ngcontent-%COMP%]{font-size:400%}span.w6[_ngcontent-%COMP%]{font-size:350%}span.w5[_ngcontent-%COMP%]{font-size:300%}span.w4[_ngcontent-%COMP%]{font-size:250%}span.w3[_ngcontent-%COMP%]{font-size:200%}span.w2[_ngcontent-%COMP%]{font-size:150%}span.w1[_ngcontent-%COMP%]{font-size:100%}a[_ngcontent-%COMP%]:hover{color:#0df}a[_ngcontent-%COMP%]:hover, span.w10[_ngcontent-%COMP%], span.w9[_ngcontent-%COMP%], span.w8[_ngcontent-%COMP%]{color:#0cf}span.w7[_ngcontent-%COMP%]{color:#39d}span.w6[_ngcontent-%COMP%]{color:#90c5f0}span.w5[_ngcontent-%COMP%]{color:#90a0dd}span.w4[_ngcontent-%COMP%]{color:#90c5f0}span.w3[_ngcontent-%COMP%]{color:#a0ddff}span.w2[_ngcontent-%COMP%]{color:#9ce}span.w1[_ngcontent-%COMP%]{color:#aab5f0}.tooltip[_ngcontent-%COMP%]   .tooltiptext[_ngcontent-%COMP%]{visibility:hidden;width:inherit;background-color:#555;color:#fff;text-align:center;border-radius:6px;padding:5px 10px;position:absolute;bottom:100%;left:0px;opacity:0;transition:opacity .3s}.tooltip[_ngcontent-%COMP%]   .tooltiptext[_ngcontent-%COMP%]:after{content:"";position:absolute;top:100%;left:50%;margin-left:-5px;border-width:5px;border-style:solid;border-color:#555 transparent transparent transparent}.tooltip[_ngcontent-%COMP%]:hover   .tooltiptext[_ngcontent-%COMP%]{visibility:visible;opacity:1}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}']}),n})(),MY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ci({type:n}),n.\u0275inj=pi({}),n})();const EY=["cloudWindow"];function SY(n,e){1&n&&(p(0,"div",5),p(1,"p"),S(2,"A procurar..."),g(),U(3,"div",6),g())}function TY(n,e){1&n&&(p(0,"div",7),p(1,"p"),S(2,"N\xe3o existem tags para apresentar."),g(),g())}function PY(n,e){if(1&n&&(p(0,"div",8),U(1,"angular-tag-cloud",9),g()),2&n){const t=j();T(1),R("data",t.dadosCloud)("overflow",!1)("width",t.larguraPagina)("height",t.alturaPagina)("step",8)("zoomOnHover",t.zoomOnHoverOptions)}}let xw=(()=>{class n{constructor(t,i){this.utilizadoresService=t,this.ligacoesService=i,this.dadosCloud=[],this.zoomOnHoverOptions={scale:1.5,transitionTime:1.2,delay:.2},this.tipoDeTags=1,this.cloud=[],this.tagsCarregadas=!1,this.left=[],this.top=[],this.size=[]}ngOnInit(){this.carregarTagCloud()}ngAfterViewInit(){this.larguraPagina=this.pagina.nativeElement.offsetWidth,this.alturaPagina=this.pagina.nativeElement.offsetHeight}carregarTagCloud(){switch(this.tipoDeTags){case 1:this.carregarTagsDoPropioUtilizador();break;case 2:this.carregarTagsDeTodosOsUtilizadores();break;case 3:this.carregarTagsDasLigacoesDoPropioUtilizador();break;case 4:this.carregarTagsDeTodasAsLigacoes()}}carregarTagsDoPropioUtilizador(){this.utilizadoresService.getTagsCloudDoUtilizadorAutenticado().subscribe(t=>{this.cloud=t,this.posicionarTags()},t=>{console.log(t)})}carregarTagsDeTodosOsUtilizadores(){this.utilizadoresService.getTagsCloud().subscribe(t=>{this.cloud=t,this.posicionarTags()})}carregarTagsDasLigacoesDoPropioUtilizador(){this.ligacoesService.getTagCloudDoAutenticado().subscribe(t=>{this.cloud=t,this.posicionarTags()})}carregarTagsDeTodasAsLigacoes(){this.ligacoesService.getTagCloud().subscribe(t=>{this.cloud=t,this.posicionarTags()})}posicionarTags(){for(var t=0;t<this.cloud.length;t++){const i="#"+(16777216+16777215*Math.random()).toString(16).substr(1,6);this.dadosCloud.push({text:this.cloud[t].tag,weight:this.cloud[t].quantidade,tooltip:""+this.cloud[t].quantidade,color:i})}this.tagsCarregadas=!0}}return n.\u0275fac=function(t){return new(t||n)(G(Bo),G(Uo))},n.\u0275cmp=Pt({type:n,selectors:[["app-cloud-tags"]],viewQuery:function(t,i){if(1&t&&ls(EY,5),2&t){let r;qr(r=Xr())&&(i.pagina=r.first)}},inputs:{tipoDeTags:"tipoDeTags"},decls:5,vars:3,consts:[[1,"pagina"],["cloudWindow",""],["class","aProcurar",4,"ngIf"],["class","semTags",4,"ngIf"],["class","cloud",4,"ngIf"],[1,"aProcurar"],[1,"loader"],[1,"semTags"],[1,"cloud"],[2,"font","italic bold 12px 'Indie Flower', cursive",3,"data","overflow","width","height","step","zoomOnHover"]],template:function(t,i){1&t&&(p(0,"div",0,1),V(2,SY,4,0,"div",2),V(3,TY,3,0,"div",3),V(4,PY,2,6,"div",4),g()),2&t&&(T(2),R("ngIf",!i.tagsCarregadas),T(1),R("ngIf",i.tagsCarregadas&&0==i.cloud.length),T(1),R("ngIf",i.tagsCarregadas&&i.cloud.length>0))},directives:[xn,CY],styles:[".pagina[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#fff;border-radius:10px}.cloud[_ngcontent-%COMP%]{width:100%;height:100%}.semTags[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center}[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:20px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#20416a;border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#6b6b6b}.aProcurar[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:100%}.loader[_ngcontent-%COMP%]{margin-top:2%;border:16px solid #f3f3f3;border-radius:50%;border-top:16px solid #20416a;width:60px;height:60px;animation:spin 2s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}  angular-tag-cloud.custom-css span.w10{font-size:380%}  angular-tag-cloud.custom-css span.w9{font-size:330%}  angular-tag-cloud.custom-css span.w8{font-size:280%}  angular-tag-cloud.custom-css span.w7{font-size:240%}  angular-tag-cloud.custom-css span.w6{font-size:210%}  angular-tag-cloud.custom-css span.w5{font-size:180%}  angular-tag-cloud.custom-css span.w4{font-size:160%}  angular-tag-cloud.custom-css span.w3{font-size:140%}  angular-tag-cloud.custom-css span.w2{font-size:120%}  angular-tag-cloud.custom-css span.w1{font-size:100%}  angular-tag-cloud.custom-css .tooltiptext{font-size:100px}  angular-tag-cloud.custom-css span.w10{color:#0cf}  angular-tag-cloud.custom-css span.w9{color:#fff}  angular-tag-cloud.custom-css span.w8{color:#ff00c3}  angular-tag-cloud.custom-css span.w7{color:#249a74}  angular-tag-cloud.custom-css span.w6{color:#e8f090}  angular-tag-cloud.custom-css span.w5{color:#c3dd90}  angular-tag-cloud.custom-css span.w4{color:#f09090}  angular-tag-cloud.custom-css span.w3{color:#f2ea10}  angular-tag-cloud.custom-css span.w2{color:#ee99e7}  angular-tag-cloud.custom-css span.w1{color:#18cb42}"]}),n})();function AY(n,e){if(1&n&&(p(0,"option"),S(1),g()),2&n){const t=e.$implicit;T(1),_e(t)}}function DY(n,e){if(1&n){const t=$e();p(0,"div",11),p(1,"div",12),p(2,"h2"),p(3,"b"),S(4,"Utilizadores:"),g(),g(),p(5,"input",13),J("change",function(r){return be(t),j().alterarNumeroUtilizadoresGrupo(r.target.value)}),g(),g(),p(6,"div",12),p(7,"h2"),p(8,"b"),S(9,"Tags em comum:"),g(),g(),p(10,"input",13),J("change",function(r){return be(t),j().alterarNumeroTagsEmComumGrupo(r.target.value)}),g(),g(),p(11,"div",12),p(12,"h2"),p(13,"b"),S(14,"Tags obrigat\xf3rias:"),g(),g(),p(15,"input",14),J("change",function(r){return be(t),j().alterarTagsObrigatoriasGrupo(r.target.value)}),g(),g(),g()}}function OY(n,e){if(1&n){const t=$e();p(0,"div",15),p(1,"div",12),p(2,"h2"),p(3,"b"),S(4,"Tags em comum:"),g(),g(),p(5,"input",13),J("change",function(r){return be(t),j().alterarNumeroTagsEmComumUtilizador(r.target.value)}),g(),g(),g()}}function IY(n,e){1&n&&U(0,"img",31),2&n&&hn("src","../../../assets/",e.$implicit.avatar,"",dn)}function RY(n,e){if(1&n&&(p(0,"p"),S(1),g()),2&n){const t=e.$implicit;T(1),_e(t)}}function LY(n,e){if(1&n){const t=$e();p(0,"img",32),J("click",function(){be(t);const r=j().$implicit;return j(3).verDetalhes(r)}),g()}}function kY(n,e){if(1&n){const t=$e();p(0,"img",33),J("click",function(){be(t);const r=j().$implicit;return j(3).verDetalhes(r)}),g()}}function FY(n,e){if(1&n&&(p(0,"p"),S(1),g()),2&n){const t=e.$implicit;T(1),_e(t)}}function NY(n,e){if(1&n){const t=$e();p(0,"div",36),J("click",function(){const o=be(t).$implicit;return j(5).irParaPerfil(o.id)}),p(1,"div",37),U(2,"img",38),p(3,"div",39),p(4,"h2"),S(5),g(),p(6,"p"),S(7),g(),g(),g(),p(8,"div",40),V(9,FY,2,1,"p",4),g(),g()}if(2&n){const t=e.$implicit;T(2),hn("src","../../../assets/",t.avatar,"",dn),T(3),_e(t.nome),T(2),_e(t.email),T(2),R("ngForOf",t.tags)}}function zY(n,e){if(1&n&&(p(0,"div",34),V(1,NY,10,4,"div",35),g()),2&n){const t=j().$implicit;T(1),R("ngForOf",t.grupo)}}function BY(n,e){if(1&n&&(p(0,"div",21),p(1,"div",22),p(2,"div",23),p(3,"p"),S(4),g(),g(),p(5,"div",24),V(6,IY,1,1,"img",25),g(),p(7,"div",26),V(8,RY,2,1,"p",4),g(),p(9,"div",27),V(10,LY,1,0,"img",28),V(11,kY,1,0,"img",29),g(),g(),V(12,zY,2,1,"div",30),g()),2&n){const t=e.$implicit,i=e.index;T(4),ur("Grupo ",i+1,""),T(2),R("ngForOf",t.grupo),T(2),R("ngForOf",t.tagsEmComum),T(2),R("ngIf",t.verDetalhes),T(1),R("ngIf",!t.verDetalhes),T(1),R("ngIf",t.verDetalhes)}}function UY(n,e){if(1&n&&(p(0,"div",19),V(1,BY,13,6,"div",20),g()),2&n){const t=j(2);T(1),R("ngForOf",t.sugestoesGrupos)}}function VY(n,e){if(1&n&&(p(0,"p"),S(1),g()),2&n){const t=e.$implicit;T(1),_e(t)}}function HY(n,e){if(1&n){const t=$e();p(0,"div",43),J("click",function(){const o=be(t).$implicit;return j(3).irParaPerfil(o.id)}),p(1,"div",37),U(2,"img",38),p(3,"div",39),p(4,"h2"),S(5),g(),p(6,"p"),S(7),g(),g(),g(),p(8,"div",40),V(9,VY,2,1,"p",4),g(),g()}if(2&n){const t=e.$implicit;T(2),hn("src","../../../assets/",t.avatar,"",dn),T(3),_e(t.nome),T(2),_e(t.email),T(2),R("ngForOf",t.tags)}}function GY(n,e){if(1&n&&(p(0,"div",41),V(1,HY,10,4,"div",42),g()),2&n){const t=j(2);T(1),R("ngForOf",t.sugestoesUtilizadores)}}function jY(n,e){if(1&n&&(p(0,"div",16),V(1,UY,2,1,"div",17),V(2,GY,2,1,"div",18),g()),2&n){const t=j();T(1),R("ngIf","Grupos"==t.tipoSugestaoSelecionada),T(1),R("ngIf","Utilizadores"==t.tipoSugestaoSelecionada)}}function WY(n,e){1&n&&(p(0,"div",44),p(1,"p"),S(2,"A procurar..."),g(),U(3,"div",45),g())}function $Y(n,e){1&n&&(p(0,"div",46),p(1,"p"),S(2,"N\xe3o foram encontrados resultados para a pesquisa."),g(),g())}let qY=(()=>{class n{constructor(t,i){this.ligacoesService=t,this.router=i,this.tiposSugestao=["Utilizadores","Grupos"],this.tipoSugestaoSelecionada=this.tiposSugestao[0],this.numeroTagsUtilizadores=1,this.numeroTagsGrupo=1,this.numeroUtilizadoresGrupo=1,this.tagsObrigatoriasGrupo="",this.sugestoesGrupos=[],this.aProcurarSugestoesGrupos=!1,this.sugestoesUtilizadores=[],this.aProcurarSugestoesUtilizador=!1}ngOnInit(){this.procurarSugestoes()}procurarSugestoes(){this.tipoSugestaoSelecionada==this.tiposSugestao[0]?this.procurarSugestoesUtilizadores():this.procurarSugestoesGrupo()}procurarSugestoesUtilizadores(){this.aProcurarSugestoesUtilizador=!0,this.ligacoesService.getSugestoesUtilizadores(this.numeroTagsUtilizadores).subscribe(t=>{this.sugestoesUtilizadores=t,this.aProcurarSugestoesUtilizador=!1},t=>{this.aProcurarSugestoesUtilizador=!1})}procurarSugestoesGrupo(){this.aProcurarSugestoesGrupos=!0,this.ligacoesService.getSugestoesGrupo(this.numeroUtilizadoresGrupo,this.numeroTagsGrupo,this.tagsObrigatoriasGrupo).subscribe(t=>{this.sugestoesGrupos=t,this.aProcurarSugestoesGrupos=!1},t=>{this.aProcurarSugestoesGrupos=!1})}alterarTipoSugestao(t){this.tipoSugestaoSelecionada!=t&&(this.tipoSugestaoSelecionada=t,this.procurarSugestoes())}alterarNumeroTagsEmComumUtilizador(t){this.numeroTagsUtilizadores!=t&&(this.numeroTagsUtilizadores=t,this.procurarSugestoesUtilizadores())}alterarNumeroUtilizadoresGrupo(t){this.numeroUtilizadoresGrupo!=t&&(this.numeroUtilizadoresGrupo=t,this.procurarSugestoesGrupo())}alterarNumeroTagsEmComumGrupo(t){this.numeroTagsGrupo!=t&&(this.numeroTagsGrupo=t,this.procurarSugestoesGrupo())}alterarTagsObrigatoriasGrupo(t){this.tagsObrigatoriasGrupo=t.toString(),this.procurarSugestoesGrupo()}verDetalhes(t){t.verDetalhes=!t.verDetalhes}irParaPerfil(t){this.router.navigate(["/utilizador/"+t])}}return n.\u0275fac=function(t){return new(t||n)(G(Uo),G(Bt))},n.\u0275cmp=Pt({type:n,selectors:[["app-sugestoes"]],decls:14,vars:6,consts:[[1,"pagina"],[1,"topo"],[1,"tipo-sugestao"],[3,"change"],[4,"ngFor","ngForOf"],[1,"parametros-sugestao"],["class","grupo",4,"ngIf"],["class","utilizador",4,"ngIf"],["class","restante",4,"ngIf"],["class","aProcurar",4,"ngIf"],["class","semResultados",4,"ngIf"],[1,"grupo"],[1,"seccao"],["type","number","value","1","max","5","min","1",3,"change"],["type","text",3,"change"],[1,"utilizador"],[1,"restante"],["class","grupos",4,"ngIf"],["class","utilizadores",4,"ngIf"],[1,"grupos"],["class","oGrupo",4,"ngFor","ngForOf"],[1,"oGrupo"],[1,"principal"],[1,"nomeDoGrupo"],[1,"imagensDosUtilizadores"],[3,"src",4,"ngFor","ngForOf"],[1,"tagsDosUtilizadores"],[1,"verMais"],["src","../../../assets/colapsar.png",3,"click",4,"ngIf"],["src","../../../assets/expandir.png",3,"click",4,"ngIf"],["class","detalhes",4,"ngIf"],[3,"src"],["src","../../../assets/colapsar.png",3,"click"],["src","../../../assets/expandir.png",3,"click"],[1,"detalhes"],["class","utilizadorDoGrupo",3,"click",4,"ngFor","ngForOf"],[1,"utilizadorDoGrupo",3,"click"],[1,"infoPessoal"],["alt","",3,"src"],[1,"infoUtilizador"],[1,"tags"],[1,"utilizadores"],["class","oUtilizador",3,"click",4,"ngFor","ngForOf"],[1,"oUtilizador",3,"click"],[1,"aProcurar"],[1,"loader"],[1,"semResultados"]],template:function(t,i){1&t&&(p(0,"div",0),p(1,"div",1),p(2,"div",2),p(3,"h2"),p(4,"b"),S(5,"Tipo de Sugest\xe3o:"),g(),g(),p(6,"select",3),J("change",function(o){return i.alterarTipoSugestao(o.target.value)}),V(7,AY,2,1,"option",4),g(),g(),p(8,"div",5),V(9,DY,16,0,"div",6),V(10,OY,6,0,"div",7),g(),g(),V(11,jY,3,2,"div",8),V(12,WY,4,0,"div",9),V(13,$Y,3,0,"div",10),g()),2&t&&(T(7),R("ngForOf",i.tiposSugestao),T(2),R("ngIf","Grupos"==i.tipoSugestaoSelecionada),T(1),R("ngIf","Utilizadores"==i.tipoSugestaoSelecionada),T(1),R("ngIf","Utilizadores"==i.tipoSugestaoSelecionada&&!i.aProcurarSugestoesUtilizador&&i.sugestoesUtilizadores.length>0||"Grupos"==i.tipoSugestaoSelecionada&&!i.aProcurarSugestoesGrupos&&i.sugestoesGrupos.length>0),T(1),R("ngIf",i.aProcurarSugestoesGrupos||i.aProcurarSugestoesUtilizador),T(1),R("ngIf","Utilizadores"==i.tipoSugestaoSelecionada&&!i.aProcurarSugestoesUtilizador&&0==i.sugestoesUtilizadores.length||"Grupos"==i.tipoSugestaoSelecionada&&!i.aProcurarSugestoesGrupos&&0==i.sugestoesGrupos.length))},directives:[Jn,xn,Ys,Zs],styles:['.pagina[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between}.topo[_ngcontent-%COMP%]{width:100%;height:6%;display:flex;align-items:center;justify-content:space-between;background-color:#20416a;padding:5px 10px;border-radius:10px}.restante[_ngcontent-%COMP%]{width:100%;height:92%}.tipo-sugestao[_ngcontent-%COMP%]{display:flex;align-items:center}.topo[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;color:#fff;font-size:1.1rem;margin-right:5px}.tipo-sugestao[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:transparent;border:0;color:#fff;height:100%}.tipo-sugestao[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:#20416a}.tipo-sugestao[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:0}.parametros-sugestao[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end}.parametros-sugestao[_ngcontent-%COMP%]   .grupo[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end}.parametros-sugestao[_ngcontent-%COMP%]   .seccao[_ngcontent-%COMP%]{display:flex;align-items:center}.parametros-sugestao[_ngcontent-%COMP%]   .seccao[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:transparent;border:0;width:40px;height:100%;color:#fff}.parametros-sugestao[_ngcontent-%COMP%]   .seccao[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:0}.parametros-sugestao[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:.9rem}.semResultados[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:92%}.aProcurar[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:92%}.aProcurar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#20416a;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif}.loader[_ngcontent-%COMP%]{margin-top:2%;border:16px solid #f3f3f3;border-radius:50%;border-top:16px solid #20416a;width:60px;height:60px;animation:spin 2s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.restante[_ngcontent-%COMP%]   .grupos[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;overflow-y:auto}.restante[_ngcontent-%COMP%]   .utilizadores[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;overflow-y:auto}.oUtilizador[_ngcontent-%COMP%]{width:99%;display:flex;align-items:center;justify-content:space-between;background-color:#fff;margin-bottom:5px;padding:8px;border-radius:10px;cursor:pointer}.oUtilizador[_ngcontent-%COMP%]:hover{background-color:#a9a9a9}.oGrupo[_ngcontent-%COMP%]{width:99%;display:flex;flex-direction:column;align-items:center;background-color:#fff;margin-bottom:5px;padding:10px;border-radius:10px}.oGrupo[_ngcontent-%COMP%]   .principal[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:space-between}.nomeDoGrupo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#20416a;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif}.imagensDosUtilizadores[_ngcontent-%COMP%]{display:flex;width:35%}.imagensDosUtilizadores[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px}.tagsDosUtilizadores[_ngcontent-%COMP%]{display:flex;align-items:center;width:35%}.tagsDosUtilizadores[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background-color:#dfdfdf;padding:5px;border-radius:10px;color:#20416a;font-size:.9rem}.verMais[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:15px;cursor:pointer}.oGrupo[_ngcontent-%COMP%]   .detalhes[_ngcontent-%COMP%]{display:flex;width:100%;flex-direction:column}.utilizadorDoGrupo[_ngcontent-%COMP%]{margin-top:5px;background-color:#dfdfdf;padding:5px;border-radius:10px;display:flex;align-items:center;justify-content:space-between;cursor:pointer}.utilizadorDoGrupo[_ngcontent-%COMP%]:hover{background-color:#a9a9a9}.infoPessoal[_ngcontent-%COMP%]{display:flex;align-items:center}.infoPessoal[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px}.infoUtilizador[_ngcontent-%COMP%]{display:flex;flex-direction:column}.infoUtilizador[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:1.1rem;color:#20416a}.infoUtilizador[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:.8rem;color:#20416a}.tags[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end}.tags[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background-color:#20416a;color:#fff;padding:5px;font-size:.9rem;margin-left:5px;border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:20px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#20416a;border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#6b6b6b}']}),n})();function XY(n,e){1&n&&(p(0,"div",7),U(1,"app-lista-amigos"),g())}function YY(n,e){1&n&&(p(0,"div",7),U(1,"app-consultar-rede"),g())}function ZY(n,e){1&n&&(p(0,"div",7),U(1,"app-cloud-tags",8),g()),2&n&&(T(1),R("tipoDeTags",3))}function JY(n,e){1&n&&(p(0,"div",7),U(1,"app-sugestoes"),g())}let QY=(()=>{class n{constructor(t){this.authService=t,this.opcaoStyle=["","opcao-selecionada","opcao-nao-selecionada","opcao-nao-selecionada","opcao-nao-selecionada"],this.listaAmigos=!0,this.consultarRede=!1,this.tagsCloud=!1,this.sugestoes=!1}ngOnInit(){this.authService.redirecionarParaLoginSeNaoAutenticado()}opcao(t){switch(this.listaAmigos=!1,this.consultarRede=!1,this.tagsCloud=!1,this.sugestoes=!1,this.opcaoStyle[1]="opcao-nao-selecionada",this.opcaoStyle[2]="opcao-nao-selecionada",this.opcaoStyle[3]="opcao-nao-selecionada",this.opcaoStyle[4]="opcao-nao-selecionada",t){case 1:this.listaAmigos=!0,this.opcaoStyle[1]="opcao-selecionada";break;case 2:this.consultarRede=!0,this.opcaoStyle[2]="opcao-selecionada";break;case 3:this.tagsCloud=!0,this.opcaoStyle[3]="opcao-selecionada";break;case 4:this.sugestoes=!0,this.opcaoStyle[4]="opcao-selecionada"}}}return n.\u0275fac=function(t){return new(t||n)(G(yh))},n.\u0275cmp=Pt({type:n,selectors:[["app-ligacoes"]],decls:22,vars:8,consts:[[1,"pagina"],[1,"topo"],[1,"restante-pagina"],[1,"esquerda"],["src","../../../assets/relationships.png","alt",""],[3,"ngClass","click"],["class","direita",4,"ngIf"],[1,"direita"],[3,"tipoDeTags"]],template:function(t,i){1&t&&(p(0,"div",0),p(1,"div",1),U(2,"app-menu-topo-utilizador"),g(),p(3,"div",2),p(4,"div",3),U(5,"img",4),p(6,"p",5),J("click",function(){return i.opcao(1)}),p(7,"b"),S(8,"Amigos"),g(),g(),p(9,"p",5),J("click",function(){return i.opcao(2)}),p(10,"b"),S(11,"Consultar Rede (3D)"),g(),g(),p(12,"p",5),J("click",function(){return i.opcao(3)}),p(13,"b"),S(14,"Cloud de Tags"),g(),g(),p(15,"p",5),J("click",function(){return i.opcao(4)}),p(16,"b"),S(17,"Sugest\xf5es"),g(),g(),g(),V(18,XY,2,0,"div",6),V(19,YY,2,0,"div",6),V(20,ZY,2,1,"div",6),V(21,JY,2,0,"div",6),g(),g()),2&t&&(T(6),R("ngClass",i.opcaoStyle[1]),T(3),R("ngClass",i.opcaoStyle[2]),T(3),R("ngClass",i.opcaoStyle[3]),T(3),R("ngClass",i.opcaoStyle[4]),T(3),R("ngIf",i.listaAmigos),T(1),R("ngIf",i.consultarRede),T(1),R("ngIf",i.tagsCloud),T(1),R("ngIf",i.sugestoes))},directives:[el,Wa,xn,w8,bY,xw,qY],styles:['*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}.pagina[_ngcontent-%COMP%]{height:100vh;width:100%;background:rgb(223,223,223);display:flex;flex-direction:column;align-items:center;justify-content:flex-start}.topo[_ngcontent-%COMP%]{height:7%;width:100%;background-image:url(background.b8b8e9811b070779.jpg);background-size:cover}.restante-pagina[_ngcontent-%COMP%]{width:100%;height:100%;max-height:93%;display:flex;justify-content:space-between;padding:40px 100px}.esquerda[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;height:100%;width:22%;border-radius:10px}.esquerda[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#20416a;border-radius:10px;margin-bottom:20px}.direita[_ngcontent-%COMP%]{height:100%;width:76%;border-radius:10px}.opcao-selecionada[_ngcontent-%COMP%]{width:100%;text-align:center;padding:10px;border-radius:10px;margin-bottom:2%;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;cursor:pointer;background-image:url(background.b8b8e9811b070779.jpg);background-size:cover;color:#fff}.opcao-nao-selecionada[_ngcontent-%COMP%]{width:100%;padding:10px;text-align:center;margin-bottom:2%;border-radius:10px;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;background-color:#fff;color:#20416a;border:2px solid #20416a;background-size:cover;cursor:pointer}.esquerda[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{background-image:url(background.b8b8e9811b070779.jpg);background-position:center;color:#fff}']}),n})();function KY(n,e){if(1&n&&(p(0,"div",3),p(1,"h3"),S(2,"Descri\xe7\xe3o:"),g(),p(3,"p"),S(4),g(),g()),2&n){const t=j();T(4),_e(t.uti.descricao)}}function eZ(n,e){if(1&n&&(p(0,"p"),S(1),g()),2&n){const t=e.$implicit;T(1),_e(t)}}function tZ(n,e){if(1&n&&(p(0,"div",3),p(1,"h3"),S(2,"Pa\xeds:"),g(),p(3,"p"),S(4),g(),g()),2&n){const t=j(2);T(4),_e(t.uti.pais)}}function nZ(n,e){if(1&n&&(p(0,"div",3),p(1,"h3"),S(2,"Cidade:"),g(),p(3,"p"),S(4),g(),g()),2&n){const t=j(2);T(4),_e(t.uti.cidade)}}function iZ(n,e){if(1&n&&(p(0,"div",1),p(1,"h2"),S(2,"Localiza\xe7\xe3o"),g(),U(3,"hr"),p(4,"div",2),V(5,tZ,5,1,"div",4),V(6,nZ,5,1,"div",4),g(),g()),2&n){const t=j();T(5),R("ngIf",null!=t.uti.pais),T(1),R("ngIf",null!=t.uti.cidade)}}function rZ(n,e){if(1&n&&(p(0,"div",3),p(1,"h3"),S(2,"Codigo Pa\xeds:"),g(),p(3,"p"),S(4),g(),g()),2&n){const t=j(2);T(4),_e(t.uti.codigoPais)}}function oZ(n,e){if(1&n&&(p(0,"div",3),p(1,"h3"),S(2,"N\xfamero:"),g(),p(3,"p"),S(4),g(),g()),2&n){const t=j(2);T(4),_e(t.uti.numeroTelemovel)}}function sZ(n,e){if(1&n&&(p(0,"div",1),p(1,"h2"),S(2,"Contacto"),g(),U(3,"hr"),p(4,"div",2),V(5,rZ,5,1,"div",4),V(6,oZ,5,1,"div",4),g(),g()),2&n){const t=j();T(5),R("ngIf",null!=t.uti.codigoPais),T(1),R("ngIf",null!=t.uti.numeroTelemovel)}}function aZ(n,e){if(1&n){const t=$e();p(0,"img",11),J("click",function(){be(t);const r=j();return r.abrirPagina(r.uti.facebook)}),g()}}function lZ(n,e){if(1&n){const t=$e();p(0,"img",12),J("click",function(){be(t);const r=j();return r.abrirPagina(r.uti.linkedIn)}),g()}}let VI=(()=>{class n{constructor(){}ngOnInit(){}abrirPagina(t){window.open(t,"_blank")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Pt({type:n,selectors:[["app-informacao-perfil"]],inputs:{uti:"uti"},decls:45,vars:11,consts:[[1,"pagina"],[1,"seccao"],[1,"subseccao"],[1,"form-seccao"],["class","form-seccao",4,"ngIf"],[1,"tags"],[4,"ngFor","ngForOf"],["class","seccao",4,"ngIf"],[1,"redes-sociais"],["src","../../../assets/facebook.png",3,"click",4,"ngIf"],["src","../../../assets/linkedin.png",3,"click",4,"ngIf"],["src","../../../assets/facebook.png",3,"click"],["src","../../../assets/linkedin.png",3,"click"]],template:function(t,i){1&t&&(p(0,"div",0),p(1,"div",1),p(2,"h2"),S(3,"Informa\xe7\xe3o B\xe1sica"),g(),U(4,"hr"),p(5,"div",2),p(6,"div",3),p(7,"h3"),S(8,"Email:"),g(),p(9,"p"),S(10),g(),g(),p(11,"div",3),p(12,"h3"),S(13,"Nome:"),g(),p(14,"p"),S(15),g(),g(),p(16,"div",3),p(17,"h3"),S(18,"Data Nascimento:"),g(),p(19,"p"),S(20),g(),g(),V(21,KY,5,1,"div",4),g(),g(),p(22,"div",1),p(23,"h2"),S(24,"Tags"),g(),U(25,"hr"),p(26,"div",2),p(27,"div",5),V(28,eZ,2,1,"p",6),g(),g(),g(),p(29,"div",1),p(30,"h2"),S(31,"Estado Emocional"),g(),U(32,"hr"),p(33,"div",2),p(34,"div",3),p(35,"h3"),S(36,"Emo\xe7\xe3o:"),g(),p(37,"p"),S(38),g(),g(),g(),g(),V(39,iZ,7,2,"div",7),V(40,sZ,7,2,"div",7),p(41,"div",1),p(42,"div",8),V(43,aZ,1,0,"img",9),V(44,lZ,1,0,"img",10),g(),g(),g()),2&t&&(T(10),_e(i.uti.email),T(5),_e(i.uti.nome),T(5),_e(i.uti.dataNascimento),T(1),R("ngIf",null!=i.uti.descricao),T(7),R("ngForOf",i.uti.tags),T(10),Mp("",i.uti.estadoEmocional," (Atualizado em ",i.uti.dataEstadoEmocional,")"),T(1),R("ngIf",null!=i.uti.pais||null!=i.uti.cidade),T(1),R("ngIf",null!=i.uti.codigoPais||null!=i.uti.numeroTelemovel),T(3),R("ngIf",null!=i.uti.facebook),T(1),R("ngIf",null!=i.uti.linkedIn))},directives:[xn,Jn],styles:['*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}.pagina[_ngcontent-%COMP%]{width:100%;max-height:100%;display:flex;flex-direction:column;align-items:center;background-color:#fff;border-radius:10px;overflow-y:auto;overflow-x:hidden}.seccao[_ngcontent-%COMP%]{width:99%;padding:10px;margin-bottom:4px;display:flex;flex-direction:column}.seccao[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#20416a;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:1.2rem}.subseccao[_ngcontent-%COMP%]{padding:10px 0;display:flex;flex-direction:column;align-items:center}.form-seccao[_ngcontent-%COMP%]{padding:2px 0;display:flex;align-items:center;width:70%;border-bottom:2px solid black}.form-seccao[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:1rem;margin-right:4px}.tags[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.tags[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background-color:#20416a;color:#fff;padding:5px;border-radius:10px;margin-right:3px}.redes-sociais[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.redes-sociais[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;cursor:pointer}[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:20px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#20416a;border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#6b6b6b}']}),n})();function cZ(n,e){if(1&n&&(p(0,"option"),S(1),g()),2&n){const t=e.$implicit;T(1),_e(t)}}function uZ(n,e){if(1&n){const t=$e();p(0,"img",24),J("click",function(){const o=be(t).$implicit;return j().escolherAvatar(o)}),g()}if(2&n){const t=e.$implicit,i=e.index,r=j();hn("src","../../../assets/",t,"",dn),R("ngClass",r.tipoAvatar[i])}}let dZ=(()=>{class n{constructor(t,i,r,o){this.estadosEmocionaisService=t,this.avataresService=i,this.fb=r,this.utilizadoresService=o,this.atualizarUtilizador=new It,this.estadosEmocionais=this.estadosEmocionaisService.getEstadosEmocionais(),this.avatares=this.avataresService.getAvataresDisponiveis(),this.email="",this.aProcessarAlteracoes=!1,this.tipoAvatar=["avatar-nao-selecionado","avatar-nao-selecionado","avatar-nao-selecionado","avatar-nao-selecionado","avatar-nao-selecionado","avatar-nao-selecionado","avatar-nao-selecionado","avatar-nao-selecionado"],this.formInformacaoPrincipal=r.group({email:[""],password:[""],confirmarPassword:[""]}),this.formInformacaoBasica=r.group({nome:[""],dataNascimento:[""],descricao:[""]}),this.formTags=r.group({listaTags:[""]}),this.formLocalizacao=r.group({pais:[""],cidade:[""]}),this.formContacto=r.group({indicativo:[""],numero:[""]}),this.formRedesSociais=r.group({facebook:[""],linkedIn:[""]}),this.formEstadoEmocional=r.group({emocao:[""]})}ngOnInit(){this.carregarUtilizador()}carregarUtilizador(){this.utilizadoresService.getUtilizadorAutenticado().subscribe(t=>{this.utilizador=t,this.atualizarDados()})}atualizarDados(){this.formInformacaoPrincipal.patchValue({email:this.utilizador.email,password:this.utilizador.password,confirmarPassword:this.utilizador.password}),this.formInformacaoBasica.patchValue({nome:this.utilizador.nome,dataNascimento:this.utilizador.dataNascimento,descricao:this.utilizador.descricao}),this.formTags.patchValue({listaTags:this.utilizador.tags}),this.formLocalizacao.patchValue({pais:this.utilizador.pais,cidade:this.utilizador.cidade}),this.formContacto.patchValue({indicativo:this.utilizador.codigoPais,numero:this.utilizador.numeroTelemovel}),this.formRedesSociais.patchValue({facebook:this.utilizador.facebook,linkedIn:this.utilizador.linkedIn}),this.formEstadoEmocional.setValue({emocao:this.utilizador.estadoEmocional}),this.avatar=this.utilizador.avatar,this.email=this.utilizador.email,this.atualizarAvatares()}atualizarAvatares(){var t=0;this.avatares.forEach(i=>{this.tipoAvatar[t]=i==this.avatar?"avatar-selecionado":"avatar-nao-selecionado",t++})}escolherAvatar(t){this.avatar=t,this.atualizarAvatares()}cancelar(){this.carregarUtilizador()}guardar(){if(!this.aProcessarAlteracoes){this.aProcessarAlteracoes=!0;var t={id:"",nome:"",email:"",password:"",dataNascimento:"",estadoEmocional:"",dataEstadoEmocional:"",facebook:"",linkedIn:"",descricao:"",tags:[],cidade:"",pais:"",codigoPais:"",numeroTelemovel:"",avatar:""};const r=this.formInformacaoPrincipal.controls.password.value;if(r!=this.formInformacaoPrincipal.controls.confirmarPassword.value)vt().fire({position:"bottom-end",icon:"error",title:"As duas palavras-passe n\xe3o coincidem.",showConfirmButton:!1,timer:1500}),this.aProcessarAlteracoes=!1;else{t.password=r,t.nome=this.formInformacaoBasica.controls.nome.value,t.dataNascimento=this.formInformacaoBasica.controls.dataNascimento.value,t.descricao=this.formInformacaoBasica.controls.descricao.value;var i=this.formTags.controls.listaTags.value;i=i.toString().replace(/\s/g,""),t.tags=i.toString().split(","),t.estadoEmocional=this.formEstadoEmocional.controls.emocao.value,t.pais=this.formLocalizacao.controls.pais.value,t.cidade=this.formLocalizacao.controls.cidade.value,t.codigoPais=this.formContacto.controls.indicativo.value,t.numeroTelemovel=this.formContacto.controls.numero.value,t.facebook=this.formRedesSociais.controls.facebook.value,t.linkedIn=this.formRedesSociais.controls.linkedIn.value,t.avatar=this.avatar,this.utilizadoresService.alterarDadosUtilizador(t).subscribe(s=>{vt().fire({position:"bottom-end",icon:"success",title:"As altera\xe7\xf5es foram guardadas.",showConfirmButton:!1,timer:1500}),this.carregarUtilizador(),this.aProcessarAlteracoes=!1,this.atualizarUtilizador.emit(!0)},s=>{vt().fire({position:"bottom-end",icon:"error",title:s.error.message,showConfirmButton:!1,timer:1500}),this.aProcessarAlteracoes=!1})}}}}return n.\u0275fac=function(t){return new(t||n)(G(Ab),G(hA),G(Js),G(Bo))},n.\u0275cmp=Pt({type:n,selectors:[["app-editar-perfil"]],outputs:{atualizarUtilizador:"atualizarUtilizador"},decls:108,vars:10,consts:[[1,"pagina"],[1,"main"],[1,"seccao"],[3,"formGroup"],[1,"form-seccao"],["type","password","formControlName","password"],["type","password","formControlName","confirmarPassword"],["type","text","formControlName","nome"],["type","date","formControlName","dataNascimento"],["type","text","formControlName","descricao","placeholder","N\xe3o especificada"],["type","text","formControlName","listaTags"],["formControlName","emocao"],[4,"ngFor","ngForOf"],[1,"lista-avatares"],[3,"src","ngClass","click",4,"ngFor","ngForOf"],["type","text","formControlName","pais","placeholder","Nao especificado"],["type","text","formControlName","cidade","placeholder","Nao especificada"],["type","text","formControlName","indicativo","placeholder","Nao especificado"],["type","text","formControlName","numero","placeholder","Nao especificado"],["type","text","formControlName","facebook","placeholder","Nao especificado"],["type","text","formControlName","linkedIn","placeholder","Nao especificado"],[1,"baixo"],[1,"botao-fundo",2,"background-color","firebrick",3,"click"],[1,"botao-fundo",2,"background-color","forestgreen",3,"click"],[3,"src","ngClass","click"]],template:function(t,i){1&t&&(p(0,"div",0),p(1,"div",1),p(2,"div",2),p(3,"h2"),S(4,"Informa\xe7\xe3o Principal"),g(),U(5,"hr"),p(6,"form",3),p(7,"div",4),p(8,"h3"),S(9,"Email:"),g(),p(10,"p"),S(11),g(),g(),p(12,"div",4),p(13,"h3"),S(14,"Palavra Passe:"),g(),U(15,"input",5),g(),p(16,"div",4),p(17,"h3"),S(18,"Confirmar Palavra Passe:"),g(),U(19,"input",6),g(),g(),g(),p(20,"div",2),p(21,"h2"),S(22,"Informa\xe7\xe3o B\xe1sica"),g(),U(23,"hr"),p(24,"form",3),p(25,"div",4),p(26,"h3"),S(27,"Nome:"),g(),U(28,"input",7),g(),p(29,"div",4),p(30,"h3"),S(31,"Data Nascimento:"),g(),U(32,"input",8),g(),p(33,"div",4),p(34,"h3"),S(35,"Descri\xe7\xe3o:"),g(),U(36,"input",9),g(),g(),g(),p(37,"div",2),p(38,"h2"),S(39,"Tags"),g(),U(40,"hr"),p(41,"form",3),p(42,"div",4),p(43,"h3"),S(44,"Lista:"),g(),U(45,"input",10),g(),g(),g(),p(46,"div",2),p(47,"h2"),S(48,"Estado Emocional"),g(),U(49,"hr"),p(50,"form",3),p(51,"div",4),p(52,"h3"),S(53,"Emo\xe7\xe3o:"),g(),p(54,"select",11),V(55,cZ,2,1,"option",12),g(),g(),g(),g(),p(56,"div",2),p(57,"h2"),S(58,"Avatar"),g(),U(59,"hr"),p(60,"div",13),V(61,uZ,1,2,"img",14),g(),g(),p(62,"div",2),p(63,"h2"),S(64,"Localiza\xe7\xe3o"),g(),U(65,"hr"),p(66,"form",3),p(67,"div",4),p(68,"h3"),S(69,"Pa\xeds:"),g(),U(70,"input",15),g(),p(71,"div",4),p(72,"h3"),S(73,"Cidade:"),g(),U(74,"input",16),g(),g(),g(),p(75,"div",2),p(76,"h2"),S(77,"Contacto"),g(),U(78,"hr"),p(79,"form",3),p(80,"div",4),p(81,"h3"),S(82,"Codigo Pa\xeds:"),g(),U(83,"input",17),g(),p(84,"div",4),p(85,"h3"),S(86,"N\xfamero:"),g(),U(87,"input",18),g(),g(),g(),p(88,"div",2),p(89,"h2"),S(90,"Redes Sociais"),g(),U(91,"hr"),p(92,"form",3),p(93,"div",4),p(94,"h3"),S(95,"Facebook:"),g(),U(96,"input",19),g(),p(97,"div",4),p(98,"h3"),S(99,"LinkedIn:"),g(),U(100,"input",20),g(),g(),g(),g(),p(101,"div",21),p(102,"button",22),J("click",function(){return i.cancelar()}),p(103,"b"),S(104,"Cancelar"),g(),g(),p(105,"button",23),J("click",function(){return i.guardar()}),p(106,"b"),S(107,"Guardar"),g(),g(),g(),g()),2&t&&(T(6),R("formGroup",i.formInformacaoPrincipal),T(5),_e(i.email),T(13),R("formGroup",i.formInformacaoBasica),T(17),R("formGroup",i.formTags),T(9),R("formGroup",i.formEstadoEmocional),T(5),R("ngForOf",i.estadosEmocionais),T(6),R("ngForOf",i.avatares),T(5),R("formGroup",i.formLocalizacao),T(13),R("formGroup",i.formContacto),T(13),R("formGroup",i.formRedesSociais))},directives:[Xs,qs,ko,fr,Dr,ds,Xa,Jn,Ys,Zs,Wa],styles:['*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}.pagina[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:space-between;background-color:#fff;border-radius:10px}.main[_ngcontent-%COMP%]{height:84%;width:100%;display:flex;flex-direction:column;align-items:center;overflow-y:auto;overflow-x:hidden}.baixo[_ngcontent-%COMP%]{width:100%;height:15%;display:flex;align-items:center;justify-content:flex-end}.botao-fundo[_ngcontent-%COMP%]{border:0;padding:10px;color:#fff;border-radius:10px;cursor:pointer;margin-right:1%}.botao-fundo[_ngcontent-%COMP%]:hover{opacity:.8}.seccao[_ngcontent-%COMP%]{width:99%;padding:10px;margin-bottom:4px;display:flex;flex-direction:column}.seccao[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#20416a;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:1.2rem}form[_ngcontent-%COMP%]{padding:10px 0;display:flex;flex-direction:column;align-items:center}.form-seccao[_ngcontent-%COMP%]{padding:2px 0;display:flex;align-items:center;width:70%;border-bottom:2px solid black}.form-seccao[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:1rem;margin-right:4px}.form-seccao[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:0;color:#000;width:50%}.form-seccao[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:0}select[_ngcontent-%COMP%]{border:0;width:50%}select[_ngcontent-%COMP%]:focus{outline:0}.lista-avatares[_ngcontent-%COMP%]{margin:auto;padding:10px 0 0;width:70%;height:100%;display:flex;align-items:center;justify-content:center}.avatar-nao-selecionado[_ngcontent-%COMP%]{width:70px;cursor:pointer;opacity:.8}.avatar-selecionado[_ngcontent-%COMP%]{width:70px;cursor:pointer;opacity:1}[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:20px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#20416a;border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#6b6b6b}']}),n})();function hZ(n,e){if(1&n&&(p(0,"p"),S(1),g()),2&n){const t=e.$implicit;T(1),_e(t)}}function fZ(n,e){if(1&n&&(p(0,"div",20),U(1,"app-feed-posts",21),g()),2&n){const t=j(2);T(1),R("utilizador",t.utilizador)}}function pZ(n,e){if(1&n&&(p(0,"div",20),U(1,"app-informacao-perfil",22),g()),2&n){const t=j(2);T(1),R("uti",t.utilizador)}}function gZ(n,e){if(1&n){const t=$e();p(0,"div",20),p(1,"app-editar-perfil",23),J("atualizarUtilizador",function(r){return be(t),j(2).carregarInformacoes(r)}),g(),g()}}function mZ(n,e){1&n&&(p(0,"div",20),U(1,"app-cloud-tags",24),g()),2&n&&(T(1),R("tipoDeTags",1))}function _Z(n,e){if(1&n){const t=$e();p(0,"div",25),p(1,"h2"),S(2,"Tem a certeza que quer apagar a sua conta?"),g(),p(3,"p"),S(4,"Todos os dados relativos \xe1 conta (informa\xe7\xf5es pessoais, amizades) ser\xe3o removidos e n\xe3o poder\xe3o ser recuperados mais tarde."),g(),p(5,"div",26),p(6,"button",27),J("click",function(){return be(t),j(2).fecharApagarConta()}),p(7,"b"),S(8,"Fechar"),g(),g(),p(9,"button",28),J("click",function(){return be(t),j(2).apagarConta()}),p(10,"b"),S(11,"Apagar Conta"),g(),g(),g(),g()}}function vZ(n,e){if(1&n){const t=$e();p(0,"div",4),p(1,"div",5),U(2,"img",6),p(3,"div",7),p(4,"h2"),S(5),g(),p(6,"h3"),S(7),g(),g(),U(8,"div",8),p(9,"div",9),p(10,"h2"),S(11,"Tags"),g(),p(12,"div",10),V(13,hZ,2,1,"p",11),g(),g(),p(14,"div",12),p(15,"h2"),S(16,"Estado Emocional"),g(),p(17,"p"),S(18),g(),g(),U(19,"div",8),p(20,"div",13),p(21,"button",14),J("click",function(){return be(t),j().opcao(3)}),p(22,"b"),S(23,"Editar Perfil"),g(),g(),p(24,"button",14),J("click",function(){be(t);const r=j();return r.opcao_apagar_conta=!r.opcao_apagar_conta}),p(25,"b"),S(26,"Apagar Conta"),g(),g(),g(),g(),p(27,"div",15),p(28,"div",16),p(29,"p",17),J("click",function(){return be(t),j().opcao(1)}),p(30,"b"),S(31,"Feed"),g(),g(),p(32,"p",17),J("click",function(){return be(t),j().opcao(2)}),p(33,"b"),S(34,"Informa\xe7\xe3o"),g(),g(),p(35,"p",17),J("click",function(){return be(t),j().opcao(5)}),p(36,"b"),S(37,"Cloud de tags"),g(),g(),g(),V(38,fZ,2,1,"div",18),V(39,pZ,2,1,"div",18),V(40,gZ,2,0,"div",18),V(41,mZ,2,1,"div",18),g(),V(42,_Z,12,0,"div",19),g()}if(2&n){const t=j();T(2),hn("src","../../../assets/",t.utilizador.avatar,"",dn),T(3),_e(t.utilizador.nome),T(2),_e(t.utilizador.email),T(6),R("ngForOf",t.utilizador.tags),T(5),_e(t.utilizador.estadoEmocional),T(11),R("ngClass",t.opcaoStyle[1]),T(3),R("ngClass",t.opcaoStyle[2]),T(3),R("ngClass",t.opcaoStyle[3]),T(3),R("ngIf",t.opcao_feed&&t.carregouUtilizador),T(1),R("ngIf",t.opcao_informacao),T(1),R("ngIf",t.opcao_editar_perfil),T(1),R("ngIf",t.opcao_cloud_tags),T(1),R("ngIf",t.opcao_apagar_conta)}}function yZ(n,e){1&n&&(p(0,"div",29),p(1,"p"),S(2,"A carregar utilizador..."),g(),U(3,"div",30),g())}let bZ=(()=>{class n{constructor(t,i){this.utilizadoresService=t,this.router=i,this.opcaoStyle=["","opcao-selecionada","opcao-nao-selecionada","opcao-nao-selecionada"],this.opcao_feed=!0,this.opcao_informacao=!1,this.opcao_editar_perfil=!1,this.opcao_apagar_conta=!1,this.carregouUtilizador=!1,this.opcao_cloud_tags=!1,this.aProcessarApagarConta=!1}ngOnInit(){this.carregarInformacoes(!0)}carregarInformacoes(t){t&&this.utilizadoresService.getUtilizadorAutenticado().subscribe(i=>{this.utilizador=i,this.carregouUtilizador=!0})}opcao(t){switch(this.opcao_feed=!1,this.opcao_informacao=!1,this.opcao_editar_perfil=!1,this.opcao_apagar_conta=!1,this.opcao_cloud_tags=!1,this.opcaoStyle[1]="opcao-nao-selecionada",this.opcaoStyle[2]="opcao-nao-selecionada",this.opcaoStyle[3]="opcao-nao-selecionada",t){case 1:this.opcao_feed=!0,this.opcaoStyle[1]="opcao-selecionada";break;case 2:this.opcao_informacao=!0,this.opcaoStyle[2]="opcao-selecionada";break;case 3:this.opcao_editar_perfil=!0;break;case 4:this.opcao_apagar_conta=!0;break;case 5:this.opcao_cloud_tags=!0,this.opcaoStyle[3]="opcao-selecionada"}}apagarConta(){this.aProcessarApagarConta||(this.aProcessarApagarConta=!0,this.utilizadoresService.apagarMeuUtilizador().subscribe(t=>{this.aProcessarApagarConta=!1,localStorage.clear(),this.router.navigate(["/"])}))}fecharApagarConta(){this.opcao_apagar_conta=!1}}return n.\u0275fac=function(t){return new(t||n)(G(Bo),G(Bt))},n.\u0275cmp=Pt({type:n,selectors:[["app-perfil"]],decls:5,vars:2,consts:[[1,"pagina"],[1,"pagina-topo"],["class","restante-pagina",4,"ngIf"],["class","aProcurar",4,"ngIf"],[1,"restante-pagina"],[1,"topo"],[1,"avatar",3,"src"],[1,"nome-e-email"],[1,"vl"],[1,"tags"],[1,"t"],[4,"ngFor","ngForOf"],[1,"estado-emocional"],[1,"amigos"],[1,"botao-topo",3,"click"],[1,"baixo"],[1,"esquerda"],[3,"ngClass","click"],["class","direita",4,"ngIf"],["class","janelaApagarConta",4,"ngIf"],[1,"direita"],[3,"utilizador"],[3,"uti"],[3,"atualizarUtilizador"],[3,"tipoDeTags"],[1,"janelaApagarConta"],[1,"botoes"],[2,"background-color","firebrick","margin-right","5px",3,"click"],[2,"background-color","forestgreen",3,"click"],[1,"aProcurar"],[1,"loader"]],template:function(t,i){1&t&&(p(0,"div",0),p(1,"div",1),U(2,"app-menu-topo-utilizador"),g(),V(3,vZ,43,13,"div",2),V(4,yZ,4,0,"div",3),g()),2&t&&(T(3),R("ngIf",i.carregouUtilizador),T(1),R("ngIf",!i.carregouUtilizador))},directives:[el,xn,Jn,Wa,Db,VI,dZ,xw],styles:['*[_ngcontent-%COMP%]{padding:0;margin:0;box-sizing:border-box}.pagina[_ngcontent-%COMP%]{height:100vh;width:100%;background:rgb(223,223,223);display:flex;flex-direction:column;align-items:center;justify-content:flex-start}.pagina-topo[_ngcontent-%COMP%]{height:7%;width:100%;background-image:url(background.b8b8e9811b070779.jpg);background-size:cover}.restante-pagina[_ngcontent-%COMP%]{width:100%;height:100%;max-height:93%;display:flex;flex-direction:column;justify-content:space-between;padding:40px 100px}.topo[_ngcontent-%COMP%]{background-color:#fff;width:100%;border-radius:10px;height:19%;display:flex;align-items:center;justify-content:space-around}.baixo[_ngcontent-%COMP%]{border-radius:10px;display:flex;align-items:center;justify-content:space-between;width:100%;height:78%}.baixo[_ngcontent-%COMP%]   .esquerda[_ngcontent-%COMP%]{border-radius:10px;height:100%;width:25%}.baixo[_ngcontent-%COMP%]   .direita[_ngcontent-%COMP%]{border-radius:10px;width:73%;height:100%}.avatar[_ngcontent-%COMP%]{width:8%}.nome-e-email[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:21%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.nome-e-email[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif}.nome-e-email[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.9rem}.tags[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:21%}.tags[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:1.1rem;margin-bottom:2px;color:#20416a}.tags[_ngcontent-%COMP%]   .t[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.tags[_ngcontent-%COMP%]   .t[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background-color:#20416a;padding:4px;margin-right:2px;border-radius:10px;color:#fff}.estado-emocional[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:21%}.estado-emocional[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:1.1rem;margin-bottom:2px;color:#20416a}.estado-emocional[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem}.amigos[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:21%}.botao-topo[_ngcontent-%COMP%]{background-image:url(background.b8b8e9811b070779.jpg);background-size:cover;color:#fff;border:0;border-radius:10px;cursor:pointer;margin-top:5px;width:100%}.botao-topo[_ngcontent-%COMP%]:hover{background-position:center}.amigos[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px;color:#fff;border:0;border-radius:10px;cursor:pointer;margin-top:5px}.amigos[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:.8}.amigos[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#20416a}.amigos[_ngcontent-%COMP%]   .aceitar-recusar[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center}.popup[_ngcontent-%COMP%]{position:absolute;background-image:url(background.b8b8e9811b070779.jpg);background-position:center;background-size:cover;padding:10px;border-radius:10px;width:50%;height:50%;margin:0 20% 10%}.vl[_ngcontent-%COMP%]{border-left:3px solid #20416a;height:70%}.opcao-selecionada[_ngcontent-%COMP%]{width:100%;padding:10px;text-align:center;margin-bottom:2%;border-radius:10px;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;background-image:url(background.b8b8e9811b070779.jpg);color:#fff;background-size:cover;cursor:pointer}.opcao-nao-selecionada[_ngcontent-%COMP%]{width:100%;padding:10px;text-align:center;margin-bottom:2%;border-radius:10px;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;background-color:#fff;color:#20416a;border:2px solid #20416a;background-size:cover;cursor:pointer}.esquerda[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{background-image:url(background.b8b8e9811b070779.jpg);background-position:center;color:#fff}.seccao[_ngcontent-%COMP%]{width:99%;padding:10px;margin-bottom:4px;display:flex;flex-direction:column}.seccao[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#20416a;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:1.2rem}.subseccao[_ngcontent-%COMP%]{padding:5px 0;display:flex;align-items:center;width:70%;border-bottom:2px solid black;margin:auto}.subseccao[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:.8rem;margin-right:4px}.subseccao[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:0;color:#000;width:50%}.subseccao[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:0}[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:20px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#20416a;border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#6b6b6b}.aProcurar[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:100%}.loader[_ngcontent-%COMP%]{margin-top:2%;border:16px solid #f3f3f3;border-radius:50%;border-top:16px solid #20416a;width:60px;height:60px;animation:spin 2s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.janelaApagarConta[_ngcontent-%COMP%]{background-color:#20416a;position:absolute;z-index:10;width:35%;height:30%;margin:auto 25%;padding:10px;border-radius:10px;display:flex;flex-direction:column;align-items:center;justify-content:space-between}.janelaApagarConta[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.2rem;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;height:20%}.janelaApagarConta[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:.9rem;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;height:40%}.janelaApagarConta[_ngcontent-%COMP%]   .botoes[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:flex-end}.botoes[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px;border:0;border-radius:10px;cursor:pointer;color:#fff}.botoes[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:.8}']}),n})();function xZ(n,e){if(1&n){const t=$e();p(0,"div",19),U(1,"img",20),p(2,"div",21),p(3,"h2"),S(4),g(),p(5,"h3"),S(6),g(),g(),p(7,"div",22),p(8,"h2"),S(9,"Amigos em comum"),g(),p(10,"p"),S(11,"0"),g(),g(),p(12,"div",22),p(13,"h2"),S(14,"Tags em comum"),g(),p(15,"p"),S(16,"0"),g(),g(),p(17,"button",23),J("click",function(){const o=be(t).$implicit;return j(2).irParaPerfil(o.id)}),p(18,"b"),S(19,"Ver Perfil"),g(),g(),g()}if(2&n){const t=e.$implicit;T(1),hn("src","../../../assets/",t.avatar,"",dn),T(3),_e(t.nome),T(2),_e(t.email)}}function wZ(n,e){1&n&&(p(0,"div",24),p(1,"p"),S(2,"N\xe3o foram encontrados resultados para a pesquisa."),g(),g())}function CZ(n,e){if(1&n&&(p(0,"div",16),V(1,xZ,20,3,"div",17),V(2,wZ,3,0,"div",18),g()),2&n){const t=j();T(1),R("ngForOf",t.utilizadores),T(1),R("ngIf",0==t.utilizadores.length)}}let HI=(()=>{class n{constructor(t,i,r,o,s){this.route=t,this.router=i,this.loginService=r,this.fb=o,this.utilizadoresService=s,this.utilizadores=[],this.formFiltragem=this.fb.group({email:[""],nome:[""],pais:[""],cidade:[""]}),this.aProcurarResultados=!0}ngOnInit(){this.loginService.redirecionarParaLoginSeNaoAutenticado(),this.route.params.subscribe(t=>{this.formFiltragem.patchValue({nome:t.pesquisa}),this.filtrarResultados()})}filtrarResultados(){const t=this.formFiltragem.controls.email.value,i=this.formFiltragem.controls.nome.value,r=this.formFiltragem.controls.pais.value,o=this.formFiltragem.controls.cidade.value;""==t&&""==i&&""==r&&""==o?vt().fire({position:"bottom-end",icon:"error",title:"Pelo menos um campo deve ser especificado!",showConfirmButton:!1,timer:1500}):(this.aProcurarResultados=!0,this.utilizadoresService.getUtilizadoresPorParametros(i,t,r,o).subscribe(s=>{this.utilizadores=s,this.aProcurarResultados=!1}))}irParaPerfil(t){this.router.navigate(["/utilizador/"+t])}}return n.\u0275fac=function(t){return new(t||n)(G(Ks),G(Bt),G(yh),G(Js),G(Bo))},n.\u0275cmp=Pt({type:n,selectors:[["app-pesquisar"]],decls:32,vars:3,consts:[[1,"pagina"],[1,"topo"],[1,"restante-pagina"],[1,"esquerda"],[3,"formGroup","ngSubmit"],[1,"campo-pesquisa"],["for","Email"],["type","email","name","Email","formControlName","email"],["for","Nome"],["type","text","name","Nome","formControlName","nome"],["for","Pais"],["type","text","name","Pais","formControlName","pais"],["for","Cidade"],["type","text","name","Cidade","formControlName","cidade"],["type","submit",3,"disabled"],["class","direita",4,"ngIf"],[1,"direita"],["class","utilizador",4,"ngFor","ngForOf"],["class","sem-resultados",4,"ngIf"],[1,"utilizador"],["alt","avatar",3,"src"],[1,"nomes"],[1,"em-comum"],[3,"click"],[1,"sem-resultados"]],template:function(t,i){1&t&&(p(0,"div",0),p(1,"div",1),U(2,"app-menu-topo-utilizador"),g(),p(3,"div",2),p(4,"div",3),p(5,"p"),S(6,"Especifique alguns par\xe2metros de pesquisa para que seja mais f\xe1cil encontrar o utilizador desejado."),g(),p(7,"form",4),J("ngSubmit",function(){return i.filtrarResultados()}),p(8,"div",5),p(9,"label",6),p(10,"b"),S(11,"Email: "),g(),g(),U(12,"input",7),g(),p(13,"div",5),p(14,"label",8),p(15,"b"),S(16,"Nome: "),g(),g(),U(17,"input",9),g(),p(18,"div",5),p(19,"label",10),p(20,"b"),S(21,"Pais: "),g(),g(),U(22,"input",11),g(),p(23,"div",5),p(24,"label",12),p(25,"b"),S(26,"Cidade: "),g(),g(),U(27,"input",13),g(),p(28,"button",14),p(29,"b"),S(30,"Procurar"),g(),g(),g(),g(),V(31,CZ,3,2,"div",15),g(),g()),2&t&&(T(7),R("formGroup",i.formFiltragem),T(21),R("disabled",!i.formFiltragem.valid),T(3),R("ngIf",!i.aProcurarResultados))},directives:[el,Xs,qs,ko,fr,Dr,ds,xn,Jn],styles:['*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}.pagina[_ngcontent-%COMP%]{height:100vh;width:100%;background:rgb(223,223,223);display:flex;flex-direction:column;align-items:center;justify-content:flex-start}.topo[_ngcontent-%COMP%]{height:7%;width:100%;background-image:url(background.b8b8e9811b070779.jpg);background-size:cover}.restante-pagina[_ngcontent-%COMP%]{width:100%;height:100%;max-height:93%;display:flex;justify-content:space-between;padding:40px 100px}.esquerda[_ngcontent-%COMP%]{width:25%;border-radius:10px;display:flex;flex-direction:column;padding:10px;align-items:center;justify-content:space-between;background-color:#fff;height:60%}.direita[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:72%;overflow-y:auto;overflow-x:hidden}.esquerda[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{height:60%;width:100%;display:flex;flex-direction:column;align-items:center;justify-content:space-between}.esquerda[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#20416a}.esquerda[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .campo-pesquisa[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:space-between;padding:4px;background-color:#fff;border:solid #20416a 3px;border-radius:10px}.esquerda[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .campo-pesquisa[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;color:#20416a}.esquerda[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .campo-pesquisa[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border:0;color:#20416a;padding-left:5px}.esquerda[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:10px;border:0;border-radius:10px;background-image:url(background.b8b8e9811b070779.jpg);color:#fff;background-size:cover;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;cursor:pointer}.esquerda[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-position:center}input[_ngcontent-%COMP%]:focus{outline:0}.utilizador[_ngcontent-%COMP%]{background-color:red;width:99%;display:flex;align-items:center;justify-content:space-around;background-color:#fff;padding:5px;border-radius:10px;margin-bottom:5px}.utilizador[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px}.utilizador[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border:0;background-image:url(background.b8b8e9811b070779.jpg);color:#fff;border-radius:10px;background-size:cover;cursor:pointer}.utilizador[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-position:center}.em-comum[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.em-comum[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;color:#20416a;font-size:1rem}.em-comum[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#20416a;font-size:.9rem}.nomes[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:1.1rem;color:#20416a}.nomes[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.9rem;color:#20416a}.sem-resultados[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:20px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:white;border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#6b6b6b}']}),n})(),MZ=(()=>{class n{constructor(t){this.http=t,this.url=zo_baseUrl+"/planeamento"}caminhoMaisCurto(t,i,r){return this.http.get(this.url+"/caminhoMaisCurto?para="+t+"&maxLigacoes="+i+"&emocoesProibidas="+r)}caminhoMaisCurtoMulticriterio(t,i,r){return this.http.get(this.url+"/caminhoMaisCurtoMulticriterio?para="+t+"&maxLigacoes="+i+"&emocoesProibidas="+r)}caminhoMaisForte(t,i,r){return this.http.get(this.url+"/caminhoMaisForte?para="+t+"&maxLigacoes="+i+"&emocoesProibidas="+r)}caminhoMaisForteMulticriterio(t,i,r){return this.http.get(this.url+"/caminhoMaisForteMulticriterio?para="+t+"&maxLigacoes="+i+"&emocoesProibidas="+r)}caminhoMaisSeguro(t,i,r,o){return this.http.get(this.url+"/caminhoMaisSeguro?para="+t+"&forcaMinima="+r+"&maxLigacoes="+i+"&emocoesProibidas="+o)}caminhoMaisSeguroMulticriterio(t,i,r,o){return this.http.get(this.url+"/caminhoMaisSeguroMulticriterio?para="+t+"&forcaMinima="+r+"&maxLigacoes="+i+"&emocoesProibidas="+o)}caminhoDfs(t,i,r){return this.http.get(this.url+"/dfs?para="+t+"&maxLigacoes="+i+"&emocoesProibidas="+r)}caminhoDfsMulticriterio(t,i,r){return this.http.get(this.url+"/dfsMulticriterio?para="+t+"&maxLigacoes="+i+"&emocoesProibidas="+r)}caminhoAstar(t,i,r){return this.http.get(this.url+"/aStar?para="+t+"&maxLigacoes="+i+"&emocoesProibidas="+r)}caminhoAstarMulticriterio(t,i,r){return this.http.get(this.url+"/aStarMulticriterio?para="+t+"&maxLigacoes="+i+"&emocoesProibidas="+r)}caminhoBestFirst(t,i,r){return this.http.get(this.url+"/bestFirst?para="+t+"&maxLigacoes="+i+"&emocoesProibidas="+r)}caminhoBestFirstMulticriterio(t,i,r){return this.http.get(this.url+"/bestFirstMulticriterio?para="+t+"&maxLigacoes="+i+"&emocoesProibidas="+r)}}return n.\u0275fac=function(t){return new(t||n)(Le(Ro))},n.\u0275prov=We({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function EZ(n,e){if(1&n&&(p(0,"option"),S(1),g()),2&n){const t=e.$implicit;T(1),_e(t)}}function SZ(n,e){if(1&n){const t=$e();p(0,"div",14),p(1,"h2"),p(2,"b"),S(3,"Custo M\xednimo:"),g(),g(),p(4,"input",15),J("change",function(r){return be(t),j().alterarForcaMinimaLigacao(r.target.value)}),g(),g()}}function TZ(n,e){if(1&n){const t=$e();p(0,"div",35),p(1,"p"),S(2),g(),p(3,"input",27),J("ngModelChange",function(r){const s=be(t).index;return j(3).emocaoProibida[s]=r}),g(),g()}if(2&n){const t=e.$implicit,i=e.index,r=j(3);T(2),_e(t),T(1),R("ngModel",r.emocaoProibida[i])}}function PZ(n,e){if(1&n&&(p(0,"div",32),p(1,"p",33),S(2,"\u2022 Selecione as emo\xe7\xf5es que pretende proibir"),g(),V(3,TZ,4,2,"div",34),g()),2&n){const t=j(2);T(3),R("ngForOf",t.emocoes)}}function AZ(n,e){if(1&n){const t=$e();p(0,"div",16),p(1,"div",17),p(2,"h2"),S(3,"Defini\xe7\xf5es de caminhos"),g(),g(),p(4,"div",18),p(5,"div",19),p(6,"p",20),p(7,"b"),S(8,"Algoritmo"),g(),g(),p(9,"div",21),p(10,"div",22),p(11,"p"),S(12,"DFS"),g(),p(13,"input",23),J("ngModelChange",function(r){return be(t),j().dfs=r})("change",function(){return be(t),j().alterarAlgoritmo(1)}),g(),g(),p(14,"div",22),p(15,"p"),S(16,"A*"),g(),p(17,"input",23),J("ngModelChange",function(r){return be(t),j().aStar=r})("change",function(){return be(t),j().alterarAlgoritmo(2)}),g(),g(),p(18,"div",22),p(19,"p"),S(20,"Best First"),g(),p(21,"input",23),J("ngModelChange",function(r){return be(t),j().bestFS=r})("change",function(){return be(t),j().alterarAlgoritmo(3)}),g(),g(),g(),g(),p(22,"div",24),p(23,"p"),S(24,"M\xe1ximo de liga\xe7\xf5es"),g(),p(25,"input",25),J("ngModelChange",function(r){return be(t),j().maximoLigacoes=r}),g(),g(),p(26,"div",26),p(27,"p"),S(28,"Considerar for\xe7as de rela\xe7\xe3o"),g(),p(29,"input",27),J("ngModelChange",function(r){return be(t),j().considerarForcaRelacao=r}),g(),g(),p(30,"div",26),p(31,"p"),S(32,"Considerar estados emocionais"),g(),p(33,"input",27),J("ngModelChange",function(r){return be(t),j().considerarEstadosEmocionais=r}),g(),g(),V(34,PZ,4,1,"div",28),g(),p(35,"div",29),p(36,"button",30),J("click",function(){return be(t),j().fecharDefinicoes()}),p(37,"b"),S(38,"Fechar"),g(),g(),p(39,"button",31),J("click",function(){return be(t),j().guardarDefinicoes()}),p(40,"b"),S(41,"Guardar"),g(),g(),g(),g()}if(2&n){const t=j();T(13),R("ngModel",t.dfs),T(4),R("ngModel",t.aStar),T(4),R("ngModel",t.bestFS),T(4),R("ngModel",t.maximoLigacoes),T(4),R("ngModel",t.considerarForcaRelacao),T(4),R("ngModel",t.considerarEstadosEmocionais),T(1),R("ngIf",t.considerarEstadosEmocionais)}}function DZ(n,e){if(1&n&&(p(0,"div",37),p(1,"h3"),p(2,"b"),S(3,"Custo M\xednimo"),g(),g(),p(4,"p"),S(5),g(),g()),2&n){const t=j(2);T(5),_e(t.caminho.custoMinimo)}}function OZ(n,e){if(1&n&&(p(0,"div",36),p(1,"div",37),p(2,"h3"),p(3,"b"),S(4,"N\xfamero de N\xf3s"),g(),g(),p(5,"p"),S(6),g(),g(),p(7,"div",37),p(8,"h3"),p(9,"b"),S(10,"For\xe7a de Liga\xe7\xe3o Total"),g(),g(),p(11,"p"),S(12),g(),g(),p(13,"div",37),p(14,"h3"),p(15,"b"),S(16,"For\xe7a de Rela\xe7\xe3o Total"),g(),g(),p(17,"p"),S(18),g(),g(),V(19,DZ,6,1,"div",38),p(20,"div",37),p(21,"h3"),p(22,"b"),S(23,"Custo Total"),g(),g(),p(24,"p"),S(25),g(),g(),g()),2&n){const t=j();T(6),_e(t.caminho.numeroNos),T(6),_e(t.caminho.forcaLigacaoTotal),T(6),_e(t.caminho.forcaRelacaoTotal),T(1),R("ngIf",t.dfs),T(6),_e(t.caminho.custoTotal)}}function IZ(n,e){1&n&&(p(0,"div",39),p(1,"div",40),p(2,"p"),S(3,"Forca de Liga\xe7\xe3o"),g(),g(),p(4,"div",40),p(5,"p"),S(6,"Forca de Rela\xe7\xe3o"),g(),g(),g())}function RZ(n,e){if(1&n&&(p(0,"div",49),U(1,"img",50),p(2,"p",52),S(3,"Eu"),g(),g()),2&n){const t=j().$implicit;T(1),hn("src","../../../assets/emocao_",t.utilizadorA.estadoEmocional.toLowerCase(),".png",dn),xp("title",t.utilizadorA.estadoEmocional)}}function LZ(n,e){if(1&n){const t=$e();p(0,"div",43),V(1,RZ,4,2,"div",44),p(2,"div",45),p(3,"p",46),S(4),g(),U(5,"img",47),p(6,"p",48),S(7),g(),g(),p(8,"div",49),U(9,"img",50),p(10,"p",51),J("click",function(){const o=be(t).$implicit;return j(2).irParaPerfil(o.utilizadorB.id)}),S(11),g(),g(),g()}if(2&n){const t=e.$implicit,i=e.index;T(1),R("ngIf",0==i),T(3),_e(t.forcaLigacao),T(3),_e(t.forcaRelacao),T(2),hn("src","../../../assets/emocao_",t.utilizadorB.estadoEmocional.toLowerCase(),".png",dn),xp("title",t.utilizadorB.estadoEmocional),T(2),_e(t.utilizadorB.nome)}}function kZ(n,e){if(1&n&&(p(0,"div",41),V(1,LZ,12,6,"div",42),g()),2&n){const t=j();T(1),R("ngForOf",t.caminho.ligacoes)}}function FZ(n,e){1&n&&(p(0,"div",53),p(1,"p"),S(2,"A calcular caminho..."),g(),U(3,"div",54),g())}function NZ(n,e){1&n&&(p(0,"div",55),p(1,"p"),S(2,"N\xe3o foi possivel encontrar um caminho para este utilizador."),g(),g())}let zZ=(()=>{class n{constructor(t,i,r){this.planeamentoService=t,this.router=i,this.emocoesService=r,this.tiposCaminho=["Mais Curto","Mais Forte","Mais Seguro","Primeira Solucao"],this.tipoCaminhoSelecionado=this.tiposCaminho[0],this.forcaMinimaLigacao=1,this.maximoLigacoes=10,this.aCalcular=!1,this.considerarEstadosEmocionais=!1,this.considerarForcaRelacao=!1,this.caminho={ligacoes:[],numeroNos:0,forcaLigacaoTotal:0,forcaRelacaoTotal:0,custoMinimo:0,custoTotal:0},this.definicoes=!1,this.emocoes=r.getEstadosEmocionais(),this.emocaoProibida=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],this.dfs=!0,this.aStar=!1,this.bestFS=!1,this.opcoesAtuaisEmocao=!1,this.opcoesAtuaisForca=!1,this.dfsAtual=!0,this.aStarAtual=!1,this.bestFSAtual=!1,this.maximoLigacoesAtual=10}ngOnInit(){this.carregarCaminho()}irParaPerfil(t){this.router.navigate(["/utilizador/"+t])}fecharDefinicoes(){this.definicoes=!1,this.maximoLigacoes=this.maximoLigacoesAtual,this.considerarEstadosEmocionais=this.opcoesAtuaisEmocao,this.considerarForcaRelacao=this.opcoesAtuaisForca,this.dfs=this.dfsAtual,this.aStar=this.aStarAtual,this.bestFS=this.bestFSAtual}guardarDefinicoes(){this.maximoLigacoes<1?vt().fire({position:"bottom-end",icon:"error",title:"O valor m\xe1ximo de liga\xe7\xf5es \xe9 inv\xe1lido.",showConfirmButton:!1,timer:1500}):(this.definicoes=!1,this.dfs?this.tiposCaminho=["Mais Curto","Mais Forte","Mais Seguro","Primeira Solucao"]:(this.tiposCaminho=["Primeira Solucao"],this.tipoCaminhoSelecionado=this.tiposCaminho[0]),this.carregarCaminho())}janelaDefinicoes(){var t=!this.definicoes;t&&(this.opcoesAtuaisForca=this.considerarForcaRelacao,this.opcoesAtuaisEmocao=this.considerarEstadosEmocionais,this.maximoLigacoesAtual=this.maximoLigacoes,this.dfsAtual=this.dfs,this.aStarAtual=this.aStar,this.bestFSAtual=this.bestFS),this.definicoes=t}carregarCaminho(){this.caminho.ligacoes=[],this.aCalcular=!0;var t="";this.considerarEstadosEmocionais&&(t=this.fazerStringComEmocoesProibidas()),this.tipoCaminhoSelecionado==this.tiposCaminho[0]?this.considerarForcaRelacao?this.planeamentoService.caminhoMaisCurtoMulticriterio(this.paraUtilizadorID,this.maximoLigacoes,t).subscribe(i=>{this.caminho=i,this.aCalcular=!1},i=>{this.aCalcular=!1}):this.planeamentoService.caminhoMaisCurto(this.paraUtilizadorID,this.maximoLigacoes,t).subscribe(i=>{this.caminho=i,this.aCalcular=!1},i=>{this.aCalcular=!1}):this.tipoCaminhoSelecionado==this.tiposCaminho[1]?this.considerarForcaRelacao?this.planeamentoService.caminhoMaisForteMulticriterio(this.paraUtilizadorID,this.maximoLigacoes,t).subscribe(i=>{this.caminho=i,this.aCalcular=!1},i=>{this.aCalcular=!1}):this.planeamentoService.caminhoMaisForte(this.paraUtilizadorID,this.maximoLigacoes,t).subscribe(i=>{this.caminho=i,this.aCalcular=!1},i=>{this.aCalcular=!1}):this.tipoCaminhoSelecionado==this.tipoCaminhoSelecionado[2]?this.considerarForcaRelacao?this.planeamentoService.caminhoMaisSeguroMulticriterio(this.paraUtilizadorID,this.maximoLigacoes,this.forcaMinimaLigacao,t).subscribe(i=>{this.caminho=i,this.aCalcular=!1},i=>{this.aCalcular=!1}):this.planeamentoService.caminhoMaisSeguro(this.paraUtilizadorID,this.maximoLigacoes,this.forcaMinimaLigacao,t).subscribe(i=>{this.caminho=i,this.aCalcular=!1},i=>{this.aCalcular=!1}):this.dfs?this.considerarForcaRelacao?this.planeamentoService.caminhoDfsMulticriterio(this.paraUtilizadorID,this.maximoLigacoes,t).subscribe(i=>{this.caminho=i,this.aCalcular=!1},i=>{this.aCalcular=!1}):this.planeamentoService.caminhoDfs(this.paraUtilizadorID,this.maximoLigacoes,t).subscribe(i=>{this.caminho=i,this.aCalcular=!1},i=>{this.aCalcular=!1}):this.aStar?this.considerarForcaRelacao?this.planeamentoService.caminhoAstarMulticriterio(this.paraUtilizadorID,this.maximoLigacoes,t).subscribe(i=>{this.caminho=i,this.aCalcular=!1},i=>{this.aCalcular=!1}):this.planeamentoService.caminhoAstar(this.paraUtilizadorID,this.maximoLigacoes,t).subscribe(i=>{this.caminho=i,this.aCalcular=!1},i=>{this.aCalcular=!1}):this.considerarForcaRelacao?this.planeamentoService.caminhoBestFirstMulticriterio(this.paraUtilizadorID,this.maximoLigacoes,t).subscribe(i=>{this.caminho=i,this.aCalcular=!1},i=>{this.aCalcular=!1}):this.planeamentoService.caminhoBestFirst(this.paraUtilizadorID,this.maximoLigacoes,t).subscribe(i=>{this.caminho=i,this.aCalcular=!1},i=>{this.aCalcular=!1})}alterarTipoCaminho(t){this.tipoCaminhoSelecionado=t,this.carregarCaminho()}alterarForcaMinimaLigacao(t){this.forcaMinimaLigacao=t,this.carregarCaminho()}fazerStringComEmocoesProibidas(){var t="",i=0;return this.emocaoProibida.forEach(r=>{r&&(t=0==t.length?this.emocoes[i]:t+","+this.emocoes[i]),i++}),t}alterarAlgoritmo(t){switch(this.dfs=!1,this.bestFS=!1,this.aStar=!1,t){case 1:this.dfs=!0;break;case 2:this.aStar=!0;break;case 3:this.bestFS=!0}}}return n.\u0275fac=function(t){return new(t||n)(G(MZ),G(Bt),G(Ab))},n.\u0275cmp=Pt({type:n,selectors:[["app-caminhos"]],inputs:{paraUtilizadorID:"paraUtilizadorID"},decls:17,vars:9,consts:[[1,"pagina"],[1,"topo"],[1,"tipo-caminho"],[3,"ngModel","change","ngModelChange"],[4,"ngFor","ngForOf"],["class","forca-minima",4,"ngIf"],[1,"definicoes"],["src","../../../assets/definicoes.png",3,"click"],["class","janelaDefinicoes",4,"ngIf"],["class","meio",4,"ngIf"],["class","meio-baixo",4,"ngIf"],["class","baixo",4,"ngIf"],["class","a-calcular",4,"ngIf"],["class","sem-caminho",4,"ngIf"],[1,"forca-minima"],["type","number","value","1","max","100","min","1",3,"change"],[1,"janelaDefinicoes"],[1,"topo-definicoes"],[1,"main-definicoes"],[1,"tipoAlgoritmo"],[1,"tit"],[1,"algoritmos"],[1,"algoritmo"],["type","checkbox",3,"ngModel","ngModelChange","change"],[1,"maximo-ligacoes"],["type","number","min","1",3,"ngModel","ngModelChange"],[1,"considerar-estados-emocionais"],["type","checkbox",3,"ngModel","ngModelChange"],["class","apresentarEstadosEmocionais",4,"ngIf"],[1,"botoes"],[2,"background-color","firebrick","margin-right","5px",3,"click"],[2,"background-color","forestgreen",3,"click"],[1,"apresentarEstadosEmocionais"],[1,"titulo"],["class","emocao",4,"ngFor","ngForOf"],[1,"emocao"],[1,"meio"],[1,"info-caminho"],["class","info-caminho",4,"ngIf"],[1,"meio-baixo"],[1,"opcao-visualizacao"],[1,"baixo"],["class","no",4,"ngFor","ngForOf"],[1,"no"],["class","utilizadorEemocao",4,"ngIf"],[1,"info-ligacao"],[1,"forcaLigacao"],["src","../../../assets/seta_direita_azul.png"],[1,"forcaRelacao"],[1,"utilizadorEemocao"],[3,"src","title"],[1,"utilizador",3,"click"],[1,"utilizador",2,"cursor","default"],[1,"a-calcular"],[1,"loader"],[1,"sem-caminho"]],template:function(t,i){1&t&&(p(0,"div",0),p(1,"div",1),p(2,"div",2),p(3,"h2"),p(4,"b"),S(5,"Tipo de Caminho:"),g(),g(),p(6,"select",3),J("change",function(o){return i.alterarTipoCaminho(o.target.value)})("ngModelChange",function(o){return i.tipoCaminhoSelecionado=o}),V(7,EZ,2,1,"option",4),g(),g(),V(8,SZ,5,0,"div",5),p(9,"div",6),p(10,"img",7),J("click",function(){return i.janelaDefinicoes()}),g(),g(),g(),V(11,AZ,42,7,"div",8),V(12,OZ,26,5,"div",9),V(13,IZ,7,0,"div",10),V(14,kZ,2,1,"div",11),V(15,FZ,4,0,"div",12),V(16,NZ,3,0,"div",13),g()),2&t&&(T(6),R("ngModel",i.tipoCaminhoSelecionado),T(1),R("ngForOf",i.tiposCaminho),T(1),R("ngIf","Mais Seguro"==i.tipoCaminhoSelecionado),T(3),R("ngIf",i.definicoes),T(1),R("ngIf",i.caminho.ligacoes.length>0),T(1),R("ngIf",i.caminho.ligacoes.length>0),T(1),R("ngIf",i.caminho.ligacoes.length>0),T(1),R("ngIf",i.aCalcular),T(1),R("ngIf",0==i.caminho.ligacoes.length&&!i.aCalcular))},directives:[Xa,Dr,Lc,Jn,xn,Ys,Zs,th,rb,Ky,fr],styles:['*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}.pagina[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;background-color:#fff;border-radius:10px;padding:10px}.definicoes[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;cursor:pointer}.topo-definicoes[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;border-bottom:2px solid white;margin-bottom:5%}.topo-definicoes[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:1rem}.maximo-ligacoes[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:space-between;border:2px solid white;padding:5px;margin-bottom:5px}.maximo-ligacoes[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.maximo-ligacoes[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:40px;background-color:transparent;border:0;color:#fff}.maximo-ligacoes[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:0}.considerar-estados-emocionais[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:space-between;border:2px solid white;padding:5px;margin-bottom:5px}.considerar-estados-emocionais[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.janelaDefinicoes[_ngcontent-%COMP%]{border-radius:10px;padding:10px;background-color:#20416a;position:absolute;margin:auto;z-index:10;width:30%;height:40%;display:flex;flex-direction:column;align-items:center;justify-content:space-between}.main-definicoes[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;overflow-y:auto;overflow-x:hidden}.apresentarEstadosEmocionais[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:5px;border:2px solid white}.apresentarEstadosEmocionais[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.apresentarEstadosEmocionais[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]{border-bottom:2px solid white;font-family:"Gill Sans","Gill Sans MT",Calibri,"Trebuchet MS",sans-serif;margin-bottom:5px}.tipoAlgoritmo[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;border:2px solid white;padding:5px;margin-bottom:5px}.tipoAlgoritmo[_ngcontent-%COMP%]   .tit[_ngcontent-%COMP%]{color:#fff;text-align:center}.algoritmos[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:space-around}.algoritmo[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.algoritmo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;margin-right:2px}.emocao[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.botoes[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:flex-end}.botoes[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px;border:0;border-radius:10px;cursor:pointer;color:#fff}.botoes[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:.8}.topo[_ngcontent-%COMP%]{width:100%;height:8%;border-bottom:2px solid #20416a;display:flex;align-items:center;justify-content:space-between;margin-bottom:2%}.meio[_ngcontent-%COMP%]{height:15%;background-color:gray;display:flex;align-items:center;justify-content:center;border-radius:10px;margin-bottom:2%}.baixo[_ngcontent-%COMP%]{width:100%;height:68%;display:flex;align-items:center;justify-content:center}.topo[_ngcontent-%COMP%]   .tipo-caminho[_ngcontent-%COMP%]{display:flex;align-items:center}.topo[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;color:#20416a;font-size:1.1rem;margin-right:5px}.topo[_ngcontent-%COMP%]   .tipo-caminho[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:transparent;border:0;color:#20416a}.topo[_ngcontent-%COMP%]   .tipo-caminho[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:0}.topo[_ngcontent-%COMP%]   .forca-minima[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end}.topo[_ngcontent-%COMP%]   .forca-minima[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:transparent;border:0;width:40px;height:100%;color:#20416a}.topo[_ngcontent-%COMP%]   .forca-minima[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:0}.meio[_ngcontent-%COMP%]   .info-caminho[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin:0 10px}.meio[_ngcontent-%COMP%]   .info-caminho[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;color:#fff;font-size:1rem}.meio[_ngcontent-%COMP%]   .info-caminho[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:.8rem}.loader[_ngcontent-%COMP%]{margin-top:1%;border:8px solid #f3f3f3;border-radius:50%;border-top:8px solid #20416a;width:40px;height:40px;animation:spin 2s linear infinite}.a-calcular[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:86%}.a-calcular[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#a1a1a1;font-size:.9rem}.no[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;overflow-x:auto;overflow-y:hidden}.utilizador[_ngcontent-%COMP%]{background-color:#20416a;border-radius:10px;text-align:center;padding:10px;color:#fff;cursor:pointer}.info-ligacao[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.info-ligacao[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:"Lucida Sans","Lucida Sans Regular","Lucida Grande","Lucida Sans Unicode",Geneva,Verdana,sans-serif}.info-ligacao[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px}.forcaLigacao[_ngcontent-%COMP%]{color:#dc143c}.forcaRelacao[_ngcontent-%COMP%]{color:#2e8b57}.meio-baixo[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.opcao-visualizacao[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:5px;border-radius:10px}.opcao-visualizacao[_ngcontent-%COMP%]:nth-of-type(1){background-color:#dc143c;margin-right:5px}.opcao-visualizacao[_ngcontent-%COMP%]:nth-of-type(2){background-color:#2e8b57}.opcao-visualizacao[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-right:5px;color:#fff}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.utilizadorEemocao[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.utilizadorEemocao[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;margin-bottom:5px}.utilizadorEemocao[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:18px}[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}']}),n})();function BZ(n,e){if(1&n&&(p(0,"p"),S(1),g()),2&n){const t=e.$implicit;T(1),_e(t)}}function UZ(n,e){if(1&n&&(p(0,"div",5),U(1,"img",6),p(2,"div",7),p(3,"p"),S(4),g(),p(5,"h3"),S(6),g(),g(),p(7,"div",8),p(8,"h2"),S(9,"Tags"),g(),p(10,"div",9),V(11,BZ,2,1,"p",10),g(),g(),p(12,"div",8),p(13,"h2"),S(14,"Estado Emocional"),g(),p(15,"div",9),p(16,"p"),S(17),g(),g(),g(),g()),2&n){const t=e.$implicit;T(1),hn("src","../../../assets/",t.avatar,"",dn),T(3),_e(t.nome),T(2),_e(t.email),T(5),R("ngForOf",t.tags),T(6),_e(t.estadoEmocional)}}function VZ(n,e){1&n&&(p(0,"div",11),p(1,"p"),S(2,"A procurar amigos em comum..."),g(),U(3,"div",12),g())}function HZ(n,e){1&n&&(p(0,"div",13),p(1,"p"),S(2,"N\xe3o foi possivel encontrar amigos em comum."),g(),g())}let GZ=(()=>{class n{constructor(t){this.ligacoesService=t,this.amigosEmComum=[],this.aProcurar=!1}ngOnInit(){this.carregarAmigosEmComum()}carregarAmigosEmComum(){this.aProcurar=!0,this.ligacoesService.getAmigosEmComumCom(this.paraUtilizadorID).subscribe(t=>{this.amigosEmComum=t,this.aProcurar=!1},()=>{this.aProcurar=!1})}}return n.\u0275fac=function(t){return new(t||n)(G(Uo))},n.\u0275cmp=Pt({type:n,selectors:[["app-amigos-comum"]],inputs:{paraUtilizadorID:"paraUtilizadorID"},decls:8,vars:3,consts:[[1,"pagina"],[1,"topo"],["class","ligacao",4,"ngFor","ngForOf"],["class","a-procurar",4,"ngIf"],["class","sem-amigos",4,"ngIf"],[1,"ligacao"],[3,"src"],[1,"nomes"],[1,"info"],[1,"tags"],[4,"ngFor","ngForOf"],[1,"a-procurar"],[1,"loader"],[1,"sem-amigos"]],template:function(t,i){1&t&&(p(0,"div",0),p(1,"div",1),p(2,"h2"),p(3,"b"),S(4,"Lista de Amigos em Comum:"),g(),g(),g(),V(5,UZ,18,5,"div",2),V(6,VZ,4,0,"div",3),V(7,HZ,3,0,"div",4),g()),2&t&&(T(5),R("ngForOf",i.amigosEmComum),T(1),R("ngIf",i.aProcurar),T(1),R("ngIf",0==i.amigosEmComum.length&&!i.aProcurar))},directives:[Jn,xn],styles:['*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}.pagina[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;background-color:#fff;border-radius:10px;padding:10px;overflow-y:auto;overflow-x:hidden}.topo[_ngcontent-%COMP%]{width:100%;height:8%;border-bottom:2px solid #20416a;display:flex;align-items:center;justify-content:space-between;margin-bottom:2%}.topo[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;color:#20416a;font-size:1.1rem;margin-right:5px}.ligacao[_ngcontent-%COMP%]{width:95%;display:flex;align-items:center;justify-content:space-between;background-color:#e6e3e3;border-radius:10px;margin-bottom:10px;padding:5px 2%}.ligacao[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;margin-right:2%;cursor:pointer}.ligacao[_ngcontent-%COMP%]   .nomes[_ngcontent-%COMP%]{width:19%;margin-right:2%}.ligacao[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{width:19%;margin-right:2%;display:flex;flex-direction:column;align-items:center}.nomes[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:1.1rem;color:#20416a}.nomes[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.9rem;color:#20416a}.info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;color:#20416a;font-size:1rem}.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#20416a;font-size:.9rem}.tags[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.tags[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background-color:#20416a;padding:2px 5px;border-radius:10px;margin-right:2px;color:#fff}.tags[_ngcontent-%COMP%]   .t[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.tags[_ngcontent-%COMP%]   .t[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background-color:#20416a;padding:4px;margin-right:2px;border-radius:10px;color:#fff}.a-procurar[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:88%}.a-procurar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;color:#20416a;margin-bottom:2%}.loader[_ngcontent-%COMP%]{border:16px solid #f3f3f3;border-radius:50%;border-top:16px solid #20416a;width:120px;height:120px;animation:spin 2s linear infinite}']}),n})();function jZ(n,e){if(1&n&&(p(0,"p"),S(1),g()),2&n){const t=e.$implicit;T(1),_e(t)}}function WZ(n,e){1&n&&(p(0,"div",22),p(1,"p"),S(2,"asa"),g(),g()),2&n&&os("width",j().ligacao.forcaLigacao,"%")}function $Z(n,e){1&n&&(p(0,"div",23),p(1,"p"),S(2,"asa"),g(),g()),2&n&&os("width",j().ligacao.forcaLigacao,"%")}function qZ(n,e){1&n&&(p(0,"div",24),p(1,"p"),S(2,"asa"),g(),g()),2&n&&os("width",j().ligacao.forcaLigacao,"%")}function XZ(n,e){1&n&&U(0,"div",25),2&n&&os("width",100,"%")}function YZ(n,e){if(1&n&&U(0,"div",25),2&n){const t=j();os("width",t.ligacao.numeroLikes/t.ligacao.numeroDislikes*100,"%")}}function ZZ(n,e){1&n&&U(0,"div",26),2&n&&os("width",100,"%")}function JZ(n,e){if(1&n&&U(0,"div",26),2&n){const t=j();os("width",t.ligacao.numeroDislikes/t.ligacao.numeroLikes*100,"%")}}let QZ=(()=>{class n{constructor(){this.barraLikes=100,this.barraDislikes=100}ngOnInit(){this.ligacao.numeroLikes>this.ligacao.numeroDislikes?this.barraDislikes=this.ligacao.numeroDislikes/this.ligacao.numeroLikes*100+1:this.ligacao.numeroLikes<this.ligacao.numeroDislikes&&(this.barraLikes=this.ligacao.numeroLikes/this.ligacao.numeroDislikes*100+1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Pt({type:n,selectors:[["app-ligacao"]],inputs:{ligacao:"ligacao"},decls:50,vars:13,consts:[[1,"pagina"],[1,"topo"],[1,"restante"],[1,"tags"],[1,"t"],[4,"ngFor","ngForOf"],[1,"forcaLigacao"],[1,"forca"],[1,"barraTotal"],["class","pouca-ligacao",3,"width",4,"ngIf"],["class","media-ligacao",3,"width",4,"ngIf"],["class","muita-ligacao",3,"width",4,"ngIf"],[1,"aForcaDeLigacao"],[1,"forcaRelacao"],[1,"grafico"],[1,"info"],[1,"vl"],[1,"barras"],[1,"likes"],["class","like",3,"width",4,"ngIf"],[1,"dislikes"],["class","dislike",3,"width",4,"ngIf"],[1,"pouca-ligacao"],[1,"media-ligacao"],[1,"muita-ligacao"],[1,"like"],[1,"dislike"]],template:function(t,i){1&t&&(p(0,"div",0),p(1,"div",1),p(2,"h2"),p(3,"b"),S(4),g(),g(),g(),p(5,"div",2),p(6,"div",3),p(7,"h2"),S(8,"Tags"),g(),p(9,"div",4),V(10,jZ,2,1,"p",5),g(),g(),p(11,"div",6),p(12,"h2"),S(13,"For\xe7a de Liga\xe7\xe3o"),g(),p(14,"div",7),p(15,"p"),S(16,"0"),g(),p(17,"div",8),V(18,WZ,3,2,"div",9),V(19,$Z,3,2,"div",10),V(20,qZ,3,2,"div",11),g(),p(21,"p"),S(22,"100"),g(),g(),p(23,"p",12),p(24,"b"),S(25),g(),g(),g(),p(26,"div",13),p(27,"h2"),S(28,"For\xe7a de Rela\xe7\xe3o"),g(),p(29,"div",14),p(30,"div",15),p(31,"p"),S(32,"Likes"),g(),p(33,"p"),S(34,"Dislikes"),g(),g(),U(35,"div",16),p(36,"div",17),p(37,"div",18),V(38,XZ,1,2,"div",19),V(39,YZ,1,2,"div",19),p(40,"p"),S(41),g(),g(),p(42,"div",20),V(43,ZZ,1,2,"div",21),V(44,JZ,1,2,"div",21),p(45,"p"),S(46),g(),g(),g(),g(),p(47,"p",12),p(48,"b"),S(49),g(),g(),g(),g(),g()),2&t&&(T(4),ur("Liga\xe7\xe3o com ",i.ligacao.utilizadorB.nome,""),T(6),R("ngForOf",i.ligacao.tags),T(8),R("ngIf",i.ligacao.forcaLigacao<33),T(1),R("ngIf",i.ligacao.forcaLigacao>=33&&i.ligacao.forcaLigacao<66),T(1),R("ngIf",i.ligacao.forcaLigacao>=66),T(5),_e(i.ligacao.forcaLigacao),T(13),R("ngIf",i.ligacao.numeroLikes>=i.ligacao.numeroDislikes),T(1),R("ngIf",i.ligacao.numeroLikes<i.ligacao.numeroDislikes),T(2),_e(i.ligacao.numeroLikes),T(2),R("ngIf",i.ligacao.numeroDislikes>=i.ligacao.numeroLikes),T(1),R("ngIf",i.ligacao.numeroDislikes<i.ligacao.numeroLikes),T(2),_e(i.ligacao.numeroDislikes),T(3),_e(i.ligacao.forcaRelacao))},directives:[Jn,xn],styles:['.pagina[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;background-color:#fff;border-radius:10px;padding:10px}.topo[_ngcontent-%COMP%]{width:100%;height:8%;border-bottom:2px solid #20416a;display:flex;align-items:center;justify-content:space-between;margin-bottom:2%}.topo[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;color:#20416a;font-size:1.1rem;margin-right:5px}.tags[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column}.tags[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#20416a;font-family:"Lucida Sans","Lucida Sans Regular","Lucida Grande","Lucida Sans Unicode",Geneva,Verdana,sans-serif;font-size:1.1rem}.tags[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:2px;background-color:#20416a;padding:5px;border-radius:10px;margin-right:2px;color:#fff}.restante[_ngcontent-%COMP%]{width:100%;height:90%;display:flex;flex-direction:column;justify-content:space-around}.forcaLigacao[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column}.forcaLigacao[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#20416a;font-family:"Lucida Sans","Lucida Sans Regular","Lucida Grande","Lucida Sans Unicode",Geneva,Verdana,sans-serif;font-size:1.1rem}.forcaLigacao[_ngcontent-%COMP%]   .barraTotal[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px;width:50%;border-radius:10px;background-color:#d4d4d4}.pouca-ligacao[_ngcontent-%COMP%]{border-radius:10px;background-color:green}.pouca-ligacao[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:green}.media-ligacao[_ngcontent-%COMP%]{border-radius:10px;background-color:#ff0}.media-ligacao[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ff0}.muita-ligacao[_ngcontent-%COMP%]{border-radius:10px;background-color:red}.muita-ligacao[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:red}.forca[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center}.aForcaDeLigacao[_ngcontent-%COMP%]{font-family:"Lucida Sans","Lucida Sans Regular","Lucida Grande","Lucida Sans Unicode",Geneva,Verdana,sans-serif;font-size:.9rem}.forcaRelacao[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column}.forcaRelacao[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#20416a;font-family:"Lucida Sans","Lucida Sans Regular","Lucida Grande","Lucida Sans Unicode",Geneva,Verdana,sans-serif;font-size:1.1rem}.grafico[_ngcontent-%COMP%]{width:50%;display:flex;align-items:center}.grafico[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;justify-content:center}.vl[_ngcontent-%COMP%]{margin-left:2%;border-left:3px solid #20416a;height:100%}.barras[_ngcontent-%COMP%]{margin-left:2%;width:100%}.t[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.like[_ngcontent-%COMP%]{margin-right:2%;border-bottom:15px solid forestgreen}.like[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#228b22}.dislike[_ngcontent-%COMP%]{margin-right:2%;border-bottom:15px solid crimson}.dislike[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#dc143c}.likes[_ngcontent-%COMP%]{display:flex;align-items:center}.dislikes[_ngcontent-%COMP%]{display:flex;align-items:center}']}),n})();function KZ(n,e){1&n&&(p(0,"div",5),p(1,"h2"),S(2,"A pesquisar amigos em comum..."),g(),U(3,"div",6),g())}function eJ(n,e){if(1&n&&(p(0,"option",21),S(1),g()),2&n){const t=e.$implicit;R("value",t.id),T(1),Mp("",t.nome," (",t.email,")")}}function tJ(n,e){if(1&n&&(p(0,"div",7),p(1,"form",8),p(2,"div",9),p(3,"div",10),p(4,"h2"),p(5,"b"),S(6,"Intermedi\xe1rio"),g(),g(),p(7,"select",11),V(8,eJ,2,3,"option",12),g(),g(),p(9,"div",10),p(10,"h2"),p(11,"b"),S(12,"Mensagem (introdu\xe7\xe3o)"),g(),g(),U(13,"input",13),g(),g(),p(14,"div",14),p(15,"div",10),p(16,"h2"),p(17,"b"),S(18,"Mensagem (liga\xe7\xe3o)"),g(),g(),U(19,"input",15),g(),p(20,"div",16),p(21,"h2"),p(22,"b"),S(23,"Tags"),g(),g(),U(24,"input",17),g(),p(25,"div",18),p(26,"h2"),p(27,"b"),S(28,"Forca de Liga\xe7\xe3o"),g(),g(),p(29,"div",19),U(30,"input",20),p(31,"output"),S(32,"50"),g(),g(),g(),g(),g(),g()),2&n){const t=j();T(1),R("formGroup",t.formPedirLigacao),T(7),R("ngForOf",t.intermediarios)}}function nJ(n,e){if(1&n){const t=$e();p(0,"div",22),p(1,"button",23),J("click",function(){return be(t),j().cancelar()}),p(2,"b"),S(3,"Cancelar"),g(),g(),p(4,"button",24),J("click",function(){return be(t),j().enviarPedido()}),p(5,"b"),S(6,"Enviar Pedido"),g(),g(),g()}}let iJ=(()=>{class n{constructor(t,i,r){this.pedidosIntroducaoService=t,this.fb=i,this.ligacoesService=r,this.janelaAberta=new It,this.formPedirLigacao=i.group({intermediario:[""],mensagemIntroducao:[""],mensagemLigacao:[""],tags:[""],forcaLigacao:["50"]}),this.intermediarios=[],this.aPesquisarAmigosEmComum=!0,this.aProcessarEnvio=!1}ngOnInit(){this.ligacoesService.getAmigosEmComumCom(this.utilizador.id).subscribe(t=>{this.intermediarios=t,0==this.intermediarios.length&&(this.cancelar(),vt().fire({position:"bottom-end",icon:"error",title:"N\xe3o \xe9 possivel enviar pedido introdu\xe7\xe3o (n\xe3o tem amigos em comum).",showConfirmButton:!1,timer:1500})),this.aPesquisarAmigosEmComum=!1},t=>{console.error(t),this.cancelar()})}cancelar(){this.janelaAberta.emit(!1)}enviarPedido(){if(!this.aProcessarEnvio){this.aProcessarEnvio=!0;const t=this.formPedirLigacao.controls.intermediario.value,i=this.formPedirLigacao.controls.mensagemIntroducao.value,r=this.formPedirLigacao.controls.mensagemLigacao.value,s=this.formPedirLigacao.controls.forcaLigacao.value,a=this.formPedirLigacao.controls.tags.value.toString().split(",");this.pedidosIntroducaoService.enviarPedido(t,this.utilizador.id,r,i,a,s).subscribe(l=>{vt().fire({position:"bottom-end",icon:"success",title:"O pedido de introdu\xe7\xe3o foi enviado.",showConfirmButton:!1,timer:1500}),this.cancelar(),this.aProcessarEnvio=!1},l=>{console.log(l),vt().fire({position:"bottom-end",icon:"error",title:l.error.message,showConfirmButton:!1,timer:1500}),this.aProcessarEnvio=!1})}}}return n.\u0275fac=function(t){return new(t||n)(G(Ob),G(Js),G(Uo))},n.\u0275cmp=Pt({type:n,selectors:[["app-fazer-pedido-introducao"]],inputs:{utilizador:"utilizador"},outputs:{janelaAberta:"janelaAberta"},decls:8,vars:4,consts:[[1,"pagina"],[1,"topo"],["class","a-procurar",4,"ngIf"],["class","meio",4,"ngIf"],["class","fundo",4,"ngIf"],[1,"a-procurar"],[1,"loader"],[1,"meio"],[3,"formGroup"],[1,"introducao"],[1,"mensagem"],["formControlName","intermediario"],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","mensagemIntroducao"],[1,"ligacao"],["type","text","formControlName","mensagemLigacao"],[1,"tags"],["type","text","formControlName","tags"],[1,"forca-ligacao"],[1,"forca"],["type","range","value","50","min","1","max","100","oninput","this.nextElementSibling.value = this.value","formControlName","forcaLigacao"],[3,"value"],[1,"fundo"],[2,"background-color","firebrick","margin-right","5px",3,"click"],[2,"background-color","forestgreen",3,"click"]],template:function(t,i){1&t&&(p(0,"div",0),p(1,"div",1),p(2,"h2"),S(3),g(),U(4,"hr"),g(),V(5,KZ,4,0,"div",2),V(6,tJ,33,2,"div",3),V(7,nJ,7,0,"div",4),g()),2&t&&(T(3),ur("Enviar pedido de introdu\xe7\xe3o para ",i.utilizador.nome,""),T(2),R("ngIf",i.aPesquisarAmigosEmComum),T(1),R("ngIf",!i.aPesquisarAmigosEmComum),T(1),R("ngIf",!i.aPesquisarAmigosEmComum))},directives:[xn,Xs,qs,ko,Xa,Dr,ds,Jn,fr,kc,Ys,Zs],styles:['.pagina[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:space-between}.topo[_ngcontent-%COMP%]{width:100%;height:15%;display:flex;flex-direction:column;justify-content:space-around}.meio[_ngcontent-%COMP%]{width:100%;height:60%}.fundo[_ngcontent-%COMP%]{width:100%;height:20%;display:flex;align-items:center;justify-content:flex-end}.topo[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:1.2rem}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;align-items:center;justify-content:space-between;height:100%}form[_ngcontent-%COMP%]   .introducao[_ngcontent-%COMP%]{width:80%;display:flex;flex-direction:column;align-items:center;justify-content:space-around;height:37%}.introducao[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:transparent;border:0;width:100%;color:#20416a}.introducao[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:0}form[_ngcontent-%COMP%]   .ligacao[_ngcontent-%COMP%]{width:80%;display:flex;flex-direction:column;align-items:center;justify-content:space-around;height:63%}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.2rem;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif}form[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%]{display:flex;width:90%;align-items:center;justify-content:flex-start;background-color:#fff;border-radius:10px}form[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{background-color:gray;padding:2px 5px;font-size:1.1rem;border-radius:10px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:transparent;border:0;color:#20416a;width:100%;padding:0 5px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:0}form[_ngcontent-%COMP%]   .mensagem[_ngcontent-%COMP%]{display:flex;width:90%;align-items:center;justify-content:flex-start;background-color:#fff;border-radius:10px}form[_ngcontent-%COMP%]   .mensagem[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{background-color:gray;padding:2px 5px;font-size:1rem;border-radius:10px;width:40%}form[_ngcontent-%COMP%]   .forca-ligacao[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%}form[_ngcontent-%COMP%]   .forca[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}form[_ngcontent-%COMP%]   .forca[_ngcontent-%COMP%]   output[_ngcontent-%COMP%]{color:#fff;margin-left:5px}.fundo[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px;border:0;border-radius:10px;cursor:pointer;color:#fff}.fundo[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:.8}.a-procurar[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:space-around;height:100%}.a-procurar[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:1rem}.loader[_ngcontent-%COMP%]{border:16px solid #f3f3f3;border-radius:50%;border-top:16px solid #20416a;width:120px;height:120px;animation:spin 2s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}']}),n})();function rJ(n,e){if(1&n&&(p(0,"p"),S(1),g()),2&n){const t=e.$implicit;T(1),_e(t)}}function oJ(n,e){if(1&n){const t=$e();p(0,"div",20),p(1,"p"),S(2,"Voces s\xe3o amigos."),g(),p(3,"button",21),J("click",function(){return be(t),j(2).editarLigacao()}),p(4,"b"),S(5,"Editar liga\xe7\xe3o"),g(),g(),g()}}function sJ(n,e){if(1&n){const t=$e();p(0,"div",20),p(1,"button",21),J("click",function(){return be(t),j(2).janelaPedidoIntroducao(!0)}),p(2,"b"),S(3,"Enviar pedido de introdu\xe7\xe3o"),g(),g(),p(4,"button",21),J("click",function(){return be(t),j(2).janelaPedidoLigacao(!0)}),p(5,"b"),S(6,"Enviar pedido de liga\xe7\xe3o"),g(),g(),g()}}function aJ(n,e){if(1&n){const t=$e();p(0,"div",20),p(1,"p"),S(2,"Enviou-lhe um pedido de liga\xe7\xe3o."),g(),p(3,"div",22),p(4,"button",23),J("click",function(){return be(t),j(2).recusarPedido()}),p(5,"b"),S(6,"Recusar"),g(),g(),p(7,"button",24),J("click",function(){return be(t),j(2).aceitarPedido()}),p(8,"b"),S(9,"Aceitar"),g(),g(),g(),g()}}function lJ(n,e){1&n&&(p(0,"div",20),p(1,"p"),S(2,"Pedido de liga\xe7\xe3o enviado."),g(),p(3,"p"),S(4,"(Pendente)"),g(),g())}function cJ(n,e){if(1&n){const t=$e();p(0,"p",16),J("click",function(){return be(t),j(2).opcao(5)}),p(1,"b"),S(2,"Liga\xe7\xe3o"),g(),g()}2&n&&R("ngClass",j(2).opcaoStyle[5])}function uJ(n,e){if(1&n&&(p(0,"div",25),U(1,"app-feed-posts",26),g()),2&n){const t=j(2);T(1),R("utilizador",t.utilizador)}}function dJ(n,e){if(1&n&&(p(0,"div",25),U(1,"app-informacao-perfil",27),g()),2&n){const t=j(2);T(1),R("uti",t.utilizador)}}function hJ(n,e){if(1&n&&(p(0,"div",25),U(1,"app-caminhos",28),g()),2&n){const t=j(2);T(1),R("paraUtilizadorID",t.utilizador.id)}}function fJ(n,e){if(1&n&&(p(0,"div",25),U(1,"app-amigos-comum",28),g()),2&n){const t=j(2);T(1),R("paraUtilizadorID",t.utilizador.id)}}function pJ(n,e){if(1&n&&(p(0,"div",25),U(1,"app-ligacao",29),g()),2&n){const t=j(2);T(1),R("ligacao",t.ligacao)}}function gJ(n,e){if(1&n){const t=$e();p(0,"div",30),p(1,"app-fazer-pedido-ligacao",31),J("janelaAberta",function(r){return be(t),j(2).pedidoFeito(r)}),g(),g()}if(2&n){const t=j(2);T(1),R("utilizador",t.utilizador)}}function mJ(n,e){if(1&n){const t=$e();p(0,"div",30),p(1,"app-fazer-pedido-introducao",31),J("janelaAberta",function(r){return be(t),j(2).janelaPedidoIntroducao(r)}),g(),g()}if(2&n){const t=j(2);T(1),R("utilizador",t.utilizador)}}function _J(n,e){if(1&n){const t=$e();p(0,"div",30),p(1,"app-editar-ligacao",32),J("janelaAberta",function(r){return be(t),j(2).janelaEditarLigacao(r)}),g(),g()}if(2&n){const t=j(2);T(1),R("ligacao",t.ligacao)}}function vJ(n,e){if(1&n){const t=$e();p(0,"div",30),p(1,"app-aceitar-pedido-ligacao",33),J("janelaAberta",function(r){return be(t),j(2).respostaAoPedidoLigacao(r)}),g(),g()}if(2&n){const t=j(2);T(1),R("pedido",t.pedido)}}function yJ(n,e){if(1&n){const t=$e();p(0,"div",4),p(1,"div",5),U(2,"img",6),p(3,"div",7),p(4,"h2"),S(5),g(),p(6,"h3"),S(7),g(),g(),U(8,"div",8),p(9,"div",9),p(10,"h2"),S(11,"Tags"),g(),p(12,"div",10),V(13,rJ,2,1,"p",11),g(),g(),p(14,"div",12),p(15,"h2"),S(16,"Estado Emocional"),g(),p(17,"p"),S(18),g(),g(),U(19,"div",8),V(20,oJ,6,0,"div",13),V(21,sJ,7,0,"div",13),V(22,aJ,10,0,"div",13),V(23,lJ,5,0,"div",13),g(),p(24,"div",14),p(25,"div",15),p(26,"p",16),J("click",function(){return be(t),j().opcao(1)}),p(27,"b"),S(28,"Feed"),g(),g(),p(29,"p",16),J("click",function(){return be(t),j().opcao(2)}),p(30,"b"),S(31,"Informa\xe7\xe3o"),g(),g(),p(32,"p",16),J("click",function(){return be(t),j().opcao(3)}),p(33,"b"),S(34,"Caminhos"),g(),g(),p(35,"p",16),J("click",function(){return be(t),j().opcao(4)}),p(36,"b"),S(37,"Amigos em Comum"),g(),g(),V(38,cJ,3,1,"p",17),g(),V(39,uJ,2,1,"div",18),V(40,dJ,2,1,"div",18),V(41,hJ,2,1,"div",18),V(42,fJ,2,1,"div",18),V(43,pJ,2,1,"div",18),g(),V(44,gJ,2,1,"div",19),V(45,mJ,2,1,"div",19),V(46,_J,2,1,"div",19),V(47,vJ,2,1,"div",19),g()}if(2&n){const t=j();T(2),hn("src","../../../assets/",t.utilizador.avatar,"",dn),T(3),_e(t.utilizador.nome),T(2),_e(t.utilizador.email),T(6),R("ngForOf",t.utilizador.tags),T(5),_e(t.utilizador.estadoEmocional),T(2),R("ngIf",t.saoAmigos),T(1),R("ngIf",!t.saoAmigos&&!t.temPedido&&!t.enviouPedido&&t.verificouAmizade&&t.verificouPedidoRecebido&&t.verificouPedidoEnviado),T(1),R("ngIf",t.temPedido),T(1),R("ngIf",t.enviouPedido),T(3),R("ngClass",t.opcaoStyle[1]),T(3),R("ngClass",t.opcaoStyle[2]),T(3),R("ngClass",t.opcaoStyle[3]),T(3),R("ngClass",t.opcaoStyle[4]),T(3),R("ngIf",t.saoAmigos),T(1),R("ngIf",t.opcao_feed&&t.carregouUtilizador),T(1),R("ngIf",t.opcao_informacao),T(1),R("ngIf",t.opcao_caminhos),T(1),R("ngIf",t.opcao_amigos_comum),T(1),R("ngIf",t.opcao_ligacao),T(1),R("ngIf",t.pretendeEnviarPedidoLigacao),T(1),R("ngIf",t.pretendeEnviarPedidoIntroducao),T(1),R("ngIf",t.pretendeEditarLigacao),T(1),R("ngIf",t.pretendeAceitarPedido)}}function bJ(n,e){1&n&&(p(0,"div",34),p(1,"p"),S(2,"A carregar utilizador..."),g(),U(3,"div",35),g())}function wJ(n,e){1&n&&U(0,"img",22)}function CJ(n,e){1&n&&U(0,"img",23)}function MJ(n,e){1&n&&U(0,"img",24)}function EJ(n,e){if(1&n&&(p(0,"p"),S(1),g()),2&n){const t=j().index;T(1),ur("",t+1,".")}}function SJ(n,e){if(1&n){const t=$e();p(0,"div",5),J("click",function(){const o=be(t).$implicit;return j(2).irParaPerfil(o.utilizador.id)}),p(1,"div",15),V(2,wJ,1,0,"img",16),V(3,CJ,1,0,"img",17),V(4,MJ,1,0,"img",18),V(5,EJ,2,1,"p",19),g(),p(6,"div",20),p(7,"h2"),S(8),g(),p(9,"p"),S(10),g(),g(),p(11,"div",21),p(12,"p"),p(13,"b"),S(14),g(),g(),g(),p(15,"div",21),p(16,"p"),p(17,"b"),S(18),g(),g(),g(),g()}if(2&n){const t=e.$implicit,i=e.index;R("ngClass",j(2).classificacaoStyle[i]),T(2),R("ngIf",0==i),T(1),R("ngIf",1==i),T(1),R("ngIf",2==i),T(1),R("ngIf",i>2),T(3),_e(t.utilizador.nome),T(2),_e(t.utilizador.email),T(4),_e(t.dimensao),T(4),_e(t.fortaleza)}}function TJ(n,e){if(1&n&&(p(0,"div",8),p(1,"div",9),p(2,"h2",10),S(3,"Posi\xe7\xe3o"),g(),p(4,"h2",11),S(5,"Utilizador"),g(),p(6,"h2",12),S(7,"Dimens\xe3o"),g(),p(8,"h2",13),S(9,"Fortaleza"),g(),g(),V(10,SJ,19,9,"div",14),g()),2&n){const t=j();T(10),R("ngForOf",t.classificacoes)}}function PJ(n,e){1&n&&(p(0,"div",8),U(1,"app-cloud-tags",25),g()),2&n&&(T(1),R("tipoDeTags",2))}function AJ(n,e){1&n&&(p(0,"div",8),U(1,"app-cloud-tags",25),g()),2&n&&(T(1),R("tipoDeTags",4))}function DJ(n,e){1&n&&(p(0,"div",26),p(1,"p"),S(2,"A calcular..."),g(),U(3,"div",27),g())}const OJ=[{path:"inicio",component:n8},{path:"",component:pA},{path:"autenticacao",component:pA},{path:"pedidos",component:g8},{path:"pesquisar",component:HI},{path:"pesquisar/:pesquisa",component:HI},{path:"ligacoes",component:QY},{path:"perfil",component:bZ},{path:"utilizador/:idUtilizador",component:(()=>{class n{constructor(t,i,r,o,s,a){this.fb=t,this.utilizadoresService=i,this.ligacoesService=r,this.pedidosService=o,this.route=s,this.router=a,this.pretendeEnviarPedidoLigacao=!1,this.pretendeEditarLigacao=!1,this.pretendeAceitarPedido=!1,this.pretendeEnviarPedidoIntroducao=!1,this.saoAmigos=!1,this.temPedido=!1,this.enviouPedido=!1,this.opcao_feed=!0,this.opcao_informacao=!1,this.opcao_caminhos=!1,this.opcao_amigos_comum=!1,this.opcao_ligacao=!1,this.carregouUtilizador=!1,this.verificouAmizade=!1,this.verificouPedidoEnviado=!1,this.verificouPedidoRecebido=!1,this.opcaoStyle=["","opcao-selecionada","opcao-nao-selecionada","opcao-nao-selecionada","opcao-nao-selecionada","opcao-nao-selecionada"]}ngOnInit(){this.carregarInformacoes()}carregarInformacoes(){this.route.params.subscribe(t=>{t.idUtilizador==localStorage.getItem("idUtilizador")?this.router.navigate(["/perfil"]):this.utilizadoresService.getUtilizadorByID(t.idUtilizador).subscribe(i=>{this.utilizador=i,this.carregouUtilizador=!0,this.ligacoesService.getLigacoesDoUtilizadorAutenticado().subscribe(r=>{for(var o of(this.saoAmigos=!1,r))if(o.utilizadorB.id==this.utilizador.id){this.ligacao=o,this.saoAmigos=!0;break}this.verificouAmizade=!0,this.saoAmigos?this.verificouPedidoRecebido=!0:(this.verificouPedidoRecebido=!0,this.pedidosService.getPedidosPendentesDoUtilizadorAutenticado().subscribe(s=>{for(var a of(this.temPedido=!1,s))if(a.deUtilizador.id==this.utilizador.id&&"PENDENTE"==a.estado){this.temPedido=!0,this.pedido=a;break}this.verificouPedidoRecebido=!0})),this.temPedido?this.verificouPedidoEnviado=!0:this.pedidosService.getPedidosEnviadosDoUtilizadorAutenticado().subscribe(s=>{for(var a of s)a.paraUtilizador.id==this.utilizador.id&&"PENDENTE"==a.estado&&(this.enviouPedido=!0);this.verificouPedidoEnviado=!0})})})})}atualizarLigacao(){this.ligacoesService.getLigacoesDoUtilizadorAutenticado().subscribe(t=>{for(var i of t)if(i.utilizadorB.id==this.utilizador.id){this.ligacao=i;break}})}opcao(t){switch(this.opcao_feed&&this.atualizarLigacao(),this.opcao_feed=!1,this.opcao_informacao=!1,this.opcao_caminhos=!1,this.opcao_amigos_comum=!1,this.opcao_ligacao=!1,this.opcaoStyle[1]="opcao-nao-selecionada",this.opcaoStyle[2]="opcao-nao-selecionada",this.opcaoStyle[3]="opcao-nao-selecionada",this.opcaoStyle[4]="opcao-nao-selecionada",this.opcaoStyle[5]="opcao-nao-selecionada",t){case 1:this.opcao_feed=!0,this.opcaoStyle[1]="opcao-selecionada";break;case 2:this.opcao_informacao=!0,this.opcaoStyle[2]="opcao-selecionada";break;case 3:this.opcao_caminhos=!0,this.opcaoStyle[3]="opcao-selecionada";break;case 4:this.opcao_amigos_comum=!0,this.opcaoStyle[4]="opcao-selecionada";break;case 5:this.opcao_ligacao=!0,this.opcaoStyle[5]="opcao-selecionada"}}recusarPedido(){this.pedidosService.recusarPedido(this.pedido.id).subscribe(t=>{this.temPedido=!1,vt().fire({position:"bottom-end",icon:"success",title:"O pedido foi recusado.",showConfirmButton:!1,timer:1500})},t=>{console.log(t)})}aceitarPedido(){this.janelaAceitarLigacao(!0)}editarLigacao(){this.janelaEditarLigacao(!0)}pedidoFeito(t){this.pretendeEnviarPedidoLigacao=!1,t&&(this.saoAmigos=!1,this.temPedido=!1,this.enviouPedido=!0)}respostaAoPedidoLigacao(t){this.pretendeAceitarPedido=!1,t&&(vt().fire({position:"bottom-end",icon:"success",title:"O pedido foi aceite!",showConfirmButton:!1,timer:1500}),this.saoAmigos=!0,this.temPedido=!1,this.enviouPedido=!1)}janelaPedidoLigacao(t){this.pretendeEnviarPedidoLigacao=t,this.pretendeEnviarPedidoLigacao||(this.saoAmigos=!1,this.temPedido=!1,this.enviouPedido=!1,this.carregarInformacoes())}janelaPedidoIntroducao(t){this.pretendeEnviarPedidoIntroducao=t}janelaEditarLigacao(t){this.pretendeEditarLigacao=t,this.pretendeEditarLigacao||this.carregarInformacoes()}janelaAceitarLigacao(t){this.pretendeAceitarPedido=t,this.pretendeAceitarPedido||(this.saoAmigos=!1,this.temPedido=!1,this.enviouPedido=!1,this.carregarInformacoes())}}return n.\u0275fac=function(t){return new(t||n)(G(Js),G(Bo),G(Uo),G(bh),G(Ks),G(Bt))},n.\u0275cmp=Pt({type:n,selectors:[["app-utilizador"]],decls:5,vars:2,consts:[[1,"pagina"],[1,"pagina-topo"],["class","restante-pagina",4,"ngIf"],["class","aProcurar",4,"ngIf"],[1,"restante-pagina"],[1,"topo"],[1,"avatar",3,"src"],[1,"nome-e-email"],[1,"vl"],[1,"tags"],[1,"t"],[4,"ngFor","ngForOf"],[1,"estado-emocional"],["class","amigos",4,"ngIf"],[1,"baixo"],[1,"esquerda"],[3,"ngClass","click"],[3,"ngClass","click",4,"ngIf"],["class","direita",4,"ngIf"],["class","popup",4,"ngIf"],[1,"amigos"],[1,"botao-topo",3,"click"],[1,"aceitar-recusar"],[2,"background-color","firebrick",3,"click"],[2,"background-color","forestgreen","margin-left","5px",3,"click"],[1,"direita"],[3,"utilizador"],[3,"uti"],[3,"paraUtilizadorID"],[3,"ligacao"],[1,"popup"],[3,"utilizador","janelaAberta"],[3,"ligacao","janelaAberta"],[3,"pedido","janelaAberta"],[1,"aProcurar"],[1,"loader"]],template:function(t,i){1&t&&(p(0,"div",0),p(1,"div",1),U(2,"app-menu-topo-utilizador"),g(),V(3,yJ,48,23,"div",2),V(4,bJ,4,0,"div",3),g()),2&t&&(T(3),R("ngIf",i.carregouUtilizador),T(1),R("ngIf",!i.carregouUtilizador))},directives:[el,xn,Jn,Wa,Db,VI,zZ,GZ,QZ,gA,iJ,vA,Ib],styles:['*[_ngcontent-%COMP%]{padding:0;margin:0;box-sizing:border-box}.pagina[_ngcontent-%COMP%]{height:100vh;width:100%;background:rgb(223,223,223);display:flex;flex-direction:column;align-items:center;justify-content:flex-start}.pagina-topo[_ngcontent-%COMP%]{height:7%;width:100%;background-image:url(background.b8b8e9811b070779.jpg);background-size:cover}.restante-pagina[_ngcontent-%COMP%]{width:100%;height:100%;max-height:93%;display:flex;flex-direction:column;justify-content:space-between;padding:40px 100px}.topo[_ngcontent-%COMP%]{background-color:#fff;width:100%;border-radius:10px;height:19%;display:flex;align-items:center;justify-content:space-around}.baixo[_ngcontent-%COMP%]{border-radius:10px;display:flex;align-items:center;justify-content:space-between;width:100%;height:78%}.baixo[_ngcontent-%COMP%]   .esquerda[_ngcontent-%COMP%]{border-radius:10px;height:100%;width:25%}.baixo[_ngcontent-%COMP%]   .direita[_ngcontent-%COMP%]{border-radius:10px;width:73%;height:100%}.avatar[_ngcontent-%COMP%]{width:8%}.nome-e-email[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:21%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.nome-e-email[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif}.nome-e-email[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.9rem}.tags[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:21%}.tags[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:1.1rem;margin-bottom:2px;color:#20416a}.tags[_ngcontent-%COMP%]   .t[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.tags[_ngcontent-%COMP%]   .t[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background-color:#20416a;padding:4px;margin-right:2px;border-radius:10px;color:#fff}.estado-emocional[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:21%}.estado-emocional[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:1.1rem;margin-bottom:2px;color:#20416a}.estado-emocional[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem}.amigos[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:21%}.botao-topo[_ngcontent-%COMP%]{background-image:url(background.b8b8e9811b070779.jpg);background-size:cover;color:#fff;border:0;border-radius:10px;cursor:pointer;margin-top:5px;width:100%}.botao-topo[_ngcontent-%COMP%]:hover{background-position:center}.amigos[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px;color:#fff;border:0;border-radius:10px;cursor:pointer;margin-top:5px}.amigos[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:.8}.amigos[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#20416a}.amigos[_ngcontent-%COMP%]   .aceitar-recusar[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center}.popup[_ngcontent-%COMP%]{position:absolute;background-image:url(background.b8b8e9811b070779.jpg);background-position:center;background-size:cover;padding:10px;border-radius:10px;width:50%;height:50%;margin:0 20% 10%}.vl[_ngcontent-%COMP%]{border-left:3px solid #20416a;height:70%}.opcao-selecionada[_ngcontent-%COMP%]{width:100%;padding:10px;text-align:center;margin-bottom:2%;border-radius:10px;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;background-image:url(background.b8b8e9811b070779.jpg);color:#fff;background-size:cover;cursor:pointer}.opcao-nao-selecionada[_ngcontent-%COMP%]{width:100%;padding:10px;text-align:center;margin-bottom:2%;border-radius:10px;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;background-color:#fff;color:#20416a;border:2px solid #20416a;background-size:cover;cursor:pointer}.esquerda[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{background-image:url(background.b8b8e9811b070779.jpg);background-position:center;color:#fff}.seccao[_ngcontent-%COMP%]{width:99%;padding:10px;margin-bottom:4px;display:flex;flex-direction:column}.seccao[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#20416a;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:1.2rem}.subseccao[_ngcontent-%COMP%]{padding:5px 0;display:flex;align-items:center;width:70%;border-bottom:2px solid black;margin:auto}.subseccao[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:.8rem;margin-right:4px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:20px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#20416a;border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#6b6b6b}.aProcurar[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:100%}.loader[_ngcontent-%COMP%]{margin-top:2%;border:16px solid #f3f3f3;border-radius:50%;border-top:16px solid #20416a;width:60px;height:60px;animation:spin 2s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}']}),n})()},{path:"rpgd",component:fA},{path:"classificacao",component:(()=>{class n{constructor(t,i){this.classificacaoService=t,this.router=i,this.opcaoStyle=["","opcao-selecionada","opcao-nao-selecionada","opcao-nao-selecionada","opcao-nao-selecionada"],this.classificacaoStyle=[],this.opcaoDimensao=!0,this.opcaoFortaleza=!1,this.opcaoCloudTagsUtilizadores=!1,this.opcaoCloudTagsLigacoes=!1,this.classificacoes=[],this.aCarregar=!0}ngOnInit(){this.classificacaoService.getClassificacao().subscribe(t=>{this.classificacoes=t,this.ordenar(),this.aCarregar=!1})}ordenar(){this.classificacoes=this.opcaoDimensao?this.classificacaoService.ordenarPorDimensao(this.classificacoes):this.classificacaoService.ordenarPorFortaleza(this.classificacoes),this.verificarAutenticadoExiste()}verificarAutenticadoExiste(){var t=0;const i=localStorage.getItem("idUtilizador");this.classificacoes.forEach(r=>{this.classificacaoStyle[t]=r.utilizador.id===i?"utilizador-autenticado":"utilizador",t++})}opcao(t){switch(this.opcaoDimensao=!1,this.opcaoFortaleza=!1,this.opcaoCloudTagsUtilizadores=!1,this.opcaoCloudTagsLigacoes=!1,this.opcaoStyle[1]="opcao-nao-selecionada",this.opcaoStyle[2]="opcao-nao-selecionada",this.opcaoStyle[3]="opcao-nao-selecionada",this.opcaoStyle[4]="opcao-nao-selecionada",t){case 1:this.opcaoDimensao=!0,this.opcaoStyle[1]="opcao-selecionada",this.ordenar();break;case 2:this.opcaoFortaleza=!0,this.opcaoStyle[2]="opcao-selecionada",this.ordenar();break;case 3:this.opcaoCloudTagsUtilizadores=!0,this.opcaoStyle[3]="opcao-selecionada";break;case 4:this.opcaoCloudTagsLigacoes=!0,this.opcaoStyle[4]="opcao-selecionada"}}irParaPerfil(t){this.router.navigate(["/utilizador/"+t])}}return n.\u0275fac=function(t){return new(t||n)(G(_A),G(Bt))},n.\u0275cmp=Pt({type:n,selectors:[["app-classificacao"]],decls:22,vars:8,consts:[[1,"pagina"],[1,"topo"],[1,"restante-pagina"],[1,"esquerda"],["src","../../../assets/leaderboard.png","alt",""],[3,"ngClass","click"],["class","direita",4,"ngIf"],["class","aCarregar",4,"ngIf"],[1,"direita"],[1,"cabecalho"],[1,"p"],[1,"u"],[1,"d"],[1,"f"],[3,"ngClass","click",4,"ngFor","ngForOf"],[1,"posicao"],["src","../../../assets/primeiro_lugar.png",4,"ngIf"],["src","../../../assets/segundo_lugar.png",4,"ngIf"],["src","../../../assets/terceiro_lugar.png",4,"ngIf"],[4,"ngIf"],[1,"info-pessoal"],[1,"pontos"],["src","../../../assets/primeiro_lugar.png"],["src","../../../assets/segundo_lugar.png"],["src","../../../assets/terceiro_lugar.png"],[3,"tipoDeTags"],[1,"aCarregar"],[1,"loader"]],template:function(t,i){1&t&&(p(0,"div",0),p(1,"div",1),U(2,"app-menu-topo-utilizador"),g(),p(3,"div",2),p(4,"div",3),U(5,"img",4),p(6,"p",5),J("click",function(){return i.opcao(1)}),p(7,"b"),S(8,"Dimens\xe3o"),g(),g(),p(9,"p",5),J("click",function(){return i.opcao(2)}),p(10,"b"),S(11,"Fortaleza"),g(),g(),p(12,"p",5),J("click",function(){return i.opcao(3)}),p(13,"b"),S(14,"Cloud de Tags (utilizadores)"),g(),g(),p(15,"p",5),J("click",function(){return i.opcao(4)}),p(16,"b"),S(17,"Cloud de Tags (liga\xe7\xf5es)"),g(),g(),g(),V(18,TJ,11,1,"div",6),V(19,PJ,2,1,"div",6),V(20,AJ,2,1,"div",6),V(21,DJ,4,0,"div",7),g(),g()),2&t&&(T(6),R("ngClass",i.opcaoStyle[1]),T(3),R("ngClass",i.opcaoStyle[2]),T(3),R("ngClass",i.opcaoStyle[3]),T(3),R("ngClass",i.opcaoStyle[4]),T(3),R("ngIf",!i.aCarregar&&(i.opcaoDimensao||i.opcaoFortaleza)),T(1),R("ngIf",i.opcaoCloudTagsUtilizadores),T(1),R("ngIf",i.opcaoCloudTagsLigacoes),T(1),R("ngIf",i.aCarregar&&(i.opcaoDimensao||i.opcaoFortaleza)))},directives:[el,Wa,xn,Jn,xw],styles:['*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}.pagina[_ngcontent-%COMP%]{height:100vh;width:100%;background:rgb(223,223,223);display:flex;flex-direction:column;align-items:center;justify-content:flex-start}.topo[_ngcontent-%COMP%]{height:7%;width:100%;background-image:url(background.b8b8e9811b070779.jpg);background-size:cover}.restante-pagina[_ngcontent-%COMP%]{width:100%;height:100%;max-height:93%;display:flex;justify-content:space-between;padding:40px 100px}.esquerda[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;height:100%;width:22%;border-radius:10px}.direita[_ngcontent-%COMP%]{height:100%;width:76%}.aCarregar[_ngcontent-%COMP%]{height:100%;width:76%;display:flex;flex-direction:column;align-items:center;justify-content:center}.opcao-selecionada[_ngcontent-%COMP%]{width:100%;text-align:center;padding:10px;border-radius:10px;margin-bottom:2%;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;cursor:pointer;background-image:url(background.b8b8e9811b070779.jpg);background-size:cover;color:#fff}.opcao-nao-selecionada[_ngcontent-%COMP%]{width:100%;padding:10px;text-align:center;margin-bottom:2%;border-radius:10px;font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;background-color:#fff;color:#20416a;border:2px solid #20416a;background-size:cover;cursor:pointer}.esquerda[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{background-image:url(background.b8b8e9811b070779.jpg);background-position:center;color:#fff}.esquerda[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;background-color:#20416a;border-radius:10px;margin-bottom:20px}.cabecalho[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-around;margin-bottom:10px;background-color:#20416a;padding:10px;border-radius:10px}.cabecalho[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;font-size:1.2rem;color:#fff;text-align:center}.p[_ngcontent-%COMP%]{width:10%}.u[_ngcontent-%COMP%]{width:23%}.d[_ngcontent-%COMP%]{width:20%}.f[_ngcontent-%COMP%]{width:20%}.utilizador[_ngcontent-%COMP%]{width:99%;display:flex;align-items:center;justify-content:space-around;padding:5px 10px 5px 0;cursor:pointer;background-color:#fff;border-radius:10px;margin-top:5px}.utilizador[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px}.utilizador-autenticado[_ngcontent-%COMP%]{width:99%;display:flex;align-items:center;justify-content:space-around;padding:5px 10px 5px 0;cursor:pointer;background-color:#a1a1a1;border-radius:10px;margin-top:5px}.utilizador-autenticado[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px}.posicao[_ngcontent-%COMP%]{height:100%;width:10%;display:flex;align-items:center;justify-content:center}.info-pessoal[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:23%;max-width:23%}.info-pessoal[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1rem;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.info-pessoal[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8rem;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;max-width:100%}.pontos[_ngcontent-%COMP%]{width:20%;align-items:center;justify-content:center;display:flex}[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:20px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#20416a;border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#6b6b6b}.loader[_ngcontent-%COMP%]{margin-top:2%;border:16px solid #f3f3f3;border-radius:50%;border-top:16px solid #20416a;width:60px;height:60px;animation:spin 2s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}']}),n})()}];let IJ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ci({type:n}),n.\u0275inj=pi({imports:[[cA.forRoot(OJ)],cA]}),n})(),RJ=(()=>{class n{constructor(){this.title="SocialNetwork - The Game"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Pt({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,i){1&t&&U(0,"router-outlet")},directives:[bb],styles:[""]}),n})(),LJ=(()=>{class n{intercept(t,i){const r=localStorage.getItem("token");if(localStorage.getItem("expiracao"),!r)return i.handle(t);const s=t.clone({headers:t.headers.set("Authorization",`Bearer ${r}`)});return i.handle(s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=We({token:n,factory:n.\u0275fac}),n})(),kJ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ci({type:n,bootstrap:[RJ]}),n.\u0275inj=pi({providers:[{provide:ky,useClass:LJ,multi:!0}],imports:[[QU,v5,s2,IJ,MY,wV]]}),n})();aT=!1,ZU().bootstrapModule(kJ).catch(n=>console.error(n))}},Ii=>{Ii(Ii.s=130)}]);